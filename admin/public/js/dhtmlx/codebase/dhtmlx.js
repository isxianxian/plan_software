dhtmlx=function(b){for(var d in b)dhtmlx[d]=b[d];return dhtmlx};dhtmlx.defer=function(b,d){setTimeout(function(){b()},d)};dhtmlx.concat=function(b,d){for(var e=","+b.join(",")+",",f=[],g=0;g<d.length;g++)-1==e.indexOf(","+d[g]+",")&&f.push(d[g]);return b.concat(f)};
dhtmlx.extend_api=function(b,d,e){var f=window[b];f&&(window[b]=function(b){if(b&&"object"==typeof b&&!b.tagName){var e=f.apply(this,d._init?d._init(b):arguments),l;for(l in dhtmlx)if(d[l])this[d[l]](dhtmlx[l]);for(l in b)if(d[l])this[d[l]](b[l]);else 0==l.indexOf("on")&&this.attachEvent(l,b[l])}else e=f.apply(this,arguments);d._patch&&d._patch(this);return e||this},window[b].prototype=f.prototype,e&&dhtmlXHeir(window[b].prototype,e))};
dhtmlx.simpleRandomId=function(){var b=new Date,d=b.getFullYear()+"",d=d+b.getMonth(),d=d+b.getDate(),d=d+b.getHours(),d=d+b.getMinutes(),d=d+b.getSeconds();return d+=b.getMilliseconds()};dhtmlx.progressOn=function(){dhtmlx._progressControlGlobal(!0)};dhtmlx.progressOff=function(){dhtmlx._progressControlGlobal(!1)};
dhtmlx._hideTreeWin=function(b){b=b||event;b=b.target||b.srcElement;if(!b||!("DIV"==b.tagName&&"dhx_carcass_resmove"==b.className))for(var d in dhtmlx.treeWin)dhtmlx.treeIpt[d]&&b!=dhtmlx.treeIpt[d]&&dhtmlx.treeWin[d]&&dhtmlx.treeWin[d].hide&&dhtmlx.treeWin[d].hide()};
dhtmlx._progressControlGlobal=function(b){if(null==dhtmlx._progressCover){var d=document.createElement("DIV");d.className="dhtmlxLayoutPolyProgressGlobal_"+(dhtmlx.skin||"dhx_skyblue");d.style.zIndex=9999;document.body.appendChild(d);var e=document.createElement("DIV");e.className="dhtmlxLayoutPolyProgressBGIMGGlobal_"+(dhtmlx.skin||"dhx_skyblue");e.style.zIndex=9999;document.body.appendChild(e);dhtmlx._progressCover=[d,e]}dhtmlx._progressCover[0].style.display=!0==b?"":"none";dhtmlx._progressCover[1].style.display=
dhtmlx._progressCover[0].style.display};dhtmlx._clearTreeWin=function(b){for(var d in dhtmlx.treeWin)dhtmlx.treeWin[d]=null,dhtmlx.treeIpt[d]=null};
dhtmlx.contains=document.documentElement.contains?function(b,d){var e=9===b.nodeType?b.documentElement:b,f=d&&d.parentNode;return b===f||!(!f||!(1===f.nodeType&&e.contains&&e.contains(f)))}:document.documentElement.compareDocumentPosition?function(b,d){return d&&!!(b.compareDocumentPosition(d)&16)}:function(b,d){for(;d=d.parentNode;)if(d===b)return!0;return!1};dhtmlx.getWindow=function(b){return jQuery.isWindow(b)?b:9===b.nodeType?b.defaultView||b.parentWindow:!1};
dhtmlx.offset=function(b){var d,e,f,g,h={top:0,left:0};if(f=b&&b.ownerDocument){if((e=f.body)===b)return h=b.offsetTop,d=b.offsetLeft,1!==document.getElementsByTagName("body")[0].offsetTop&&(h+=parseFloat(b.style.marginTop.replace("px",""))||0,d+=parseFloat(b.style.marginLeft.replace("px",""))||0),{top:h,left:d};d=f.documentElement;if(!dhtmlx.contains(d,b))return h;"undefined"!==typeof b.getBoundingClientRect&&(h=b.getBoundingClientRect());f=dhtmlx.getWindow(f);b=d.clientTop||e.clientTop||0;e=d.clientLeft||
e.clientLeft||0;g=f.pageYOffset||d.scrollTop;d=f.pageXOffset||d.scrollLeft;return{top:h.top+g-b,left:h.left+d-e}}};dhtmlx.rroot=/^(?:body|html)$/i;dhtmlx.getOffsetLeft=function(b){for(var d=0;null!=b&&b!=document.body;)d+=b.offsetLeft,b=b.offsetParent;return d};dhtmlx.getOffsetTop=function(b){for(var d=0;null!=b&&b!=document.body;)d+=b.offsetTop,b=b.offsetParent;return d};
dhtmlx.position=function(b){if(b){var d=dhtmlx.offsetParent(b),e=dhtmlx.offset(b),f=dhtmlx.rroot.test(d.nodeName)?{top:0,left:0}:dhtmlx.offset(d);e.top-=parseFloat(b.style.marginTop.replace("px",""))||0;e.left-=parseFloat(b.style.marginLeft.replace("px",""))||0;f.top+=parseFloat(dhtmlx.css(d,"borderTopWidth"))||0;f.left+=parseFloat(dhtmlx.css(d,"borderLeftWidth"))||0;return{top:e.top-f.top,left:e.left-f.left}}};
dhtmlx.offsetParent=function(b){for(b=b.offsetParent||document.body;b&&!dhtmlx.rroot.test(b.nodeName)&&"static"===b.style.position;)b=b.offsetParent;return b||document.body};dhtmlx.css=function(b,d){var e;if(window.getComputedStyle)return e=window.getComputedStyle(b,null),e[d]?e[d].replace("px",""):e[d];if(document.documentElement.currentStyle)return(e=b.currentStyle&&b.currentStyle[d])?e.replace("px",""):""};function getAbsoluteLeft(b){return getOffset(b).left}
function getAbsoluteTop(b){return getOffset(b).top}function getOffsetSum(b){for(var d=0,e=0;b;)d+=parseInt(b.offsetTop),e+=parseInt(b.offsetLeft),b=b.offsetParent;return{top:d,left:e}}
function getOffsetRect(b){b=b.getBoundingClientRect();var d=document.body,e=document.documentElement,f=b.left+(window.pageXOffset||e.scrollLeft||d.scrollLeft)-(e.clientLeft||d.clientLeft||0);return{top:Math.round(b.top+(window.pageYOffset||e.scrollTop||d.scrollTop)-(e.clientTop||d.clientTop||0)),left:Math.round(f)}}function getOffset(b){return b.getBoundingClientRect?getOffsetRect(b):getOffsetSum(b)}
function dhx_getPosition(b,d){if(!d){var e=getOffset(b);return[e.left,e.top]}d=d||document.body;for(var e=b,f=0,g=0;e&&e!=d;)f+=e.offsetLeft-e.scrollLeft,g+=e.offsetTop-e.scrollTop,e=e.offsetParent;d==document.body&&(_isIE?(g+=document.body.offsetTop||document.documentElement.offsetTop,f+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(f+=document.body.offsetLeft,g+=document.body.offsetTop));return[f,g]}
function dhx_fixPosition(b,d,e){var f=dhx_getPosition(b,document.body);f[0]+=5==document.documentMode?0:-1;f[1]+=b.clientHeight+(_isIE?5==document.documentMode?1:0:3);var g=isNaN(d)?d.clientWidth:d;d=isNaN(d)?d.clientHeight:e;f[0]+g>document.body.scrollWidth&&(f[0]-=g,f[0]+=b.clientWidth,f[0]=0>f[0]?0:f[0]);f[1]+d>document.body.scrollHeight&&(f[1]-=d,f[1]=0>f[1]?0:f[1]);return f}
dhtmlx._detachEvent=function(b,d,e){if(b&&d&&e){var f=0==d.indexOf("on"),g=f?d.substr(2,d.length):d,f=f?d:"on"+d;b.removeEventListener?b.removeEventListener(g,e,!1):b.detachEvent?b.detachEvent(-1<d.indexOf(":")?d:f,e):b.removeAttribute(f)}};
dhtmlxAjax={get:function(b,d){var e=new dtmlXMLLoaderObject(!0);e.async=3>arguments.length;e.waitCall=d;e.loadXML(b);return e},post:function(b,d,e){var f=new dtmlXMLLoaderObject(!0);f.async=4>arguments.length;f.waitCall=e;f.loadXML(b,!0,d);return f},getSync:function(b){return this.get(b,null,!0)},postSync:function(b,d){return this.post(b,d,null,!0)}};
function dtmlXMLLoaderObject(b,d,e,f){this.xmlDoc="";this.async="undefined"!=typeof e?e:!0;this.onloadAction=b||null;this.mainObject=d||null;this.waitCall=null;this.rSeed=f||!1;return this}
dtmlXMLLoaderObject.prototype.waitLoadFunction=function(b){var d=!0;return this.check=function(){if(b&&null!=b.onloadAction&&(!b.xmlDoc.readyState||4==b.xmlDoc.readyState)&&d){d=!1;if("function"==typeof b.onloadAction)b.onloadAction(b.mainObject,null,null,null,b);b.waitCall&&(b.waitCall.call(this,b),b.waitCall=null)}}};
dtmlXMLLoaderObject.prototype.getXMLTopNode=function(b,d){if(this.xmlDoc.responseXML){var e=this.xmlDoc.responseXML.getElementsByTagName(b);0==e.length&&-1!=b.indexOf(":")&&(e=this.xmlDoc.responseXML.getElementsByTagName(b.split(":")[1]));e=e[0]}else e=this.xmlDoc.documentElement;if(e)return this._retry=!1,e;if(_isIE&&!this._retry)return e=this.xmlDoc.responseText,d=this.xmlDoc,this._retry=!0,this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=!1,this.xmlDoc.loadXML(e),this.getXMLTopNode(b,
d);dhtmlxError.throwError("LoadXML","Incorrect XML",[d||this.xmlDoc,this.mainObject]);return document.createElement("DIV")};
dtmlXMLLoaderObject.prototype.loadXMLString=function(b){_isIE?(this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(b)):this.xmlDoc=(new DOMParser).parseFromString(b,"text/xml");if(this.onloadAction)this.onloadAction(this.mainObject,null,null,null,this);this.waitCall&&(this.waitCall(),this.waitCall=null)};
dtmlXMLLoaderObject.prototype.loadJSON=function(b,d,e,f){this.rSeed&&(b+=(-1!=b.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf());this.filePath=b;this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this));this.xmlDoc.open(d?"POST":"GET",b,this.async);f?_isIE&&this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"):this.xmlDoc.setRequestHeader("Content-type",
"application/json");this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(e);this.async||(new this.waitLoadFunction(this))()};
dtmlXMLLoaderObject.prototype.loadXML=function(b,d,e,f){this.rSeed&&(b+=(-1!=b.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf());this.filePath=b;this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this));this.xmlDoc.open(d?"POST":"GET",b,this.async);f?(_isIE&&this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type",
"text/xml")):d?this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"):this.xmlDoc.setRequestHeader("Content-type","text/xml");this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(e);this.async||(new this.waitLoadFunction(this))()};
dtmlXMLLoaderObject.prototype.destructor=function(){return this.setXSLParamValue=this.getXMLTopNode=this.xmlNodeToJSON=this.doSerialization=this.loadXMLString=this.loadXML=this.doXSLTransToString=this.doXSLTransToObject=this.doXPathOpera=this.doXPath=this.xmlDoc=this.mainObject=this.onloadAction=this.filePath=this.rSeed=this.async=this._retry=this._getAllNamedChilds=this._filterXPath=null};
dtmlXMLLoaderObject.prototype.add_xml_attrs=function(b,d){var e=this._xml_attrs(d),f;for(f in e)"undefined"==typeof b[f]&&(b[f]=e[f])};dtmlXMLLoaderObject.prototype._xml_attrs=function(b){var d={};if(b.attributes.length)for(var e=0;e<b.attributes.length;e++)d[b.attributes[e].name]=b.attributes[e].value;return d};
dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(b){for(var d={},e=0;e<b.attributes.length;e++)d[b.attributes[e].name]=b.attributes[e].value;d._tagvalue=b.firstChild?b.firstChild.nodeValue:"";for(e=0;e<b.childNodes.length;e++){var f=b.childNodes[e].tagName;f&&(d[f]||(d[f]=[]),d[f].push(this.xmlNodeToJSON(b.childNodes[e])))}return d};function callerFunction(b,d){return this.handler=function(e){e||(e=window.event);b(e,d);return!0}}
function convertStringToBoolean(b){"string"==typeof b&&(b=b.toLowerCase());switch(b){case "1":case "true":case "yes":case "y":case 1:case !0:return!0;default:return!1}}function getUrlSymbol(b){return-1!=b.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop)return window.dhtmlDragAndDrop;this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0;this.tempDOMM=this.tempDOMU=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}
dhtmlDragAndDropObject.prototype.removeDraggableItem=function(b){b.onmousedown=null;b.dragStarter=null;b.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(b,d){b.onmousedown=this.preCreateDragCopy;b.dragStarter=d;this.addDragLanding(b,d)};dhtmlDragAndDropObject.prototype.addDragLanding=function(b,d){b.dragLanding=d};
dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(b){if(!((b||window.event)&&2==(b||event).button)){if(window.dhtmlDragAndDrop.waitDrag)return window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1;window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(b);window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=
document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=(new Date).valueOf();b&&b.preventDefault&&b.preventDefault();return!1}};
dhtmlDragAndDropObject.prototype.callDrag=function(b){b||(b=window.event);dragger=window.dhtmlDragAndDrop;if(!(100>(new Date).valueOf()-dragger.downtime)){if(!dragger.dragNode)if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,b);if(!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=
0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else return dragger.stopDrag(b,!0);if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var d=dragger.gldragNode;dragger.gldragNode.old&&(d=dragger.gldragNode.old);d.parentNode.removeChild(d);var e=dragger.dragNode.pWindow;d.pWindow&&d.pWindow.dhtmlDragAndDrop.lastLanding&&d.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(d.pWindow.dhtmlDragAndDrop.lastLanding);_isIE?(d=document.createElement("Div"),d.innerHTML=
dragger.dragNode.outerHTML,dragger.dragNode=d.childNodes[0]):dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);e.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=b.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=b.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||
document.documentElement.scrollTop)+"px";dragger.checkLanding(b.srcElement?b.srcElement:b.target,b)}};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(b){if(window.name){for(var d=parent.frames[window.name].frameElement.offsetParent,e=0,f=0;d;)e+=d.offsetLeft,f+=d.offsetTop,d=d.offsetParent;parent.dhtmlDragAndDrop&&(d=parent.dhtmlDragAndDrop.calculateFramePosition(1),e+=1*d.split("_")[0],f+=1*d.split("_")[1]);if(b)return e+"_"+f;this.fx=e;this.fy=f}return"0_0"};
dhtmlDragAndDropObject.prototype.checkLanding=function(b,d){b&&b.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=b,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,d.clientX,d.clientY,d),this.lastLanding_scr=_isIE?d.srcElement:d.target):b&&"BODY"!=b.tagName?this.checkLanding(b.parentNode,d):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,d.clientX,d.clientY,d),this.lastLanding=
0,this._onNotFound&&this._onNotFound())};
dhtmlDragAndDropObject.prototype.stopDrag=function(b,d){dragger=window.dhtmlDragAndDrop;if(!d){dragger.stopFrameRoute();var e=dragger.lastLanding;dragger.lastLanding=null;e&&e.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,e,_isIE?event.srcElement:b.target)}dragger.lastLanding=null;dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=
0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};
dhtmlDragAndDropObject.prototype.stopFrameRoute=function(b){b&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var d=0;d<window.frames.length;d++)try{window.frames[d]!=b&&window.frames[d].dhtmlDragAndDrop&&window.frames[d].dhtmlDragAndDrop.stopFrameRoute(window)}catch(e){}try{parent.dhtmlDragAndDrop&&(parent!=window&&parent!=b)&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(f){}};
dhtmlDragAndDropObject.prototype.initFrameRoute=function(b,d){b&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=b.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=b.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=b.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=b.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&d&&(!_isFF||1.8>_FFrv)&&window.dhtmlDragAndDrop.calculateFramePosition());
try{parent.dhtmlDragAndDrop&&(parent!=window&&parent!=b)&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(e){}for(var f=0;f<window.frames.length;f++)try{window.frames[f]!=b&&window.frames[f].dhtmlDragAndDrop&&window.frames[f].dhtmlDragAndDrop.initFrameRoute(window,!b||d?1:0)}catch(g){}};_OperaRv=_KHTMLrv=_FFrv=_isChrome=_isMacOS=_isKHTML=_isOpera=_IE10=_isIE=_isFF=!1;-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0);
-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&(_isChrome=!0);
if(-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror"))_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),525<_KHTMLrv?(_isFF=!0,_FFrv=1.9):_isKHTML=!0;else if(-1!=navigator.userAgent.indexOf("Opera"))_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3));else if(-1!=navigator.appName.indexOf("Microsoft")){if(_isIE=!0,-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=
document.compatMode&&(_isIE=8),-1!=navigator.appVersion.indexOf("MSIE 9.0")&&"BackCompat"!=document.compatMode&&(_isIE=8),(-1!=navigator.appVersion.indexOf("MSIE 10.0")||-1!=navigator.appVersion.indexOf("MSIE 11.0"))&&"BackCompat"!=document.compatMode)_IE10=!0,_isIE=8}else"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=11:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1]));
dtmlXMLLoaderObject.prototype.doXPath=function(b,d,e,f){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(b,d);if(_isIE)return d||(d=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),d||dhtmlxError.throwError("LoadXML","Incorrect XML",[d||this.xmlDoc,this.mainObject]),null!=e&&d.setProperty("SelectionNamespaces","xmlns:xsl='"+e+"'"),"single"==f?d.selectSingleNode(b):d.selectNodes(b)||[];var g=d;d||(d=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML);d||dhtmlxError.throwError("LoadXML",
"Incorrect XML",[d||this.xmlDoc,this.mainObject]);d.nodeName&&-1!=d.nodeName.indexOf("document")?g=d:(g=d,d=d.ownerDocument);var h=XPathResult.ANY_TYPE;"single"==f&&(h=XPathResult.FIRST_ORDERED_NODE_TYPE);f=[];b=d.evaluate(b,g,function(b){return e},h,null);if(h==XPathResult.FIRST_ORDERED_NODE_TYPE)return b.singleNodeValue;for(h=b.iterateNext();h;)f[f.length]=h,h=b.iterateNext();return f};function _dhtmlxError(b,d,e){this.catches||(this.catches=[]);return this}
_dhtmlxError.prototype.catchError=function(b,d){this.catches[b]=d};_dhtmlxError.prototype.throwError=function(b,d,e){if(this.catches[b])return this.catches[b](b,d,e);if(this.catches.ALL)return this.catches.ALL(b,d,e);alert("Error type: "+b+"\nDescription: "+d);return null};window.dhtmlxError=new _dhtmlxError;
dtmlXMLLoaderObject.prototype.doXPathOpera=function(b,d){var e=b.replace(/[\/]+/gi,"/").split("/"),f=null,g=1;if(!e.length)return[];if("."==e[0])f=[d];else if(""==e[0])f=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(e[g].replace(/\[[^\]]*\]/g,"")),g++;else return[];for(g;g<e.length;g++)f=this._getAllNamedChilds(f,e[g]);-1!=e[g-1].indexOf("[")&&(f=this._filterXPath(f,e[g-1]));return f};
dtmlXMLLoaderObject.prototype._filterXPath=function(b,d){var e=[];d=d.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,"");for(var f=0;f<b.length;f++)b[f].getAttribute(d)&&(e[e.length]=b[f]);return e};
dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(b,d){var e=[];_isKHTML&&(d=d.toUpperCase());for(var f=0;f<b.length;f++)for(var g=0;g<b[f].childNodes.length;g++)_isKHTML?b[f].childNodes[g].tagName&&b[f].childNodes[g].tagName.toUpperCase()==d&&(e[e.length]=b[f].childNodes[g]):b[f].childNodes[g].tagName==d&&(e[e.length]=b[f].childNodes[g]);return e};function dhtmlXHeir(b,d){for(var e in d)"function"==typeof d[e]&&(b[e]=d[e]);return b}
function dhtmlxEvent(b,d,e){b.addEventListener?b.addEventListener(d,e,!1):b.attachEvent&&b.attachEvent("on"+d,e)}function removeDhtmlxEvent(b,d){b.detachEvent&&b.detachEvent("onclick",d);b.removeEventListener&&b.removeEventListener("click",d,!1)}dtmlXMLLoaderObject.prototype.xslDoc=null;
dtmlXMLLoaderObject.prototype.setXSLParamValue=function(b,d,e){e||(e=this.xslDoc);e.responseXML&&(e=e.responseXML);b=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+b+"']",e,"http://www.w3.org/1999/XSL/Transform","single");null!=b&&(b.firstChild.nodeValue=d)};
dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(b,d){b||(b=this.xslDoc);b.responseXML&&(b=b.responseXML);d||(d=this.xmlDoc);d.responseXML&&(d=d.responseXML);if(_isIE){f=new ActiveXObject("Msxml2.DOMDocument.3.0");try{d.transformNodeToObject(b,f)}catch(e){f=d.transformNode(b)}}else{this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(b));var f=this.XSLProcessor.transformToDocument(d)}return f};
dtmlXMLLoaderObject.prototype.doXSLTransToString=function(b,d){var e=this.doXSLTransToObject(b,d);return"string"==typeof e?e:this.doSerialization(e)};dtmlXMLLoaderObject.prototype.doSerialization=function(b){b||(b=this.xmlDoc);b.responseXML&&(b=b.responseXML);return _isIE?b.xml:(new XMLSerializer).serializeToString(b)};
dhtmlxEventable=function(b){b.attachEvent=function(b,e,f){b="ev_"+b.toLowerCase();this[b]||(this[b]=new this.eventCatcher(f||this));return b+":"+this[b].addEvent(e)};b.callEvent=function(b,e){b="ev_"+b.toLowerCase();return this[b]?this[b].apply(this,e):!0};b.checkEvent=function(b){return!!this["ev_"+b.toLowerCase()]};b.eventCatcher=function(b){var e=[],f=function(){for(var f=!0,h=0;h<e.length;h++)if(null!=e[h]){var l=e[h].apply(b,arguments);l==(l==window.undefined||null==l)?!1:l;f=f&&l}return f};
f.addEvent=function(b){"function"!=typeof b&&(b=eval(b));return b?e.push(b)-1:!1};f.removeEvent=function(b){e[b]=null};return f};b.detachEvent=function(b){!1!=b&&(b.indexOf&&0<b.indexOf(":"))&&(b=b.split(":"),this[b[0]].removeEvent(b[1]))};b.detachAllEvents=function(){for(var b in this)0==b.indexOf("ev_")&&delete this[b]}};
(function(){var b=dhtmlx.message=dhtmlx.msg=function(d,e,f,g){b.area||(b.area=document.createElement("DIV"),b.area.style.cssText="position:absolute;right:5px;width:250px;z-index:100;",b.area.className="dhtmlx_message_area",b.area.style[b.defPosition]="5px",document.body.appendChild(b.area));"object"!=typeof d&&(d={text:d,type:e,lifetime:f,id:g});d.type=d.type||"info";d.id=d.id||b.uid();d.lifetime=d.lifetime||b.defTimeout;b.hide(d.id);e=document.createElement("DIV");e.style.cssText="border-radius:4px; padding:4px 4px 4px 20px;background-color:#FFFFCC;font-size:12px;font-family:Tahoma;color:navy;z-index: 10000;margin:5px;border:1px solid lightgrey;";
e.innerHTML=d.text;e.className=d.type;"bottom"==b.defPosition&&b.area.firstChild?b.area.insertBefore(e,b.area.firstChild):b.area.appendChild(e);b.timers[d.id]=window.setTimeout(function(){b.hide(d.id)},d.lifetime);b.pull[d.id]=e;return d.id};b.defTimeout=4E3;b.defPosition="top";b.pull={};b.timers={};b.seed=(new Date).valueOf();b.uid=function(){return b.seed++};b.hideAll=function(){for(var d in b.pull)b.hide(d)};b.hide=function(d){var e=b.pull[d];e&&e.parentNode&&(e.parentNode.removeChild(e),window.clearTimeout(b.timers[d]),
delete b.pull[d])}})();var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")};function dhtmlxArray(b){return dhtmlXHeir(b||[],dhtmlxArray._master)}
dhtmlxArray._master={_dhx_find:function(b){for(var d=0;d<this.length;d++)if(b==this[d])return d;return-1},_dhx_insertAt:function(b,d){this[this.length]=null;for(var e=this.length-1;e>=b;e--)this[e]=this[e-1];this[b]=d},_dhx_removeAt:function(b){this.splice(b,1)},_dhx_swapItems:function(b,d){var e=this[b];this[b]=this[d];this[d]=e}};
function dhtmlXGridObject(b){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){}b?"object"==typeof b?(this.entBox=b,this.entBox.id="cgrid2_"+this.uid()):this.entBox=document.getElementById(b):(this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid());this.entBox.innerHTML="";dhtmlxEventable(this);var e=this;this._wcorr=0;this.fontWidth=7;this.row=this.cell=null;this.iconURL="";this.editor=null;this._dclE=this._f2kE=!0;this.combos=[];this.defVal=[];this.rowsAr=
{};this.rowsBuffer=dhtmlxArray();this._rspan_history=",";this.rowsCol=dhtmlxArray();this._data_cache={};this._ecache={};this._ud_enabled=!0;this.xmlLoader=new dtmlXMLLoaderObject(this.doLoadDetails,this,!0,this.no_cashe);this._maskArr=[];this.selectedRows=dhtmlxArray();this.UserData={};this._sizeFix=this._borderFix=0;this.entBox.className+=" gridbox";this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:
this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%";this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%";this.entBox.style.cursor="default";this.entBox.onselectstart=function(){return!1};var f=function(b){var d=document.createElement("TABLE");d.cellSpacing=d.cellPadding=
0;d.style.cssText="width:100%;table-layout:fixed;";d.className=b.substr(2);return d};this.obj=f("c_obj");this.hdr=f("c_hdr");this.hdr.style.marginRight="20px";this.hdr.style.paddingRight="20px";this.objBox=document.createElement("DIV");this.objBox.style.width="100%";this.objBox.style.overflow="auto";this.objBox.appendChild(this.obj);this.objBox.className="objbox";this.hdrBox=document.createElement("DIV");this.hdrBox.style.width="100%";this.hdrBox.style.height="25px";this.hdrBox.style.overflow="hidden";
this.hdrBox.className="xhdr";this.preloadImagesAr=[];this.sortImg=document.createElement("IMG");this.sortImg.style.display="none";this.hdrBox.appendChild(this.sortImg);this.hdrBox.appendChild(this.hdr);this.hdrBox.style.position="relative";this.entBox.appendChild(this.hdrBox);this.entBox.appendChild(this.objBox);this.entBox.grid=this;this.objBox.grid=this;this.hdrBox.grid=this;this.obj.grid=this;this.hdr.grid=this;this.cellWidthPX=[];this.cellWidthPC=[];this.cellWidthType=this.entBox.cellwidthtype||
"px";this.delim=this.entBox.delimiter||",";this.specialDelim="`";this._csvDelim=",";this.hdrLabels=[];this.columnIds=[];this.columnColor=[];this._hrrar=[];this.cellType=dhtmlxArray();this.cellAlign=[];this.initCellWidth=[];this.fldSort=[];this._srdh=_isIE&&"BackCompat"!=document.compatMode?22:20;this.imgURL=window.dhx_globalImgPath||"";this.isActive=!1;this.isEditable=!0;this.pagingOn=this.useImagesInHeader=!1;this.rowsBufferOutSize=0;dhtmlxEvent(window,"unload",function(){try{e.destructor&&e.destructor()}catch(b){}});
this.setSkin=function(b){this.skin_name=b;this.entBox.className="gridbox gridbox_"+b;this.skin_h_correction=0;this.enableAlterCss("ev_"+b,"odd_"+b,this.isTreeGrid());this._fixAlterCss();switch(b){case "clear":this._topMb=document.createElement("DIV");this._topMb.className="topMumba";this._topMb.innerHTML="<img style='left:0px'   src='"+this.imgURL+"skinC_top_left.gif'><img style='right:20px' src='"+this.imgURL+"skinC_top_right.gif'>";this.entBox.appendChild(this._topMb);this._botMb=document.createElement("DIV");
this._botMb.className="bottomMumba";this._botMb.innerHTML="<img style='left:0px'   src='"+this.imgURL+"skinD_bottom_left.gif'><img style='right:20px' src='"+this.imgURL+"skinD_bottom_right.gif'>";this.entBox.appendChild(this._botMb);this.entBox.style.position="relative";this.skin_h_correction=20;break;case "dhx_skyblue":case "dhx_web":case "glassy_blue":case "dhx_black":case "dhx_blue":case "modern":case "light":this._srdh=20;this.forceDivInHeader=!0;break;case "xp":this.forceDivInHeader=!0;this._srdh=
_isIE&&"BackCompat"!=document.compatMode?25:22;break;case "mt":this._srdh=_isIE&&"BackCompat"!=document.compatMode?25:22;break;case "gray":_isIE&&"BackCompat"!=document.compatMode&&(this._srdh=22)}_isIE&&this.hdr&&(b=this.hdr.parentNode,b.removeChild(this.hdr),b.appendChild(this.hdr));this.setSizes()};_isIE&&this.preventIECaching(!0);window.dhtmlDragAndDropObject&&(this.dragger=new dhtmlDragAndDropObject);this._doOnScroll=function(b,d){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]);
this.doOnScroll(b,d)};this.doOnScroll=function(b,d){this.hdrBox.scrollLeft=this.objBox.scrollLeft;this.ftr&&(this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft);!d&&this._srnd&&(this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){e._update_srnd_view&&e._update_srnd_view(!0)},100))};this.attachToObject=function(b){b.appendChild(this.globalBox?this.globalBox:this.entBox);this.setSizes()};this.init=function(b){this.isTreeGrid()&&!this._h2&&(this._h2=
new dhtmlxHierarchy,this._fake&&!this._realfake&&(this._fake._h2=this._h2),this._tgc={imgURL:null});if(this._hstyles){this.editStop();this.fldSorted=this.r_fldSorted=this.resized=this.lastClicked=null;this.cellWidthPX=[];this.cellWidthPC=[];0<this.hdr.rows.length&&this.clearAll(!0);for(var d=this.hdr.insertRow(0),f=0;f<this.hdrLabels.length;f++)d.appendChild(document.createElement("TH")),d.childNodes[f]._cellIndex=f,d.childNodes[f].style.height="0px";d.style.height="auto";d=this.hdr.insertRow(_isKHTML?
2:1);d._childIndexes=[];for(var m=0,f=0;f<this.hdrLabels.length;f++)d._childIndexes[f]=f-m,this.hdrLabels[f]==this.splitSign&&0!=f?(_isKHTML&&d.insertCell(f-m),d.cells[f-m-1].colSpan=(d.cells[f-m-1].colSpan||1)+1,d.childNodes[f-m-1]._cellIndex++,m++,d._childIndexes[f]=f-m):(d.insertCell(f-m),d.childNodes[f-m]._cellIndex=f,d.childNodes[f-m]._cellIndexS=f,this.setColumnLabel(f,this.hdrLabels[f]));0==m&&(d._childIndexes=null);this._cCount=this.hdrLabels.length;_isIE&&window.setTimeout(function(){e.setSizes&&
e.setSizes()},1);this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY"));d=this.obj.firstChild;if(!d.firstChild){d.appendChild(document.createElement("TR"));d=d.firstChild;d.style.height="auto";for(f=0;f<this.hdrLabels.length;f++)d.appendChild(document.createElement("TH")),d.childNodes[f].style.height="0px"}this._c_order=null;!0!=this.multiLine&&(this.obj.className+=" row20px");!0==this.multiLine&&!0==this.breakAll&&(this.obj.style.wordBreak="break-all");this.sortImg.style.position=
"absolute";this.sortImg.style.display="none";this.sortImg.src=this.imgURL+"sort_desc.gif";this.sortImg.defLeft=0;this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1;this.attachHeader();this.attachHeader(0,0,"_aFoot");this._ivizcol&&this.setColHidden();this.setSizes();b&&this.parseXML();this.obj.scrollTop=0;this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this);this._initDrF&&this._initD();this._init_point&&this._init_point()}};this.setColumnSizes=function(b){for(var d=0,e=
[],f=0;f<this._cCount;f++)"*"==this.initCellWidth[f]&&!this._hrrar[f]?(this._awdth=!1,e.push(f)):("%"==this.cellWidthType?("undefined"==typeof this.cellWidthPC[f]&&(this.cellWidthPC[f]=this.initCellWidth[f]),this.cellWidthPX[f]=Math.floor(b*this.cellWidthPC[f]/100)||0):"undefined"==typeof this.cellWidthPX[f]&&(this.cellWidthPX[f]=this.initCellWidth[f]),this._hrrar[f]||(d+=1*this.cellWidthPX[f]));if(e.length){var k=Math.floor((b-d)/e.length);0>k&&(k=1);for(f=0;f<e.length;f++){var n=Math.max(this._drsclmW?
this._drsclmW[e[f]]||0:0,k);this.cellWidthPX[e[f]]=n;d+=n}b>d&&(this.cellWidthPX[e[e.length-1]]+=b-d,d=b);this._setAutoResize()}if(!_isIE||!(isNaN(d)||0>d))this.obj.style.width=d+"px",this.hdr.style.width=d+"px",this.ftr&&(this.ftr.style.width=d+"px"),this.chngCellWidth();return d};this.setSizes=function(){if(this.hdr.rows[0]){var b=this.quirks=5==document.documentMode&&_isIE&&"BackCompat"==document.compatMode,d=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(this.globalBox){var e=(this.globalBox.offsetWidth-
this.globalBox.clientWidth)/2;if(this._delta_x&&!this._realfake){var m=this.globalBox.clientWidth;this.globalBox.style.width=this._delta_x;this.entBox.style.width=Math.max(0,this.globalBox.clientWidth+(b?2*e:0)-this._fake.entBox.clientWidth)+"px";m!=this.globalBox.clientWidth&&this._fake._correctSplit(this._fake.entBox.clientWidth)}this._delta_y&&!this._realfake&&(this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=
this._fake.entBox.style.height=this.globalBox.clientHeight+(b?2*e:0)+"px")}else this._delta_x&&("TD"==this.entBox.parentNode.tagName?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-2*d+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);window.clearTimeout(this._sizeTime);if(!this.entBox.offsetWidth&&(!this.globalBox||!this.globalBox.offsetWidth))this._sizeTime=window.setTimeout(function(){f.setSizes&&
f.setSizes()},250);else{var k=0;this.ftr&&(1<this.ftr.clientHeight?(k=this.ftr.clientHeight,this.ftr.setAttribute("_ch",k)):this.ftr.getAttribute("_ch")&&(k=1*this.ftr.getAttribute("_ch")));var m=(this.entBox.cmp||this._delta_x)&&0==(this.skin_name||"").indexOf("dhx")&&!b?2:0,n=(this.entBox.cmp||this._delta_y)&&0==(this.skin_name||"").indexOf("dhx")&&!b?2:0,e=this.parentGrid?!1:this.objBox.scrollHeight>this.objBox.offsetHeight,s=this.entBox.clientWidth-(this.skin_h_correction||0)*(b?0:1)-m,m=this.entBox.clientWidth-
(this.skin_h_correction||0)-m,u=this.entBox.clientHeight-n,v=this.setColumnSizes(m-(e?18:0)-(this._correction_x||0)),w=this.parentGrid?!1:this.objBox.scrollWidth>this.objBox.offsetWidth||"scroll"==this.objBox.style.overflowX,n=this.hdr.clientHeight,k=this.ftr?k:0,x=u-n-k;this._awdth&&this._awdth[0]&&99999==this._awdth[1]&&(w=0);if(this._ahgr&&(x=this._ahgrMA?this.entBox.parentNode.clientHeight-n-k:this.obj.offsetHeight+(w?18:0)+(this._correction_y||0),this._ahgrM&&(x=this._ahgrF?Math.min(this._ahgrM,
x+n+k)-n-k:Math.min(this._ahgrM,x)),e&&x>=this.obj.scrollHeight+(w?18:0)))e=!1,this.setColumnSizes(m-(this._correction_x||0));this._awdth&&this._awdth[0]&&("%"==this.cellWidthType&&(this.cellWidthType="px"),this._fake&&(v+=this._fake.entBox.clientWidth),s=Math.min(Math.max(v+(e?18:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0),this._fake&&(s-=this._fake.entBox.clientWidth));x=Math.max(0,x);this._ff_size_delta=0.1==this._ff_size_delta?0.2:0.1;_isFF||(this._ff_size_delta=0);this.entBox.style.width=
Math.max(0,s+(b?2:0)*d+this._ff_size_delta)+"px";this.entBox.style.height=x+(b?2:0)*d+n+k+"px";this.objBox.style.height=x+(b&&!e?2:0)*d+"px";this.hdrBox.style.height=n+"px";x!=u&&this.doOnScroll(0,!this._srnd);(b=this["setSizes_"+this.skin_name])&&b.call(this);this.setSortImgPos();n!=this.hdr.clientHeight&&this._ahgr&&this.setSizes();this.callEvent("onSetSizes",[])}}};this.setSizes_clear=function(){var b=this.hdr.offsetHeight,d=this.entBox.offsetWidth,e=b+this.objBox.offsetHeight;this._topMb.style.top=
(b||0)+"px";this._topMb.style.width=d+20+"px";this._botMb.style.top=e-3+"px";this._botMb.style.width=d+20+"px"};this.chngCellWidth=function(){_isOpera&&this.ftr&&(this.ftr.width=this.objBox.scrollWidth+"px");for(var b=this._cCount,d=0;d<b;d++){for(var e=0;e<this.hdr.rows.length;e++)this.hdr.rows[e].cells[d]&&1==this.hdr.rows[e].cells[d].colSpan&&(this.hdr.rows[e].cells[d].style.width=this.cellWidthPX[d]+"px");this.obj.rows.length&&(this.obj.rows[0].childNodes[d].style.width=this.cellWidthPX[d]+"px");
this.ftr&&(this.ftr.rows[0].cells[d].style.width=this.cellWidthPX[d]+"px")}};this.setDelimiter=function(b){this.delim=b};this.setInitWidthsP=function(b,d){this.cellWidthType="%";this.initCellWidth=b.split(this.delim.replace(/px/gi,""));d||this._setAutoResize()};this._setAutoResize=function(){if(!this._realfake){var b=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(b._resize_timer);b._setAutoResize&&(b._resize_timer=window.setTimeout(function(){b.setSizes&&b.setSizes();b._fake&&b._fake._correctSplit()},
100))})}};this.setInitWidths=function(b){this.cellWidthType="px";this.initCellWidth=b.split(this.delim);if(_isFF)for(b=0;b<this.initCellWidth.length;b++)"*"!=this.initCellWidth[b]&&(this.initCellWidth[b]=parseInt(this.initCellWidth[b]))};this.enableMultiline=function(b,d){this.multiLine=convertStringToBoolean(b);this.breakAll=convertStringToBoolean(d)};this.enableMultiselect=function(b){this.selMultiRows=convertStringToBoolean(b)};this.setImagesPath=this.setImagePath=function(b){this.imgURL=b};this.setIconsPath=
this.setIconPath=function(b){this.iconURL=b};this.changeCursorState=function(b){var d=b.target||b.srcElement;"TD"!=d.tagName&&(d=this.getFirstParentOfType(d,"TD"));if(d){if("TD"==d.tagName&&this._drsclmn&&!this._drsclmn[d._cellIndex])return d.style.cursor="default";var e=(b.layerX||0)+(!_isIE&&"DIV"==b.target.tagName?d.offsetLeft:0);d.style.cursor=d.offsetWidth-(b.offsetX||-1*(parseInt(this.getPosition(d,this.hdrBox))-e))<(_isOpera?20:10)?"E-resize":"default";_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}};
this.startColResize=function(b){this.resized&&this.stopColResize();this.resized=null;var d=b.target||b.srcElement;"TD"!=d.tagName&&(d=this.getFirstParentOfType(d,"TD"));var f=b.clientX,m=this.hdr.offsetWidth,k=parseInt(d.offsetWidth);if("TD"==d.tagName&&"default"!=d.style.cursor&&(!this._drsclmn||this._drsclmn[d._cellIndex]))e._old_d_mm=document.body.onmousemove,e._old_d_mu=document.body.onmouseup,document.body.onmousemove=function(b){e&&e.doColResize(b||window.event,d,k,f,m)},document.body.onmouseup=
function(){e&&e.stopColResize()}};this.stopColResize=function(){document.body.onmousemove=e._old_d_mm||"";document.body.onmouseup=e._old_d_mu||"";this.setSizes();this.doOnScroll(0,1);this.callEvent("onResizeEnd",[this])};this.doColResize=function(b,d,e,f,k){d.style.cursor="E-resize";this.resized=d;b=e+(b.clientX-f);if(this.callEvent("onResize",[d._cellIndex,b,this])){_isIE&&(this.objBox.scrollLeft=this.hdrBox.scrollLeft);if(1<d.colSpan){e=[];for(f=0;f<d.colSpan;f++)e[f]=Math.round(b*this.hdr.rows[0].childNodes[d._cellIndexS+
f].offsetWidth/d.offsetWidth);for(f=0;f<d.colSpan;f++)this._setColumnSizeR(d._cellIndexS+1*f,e[f])}else this._setColumnSizeR(d._cellIndex,b);this.doOnScroll(0,1);this.setSizes();this._fake&&this._awdth&&this._fake._correctSplit()}};this._setColumnSizeR=function(b,d){if(d>(this._drsclmW&&!this._notresize?this._drsclmW[b]||10:10)){this.obj.rows[0].childNodes[b].style.width=d+"px";this.hdr.rows[0].childNodes[b].style.width=d+"px";this.ftr&&(this.ftr.rows[0].childNodes[b].style.width=d+"px");if("px"==
this.cellWidthType)this.cellWidthPX[b]=d;else{var e=parseInt(this.entBox.offsetWidth);this.objBox.scrollHeight>this.objBox.offsetHeight&&(e-=17);e=Math.round(100*(d/e));this.cellWidthPC[b]=e}"none"!=this.sortImg.style.display&&this.setSortImgPos()}};this.setSortImgState=function(b,d,e,f){e=(e||"asc").toLowerCase();if(convertStringToBoolean(b)){this.sortImg.src="asc"==e?this.imgURL+"sort_asc.gif":this.imgURL+"sort_desc.gif";this.sortImg.style.display="";this.fldSorted=this.hdr.rows[0].childNodes[d];
var k=this.hdr.rows[f||1];if(k){for(var n=0;n<k.childNodes.length;n++)if(k.childNodes[n]._cellIndexS==d)return this.r_fldSorted=k.childNodes[n],this.setSortImgPos();return this.setSortImgState(b,d,e,(f||1)+1)}}else this.sortImg.style.display="none",this.fldSorted=null};this.setSortImgPos=function(b,d,e,f){if(!this._hrrar||!this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:b])if(f||(f=b?this.hdr.rows[e||0].cells[b]:this.r_fldSorted),null!=f)b=this.getPosition(f,this.hdrBox),this.sortImg.style.left=
Number(b[0]+f.offsetWidth-13)+"px",this.sortImg.defLeft=parseInt(this.sortImg.style.left),this.sortImg.style.top=Number(b[1]+5)+"px",!this.useImagesInHeader&&!d&&(this.sortImg.style.display="inline"),this.sortImg.style.left=this.sortImg.defLeft+"px"};this.setActive=function(b){0==arguments.length&&(b=!0);!0==b?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&(globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])),globalActiveDHTMLGridObject=
this,this.isActive=!0):(this.isActive=!1,this.callEvent("onBlur",[this]))};this._doClick=function(b){this.hideSubTree();var d=0,e=this.getFirstParentOfType(_isIE?b.srcElement:b.target,"TD");if(e){if(this.markedCells){d=0;if(b.shiftKey||b.metaKey)d=1;b.ctrlKey&&(d=2);this.doMark(e,d);return!0}if(!1!=this.selMultiRows&&(b.shiftKey&&null!=this.row&&this.selectedRows.length&&(d=1),b.ctrlKey||b.metaKey))d=2;this.doClick(e,!0,d)}};this._doContClick=function(b){var d=this.getFirstParentOfType(_isIE?b.srcElement:
b.target,"TD");if(!d||"undefined"==typeof d.parentNode.idd)return!0;if(2==b.button||_isMacOS&&b.ctrlKey){if(!this.callEvent("onRightClick",[d.parentNode.idd,d._cellIndex,b]))return d=function(b){(b||event).cancelBubble=!0;return!1},(b.srcElement||b.target).oncontextmenu=d,d(b);if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[d.parentNode.idd,d._cellIndex,this]))return!0;_isIE&&(b.srcElement.oncontextmenu=function(){event.cancelBubble=!0;return!1});if(this._ctmndx.showContextMenu){var e=
window.document.documentElement,f=window.document.body,f=[e.scrollLeft||f.scrollLeft,e.scrollTop||f.scrollTop];_isIE?(e=b.clientX+f[0],f=b.clientY+f[1]):(e=b.pageX,f=b.pageY);this._ctmndx.showContextMenu(e-1,f-1);this.contextID=this._ctmndx.contextMenuZoneId=d.parentNode.idd+"_"+d._cellIndex;this._ctmndx._skip_hide=!0}else d.contextMenuId=d.parentNode.idd+"_"+d._cellIndex,d.contextMenu=this._ctmndx,d.a=this._ctmndx._contextStart,d.a(d,b),d.a=null;b.cancelBubble=!0;return!1}}else this._ctmndx&&(this._ctmndx.hideContextMenu?
this._ctmndx.hideContextMenu():this._ctmndx._contextEnd());return!0};this.doClick=function(b,d,f,m){this._cellSelectedEventAdded||(this._cellSelectedEventAdded=!0,this.attachEvent("onCellSelected",function(b,d,e){window.event&&window.event.ctrlKey&&window.event.altKey&&(b=e._code)&&(window.console?console.log(b):dhtmlx.message?dhtmlx.message({type:"info",text:b}):alert(b))}));this.selMultiRows||(f=0);var k=this.row?this.row.idd:0;this.setActive(!0);f||(f=0);null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,
""));if("TD"==b.tagName){if(this.checkEvent("onSelectStateChanged"))var n=this.getSelectedId();var s=this.row;if(1==f){var u=this.rowsCol._dhx_find(b.parentNode),v=this.rowsCol._dhx_find(this.lastClicked);if(u>v)var w=v;else w=u,u=v;for(v=0;v<this.rowsCol.length;v++)if(v>=w&&v<=u)if(this.rowsCol[v]&&!this.rowsCol[v]._sRow)-1==this.rowsCol[v].className.indexOf("rowselected")&&this.callEvent("onBeforeSelect",[this.rowsCol[v].idd,k])&&(this.rowsCol[v].className+=" rowselected",this.selectedRows[this.selectedRows.length]=
this.rowsCol[v]);else return this.clearSelection(),this.doClick(b,d,0,m)}else if(2==f&&-1!=b.parentNode.className.indexOf("rowselected")){b.parentNode.className=b.parentNode.className.replace(/rowselected/g,"");this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(b.parentNode));var x=!0}this.editStop();if("undefined"==typeof b.parentNode.idd)return!0;if(!x&&!b.parentNode._sRow)if(this.callEvent("onBeforeSelect",[b.parentNode.idd,k])){if(0==f){if(this.getSelectedRowId()==b.parentNode.idd)return b.className=
b.className.replace(/cellselected/g,"")+" cellselected",this.callEvent("onCellSelected",[b.parentNode.idd,k,b]),this.cell=b;this.clearSelection()}this.cell=b;s==b.parentNode&&this._chRRS&&(d=!1);this.row=b.parentNode;this.row.className+=" rowselected";this.cell&&(_isIE&&8==_isIE)&&(s=this.cell.nextSibling,w=this.cell.parentNode,w.removeChild(this.cell),w.insertBefore(this.cell,s));-1==this.selectedRows._dhx_find(this.row)&&(this.selectedRows[this.selectedRows.length]=this.row)}else d=!1;this.cell&&
-1!=this.cell.parentNode.className.indexOf("rowselected")&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected",this.callEvent("onCellSelected",[b.parentNode.idd,k,b]));if(1!=f&&!this.row)return;this.lastClicked=b.parentNode;var A=this.row.idd,D=this.cell;d&&"undefined"!=typeof A&&D&&!x?e.onRowSelectTime=setTimeout(function(){e.callEvent&&e.callEvent("onRowSelect",[A,D._cellIndex])},100):this.callEvent("onRowSelectRSOnly",[A]);this.checkEvent("onSelectStateChanged")&&
(b=this.getSelectedId(),n!=b&&this.callEvent("onSelectStateChanged",[b,n]))}this.isActive=!0;!1!==m&&this.cell&&this.cell.parentNode.idd&&!this._realfake&&this.moveToVisible(this.cell)};this.selectAll=function(){this.clearSelection();var b=this.rowsBuffer;this.pagingOn&&(b=this.rowsCol);for(var d=0;d<b.length;d++)this.render_row(d).className+=" rowselected";this.selectedRows=dhtmlxArray([].concat(b));this.selectedRows.length&&(this.row=this.selectedRows[0],this.cell=this.row.cells[0]);this._fake&&
!this._realfake&&this._fake.selectAll()};this.selectCell=function(b,d,e,f,k,n){e||(e=!1);"object"!=typeof b&&(b=this.render_row(b));if(!b||-1==b)return null;(d=b._childIndexes?b.childNodes[b._childIndexes[d]]:b.childNodes[d])||(d=b.childNodes[0]);f?this.doClick(d,e,3,n):this.doClick(d,e,0,n);k&&this.editCell()};this.hideSubTree=function(){if(this._sub_trees)for(var b=0;b<this._sub_trees.length;b++)this._sub_trees[b]&&(this._sub_trees[b][0]&&this._sub_trees[b][0].parentObject)&&(this._sub_trees[b][0].parentObject.style.display=
"none")};this.moveToVisible=function(b,d){if(this.pagingOn){var e=Math.floor(this.getRowIndex(b.parentNode.idd)/this.rowsBufferOutSize)+1;e!=this.currentPage&&this.changePage(e)}try{if(b.offsetHeight){var f=b.offsetLeft+b.offsetWidth+20,e=0;f>this.objBox.offsetWidth+this.objBox.scrollLeft?b.offsetLeft>this.objBox.scrollLeft&&(e=b.offsetLeft-5):b.offsetLeft<this.objBox.scrollLeft&&(f-=2*b.offsetWidth/3,f<this.objBox.scrollLeft&&(e=b.offsetLeft-5));e&&!d&&(this.objBox.scrollLeft=e)}var f=b.offsetHeight?
b.offsetTop:this.rowsBuffer._dhx_find(this._realfake?this._fake.rowsAr[b.parentNode.idd]:b.parentNode)*this._srdh,k=f+b.offsetHeight+38;if(k>this.objBox.offsetHeight+this.objBox.scrollTop)var n=k-this.objBox.offsetHeight;else f<this.objBox.scrollTop&&(n=f-5);n&&(this.objBox.scrollTop=n)}catch(s){}};this.editCell=function(){if(!(this.editor&&this.cell==this.editor.cell)){this.editStop();if(!0!=this.isEditable||!this.cell)return!1;var b=this.cell;if(b.parentNode._locked)return!1;this.editor=this.cells4(b);
if(null!=this.editor){if(this.editor.isDisabled())return this.editor=null,!1;!1!=this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),b.className+=" editable",this.editor.edit(),this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}};this.editStop=function(b){if(_isOpera&&this._Opera_stop){if(1*this._Opera_stop+50>(new Date).valueOf())return;this._Opera_stop=null}if(this.editor&&null!=this.editor)if(this.editor.cell.className=
this.editor.cell.className.replace("editable",""),b)b=this.editor.val,this.editor.detach(b),this.editor.setValue(b),this.editor=null,this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,b]);else{this.editor.detach(null,!0)&&(this.cell.wasChanged=!0);b=this.editor;this.editor=null;var d=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,b.getValue(),b.val]);if("string"==typeof d||"number"==typeof d)b[b.setImage?"setLabel":"setValue"](d);else d||(this.cell.wasChanged=!1,b[b.setImage?
"setLabel":"setValue"](b.val));this._ahgr&&this.multiLine&&this.setSizes()}};this._nextRowCell=function(b,d,e){b=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(b),d);return!b?null:b.childNodes[b._childIndexes?b._childIndexes[e]:e]};this._getNextCell=function(b,d,e){b=b||this.cell;var f=b.parentNode;this._tabOrder?(e=this._tabOrder[b._cellIndex],"undefined"!=typeof e&&(b=0>e?this._nextRowCell(f,d,Math.abs(e)-1):f.childNodes[e])):(e=b._cellIndex+d,0<=e&&e<this._cCount?(f._childIndexes&&
(e=f._childIndexes[b._cellIndex]+d),b=f.childNodes[e]):b=this._nextRowCell(f,d,1==d?0:this._cCount-1));return!b?(1==d&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus(),this.setActive(!1)),-1==d&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus(),this.setActive(!1)),null):"none"!=b.style.display&&(!this.smartTabOrder||!this.cells(b.parentNode.idd,b._cellIndex).isDisabled())?b:this._getNextCell(b,d)};this._nextRow=function(b,d){var e=this.render_row(b+d);return!e||-1==e?null:e&&"none"==
e.style.display?this._nextRow(b+d,d):e};this.scrollPage=function(b){if(this.rowsBuffer.length){var d=this._realfake?this._fake:this,e=Math.floor((d._r_select||this.getRowIndex(this.row.idd)||0)+b*this.objBox.offsetHeight/(this._srdh||20));0>e&&(e=0);e>=this.rowsBuffer.length&&(e=this.rowsBuffer.length-1);if(this._srnd&&!this.rowsBuffer[e])this.objBox.scrollTop+=Math.floor(b*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20),this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop),
d._r_select=e;else{this.selectCell(e,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd);if(!this.multiLine&&!this._srnd&&!this._realfake&&(this.objBox.scrollTop=this.getRowById(this.getRowId(e)).offsetTop,this._fake))this._fake.objBox.scrollTop=this.objBox.scrollTop;d._r_select=null}}};this.doKey=function(b){if(!b)return!0;if((b.target||b.srcElement).value!==window.undefined){var d=b.target||b.srcElement;if(!d.parentNode||-1==d.parentNode.className.indexOf("editable"))return!0}if(globalActiveDHTMLGridObject&&
this!=globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(b);if(!1==this.isActive||this._htkebl)return!0;if(!this.callEvent("onKeyPress",[b.keyCode,b.ctrlKey,b.shiftKey,b]))return!1;d="k"+b.keyCode+"_"+(b.ctrlKey?1:0)+"_"+(b.shiftKey?1:0);if(this.cell){if(this._key_events[d]){if(!1===this._key_events[d].call(this))return!0;b.preventDefault&&b.preventDefault();b.cancelBubble=!0;return!1}this._key_events.k_other&&this._key_events.k_other.call(this,b)}return!0};this.selectRow=function(b,
d,e,f){"object"!=typeof b&&(b=this.render_row(b));this.selectCell(b,0,d,e,!1,f)};this.wasDblClicked=function(b){if(b=this.getFirstParentOfType(_isIE?b.srcElement:b.target,"TD"))return this.callEvent("onRowDblClicked",[b.parentNode.idd,b._cellIndex])};this._onHeaderClick=function(b,d){var e=this.grid;d=d||e.getFirstParentOfType(_isIE?event.srcElement:b.target,"TD");if(null==this.grid.resized){if(!this.grid.callEvent("onHeaderClick",[d._cellIndexS,b||window.event]))return!1;e.sortField(d._cellIndexS,
!1,d)}this.grid.resized=null};this.deleteSelectedRows=function(){var b=this.selectedRows.length;if(0!=b){var d=this.selectedRows;this.selectedRows=dhtmlxArray();for(b-=1;0<=b;b--){var e=d[b];if(this.deleteRow(e.idd,e)){if(e==this.row)var f=b}else this.selectedRows[this.selectedRows.length]=e}if(f)try{f+1>this.rowsCol.length&&f--,this.selectCell(f,0,!0)}catch(k){this.cell=this.row=null}}};this.getSelectedRowId=function(){for(var b=[],d={},e=0;e<this.selectedRows.length;e++){var f=this.selectedRows[e].idd;
d[f]||(b[b.length]=f,d[f]=!0)}return 0==b.length?null:b.join(this.delim)};this.getSelectedCellIndex=function(){return null!=this.cell?this.cell._cellIndex:-1};this.getSelectedCellIndex2=function(){return null!=this.cell?this.cell.cellIndex:-1};this.getColWidth=function(b){return parseInt(this.cellWidthPX[b])};this.setColWidth=function(b,d){this._hrrar[b]||("px"==this.cellWidthType?this.cellWidthPX[b]=parseInt(d):this.cellWidthPC[b]=parseInt(d),this.setSizes())};this.getRowIndex=function(b){for(var d=
0;d<this.rowsBuffer.length;d++)if(this.rowsBuffer[d]&&this.rowsBuffer[d].idd==b)return d;return-1};this.getRowId=function(b){return this.rowsBuffer[b]?this.rowsBuffer[b].idd:this.undefined};this.setRowId=function(b,d){this.changeRowId(this.getRowId(b),d)};this.changeRowId=function(b,d){if(b!=d){var e=this.rowsAr[b];e.idd=d;this.UserData[b]&&(this.UserData[d]=this.UserData[b],this.UserData[b]=null);this._h2&&this._h2.get[b]&&(this._h2.get[d]=this._h2.get[b],this._h2.get[d].id=d,delete this._h2.get[b]);
this.rowsAr[b]=null;this.rowsAr[d]=e;for(var f=0;f<e.childNodes.length;f++)e.childNodes[f]._code&&(e.childNodes[f]._code=this._compileSCL(e.childNodes[f]._val,e.childNodes[f]));if(this._mat_links&&this._mat_links[b]){e=this._mat_links[b];delete this._mat_links[b];for(var k in e)for(f=0;f<e[k].length;f++)this._compileSCL(e[k][f].original,e[k][f])}this.callEvent("onRowIdChange",[b,d])}};this.setColumnIds=function(b){this.columnIds=b.split(this.delim)};this.setColumnId=function(b,d){this.columnIds[b]=
d};this.getColIndexById=function(b){for(var d=0;d<this.columnIds.length;d++)if(this.columnIds[d]==b)return d};this.getColumnId=function(b){return this.columnIds[b]};this.getColLabel=this.getColumnLabel=function(b,d,e){d=(e||this.hdr).rows[(d||0)+1];for(e=0;e<d.cells.length;e++)if(d.cells[e]._cellIndexS==b)return _isIE?d.cells[e].innerText:d.cells[e].textContent;return""};this.getFooterLabel=function(b,d){return this.getColumnLabel(b,d,this.ftr)};this.setRowTextBold=function(b){if(b=this.getRowById(b))b.style.fontWeight=
"bold"};this.setRowTextStyle=function(b,d,e){if(b=this.getRowById(b)){e&&(b.className&&-1<b.className.indexOf("rowselected"))&&(b.className=b.className.replace(/rowselected/g,""));for(e=0;e<b.childNodes.length;e++){var f=b.childNodes[e],k=f._attrs.style||"";this._hrrar&&this._hrrar[f._cellIndex]&&(k="display:none;");b.childNodes[e].style.cssText=k+";width:"+b.childNodes[e].style.width+";"+d}}};this.setRowColor=function(b,d){for(var e=this.getRowById(b),f=0;f<e.childNodes.length;f++)e.childNodes[f].bgColor=
d};this.setCellTextStyle=function(b,d,e){if(b=this.getRowById(b))if(d=b.childNodes[b._childIndexes?b._childIndexes[d]:d])b="",this._hrrar&&this._hrrar[d._cellIndex]&&(b="display:none;"),d.style.cssText=b+"width:"+d.style.width+";"+e};this.setRowTextNormal=function(b){if(b=this.getRowById(b))b.style.fontWeight="normal"};this.doesRowExist=function(b){return null!=this.getRowById(b)?!0:!1};this.getColumnsNum=function(){return this._cCount};this.moveRowUp=function(b){var d=this.getRowById(b);if(this.isTreeGrid())return this.moveRowUDTG(b,
-1);b=this.rowsCol._dhx_find(d);d.previousSibling&&0!=b&&(d.parentNode.insertBefore(d,d.previousSibling),this.rowsCol._dhx_swapItems(b,b-1),this.setSizes(),d=this.rowsBuffer._dhx_find(d),this.rowsBuffer._dhx_swapItems(d,d-1),this._cssEven&&this._fixAlterCss(b-1))};this.moveRowDown=function(b){var d=this.getRowById(b);if(this.isTreeGrid())return this.moveRowUDTG(b,1);b=this.rowsCol._dhx_find(d);d.nextSibling&&(this.rowsCol._dhx_swapItems(b,b+1),d.nextSibling.nextSibling?d.parentNode.insertBefore(d,
d.nextSibling.nextSibling):d.parentNode.appendChild(d),this.setSizes(),d=this.rowsBuffer._dhx_find(d),this.rowsBuffer._dhx_swapItems(d,d+1),this._cssEven&&this._fixAlterCss(b))};this.getCombo=function(b){this.combos[b]||(this.combos[b]=new dhtmlXGridComboObject);return this.combos[b]};this.setUserData=function(b,d,e){b||(b="gridglobaluserdata");this.UserData[b]||(this.UserData[b]=new Hashtable);this.UserData[b].put(d,e)};this.getUserData=function(b,d){b||(b="gridglobaluserdata");this.getRowById(b);
var e=this.UserData[b];return e?e.get(d):""};this.setEditable=function(b){this.isEditable=convertStringToBoolean(b)};this.selectRowById=function(b,d,e,f){f||(f=!1);this.selectCell(this.getRowById(b),0,f,d,!1,e)};this.clearSelection=function(){this.editStop();for(var b=0;b<this.selectedRows.length;b++){var d=this.rowsAr[this.selectedRows[b].idd];d&&(d.className=d.className.replace(/rowselected/g,""))}this.selectedRows=dhtmlxArray();this.row=null;null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,
""),this.cell=null);this.callEvent("onSelectionCleared",[])};this.copyRowContent=function(b,d){var e=this.getRowById(b);if(this.isTreeGrid())this._copyTreeGridRowContent(e,b,d);else for(var f=0;f<e.cells.length;f++)this.cells(d,f).setValue(this.cells(b,f).getValue());_isIE||(this.getRowById(b).cells[0].height=e.cells[0].offsetHeight)};this.setFooterLabel=function(b,d,e){return this.setColumnLabel(b,d,e,this.ftr)};this.setColumnLabel=function(b,d,e,f){e=(f||this.hdr).rows[e||1];b=e._childIndexes?e._childIndexes[b]:
b;if(e.cells[b]){if(this.useImagesInHeader)e.cells[b].style.textAlign="left",e.cells[b].innerHTML="<img src='"+this.imgURL+""+d+"' onerror='this.src = \""+this.imgURL+"imageloaderror.gif\"'>",f=new Image,f.src=this.imgURL+""+d.replace(/(\.[a-z]+)/,".des$1"),this.preloadImagesAr[this.preloadImagesAr.length]=f,f=new Image,f.src=this.imgURL+""+d.replace(/(\.[a-z]+)/,".asc$1"),this.preloadImagesAr[this.preloadImagesAr.length]=f;else{f="<div class='hdrcell'>";if(-1!=d.indexOf("img:[")){var k=d.replace(/.*\[([^>]+)\].*/,
"$1");d=d.substr(d.indexOf("]")+1,d.length);f+="<img width='18px' height='18px' align='absmiddle' src='"+k+"' hspace='2'>"}f=f+d+"</div>";e.cells[b].innerHTML=f;this._hstyles[b]&&(e.cells[b].style.cssText=this._hstyles[b])}if(-1!=(d||"").indexOf("#"))if(f=d.match(/(^|{)#([^}]+)(}|$)/))if(k="_in_header_"+f[2],this[k])this[k](this.forceDivInHeader?e.cells[b].firstChild:e.cells[b],b,d.split(f[0]))}};this.setColLabel=function(b,d,e,f){return this.setColumnLabel(b,d,(e||0)+1,f)};this.clearAll=function(b){if(this.obj.rows[0]){if(this._h2&&
(this._h2=new dhtmlxHierarchy,this._fake))this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2;this.limit=this._limitC=0;this.editStop(!0);this._dLoadTimer&&window.clearTimeout(this._dLoadTimer);this._dload&&(this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0);for(var d=this.rowsCol.length,d=this.obj.rows.length,d=d-1;0<d;d--){var e=this.obj.rows[d];e.parentNode.removeChild(e)}if(b){this._master_row=null;this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(d=this.hdr.rows.length-
1;0<=d;d--)e=this.hdr.rows[d],e.parentNode.removeChild(e);this.ftr&&(this.ftr.parentNode.parentNode.removeChild(this.ftr.parentNode),this.ftr=null);d=this.obj.childNodes[0];if(d.childNodes.length)for(e=d.childNodes.length-1;0<=e;e--)d.removeChild(d.childNodes[e]);this._aHead=this.ftr=this.cellWidth=this._aFoot=null;this.cellType=dhtmlxArray();this._hrrar=[];this._rspan_history=",";this.columnIds=[];this.combos=[];this._ivizcol=null;this._colls_loaded=!1;this.clearHeaderConditions();this.aToolBar&&
"object"==typeof this.aToolBar&&(this.aToolBar.unload(),this.aToolBar=-1)}this.cell=this.row=null;this.rowsCol=dhtmlxArray();this.rowsAr={};this._RaSeCol=[];this.rowsBuffer=dhtmlxArray();this._mathCellCompiled=!1;b?this.UserData=[]:(d=this.UserData.gridglobaluserdata,this.UserData=[],this.UserData.gridglobaluserdata=d);this.selectedRows=dhtmlxArray();if(this.pagingOn||this._srnd)this.xmlFileUrl="";!b&&this.pagingOn&&this.changePage(1);this._contextCallTimer&&window.clearTimeout(this._contextCallTimer);
this._sst&&this.enableStableSorting(!0);this._fillers=this.undefined;this.setSortImgState(!1);b||this.setSizes();this.callEvent("onClearAll",[]);b&&(this.aToolBar=null)}};this.sortField=function(b,d,e){if(0==this.getRowsNum())return!1;if((d=this.hdr.rows[0].cells[b])&&"TH"==d.tagName&&this.fldSort.length-1>=d._cellIndex&&"na"!=this.fldSort[d._cellIndex]){var f=this.getSortingState(),f=f[0]==b&&"asc"==f[1]?"des":"asc";if(this.callEvent("onBeforeSorting",[b,this.fldSort[b],f])){this.sortImg.src=this.imgURL+
"sort_"+("asc"==f?"asc":"desc")+".gif";if(this.useImagesInHeader){b=this.hdr.rows[1].cells[d._cellIndex].firstChild;if(null!=this.fldSorted){var k=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;k.src=k.src.replace(/(\.asc\.)|(\.des\.)/,".")}b.src=b.src.replace(/(\.[a-z]+)$/,"."+f+"$1")}this.sortRows(d._cellIndex,this.fldSort[d._cellIndex],f);this.fldSorted=d;this.r_fldSorted=e;this.setSortImgPos(!1,!1,!1,e)}}};this.setCustomSorting=function(b,d){this._customSorts||(this._customSorts=
[]);this._customSorts[d]="string"==typeof b?eval(b):b;this.fldSort[d]="cus"};this.enableHeaderImages=function(b){this.useImagesInHeader=b};this.setHeader=function(b,d,e){b="object"!=typeof b?this._eSplit(b):[].concat(b);for(var f=[],k=new dhtmlxArray(0),n=[],s=[],u=[],v=0;v<b.length;v++)f[f.length]=Math.round(100/b.length),k[k.length]="ed",n[n.length]="left",s[s.length]="middle",u[u.length]="na";this.splitSign=d||"#cspan";this.hdrLabels=b;this.cellWidth=f;this.initCellWidth.length||this.setInitWidthsP(f.join(this.delim),
!0);this.cellType=k;this.cellAlign=n;this.cellVAlign=s;this.fldSort=u;this._hstyles=e||[]};this._eSplit=function(b){if(![].push)return b.split(this.delim);var d="r"+(new Date).valueOf(),e=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(b||"").replace(RegExp(e,"g"),d).replace(RegExp("\\\\"+d,"g"),this.delim).split(d)};this.getColType=function(b){return this.cellType[b]};this.getColTypeById=function(b){return this.cellType[this.getColIndexById(b)]};this.setColTypes=function(b){this.cellType=dhtmlxArray(b.split(this.delim));
this._strangeParams=[];this._prefix=[];for(b=0;b<this.cellType.length;b++){this.cellType[b]=this.cellType[b].replace(RegExp(this.specialDelim,"ig"),this.delim);if(-1!=this.cellType[b].indexOf("{")){this._prefix[b]=this.cellType[b];var d=this.cellType[b].indexOf("{"),e=this.cellType[b].lastIndexOf("}");this.cellType[b]=this.cellType[b].substring(d+1,e)}if(-1!=this.cellType[b].indexOf("[")){var d=this.cellType[b].indexOf("[="),e=this.cellType[b].lastIndexOf("]"),f=this.cellType[b].substring(0,d),d=
this.cellType[b].substring(d+1,e);this.cellType[b]=f;this.defVal[b]=d;0==d.indexOf("=")&&(this.cellType[b]="math",this._strangeParams[b]=f)}window["eXcell_"+this.cellType[b]]||dhtmlxError.throwError("Configuration","Incorrect cell type: "+this.cellType[b],[this,this.cellType[b]])}};this.setColSorting=function(b){this.fldSort=b.split(this.delim);for(b=0;b<this.fldSort.length;b++)4<this.fldSort[b].length&&"function"==typeof window[this.fldSort[b]]&&(this._customSorts||(this._customSorts=[]),this._customSorts[b]=
window[this.fldSort[b]],this.fldSort[b]="cus")};this.setColAlign=function(b){this.cellAlign=b.split(this.delim);for(b=0;b<this.cellAlign.length;b++)this.cellAlign[b]=this.cellAlign[b]._dhx_trim()};this.setColVAlign=function(b){this.cellVAlign=b.split(this.delim)};this.setNoHeader=function(b){this.noHeader=convertStringToBoolean(b)};this.showRow=function(b){this.getRowById(b);this._h2&&this.openItem(this._h2.get[b].parent.id);for(b=this.getRowById(b).childNodes[0];b&&"none"==b.style.display;)b=b.nextSibling;
b&&this.moveToVisible(b,!0)};this.setStyle=function(b,d,e,f){this.ssModifier=[b,d,e,e,f];for(b=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"];!_isIE;)break;for(d=0;d<b.length;d++)this.ssModifier[d]&&(_isIE?document.styleSheets[0].addRule(b[d],this.ssModifier[d]):document.styleSheets[0].insertRule(b[d]+(" { "+this.ssModifier[d]+
" }"),document.styleSheets[0].cssRules.length))};this.setColumnColor=function(b){this.columnColor=b.split(this.delim)};this.enableAlterCss=function(b,d,e,f){(b||d)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss();this._fake&&this._fake._fixAlterCss()});this._cssSP=e;this._cssSU=f;this._cssEven=b;this._cssUnEven=d};this._fixAlterCss=function(b){if(this._h2&&(this._cssSP||this._cssSU))return this._fixAlterCssTGR(b);if(this._cssEven||this._cssUnEven)for(var d=b=b||0;b<this.rowsCol.length;b++)this.rowsCol[b]&&
"none"!=this.rowsCol[b].style.display&&(this.rowsCol[b]._cntr?d=1:(this.rowsCol[b].className=-1!=this.rowsCol[b].className.indexOf("rowselected")?1==d%2?this._cssUnEven+" rowselected "+(this.rowsCol[b]._css||""):this._cssEven+" rowselected "+(this.rowsCol[b]._css||""):1==d%2?this._cssUnEven+" "+(this.rowsCol[b]._css||""):this._cssEven+" "+(this.rowsCol[b]._css||""),d++))};this.clearChangedState=function(){for(var b=0;b<this.rowsCol.length;b++)for(var d=this.rowsCol[b],e=d.childNodes.length,f=0;f<
e;f++)d.childNodes[f].wasChanged=!1};this.getChangedRows=function(b){var d=[];this.forEachRow(function(e){e=this.rowsAr[e];if("TR"==e.tagName){var f=e.childNodes.length;if(b&&e._added)d[d.length]=e.idd;else for(var k=0;k<f;k++)if(e.childNodes[k].wasChanged){d[d.length]=e.idd;break}}});return d.join(this.delim)};this._sAll=this._sUDa=!1;this.setSerializationLevel=function(b,d,e,f,k,n){this._sUDa=b;this._sAll=d;this._sConfig=e;this._chAttr=f;this._onlChAttr=k;this._asCDATA=n};this.setSerializableColumns=
function(b){if(b){this._srClmn=(b||"").split(",");for(b=0;b<this._srClmn.length;b++)this._srClmn[b]=convertStringToBoolean(this._srClmn[b])}else this._srClmn=null};this._serialise=function(){this.editStop();var b=[],d="</"+this.xml.s_row+">";if(this.isTreeGrid())this._h2.forEachChildF(0,function(d){d=this._serializeRow(this.render_row_tree(-1,d.id));b.push(d);return d?!0:!1},this,function(){b.push(d)});else for(var e=0;e<this.rowsBuffer.length;e++)if(this.rowsBuffer[e]){var f=this._serializeRow(this.render_row(e));
b.push(f);f&&b.push(d)}return[b.join("")]};this._serializeRow=function(b,d){var e=[],f=this.xml.row_attrs,k=this.xml.cell_attrs;e.push("<"+this.xml.s_row);e.push(" id='"+b.idd+"'");this._sAll&&-1!=this.selectedRows._dhx_find(b)&&e.push(" selected='1'");this._h2&&"minus"==this._h2.get[b.idd].state&&e.push(" open='1'");if(f.length)for(d=0;d<f.length;d++)e.push(" "+f[d]+"='"+b._attrs[f[d]]+"'");e.push(">");if(this._sUDa&&this.UserData[b.idd]){keysAr=this.UserData[b.idd].getKeys();for(f=0;f<keysAr.length;f++)e.push("<userdata name='"+
keysAr[f]+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[b.idd].get(keysAr[f])+(this._asCDATA?"]]\x3e":"")+"</userdata>")}for(var f=!1,n=0;n<this._cCount;n++)if(!this._srClmn||this._srClmn[n]){var s=this.cells3(b,n);e.push("<cell");if(k.length)for(d=0;d<k.length;d++)e.push(" "+k[d]+"='"+s.cell._attrs[k[d]]+"'");zxVal=s[this._agetm]();this._asCDATA&&(zxVal="<![CDATA["+zxVal+"]]\x3e");this._ecspn&&s.cell.colSpan&&1<s.cell.colSpan&&e.push(' colspan="'+s.cell.colSpan+'" ');this._chAttr?s.wasChanged()&&
(e.push(' changed="1"'),f=!0):this._onlChAttr&&s.wasChanged()&&(f=!0);this._sAll&&"tree"==this.cellType[n]?e.push((this._h2?" image='"+this._h2.get[b.idd].image+"'":"")+">"+zxVal+"</cell>"):e.push(">"+zxVal+"</cell>");if(this._ecspn&&s.cell.colSpan)for(var u=0;u<s.cell.colSpan-1;u++)e.push("<cell/>"),n++}return this._onlChAttr&&!f&&!b._added?"":e.join("")};this._serialiseConfig=function(){for(var b="<head>",d=0;d<this.hdr.rows[0].cells.length;d++)if(!this._srClmn||this._srClmn[d]){var e=this.fldSort[d];
"cus"==e&&(e=this._customSorts[d].toString(),e=e.replace(/function[\ ]*/,"").replace(/\([^\f]*/,""));b+="<column width='"+this.getColWidth(d)+"' align='"+this.cellAlign[d]+"' type='"+this.cellType[d]+"' sort='"+(e||"na")+"' color='"+this.columnColor[d]+"'"+(this.columnIds[d]?" id='"+this.columnIds[d]+"'":"")+">";b+=this._asCDATA?"<![CDATA["+this.getHeaderCol(d)+"]]\x3e":this.getHeaderCol(d);if(e=this.getCombo(d))for(var f=0;f<e.keys.length;f++)b+="<option value='"+e.keys[f]+"'>"+e.values[f]+"</option>";
b+="</column>"}return b+"</head>"};this.serialize=function(){var b='<?xml version="1.0"?><rows>';this._agetm=this._mathSerialization?"getMathValue":"getValue";if(this._sUDa&&this.UserData.gridglobaluserdata)for(var d=this.UserData.gridglobaluserdata.getKeys(),e=0;e<d.length;e++)b+="<userdata name='"+d[e]+"'>"+this.UserData.gridglobaluserdata.get(d[e])+"</userdata>";this._sConfig&&(b+=this._serialiseConfig());b+=this._serialise();return b+"</rows>"};this.getPosition=function(b,d){if(!d&&!_isChrome){var e=
getOffset(b);return[e.left,e.top]}d=d||document.body;for(var e=b,f=0,k=0;e&&e!=d;)f+=e.offsetLeft-e.scrollLeft,k+=e.offsetTop-e.scrollTop,e=e.offsetParent;d==document.body&&(_isIE?(k+=document.body.offsetTop||document.documentElement.offsetTop,f+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(f+=document.body.offsetLeft,k+=document.body.offsetTop));return[f,k]};this.fixPosition=function(b,d){var e=this.getPosition(b);e[0]+d.clientWidth>this.objBox.scrollWidth&&(e[0]-=d.clientWidth,
e[0]=0>e[0]?0:e[0]);e[1]+d.clientHeight>this.objBox.scrollHeight&&(e[1]-=d.clientHeight,e[1]=0>e[1]?0:e[1]);return e};this.fixPosition2=function(b,d){var e=this.getPosition(b);e[0]+d.clientWidth>document.body.scrollWidth&&(e[0]-=d.clientWidth,e[0]=0>e[0]?0:e[0]);e[1]+d.clientHeight>document.body.scrollHeight-document.body.scrollTop&&(e[1]-=d.clientHeight,e[1]=0>e[1]?0:e[1]);return e};this.getFirstParentOfType=function(b,d){for(;b&&b.tagName!=d&&"BODY"!=b.tagName;)b=b.parentNode;return b};this.objBox.onscroll=
function(){this.grid&&this.grid._doOnScroll()};if(!_isOpera||8.5<_OperaRv)this.hdr.onmousemove=function(b){this.grid.changeCursorState(b||window.event)},this.hdr.onmousedown=function(b){return this.grid.startColResize(b||window.event)};this.obj.onmousemove=this._drawTooltip;this.objBox.onclick=function(b){(b||event).cancelBubble=!0};this.obj.onclick=function(b){this.grid._doClick(b||window.event);this.grid._sclE&&this.grid.editCell(b||window.event);(b||event).cancelBubble=!0};_isMacOS?this.entBox.oncontextmenu=
function(b){b.cancelBubble=!0;b.returnValue=!1;return this.grid._doContClick(b||window.event)}:(this.entBox.onmousedown=function(b){return this.grid._doContClick(b||window.event)},this.entBox.oncontextmenu=function(b){this.grid._ctmndx&&((b||event).cancelBubble=!0);return!this.grid._ctmndx});this.obj.ondblclick=function(b){if(!this.grid.wasDblClicked(b||window.event))return!1;this.grid._dclE&&this.grid.getFirstParentOfType(_isIE?event.srcElement:b.target,"TR")==this.grid.row&&this.grid.editCell(b||
window.event);(b||event).cancelBubble=!0;if(_isOpera)return!1};this.hdr.onclick=this._onHeaderClick;this.sortImg.onclick=function(){e._onHeaderClick.apply({grid:e},[null,e.r_fldSorted])};this.hdr.ondblclick=this._onHeaderDblClick;document.body._dhtmlxgrid_onkeydown||(dhtmlxEvent(document,_isOpera?"keypress":"keydown",function(b){if(globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(b||window.event)}),document.body._dhtmlxgrid_onkeydown=!0);dhtmlxEvent(document.body,"click",function(){e.editStop&&
e.editStop();e.isActive&&e.setActive(!1)});this.entBox.onbeforeactivate=function(){this._still_active=null;this.grid.setActive();event.cancelBubble=!0};this.entBox.onbeforedeactivate=function(){this.grid._still_active?this.grid._still_active=null:this.grid.isActive=!1;event.cancelBubble=!0};-1!=this.entBox.style.height.toString().indexOf("%")&&(this._delta_y=this.entBox.style.height);-1!=this.entBox.style.width.toString().indexOf("%")&&(this._delta_x=this.entBox.style.width);(this._delta_x||this._delta_y)&&
this._setAutoResize();this.setColHidden=this.setColumnsVisibility;this.enableCollSpan=this.enableColSpan;this.setMultiselect=this.enableMultiselect;this.setMultiLine=this.enableMultiline;this.deleteSelectedItem=this.deleteSelectedRows;this.getSelectedId=this.getSelectedRowId;this.getHeaderCol=this.getColumnLabel;this.isItemExists=this.doesRowExist;this.getColumnCount=this.getColumnsNum;this.setSelectedRow=this.selectRowById;this.setHeaderCol=this.setColumnLabel;this.preventIECashing=this.preventIECaching;
this.enableAutoHeigth=this.enableAutoHeight;this.getUID=this.uid;dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);dhtmlx.skin&&this.setSkin(dhtmlx.skin);return this}
dhtmlXGridObject.prototype={getRowAttribute:function(b,d){return this.getRowById(b)._attrs[d]},setRowAttribute:function(b,d,e){this.getRowById(b)._attrs[d]=e},isTreeGrid:function(){return-1!=this.cellType._dhx_find("tree")},setRowHidden:function(b,d){convertStringToBoolean(d);var e=this.getRowById(b);if(e){""===e.expand&&this.collapseKids(e);if(d&&"none"!=e.style.display){e.style.display="none";var f=this.selectedRows._dhx_find(e);if(-1!=f){e.className=e.className.replace("rowselected","");for(var g=
0;g<e.childNodes.length;g++)e.childNodes[g].className=e.childNodes[g].className.replace(/cellselected/g,"");this.selectedRows._dhx_removeAt(f)}this.callEvent("onGridReconstructed",[!0])}!d&&"none"==e.style.display&&(e.style.display="",this.callEvent("onGridReconstructed",[!0]));this.callEvent("onRowHide",[b,d]);this.setSizes()}},setColumnHidden:function(b,d,e){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[b]=d;this.fldSorted&&(this.fldSorted.cellIndex==b&&d)&&(this.sortImg.style.display=
"none");if(convertStringToBoolean(d)){if(this._hrrar){if(this._hrrar[b]&&!e)return}else this._hrrar=[];this._hrrar[b]="display:none;";this._hideShowColumn(b,"none")}else{if(!this._hrrar||!this._hrrar[b])return;this._hrrar[b]="";this._hideShowColumn(b,"")}this.fldSorted&&(this.fldSorted.cellIndex==b&&!d)&&(this.sortImg.style.display="inline");this.setSortImgPos();this.callEvent("onColumnHidden",[b,d])},isColumnHidden:function(b){return this._hrrar&&this._hrrar[b]?!0:!1},setColumnsVisibility:function(b){b&&
(this._ivizcol=b.split(this.delim));if(this.hdr.rows.length&&this._ivizcol)for(b=0;b<this._ivizcol.length;b++)this.setColumnHidden(b,this._ivizcol[b])},_fixHiddenRowsAll:function(b,d,e,f,g){g=g||"_cellIndex";for(var h=b.rows.length,l=0;l<h;l++){var m=b.rows[l].childNodes;if(m.length!=this._cCount)for(var k=0;k<m.length;k++){if(m[k][g]==d){m[k].style[e]=f;if("whiteSpace"==e&&g&&m[k].childNodes[0]){var n=!0;1<m[k].colSpan&&"nowrap"==f&&(n=!this.hasBlockChild(m[k].colSpan,k));if(n){if("nowrap"!=f)for(var n=
this.getHiddenParent(b,m[k]),s=0;s<n.length;s++)n[s].childNodes[0].style.height="",n[s].childNodes[0].style.overflow="";m[k].childNodes[0].style.height="nowrap"==f?"1px":"";m[k].childNodes[0].style.overflow="nowrap"==f?"hidden":""}}break}}else if(m[d].style[e]=f,"whiteSpace"==e&&g&&m[d].childNodes[0]&&(n=!0,1<m[d].colSpan&&"nowrap"==f&&(n=!this.hasBlockChild(m[d].colSpan,d)),n)){if("nowrap"!=f){n=this.getHiddenParent(b,m[d]);for(s=0;s<n.length;s++)n[s].childNodes[0].style.height="",n[s].childNodes[0].style.overflow=
""}m[d].childNodes[0].style.height="nowrap"==f?"1px":"";m[d].childNodes[0].style.overflow="nowrap"==f?"hidden":""}}},hasBlockChild:function(b,d){for(var e=d;e<d+b;e++)if(!this._hrrar[e])return!0;return!1},getBlockChildCount:function(b,d){for(var e=0,f=d;f<d+b;f++)this._hrrar[f]||e++;return e},getHiddenParent:function(b,d){for(var e=[],f=d._cellIndexS,g=0;g<d.parentNode.rowIndex;g++)for(var h=0;h<b.rows[g].cells.length;h++){var l=b.rows[g].cells[h]._cellIndexS;if(l){var m=b.rows[g].cells[h].colSpan?
b.rows[g].cells[h].colSpan:0;l<=f&&l+m>=f&&e.push(b.rows[g].cells[h])}}return e},getActualRowSpan:function(b,d){for(var e=0,f=b;f<b+d;f++)e+=this.isHdrRowHidden(f)?0:1;return e},enableCompatibleHeader:function(b){this._compatibleHeader=convertStringToBoolean(b)},_hideShowColumn:function(b,d){for(var e=!0,f=0;f<this.hdr.rows.length;f++)if(!this.hdr.rows[f].cells[b]||1<1*this.hdr.rows[f].cells[b].colspan)e=!1;if("none"==d){this.hdr.rows[0].cells[b]._oldWidth=this.hdr.rows[0].cells[b].style.width||this.initCellWidth[b]+
"px";this.hdr.rows[0].cells[b]._oldWidthP=this.cellWidthPC[b];if(e&&this._compatibleHeader)for(f=1;f<this.hdr.rows.length;f++){this.hdr.rows[f].cells[b]._oldWidth=this.hdr.rows[0].cells[b].style.width||this.initCellWidth[b]+"px";this.hdr.rows[f].cells[b]._oldWidthP=this.cellWidthPC[b];for(var g=this.hdr.rows[f].cells,h=0,l=0;l<g.length;l++)var m=g[l].colSpan,k=g[l]._cellIndexS,h=1>=m?h+(this._hrrar[k]?1:0):h+(this.hasBlockChild(m,k)?0:1);this.hdr.rows[f]._isHidden=g.length==h?!0:!1}this.obj.rows[0].cells[b].style.width=
"0px";var n={rows:[this.obj.rows[0]]};this.forEachRow(function(b){"TR"==this.rowsAr[b].tagName&&n.rows.push(this.rowsAr[b])});this._fixHiddenRowsAll(n,b,"display","none");this.isTreeGrid()&&this._fixHiddenRowsAllTG(b,"none");(_isOpera&&9>_OperaRv||_isKHTML||_isIE&&e&&this._compatibleHeader)&&this._fixHiddenRowsAll(this.hdr,b,"display","none","_cellIndexS");this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],b,"display","none");this._fixHiddenRowsAll(this.hdr,b,"whiteSpace","nowrap","_cellIndexS");
!this.cellWidthPX.length&&!this.cellWidthPC.length&&(this.cellWidthPX=[].concat(this.initCellWidth));this.cellWidthPX[b]&&(this.cellWidthPX[b]=0);this.cellWidthPC[b]&&(this.cellWidthPC[b]=0)}else this.hdr.rows[0].cells[b]._oldWidth&&(f=this.hdr.rows[0].cells[b],(_isOpera&&9>_OperaRv||_isKHTML||_isIE&&e&&this._compatibleHeader)&&this._fixHiddenRowsAll(this.hdr,b,"display","","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],b,"display",""),n={rows:[this.obj.rows[0]]},this.forEachRow(function(b){"TR"==
this.rowsAr[b].tagName&&n.rows.push(this.rowsAr[b])}),this._fixHiddenRowsAll(n,b,"display",""),this.isTreeGrid()&&this._fixHiddenRowsAllTG(b,""),this._fixHiddenRowsAll(this.hdr,b,"whiteSpace","normal","_cellIndexS"),f._oldWidthP&&(this.cellWidthPC[b]=f._oldWidthP),f._oldWidth&&(this.cellWidthPX[b]=parseInt(f._oldWidth)));for(f=1;f<this.hdr.rows.length;f++){g=this.hdr.rows[f].cells;for(l=h=0;l<g.length;l++)m=g[l].colSpan,k=g[l]._cellIndexS,h=1>=m?h+(this._hrrar[k]?1:0):h+(this.hasBlockChild(m,k)?0:
1);this.hdr.rows[f]._isHidden=g.length==h?!0:!1}this.setSizes();!_isIE&&!_isFF&&(this.obj.border=1,this.obj.border=0)},isHdrRowHidden:function(b){for(var d=this.hdr.rows[b].cells,e=0,f=0;f<d.length;f++)var g=d[f].colSpan,h=d[f]._cellIndexS,e=1>=g?e+(this._hrrar[h]?1:0):e+(this.hasBlockChild(g,h)?0:1);this.hdr.rows[b]._isHidden=d.length-(this._splitColIndex?this._splitColIndex:0)==e?!0:!1;return this.hdr.rows[b]._isHidden},enableColSpan:function(b){this._ecspn=convertStringToBoolean(b)},enableRowsHover:function(b,
d){this._unsetRowHover(!1,!0);this._hvrCss=d;convertStringToBoolean(b)?this._elmnh||(this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0):this._elmnh&&(this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1)},enableActualEditTransition:function(b){this._actualEdit=convertStringToBoolean(b)},enableEditEvents:function(b,
d,e){this._sclE=convertStringToBoolean(b);this._dclE=convertStringToBoolean(d);this._f2kE=convertStringToBoolean(e)},enableLightMouseNavigation:function(b){convertStringToBoolean(b)?this._elmn||(this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return!0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(b){var e=this.grid.getFirstParentOfType(b?b.target:event.srcElement,"TD");e&&(this.grid.editStop(),this.grid.doClick(e),this.grid.editCell(),(b||event).cancelBubble=
!0)},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0):this._elmn&&(this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1)},_unsetRowHover:function(b,d){that=d?this:this.grid;if(that._lahRw&&that._lahRw!=d){for(var e=0;e<that._lahRw.childNodes.length;e++)that._lahRw.childNodes[e].className=that._lahRw.childNodes[e].className.replace(that._hvrCss,"");that._lahRw=null}},_setRowHover:function(b){var d=
this.grid.getFirstParentOfType(b?b.target:event.srcElement,"TD");if(d&&d.parentNode!=this.grid._lahRw){this.grid._unsetRowHover(0,d);d=d.parentNode;if(!d.idd||"__filler__"==d.idd)return;for(var e=0;e<d.childNodes.length;e++)d.childNodes[e].className+=" "+this.grid._hvrCss;this.grid._lahRw=d}this._honmousemove(b)},_autoMoveSelect:function(b){if(!this.grid.editor){var d=this.grid.getFirstParentOfType(b?b.target:event.srcElement,"TD");d.parentNode.idd&&this.grid.doClick(d,!0,0)}this._onmousemove(b)},
enableDistributedParsing:function(b,d,e){convertStringToBoolean(b)?(this._ads_count=d||10,this._ads_time=e||250):this._ads_count=0},destructor:function(){this.editStop(!0);this._sizeTime&&(this._sizeTime=window.clearTimeout(this._sizeTime));this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,"");if(this.formInputs)for(var b=0;b<this.formInputs.length;b++)this.parentForm.removeChild(this.formInputs[b]);var d;this.xmlLoader=this.xmlLoader.destructor();for(b=0;b<this.rowsCol.length;b++)this.rowsCol[b]&&
(this.rowsCol[b].grid=null);for(b in this.rowsAr)this.rowsAr[b]&&(this.rowsAr[b]=null);this.rowsCol=new dhtmlxArray;this.rowsAr={};this.entBox.innerHTML="";this.setSizes=this._update_srnd_view=this.callEvent=this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=this.objBox.onscroll=function(){};this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null;for(d in this)this[d]&&
this[d].m_obj&&(this[d].m_obj=null),this[d]=null;this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null);return null},getSortingState:function(){var b=[];this.fldSorted&&(b[0]=this.fldSorted._cellIndex,b[1]=-1!=this.sortImg.src.indexOf("sort_desc.gif")?"des":"asc");return b},enableAutoHeight:function(b,d,e){this._ahgr=convertStringToBoolean(b);this._ahgrF=convertStringToBoolean(e);this._ahgrM=d||null;1==arguments.length&&(this.objBox.style.overflowY=b?"hidden":"auto");"auto"==d&&(this._ahgrM=
null,this._ahgrMA=!0,this._setAutoResize())},enableStableSorting:function(b){this._sst=convertStringToBoolean(b);this.rowsCol.stablesort=function(b){for(var e=this.length-1,f=0;f<this.length-1;f++){for(var g=0;g<e;g++)if(0<b(this[g],this[g+1])){var h=this[g];this[g]=this[g+1];this[g+1]=h}e--}}},enableKeyboardSupport:function(b){this._htkebl=!convertStringToBoolean(b)},enableContextMenu:function(b){this._ctmndx=b},setScrollbarWidthCorrection:function(){},enableTooltips:function(b){this._enbTts=b.split(",");
for(b=0;b<this._enbTts.length;b++)this._enbTts[b]=convertStringToBoolean(this._enbTts[b])},enableResizing:function(b){this._drsclmn=b.split(",");for(b=0;b<this._drsclmn.length;b++)this._drsclmn[b]=convertStringToBoolean(this._drsclmn[b])},setColumnMinWidth:function(b,d){2==arguments.length?(this._drsclmW||(this._drsclmW=[]),this._drsclmW[d]=b):this._drsclmW=b.split(",")},enableCellIds:function(b){this._enbCid=convertStringToBoolean(b)},lockRow:function(b,d){var e=this.getRowById(b);e&&(e._locked=
convertStringToBoolean(d),this.cell&&this.cell.parentNode.idd==b&&this.editStop())},_getRowArray:function(b){for(var d=[],e=0;e<b.childNodes.length;e++){var f=this.cells3(b,e);d[e]=f.getValue()}return d},enableColFormatValue:function(b,d){1==arguments.length?this._formatVal=b:(this._formatVals=this._formatVals?this._formatVals:[],this._formatVals[d]=b)},setColDateFormat:function(b,d){if(1==arguments.length)this._dtmask=b;else{"object"!=typeof this._dtmask_inc&&(this._dtmask_inc=[]);var e=d;"string"==
typeof d&&(e=this.getColIndexById(d));this._dtmask_inc[e]=b}},setValueDateFormat:function(b,d){if(1==arguments.length)this._dtformat=b;else{"object"!=typeof this._dtformat_inc&&(this._dtformat_inc=[]);var e=d;"string"==typeof d&&isNaN(d)&&(e=this.getColIndexById(d));this._dtformat_inc[1*e]=b}},getValueDateFormat:function(b){return 0==arguments.length?this._dtformat:this._dtformat_inc[b]},setDateFormat:function(b,d,e){1==arguments.length?this._dtmask=b:(this._dtmask_inc||(this._dtmask_inc=[]),"number"==
typeof d?this._dtmask_inc[d]=b:this._dtmask_inc[e]=b)},setNumberFormat:function(b,d,e,f){var g=b.replace(/[^0\,\.]*/g,""),h=g.indexOf(".");-1<h&&(h=g.length-h-1);var l=g.indexOf(",");-1<l&&(l=g.length-h-2-l);"string"!=typeof e&&(e=this.i18n.decimal_separator);"string"!=typeof f&&(f=this.i18n.group_separator);var m=b.split(g)[0];b=b.split(g)[1];this._maskArr[d]=[h,l,m,b,e,f]},_aplNFb:function(b,d,e){d=e||this._maskArr[d];if(!d)return b;e=parseFloat(b.toString().replace(/[^0-9]*/g,""));"-"==b.toString().substr(0,
1)&&(e*=-1);var f=b.toString().indexOf(d[4]),g=d[0];if(-1==f||b.toString().substr(f+1).length<d[0])g=-1==f?0:b.toString().substr(f+1).length;0<g&&(e/=Math.pow(10,g));return e},_aplNF:function(b,d,e){d=e||this._maskArr[d];if(!d)return b;e=(0>parseFloat(b)?"-":"")+d[2];b=Math.abs(Math.round(parseFloat(b)*Math.pow(10,0<d[0]?d[0]:0))).toString();b=(b.length<d[0]?Math.pow(10,d[0]+1-b.length).toString().substr(1,d[0]+1)+b.toString():b).split("").reverse();b[d[0]]=(b[d[0]]||"0")+d[4];if(0<d[1])for(var f=
(0<d[0]?0:1)+d[0]+d[1];f<b.length;f+=d[1])b[f]+=d[5];return e+b.reverse().join("")+d[3]},_launchCommands:function(b){for(var d=0;d<b.length;d++){for(var e=[],f=0;f<b[d].childNodes.length;f++)if(1==b[d].childNodes[f].nodeType){var g=b[d].childNodes[f].firstChild.data;if(g&&-1<g.indexOf("function()"))try{"function"==typeof eval("(function(){return "+g+"})()")&&(g=eval("(function(){return "+g+"})()"))}catch(h){}e[e.length]=g}this[b[d].getAttribute("command")].apply(this,e);if(_isIE&&this._ivizcol&&"./afterInit/call"==
b.expr&&"attachHeader"==b[d].getAttribute("command"))for(e=0;e<this._ivizcol.length;e++)this.setColumnHidden(e,this._ivizcol[e],!0)}},_parseHead:function(b){var d=this.xmlLoader.doXPath("./head",b);if(d.length){var e=this.xmlLoader.doXPath("./column",d[0]),f=this.xmlLoader.doXPath("./settings",d[0]),g="setInitWidths",h=!1;if(f[0])for(var l=0;l<f[0].childNodes.length;l++)switch(f[0].childNodes[l].tagName){case "colwidth":f[0].childNodes[l].firstChild&&"%"==f[0].childNodes[l].firstChild.data&&(g="setInitWidthsP");
break;case "splitat":h=f[0].childNodes[l].firstChild?f[0].childNodes[l].firstChild.data:!1}this._launchCommands(this.xmlLoader.doXPath("./beforeInit/call",d[0]));if(0<e.length){0<this.hdr.rows.length&&this.clearAll(!0);for(var f=[[],[],[],[],[],[],[],[],[],[],[]],m=" width type align sort color format hidden id hdCss colVal".split(" "),k=["",g,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds","","setColValidators"],l=0;l<e.length;l++){for(g=1;g<m.length;g++)f[g].push(e[l].getAttribute(m[g]));
f[0].push((e[l].textContent?e[l].textContent:e[l].firstChild?e[l].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(f[0],null,f[9]);for(l=0;l<k.length;l++)if(k[l]&&this[k[l]])if("setColValidators"==k[l])this[k[l]](f[l]);else{if("setColTypes"==k[l])for(m=0;m<f[l].length;m++)-1<f[l][m].indexOf(this.delim)&&(f[l][m]=f[l][m].replace(RegExp(this.delim,"ig"),this.specialDelim));this[k[l]](f[l].join(this.delim))}for(l=0;l<e.length;l++)if(0==this.cellType[l].indexOf("co")||0==this.cellType[l].indexOf("mathco")||
"clist"==this.cellType[l]||"clist2"==this.cellType[l]){if(k=this.xmlLoader.doXPath("./option",e[l]),k.length)if(m=[],"clist"==this.cellType[l]){for(g=0;g<k.length;g++)m[m.length]=k[g].firstChild?k[g].firstChild.data:"";this.registerCList(l,m)}else if("clist2"==this.cellType[l]){for(var n={},g=0;g<k.length;g++)n[k[g].getAttribute("value")]=k[g].firstChild?k[g].firstChild.data:"";this.registerCList2(l,n)}else{n=this.getCombo(l);for(g=0;g<k.length;g++){for(var s=[],m=0;m<k[g].attributes.length;m++){var u=
k[g].attributes[m];"value"!=u.name&&"label"!=u.name&&s.push([u.name,u.value])}n.put(k[g].getAttribute("value"),k[g].firstChild?k[g].firstChild.data:"",s.length?s:null)}}}else f[6][l]&&(-1!=this.cellType[l].toLowerCase().indexOf("calendar")||"date"==this.fldSort[l]?this.setDateFormat(f[6][l]):this.setNumberFormat(f[6][l],l));this.init();e=f[7].join(this.delim);this.setColHidden&&""!=e.replace(/,/g,"")&&this.setColHidden(e);h&&this.splitAt&&this.splitAt(h)}this._launchCommands(this.xmlLoader.doXPath("./afterInit/call",
d[0]))}b=this.xmlLoader.doXPath("//rows/userdata",b);if(0<b.length){this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable);for(g=0;g<b.length;g++){d="";for(h=0;h<b[g].childNodes.length;h++)d+=b[g].childNodes[h].nodeValue;this.UserData.gridglobaluserdata.put(b[g].getAttribute("name"),d)}}},getAllCheckedRows:function(b){var d=[];this.forEachRowB(function(e,f){this.cells(e,b).isChecked()&&d.push(e)},!0);return d.join(",")},getCheckedRows:function(b){var d=[];this._h2?this.forEachRowB(function(e){0!=
this.cells(e,b).getValue()&&d.push(e)},!0):this.forEachRowA(function(e){0!=this.cells(e,b).getValue()&&d.push(e)},!0);return d.join(",")},checkAll:function(){for(var b=arguments.length?arguments[0]:1,d=0;d<this.getColumnsNum();d++)"ch"==this.getColType(d)&&this.setCheckedRows(d,b)},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(b,d){this.forEachRowA(function(e){this.cells(e,b).isCheckbox()&&this.cells(e,b).setValue(d)})},_drawTooltip:function(b){var d=this.grid.getFirstParentOfType(b?
b.target:event.srcElement,"TD");if(!d||this.grid.editor&&this.grid.editor.cell==d)return!0;var e=d.parentNode;if(e.idd&&"__filler__"!=e.idd){var f=b?b.target:event.srcElement;if(e.idd==window.unknown||!this.grid.callEvent("onMouseOver",[e.idd,d._cellIndex,b||window.event]))return!0;if(this.grid._enbTts&&!this.grid._enbTts[d._cellIndex])return f.title&&(f.title=""),!0;if(!(d._cellIndex>=this.grid._cCount)&&(b=this.grid.cells3(e,d._cellIndex))&&b.cell&&b.cell._attrs){f._title&&(b.cell.title="");b.cell._attrs.title||
(f._title=!0);if(b&&(b=b.cell._attrs.title||(b.getTitle?b.getTitle():(b.getValue()||"").toString().replace(/<[^>]*>/gi,"")))&&b._dhx_trim())f.title=b;return!0}}},bU:function(b){_isFF&&(this._wcorr=parseInt(b))},getAllRowIds:function(b){for(var d=[],e=0;e<this.rowsBuffer.length;e++)this.rowsBuffer[e]&&d.push(this.rowsBuffer[e].idd);return d.join(b||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(b,d,e){if(this._ecspn){b=this.getRowById(b);if(b._childIndexes&&b.childNodes[b._childIndexes[d]]){var f=
b._childIndexes[d],g=b.childNodes[f],h=g.colSpan;g.colSpan=1;if(h&&1!=h)for(var l=1;l<h;l++){var m=document.createElement("TD");g.nextSibling?b.insertBefore(m,g.nextSibling):b.appendChild(m);b._childIndexes[d+l]=f+l;m._cellIndex=d+l;m.style.textAlign=this.cellAlign[l];m.style.verticalAlign=this.cellVAlign[l];g=m;this.cells3(b,d+l).setValue("")}for(g=1*d+1*h;g<b._childIndexes.length;g++)b._childIndexes[g]+=1*(h-1)}if(e&&1<e){if(b._childIndexes)f=b._childIndexes[d];else{f=d;b._childIndexes=[];for(g=
0;g<b.childNodes.length;g++)b._childIndexes[g]=g}b.childNodes[f].colSpan=e;for(g=1;g<e;g++)b._childIndexes[b.childNodes[f+1]._cellIndex]=f,b.removeChild(b.childNodes[f+1]);for(g=1*b.childNodes[b._childIndexes[d]]._cellIndex+1*e;g<b._childIndexes.length;g++)b._childIndexes[g]-=e-1}}},preventIECaching:function(b){this.no_cashe=convertStringToBoolean(b);this.xmlLoader.rSeed=this.no_cashe},enableColumnAutoSize:function(b){this._eCAS=convertStringToBoolean(b)},_onHeaderDblClick:function(b){var d=this.grid;
b=d.getFirstParentOfType(_isIE?event.srcElement:b.target,"TD");if(!d._eCAS)return!1;d.adjustColumnSize(b._cellIndexS)},adjustColumnSize:function(b,d){if(!this._hrrar||!this._hrrar[b]){this._notresize=!0;var e=0;this._setColumnSizeR(b,20);for(var f=1;f<this.hdr.rows.length;f++){var g=this.hdr.rows[f];if((g=g.childNodes[g._childIndexes?g._childIndexes[b]:b])&&(!g.colSpan||2>g.colSpan)&&g._cellIndex==b)g.childNodes[0]&&"hdrcell"==g.childNodes[0].className&&(g=g.childNodes[0]),e=Math.max(e,_isFF||_isOpera?
g.textContent.length*this.fontWidth:g.scrollWidth)}f=this.obj.rows.length;for(g=1;g<f;g++){var h=this.obj.rows[g];this.rowsAr[h.idd]&&!(h._childIndexes&&h._childIndexes[b]!=b)&&h.childNodes[b]&&(h=_isFF||_isOpera||d?h.childNodes[b].textContent.length*this.fontWidth:h.childNodes[b].scrollWidth,h>e&&(e=h))}this._setColumnSizeR(b,e+(20+(d||0)));this._notresize=!1;this.setSizes()}},detachHeader:function(b,d){d=d||this.hdr;var e=d.rows[b+1];e&&(this.resetFilters(),e.parentNode.removeChild(e));this.setSizes()},
detachFooter:function(b){this.detachHeader(b,this.ftr)},attachHeader:function(b,d,e){"string"==typeof b&&(b=this._eSplit(b));"string"==typeof d&&(d=d.split(this.delim));e=e||"_aHead";if(this.hdr.rows.length)if(b)this._createHRow([b,d],this["_aHead"==e?"hdr":"ftr"]);else{if(this[e])for(b=0;b<this[e].length;b++)this.attachHeader.apply(this,this[e][b])}else this[e]||(this[e]=[]),this[e][this[e].length]=[b,d,e]},_createHRow:function(b,d){if(!d){"absolute"!=this.entBox.style.position&&(this.entBox.style.position=
"relative");var e=document.createElement("DIV");e.className="ftr";this.entBox.appendChild(e);var f=document.createElement("TABLE");f.cellPadding=f.cellSpacing=0;_isIE||(f.width="100%",f.style.paddingRight="20px");f.style.marginRight="20px";f.style.tableLayout="fixed";e.appendChild(f);f.appendChild(document.createElement("TBODY"));this.ftr=d=f;for(var e=f.insertRow(0),g=1>=this.hdrLabels.length?b[0].length:this.hdrLabels.length,h=0;h<g;h++)e.appendChild(document.createElement("TH")),e.childNodes[h]._cellIndex=
h;e.style.height="auto"}g=b[1];e=document.createElement("TR");d.rows[0].parentNode.appendChild(e);for(h=0;h<b[0].length;h++)if("#cspan"==b[0][h])f=e.cells[e.cells.length-1],f.colSpan=(f.colSpan||1)+1;else if("#rspan"==b[0][h]&&1<d.rows.length){for(var l=d.rows.length-2,m=!1,f=null;!m;){for(var f=d.rows[l],k=0;k<f.cells.length;k++)if(f.cells[k]._cellIndex==h){m=k+1;break}l--}f=f.cells[m-1];f.rowSpan=(f.rowSpan||1)+1}else{l=document.createElement("TD");l._cellIndex=l._cellIndexS=h;if("object"==typeof b[0][h])l.appendChild(b[0][h]);
else if(l.innerHTML=this.forceDivInHeader?"<div class='hdrcell'>"+(b[0][h]||"&nbsp;")+"</div>":b[0][h]||"&nbsp;",-1!=(b[0][h]||"").indexOf("#"))if(f=b[0][h].match(/(^|{)#([^}]+)(}|$)/))if(m="_in_header_"+f[2],this[m])this[m](this.forceDivInHeader?l.firstChild:l,h,b[0][h].split(f[0]));g&&(l.style.cssText=g[h]);e.appendChild(l)}_isKHTML&&(d._kTimer&&window.clearTimeout(d._kTimer),d._kTimer=window.setTimeout(function(){d.rows[1].style.display="none";window.setTimeout(function(){d.rows[1].style.display=
""},1)},500))},attachFooter:function(b,d){this.attachHeader(b,d,"_aFoot")},setCellExcellType:function(b,d,e){this.changeCellType(this.getRowById(b),d,e)},changeCellType:function(b,d,e){e=e||this.cellType[d];var f=this.cells3(b,d),g=f.getValue();f.cell._cellType=e;f=this.cells3(b,d);f.setValue(g)},setRowAfterUpdated:function(b){for(var d=this.getRowById(b),e=0;e<d.cells.length;e++){var f=d.cells[e];f.originalVal=this.cells(b,f._cellIndex).getValue()}},setRowExcellType:function(b,d){for(var e=this.rowsAr[b],
f=0;f<e.childNodes.length;f++)this.changeCellType(e,f,d)},setColumnExcellType:function(b,d){for(var e=0;e<this.rowsBuffer.length;e++)this.rowsBuffer[e]&&"TR"==this.rowsBuffer[e].tagName&&this.changeCellType(this.rowsBuffer[e],b,d);"0"==this.cellType[b].indexOf("math")?this._strangeParams[e]=d:this.cellType[b]=d},forEachRow:function(b){for(var d in this.rowsAr)this.rowsAr[d]&&this.rowsAr[d].idd&&b.apply(this,[this.rowsAr[d].idd])},forEachRowA:function(b){for(var d=0;d<this.rowsBuffer.length;d++)this.rowsBuffer[d]&&
b.call(this,this.render_row(d).idd)},forEachRowB:function(b){for(var d in this.rowsAr)this.rowsAr[d]&&b.call(this,this.rowsAr[d].idd)},forEachCell:function(b,d){var e=this.getRowById(b);if(e)for(var f=0;f<this._cCount;f++)d(this.cells3(e,f),f)},enableAutoWidth:function(b,d,e){this._awdth=[convertStringToBoolean(b),parseInt(d||99999),parseInt(e||0)];1==arguments.length&&(this.objBox.style.overflowX=b?"hidden":"auto")},updateFromXML:function(b,d,e,f){"undefined"==typeof d&&(d=!0);this._refresh_mode=
[!0,d,e];this.load(b,f)},updateFromXMLString:function(b,d,e,f){"undefined"==typeof d&&(d=!0);this._refresh_mode=[!0,d,e];this.loadXMLString(b,f)},_refreshFromXML:function(b){this._f_rowsBuffer&&this.filterBy(0,"");reset=!1;window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(b){this.grid._h2.get[this.cell.parentNode.idd]&&this.cell.parentNode.valTag?this.setLabel(b):this.setValueX(b)});var d=this.cellType._dhx_find("tree");b.getXMLTopNode("rows");
var e=b.doXPath("//rows")[0].getAttribute("parent")||0,f={};this._refresh_mode[2]&&(-1!=d?this._h2.forEachChild(e,function(b){f[b.id]=!0},this):this.forEachRow(function(b){f[b]=!0}));b=b.doXPath("//row");for(d=0;d<b.length;d++){var g=b[d],h=g.getAttribute("id");f[h]=!1;e=g.parentNode.getAttribute("id")||e;if(this.rowsAr[h]&&"TR"!=this.rowsAr[h].tagName)this._h2?this._h2.get[h].buff.data=g:this.rowsBuffer[this.getRowIndex(h)].data=g,this.rowsAr[h]=g;else if(this.rowsAr[h])this._process_xml_row(this.rowsAr[h],
g,-1),this._postRowProcessing(this.rowsAr[h],!0);else if(this._refresh_mode[1]){var l={idd:h,data:g,_parser:this._process_xml_row,_locator:this._get_xml_data},m=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(l),m=0):this.rowsBuffer.push(l);this._h2&&(reset=!0,this._h2.add(h,g.parentNode.getAttribute("id")||g.parentNode.getAttribute("parent")).buff=this.rowsBuffer[this.rowsBuffer.length-1]);this.rowsAr[h]=g;g=this.render_row(m);this._insertRowAt(g,m?-1:0)}}if(this._refresh_mode[2])for(h in f)f[h]&&
this.rowsAr[h]&&this.deleteRow(h);this._refresh_mode=null;window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX);reset&&this._renderSort();this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},getCustomCombo:function(b,d){var e=this.cells(b,d).cell;e._combo||(e._combo=new dhtmlXGridComboObject);return e._combo},setTabOrder:function(b){var d=b.split(this.delim);this._tabOrder=[];b=this._cCount||b.length;for(var e=0;e<b;e++)d[e]={c:parseInt(d[e]),ind:e};d.sort(function(b,
d){return b.c>d.c?1:-1});for(e=0;e<b;e++)this._tabOrder[d[e].ind]=!d[e+1]||"undefined"==typeof d[e].c?-1*(d[0].ind+1):d[e+1].ind},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var b=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[b+1],this.cell._cellIndex,!0)},k13_0_1:function(){var b=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[b-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",
[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]);this._still_active=!0},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[!0]))return!0;var b=this._getNextCell(null,1);b&&(this.selectCell(b.parentNode,b._cellIndex,this.row!=b.parentNode,!1,!0),this._still_active=!0)},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[!1]))return!1;var b=this._getNextCell(null,-1);b&&(this.selectCell(b.parentNode,b._cellIndex,this.row!=b.parentNode,!1,!0),this._still_active=
!0)},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var b=this.cells4(this.cell);if(!b.changeState||!1===b.changeState())return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(!this.editor&&this.isTreeGrid())this.collapseKids(this.row);else return!1},k39_0_0:function(){if(!this.editor&&
this.isTreeGrid())this.expandKids(this.row);else return!1},k40_0_0:function(){var b=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var d=Math.max(b._r_select||0,this.getRowIndex(this.row.idd))+1;if(this.rowsBuffer[d])b._r_select=null,this.selectCell(d,this.cell._cellIndex,!0),b.pagingOn&&b.showRow(b.getRowId(d));else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[]);this.pagingOn&&this.rowsCol[d]&&
this.selectCell(d,0,!0)}}this._still_active=!0},k38_0_0:function(){var b=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var d=this.getRowIndex(this.row.idd)+1;-1!=d&&(!this.pagingOn||1!=d)?(d=this._nextRow(d-1,-1),this.selectCell(d,this.cell._cellIndex,!0),b.pagingOn&&d&&b.showRow(d.idd)):this._key_events.k33_0_0.apply(this,[])}this._still_active=!0}},_build_master_row:function(){for(var b=document.createElement("DIV"),d=["<table><tr>"],
e=0;e<this._cCount;e++)d.push("<td></td>");d.push("</tr></table>");b.innerHTML=d.join("");this._master_row=b.firstChild.rows[0]},_prepareRow:function(b){this._master_row||this._build_master_row();for(var d=this._master_row.cloneNode(!0),e=0;e<d.childNodes.length;e++)d.childNodes[e]._cellIndex=e,this._enbCid&&(d.childNodes[e].id="c_"+b+"_"+e),this.dragAndDropOff&&this.dragger.addDraggableItem(d.childNodes[e],this);d.idd=b;d.grid=this;return d},_process_jsarray_row:function(b,d){b._attrs={};for(var e=
0;e<b.childNodes.length;e++)b.childNodes[e]._attrs={};this._fillRow(b,this._c_order?this._swapColumns(d):d);return b},_get_jsarray_data:function(b,d){return b[d]},_process_json_row:function(b,d){b._attrs={};for(var e=0;e<b.childNodes.length;e++)b.childNodes[e]._attrs={};this._fillRow(b,this._c_order?this._swapColumns(d.data):d.data);return b},_get_json_data:function(b,d){return b.data[d]},_process_csv_row:function(b,d){b._attrs={};for(var e=0;e<b.childNodes.length;e++)b.childNodes[e]._attrs={};this._fillRow(b,
this._c_order?this._swapColumns(d.split(this.csv.cell)):d.split(this.csv.cell));return b},_get_csv_data:function(b,d){return b.split(this.csv.cell)[d]},_process_store_row:function(b,d){for(var e=[],f=0;f<this.columnIds.length;f++)e[f]=d[this.columnIds[f]];for(f=0;f<b.childNodes.length;f++)b.childNodes[f]._attrs={};b._attrs=d;this._fillRow(b,this._c_order?this._swapColumns(e):e)},_process_xml_row:function(b,d,e){var f="object"==typeof e?e:this.xmlLoader;e=f.doXPath(this.xml.cell,d);var g=[];b._attrs=
this._xml_attrs(d);if(this._ud_enabled)for(var f=f.doXPath("./userdata",d),h=f.length-1;0<=h;h--){var l="";for(d=0;d<f[h].childNodes.length;d++)l+=f[h].childNodes[d].nodeValue;this.setUserData(b.idd,f[h].getAttribute("name"),l)}for(d=0;d<e.length;d++)if(f=e[this._c_order?this._c_order[d]:d])h=b._childIndexes?b._childIndexes[d]:d,l=f.getAttribute("type"),b.childNodes[h]&&(l&&(b.childNodes[h]._cellType=l),b.childNodes[h]._attrs=this._xml_attrs(f)),f.getAttribute("xmlcontent")||(f=f.firstChild?f.firstChild.data:
""),g.push(f);for(;d<b.childNodes.length;d++)b.childNodes[d]._attrs={};b.parentNode&&"row"==b.parentNode.tagName&&(b._attrs.parent=b.parentNode.getAttribute("idd"));this._fillRow(b,g);return b},_get_xml_data:function(b,d){for(b=b.firstChild;;){if(!b)return"";"cell"==b.tagName&&d--;if(0>d)break;b=b.nextSibling}return b.firstChild?b.firstChild.data:""},_fillRow:function(b,d){this.editor&&this.editStop();var e=!1;this._h2&&(e=!(this._h2.get[b.idd||b._attrs.id]||this._f_rowsBuffer.get[b.idd||b._attrs.id]).childs.length);
for(var f=0;f<b.childNodes.length;f++)if(f<d.length||this.defVal[f]){var g=b.childNodes[f]._cellIndex,h=d[g];null!=h&&(!h.indexOf&&h.toString)&&(h=h.toString());var l=h&&0==h.indexOf("=")?1:0;e&&"math"==this.cellType[g]&&(this.defVal[g]&&0==this.defVal[g].indexOf("=sum")&&!l)&&(b.childNodes[f]._cellType=this._strangeParams[g]);var m=this.cells4(b.childNodes[f]),l=""==h||"undefined"==typeof h||this._mathUp||l;this.defVal[g]&&l&&(h="=sum"!=this.defVal[g]||!e?this.defVal[g]:h);m&&m.setValue(h,this._lazyCompile?
!0:!1,!0)}else b.childNodes[f].appendChild(document.createTextNode(" ")),b.childNodes[f]._clearCell=!0;return b},_postRowProcessing:function(b,d){b._attrs["class"]&&(b._css=b.className=b._attrs["class"]);b._attrs.locked&&(b._locked=!0);b._attrs.bgColor&&(b.bgColor=b._attrs.bgColor);b._attrs.style&&(b.style.cssText+=";"+b._attrs.style);for(var e=0,f=0;f<b.childNodes.length;f++){var g=b.childNodes[f],h=g._cellIndex,l=g._attrs.style||b._attrs.style;l&&(g.style.cssText+=";"+l);g._attrs["class"]&&(g.className=
g._attrs["class"]);if(l=g._attrs.align||this.cellAlign[h])g.align=l;g.vAlign=g._attrs.valign||this.cellVAlign[h];if(l=g._attrs.bgColor||this.columnColor[h])g.bgColor=l;g._attrs.colspan&&!d&&(this.setColspan(b.idd,f+e,g._attrs.colspan),e+=g._attrs.colspan-1);this._hrrar&&(this._hrrar[h]&&!d)&&(g.style.display="none")}this.callEvent("onRowCreated",[b.idd,b,null])},load:function(b,d,e){this.callEvent("onXLS",[this]);2==arguments.length&&"function"!=typeof d&&(e=d,d=null);e=e||"xml";if(!this.xmlFileUrl||
b)this.xmlFileUrl=b;this._data_type=e;this._is_loading=!0;this.xmlLoader.onloadAction=function(b,g,h,l,m){b.callEvent&&(m=b["_process_"+e](m),b._is_loading=!1,b._contextCallTimer||b.callEvent("onXLE",[b,0,0,m]),d&&(d(),d=null))};this.xmlLoader.loadXML(b,null,null,!0)},loadXMLString:function(b,d){var e=new dtmlXMLLoaderObject(function(){});e.loadXMLString(b);this.parse(e,d,"xml")},loadXML:function(b,d){this.load(b,d,"xml")},parse:function(b,d,e){2==arguments.length&&"function"!=typeof d&&(e=d,d=null);
this._data_type=e=e||"xml";b=this["_process_"+e](b);this._contextCallTimer||this.callEvent("onXLE",[this,0,0,b]);d&&d()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:"\t"},_xml_attrs:function(b){var d={};if(b.attributes.length)for(var e=0;e<b.attributes.length;e++)d[b.attributes[e].name]=b.attributes[e].value;return d},_process_xml:function(b){if(!b.doXPath){var d=new dtmlXMLLoaderObject(function(){});"string"==typeof b?d.loadXMLString(b):
(d.xmlDoc=b.responseXML?b:{},d.xmlDoc.responseXML=b);b=d}this.callEvent("onXLP",[b.xmlDoc.responseXML?b.xmlDoc.responseXML:b.xmlDoc,b]);if(this._refresh_mode)return this._refreshFromXML(b);this._parsing=!0;d=b.getXMLTopNode(this.xml.top);if(d.tagName.toLowerCase()==this.xml.top){(!this.hdr.rows.length||!this._colls_loaded)&&this._parseHead(d);var d=b.doXPath(this.xml.row,d),e=parseInt(b.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),f=parseInt(b.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||
0),g=!1;f&&(this.rowsBuffer[f-1]||(this.rowsBuffer.length&&(g=!0),this.rowsBuffer[f-1]=null),f<this.rowsBuffer.length&&(this.rowsBuffer.splice(f,this.rowsBuffer.length-f),g=!0));if(this.isTreeGrid())return this._process_tree_xml(b);for(f=0;f<d.length;f++)if(!this.rowsBuffer[f+e]){var h=d[f].getAttribute("id")||f+e+1;this.rowsBuffer[f+e]={idd:h,data:d[f],_parser:this._process_xml_row,_locator:this._get_xml_data};this.rowsAr[h]=d[f]}g&&this._srnd?(d=this.objBox.scrollTop,this._reset_view(),this.objBox.scrollTop=
d):this.render_dataset();this._parsing=!1;return b.xmlDoc.responseXML?b.xmlDoc.responseXML:b.xmlDoc}},_process_jsarray:function(b){this._parsing=!0;b&&b.xmlDoc&&(eval("dhtmlx.temp="+b.xmlDoc.responseText+";"),b=dhtmlx.temp);for(var d=0;d<b.length;d++){var e=d+1;this.rowsBuffer.push({idd:e,data:b[d],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data});this.rowsAr[e]=b[d]}this.render_dataset();this._parsing=!1},_process_csv:function(b){this._parsing=!0;b.xmlDoc&&(b=b.xmlDoc.responseText);
b=b.replace(/\r/g,"");b=b.split(this.csv.row);if(this._csvHdr){this.clearAll();var d=b.splice(0,1)[0].split(this.csv.cell);this._csvAID||d.splice(0,1);this.setHeader(d.join(this.delim));this.init()}for(d=0;d<b.length;d++)if(b[d]||d!=b.length-1){if(this._csvAID){var e=d+1;this.rowsBuffer.push({idd:e,data:b[d],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var f=b[d].split(this.csv.cell),e=f.splice(0,1)[0];this.rowsBuffer.push({idd:e,data:f,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[e]=
b[d]}this.render_dataset();this._parsing=!1},_process_json:function(b){this._parsing=!0;b&&b.xmlDoc&&(eval("dhtmlx.temp="+b.xmlDoc.responseText+";"),b=dhtmlx.temp);for(var d=0;d<b.rows.length;d++){var e=b.rows[d].id;this.rowsBuffer.push({idd:e,data:b.rows[d],_parser:this._process_json_row,_locator:this._get_json_data});this.rowsAr[e]=b[d]}this.render_dataset();this._parsing=!1},render_dataset:function(b,d){if(this._srnd){if(this._fillers)return this._update_srnd_view();d=Math.min(this._get_view_size()+
(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(b=Math.max(b||0,(this.currentPage-1)*this.rowsBufferOutSize),d=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(b=b||0,d=d||this.rowsBuffer.length);for(var e=this.xmlLoader.xmlDoc.responseXML,f=b;f<d;f++){var g=this.render_row(f);if(0>g){if(-1==g&&this.xmlFileUrl&&this.callEvent("onDynXLS",[f,this._dpref?this._dpref:d-f]))this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+f+"&count="+(this._dpref?
this._dpref:d-f),this._data_type);d=f;break}if(!g.parentNode||!g.parentNode.tagName)if(this._insertRowAt(g,f),g._attrs.selected||g._attrs.select)this.selectRow(g,g._attrs.call?!0:!1,!0),g._attrs.selected=g._attrs.select=null;if(this._ads_count&&f-b==this._ads_count){var h=this;this._context_parsing=this._context_parsing||this._parsing;return this._contextCallTimer=window.setTimeout(function(){h._contextCallTimer=null;h.render_dataset(f,d);h._contextCallTimer||(h._context_parsing?h.callEvent("onXLE",
[]):h._fixAlterCss(),h.callEvent("onDistributedEnd",[]),h._context_parsing=!1)},this._ads_time)}}this.callEvent("onRenderSet",[null,null,null,e]);this._srnd&&!this._fillers&&(this._fillers=[this._add_filler(d,this.rowsBuffer.length-d)]);this.setSizes()},render_row:function(b){if(!this.rowsBuffer[b])return-1;if(this.rowsBuffer[b]._parser){var d=this.rowsBuffer[b];if(this.rowsAr[d.idd]&&"TR"==this.rowsAr[d.idd].tagName)return this.rowsBuffer[b]=this.rowsAr[d.idd];var e=this._prepareRow(d.idd);this.rowsBuffer[b]=
e;this.rowsAr[d.idd]=e;d._parser.call(this,e,d.data);this._postRowProcessing(e);return e}return this.rowsBuffer[b]},_get_cell_value:function(b,d,e){if(b._locator)if(this._c_order&&(d=this._c_order[d]),b=b._locator.call(this,b.data,d),"getText"==e)if(e=null,-1<this.cellType[d].indexOf("combo"))e=this.getColumnCombo(d),b=(d=e.getOption(b))?d.text:b;else{if(0==this.cellType[d].indexOf("co")||0==this.cellType[d].indexOf("mathco"))e=this.getCombo(d),b=(d=e.get(b))?d:b}else"getDate"==e&&(d=this._dtmask_inc&&
this._dtmask_inc[d]||this._dtmask||"%Y-%m-%d",b=b?new Date(this._grid_calendarA._strToDate(b,!1,d)):b);else{if(b._childIndexes){var f=b._childIndexes[d];if("undefined"!=typeof b._childIndexes[d+1]&&b._childIndexes[d+1]==f)return""}b=this.cells3(b,d)[e?e:"getValue"]()}return b?b:""},sortRows:function(b,d,e){e=(e||"asc").toLowerCase();d=d||this.fldSort[b];b=b||0;if(this.isTreeGrid())this.sortTreeRows(b,d,e);else{var f={},g=this.cellType[b],h="getValue";"link"==g&&(h="getContent");if("dhxCalendar"==
g||"dhxCalendarA"==g)h="getDate";for(g=0;g<this.rowsBuffer.length;g++)this.rowsBuffer[g]&&(f[this.rowsBuffer[g].idd]=this._get_cell_value(this.rowsBuffer[g],b,h));this._sortRows(b,d,e,f)}this.callEvent("onAfterSorting",[b,d,e])},_sortCore:function(b,d,e,f,g){var h="sort";this._sst&&(g.stablesort=this.rowsCol.stablesort,h="stablesort");4<d.length&&(d=window[d]);if("cus"==d){var l=this._customSorts[b];g[h](function(b,d){return l(f[b.idd],f[d.idd],e,b.idd,d.idd)})}else if("function"==typeof d)g[h](function(b,
g){return d(f[b.idd],f[g.idd],e,b.idd,g.idd)});else if("str"==d)g[h](function(b,d){return"asc"==e?f[b.idd]>f[d.idd]?1:-1:f[b.idd]<f[d.idd]?1:-1});else if("int"==d)g[h](function(b,d){var g=parseFloat(f[b.idd]),g=isNaN(g)?-99999999999999:g,h=parseFloat(f[d.idd]),h=isNaN(h)?-99999999999999:h;return"asc"==e?g-h:h-g});else if("date"==d)g[h](function(b,d){var g=Date.parse(f[b.idd])||Date.parse("01/01/1900"),h=Date.parse(f[d.idd])||Date.parse("01/01/1900");return"asc"==e?g-h:h-g})},_sortRows:function(b,
d,e,f){this._sortCore(b,d,e,f,this.rowsBuffer);this._reset_view();this.callEvent("onGridReconstructed",[])},_reset_view:function(b){if(this.obj.rows[0]){this.callEvent("onResetView",[]);var d=this.obj.rows[0].parentNode,e=d.removeChild(d.childNodes[0],!0);if(_isKHTML)for(var f=d.parentNode.childNodes.length-1;0<=f;f--)"TR"==d.parentNode.childNodes[f].tagName&&d.parentNode.removeChild(d.parentNode.childNodes[f],!0);else if(_isIE)for(f=d.childNodes.length-1;0<=f;f--)d.childNodes[f].removeNode(!0);else d.innerHTML=
"";d.appendChild(e);this.rowsCol=dhtmlxArray();this._sst&&this.enableStableSorting(!0);this._fillers=this.undefined;b||this.render_dataset()}},deleteRow:function(b,d){d||(d=this.getRowById(b));if(d){this.editStop();if(!this._realfake&&!1==this.callEvent("onBeforeRowDeleted",[b]))return!1;var e=0;if(-1!=this.cellType._dhx_find("tree")&&!this._realfake)e=this._h2.get[b].parent.id,this._removeTrGrRow(d);else{d.parentNode&&d.parentNode.removeChild(d);var f=this.rowsCol._dhx_find(d);-1!=f&&this.rowsCol._dhx_removeAt(f);
for(var g=0;g<this.rowsBuffer.length;g++)if(this.rowsBuffer[g]&&this.rowsBuffer[g].idd==b){this.rowsBuffer._dhx_removeAt(g);f=g;break}}this.rowsAr[b]=null;for(g=0;g<this.selectedRows.length;g++)this.selectedRows[g].idd==b&&this.selectedRows._dhx_removeAt(g);if(this._srnd){for(g=0;g<this._fillers.length;g++){var h=this._fillers[g];h&&(h[0]>=f?h[0]-=1:h[1]>=f&&(h[1]-=1))}this._update_srnd_view()}this.pagingOn&&this.changePage();this._realfake||this.callEvent("onAfterRowDeleted",[b,e]);this.callEvent("onGridReconstructed",
[!0]);this._ahgr&&this.setSizes();return!0}},_addRow:function(b,d,e){if(-1==e||"undefined"==typeof e)e=this.rowsBuffer.length;"string"==typeof d&&(d=d.split(this.delim));b=this._prepareRow(b);b._attrs={};for(var f=0;f<b.childNodes.length;f++)b.childNodes[f]._attrs={};this.rowsAr[b.idd]=b;this._h2&&(this._h2.get[b.idd].buff=b);this._fillRow(b,d);this._postRowProcessing(b);if(this._skipInsert)return this._skipInsert=!1,this.rowsAr[b.idd]=b;if(this.pagingOn)return this.rowsBuffer._dhx_insertAt(e,b),
this.rowsAr[b.idd]=b;if(this._fillers){this.rowsCol._dhx_insertAt(e,null);this.rowsBuffer._dhx_insertAt(e,b);this._fake&&this._fake.rowsCol._dhx_insertAt(e,null);this.rowsAr[b.idd]=b;d=!1;for(f=0;f<this._fillers.length;f++){var g=this._fillers[f];g&&(g[0]<=e&&g[0]+g[1]>=e)&&(g[1]+=1,g[2].firstChild.style.height=parseInt(g[2].firstChild.style.height)+this._srdh+"px",d=!0,this._fake&&this._fake._fillers[f][1]++);g&&g[0]>e&&(g[0]+=1,this._fake&&this._fake._fillers[f][0]++)}d||this._fillers.push(this._add_filler(e,
1,0==e?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[e-1]));return b}this.rowsBuffer._dhx_insertAt(e,b);return this._insertRowAt(b,e)},addRow:function(b,d,e){d=this._addRow(b,d,e);this.dragContext||this.callEvent("onRowAdded",[b]);this.pagingOn&&this.changePage(this.currentPage);this._srnd&&this._update_srnd_view();d._added=!0;this._ahgr&&this.setSizes();this.callEvent("onGridReconstructed",[!0]);return d},_insertRowAt:function(b,d,e){this.rowsAr[b.idd]=b;if(this._skipInsert)return this._skipInsert=
!1,b;0>d||!d&&0!==parseInt(d)?d=this.rowsCol.length:d>this.rowsCol.length&&(d=this.rowsCol.length);this._cssEven&&(b.className+=1==(this._cssSP?this.getLevel(b.idd):d)%2?" "+this._cssUnEven+(this._cssSU?" "+this._cssUnEven+"_"+this.getLevel(b.idd):""):" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(b.idd):""));e||(d==this.obj.rows.length-1||!this.rowsCol[d]?_isKHTML?this.obj.appendChild(b):this.obj.firstChild.appendChild(b):this.rowsCol[d].parentNode.insertBefore(b,this.rowsCol[d]));
this.rowsCol._dhx_insertAt(d,b);this.callEvent("onRowInserted",[b,d]);return b},getRowById:function(b){var d=this.rowsAr[b];if(d){if("TR"!=d.tagName){for(var e=0;e<this.rowsBuffer.length;e++)if(this.rowsBuffer[e]&&this.rowsBuffer[e].idd==b)return this.render_row(e);if(this._h2)return this.render_row(null,d.idd)}return d}return null},getFormDataByRowId:function(b){var d=this.getRowById(b),e={};if(d)for(var f=0;f<d.cells.length;f++){var g=d.cells[f]._cellIndex;e[this.columnIds[g]?this.columnIds[g]:
f]=this.cells(b,g).getValue()}return e},cellById:function(b,d){return this.cells(b,d)},cells:function(b,d){if(0==arguments.length)return this.cells4(this.cell);var e=this.getRowById(b);if(this._erspan&&e._childIndexes&&e._childIndexes[d]==e._childIndexes[d+1]&&!e.childNodes[e._childIndexes[d]]){for(var f=e.previousSibling,g=!0;!f._rowSpan||!f._rowSpan[d];)if(f=f.previousSibling,!f){g=!1;break}e=g?f:e}return(e=e._childIndexes?e.childNodes[e._childIndexes[d]]:e.childNodes[d])?this.cells4(e):null},cellByIndex:function(b,
d){return this.cells2(b,d)},cells2:function(b,d){var e=this.render_row(b),f=e._childIndexes?e.childNodes[e._childIndexes[d]]:e.childNodes[d];return e.childNodes.length&&f?this.cells4(f):null},cells3:function(b,d){return this.cells4(b._childIndexes?b.childNodes[b._childIndexes[d]]:b.childNodes[d])},cells4:function(b){var d=window["eXcell_"+(b._cellType||this.cellType[b._cellIndex])];if(d)return new d(b)},cells5:function(b,d){d=d||b._cellType||this.cellType[b._cellIndex];this._ecache[d]||(this._ecache[d]=
new (window["eXcell_"+d]?window["eXcell_"+d]:eXcell_ro)(b));this._ecache[d].cell=b;return this._ecache[d]},cells6:function(b,d){var e="string"==typeof b?this.getRowById(b):this.render_row(b),f=e._childIndexes?e.childNodes[e._childIndexes[d]]:e.childNodes[d];return e._childIndexes&&f&&(f._cellIndex>d||e._childIndexes[d]==e._childIndexes[d-1]||0==e._childIndexes[d]&&0!=d)?null:!f?null:this.cells4(f)},dma:function(b){this._ecache||(this._ecache={});b&&!this._dma?(this._dma=this.cells4,this.cells4=this.cells5):
!b&&this._dma&&(this.cells4=this._dma,this._dma=null)},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(b){this.smartTabOrder=0<arguments.length?convertStringToBoolean(b):!0},setExternalTabOrder:function(b,d){var e=this;this.tabStart="object"==typeof b?b:document.getElementById(b);this.tabStart.onkeydown=function(b){b=b||window.event;if(9==b.keyCode)return b.cancelBubble=!0,e.selectCell(0,0,0,0,1),e.smartTabOrder&&e.cells2(0,0).isDisabled()&&e._key_events.k9_0_0.call(e),
this.blur(),!1};_isOpera&&(this.tabStart.onkeypress=this.tabStart.onkeydown);this.tabEnd="object"==typeof d?d:document.getElementById(d);this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(b){b=b||window.event;if(9==b.keyCode&&b.shiftKey)return b.cancelBubble=!0,e.selectCell(e.getRowsNum()-1,e.getColumnCount()-1,0,0,1),e.smartTabOrder&&e.cells2(e.getRowsNum()-1,e.getColumnCount()-1).isDisabled()&&e._key_events.k9_0_1.call(e),this.blur(),!1};_isOpera&&(this.tabEnd.onkeypress=this.tabEnd.onkeydown)},
uid:function(){this._ui_seed||(this._ui_seed=(new Date).valueOf());return this._ui_seed++},clearAndLoad:function(){var b=this._pgn_skin;this._pgn_skin=null;var d=4==arguments.length?arguments[3]:!1;this.clearAll(d);d&&this.clearHeaderConditions();this._pgn_skin=b;this.load.apply(this,arguments)},clearHeaderConditions:function(){this._connector_sorting="";if(this.filters){this._connector_filter="";for(var b=0;b<this.filters.length;b++)this.filters[b][0].value="",this.filters[b][0].old_value=""}},getStateOfView:function(){if(this.pagingOn){var b=
(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,b,Math.min(b+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}return[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length]}};
(function(){function b(b,d){this[b]=d}function d(b,d){this[b].call(this,d)}function e(b,d){this[b].call(this,d.join(this.delim))}var f=[{name:"label",def:"&nbsp;",operation:"setHeader",type:function(b,d){function e(b,d,g){f[d]||(f[d]=[]);"object"==typeof g&&(g.toString=function(){return this.text});f[d][b]=g}for(var f=[],k=0;k<d.length;k++)if("object"==typeof d[k]&&d[k].length)for(var n=0;n<d[k].length;n++)e(k,n,d[k][n]);else e(k,0,d[k]);for(k=0;k<f.length;k++)for(n=0;n<f[0].length;n++){var s=f[k][n];
f[k][n]=(s||"").toString()||"&nbsp;";if(s&&s.colspan)for(var u=1;u<s.colspan;u++)e(n+u,k,"#cspan");if(s&&s.rowspan)for(u=1;u<s.rowspan;u++)e(n,k+u,"#rspan")}this.setHeader(f[0]);for(k=1;k<f.length;k++)this.attachHeader(f[k])}},{name:"id",def:"",operation:"columnIds",type:b},{name:"width",def:"*",operation:"setInitWidths",type:e},{name:"align",def:"left",operation:"cellAlign",type:b},{name:"valign",def:"middle",operation:"cellVAlign",type:b},{name:"sort",def:"na",operation:"fldSort",type:b},{name:"type",
def:"ro",operation:"setColTypes",type:e},{name:"options",def:"",operation:"",type:function(b,d){for(var e=0;e<d.length;e++)if("object"==typeof d[e]){var f=this.getCombo(e),k;for(k in d[e])f.put(k,d[e][k])}}}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(b){return[b.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",lazy_compile:"enableLazyCompile",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",
save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",
mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",
drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(b){for(var e=0;e<f.length;e++){for(var l=[],m=0;m<b.length;m++)l[m]=b[m][f[e].name]||f[e].def;(f[e].type||d).call(this,f[e].operation,l,b)}this.init()},rows:function(){},headers:function(b){for(var d=0;d<b.length;d++)this.attachHeader(b[d])}})})();
dhtmlXGridObject.prototype.setDataColumns=function(b){this._columns="string"==typeof b?b.split(","):b;for(b=0;b<this._columns.length;b++)this._columns[b]=convertStringToBoolean(this._columns[b]);this._dataProcessor&&(this._dataProcessor._columns=this._columns)};
dhtmlXGridObject.prototype.rowPasteHandler=function(b){var d=this._dataProcessor;if(d){var e=this.getRowById(b);if(e){for(var e=e.cells,f=0;f<e.length;f++){var g=e[f];if(g.wasChanged){d.setUpdated(b,!0);break}}for(f=0;f<e.length;f++)if(g=e[f],g.wasChanged&&this._mat_links[b]&&(g=this._mat_links[b][f]))for(var h=0;h<g.length;h++)g[h].wasChanged=!0,-1==(","+d.updatedRows.join(",")+",").indexOf(g[h].parentNode.idd)&&this.rowPasteHandler(g[h].parentNode.idd)}}};
dhtmlXGridObject.prototype.updateRowsByXML=function(b,d){for(var e=dhtmlxAjax.getSync(b),f=e.getXMLTopNode(this.xml.top),f=e.doXPath(this.xml.row,f),g=0;g<f.length;g++){var h=this.getRowById(f[g].getAttribute("id"));h&&this._process_xml_row(h,f[g],e)}d&&d()};
dhtmlXGridObject.prototype._dp_init=function(b){b.attachEvent("insertCallback",function(b,e){this.obj._h2?this.obj.addRow(e,f,null,parent):this.obj.addRow(e,[],0);var f=this.obj.getRowById(e);f&&(this.obj._process_xml_row(f,b.firstChild),this.obj._postRowProcessing(f))});b.attachEvent("updateCallback",function(b,e){var f=this.obj.getRowById(e);f&&(this.obj._process_xml_row(f,b.firstChild),this.obj._postRowProcessing(f))});b.attachEvent("deleteCallback",function(b,e){this.obj.setUserData(e,this.action_param,
"true_deleted");this.obj.deleteRow(e)});b._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"];this.attachEvent("onEditCell",function(d,e,f){if(b._columns&&"undefined"!=typeof b._columns[f]&&!1==b._columns[f])return!0;var g=this.cells(e,f);if(g.wasChanged()){if(this._mat_links[e]){var h=this._mat_links[e][f];if(h)for(var l=0;l<h.length;l++){var m=this.cells5(h[l]);m.cell.wasChanged=!0;b.setUpdated(m.cell.parentNode.idd,!0);this.callEvent("onEditCell",[d,m.cell.parentNode.idd,
m.cell._cellIndex])}}this._aggregators[f]&&this._h2_cascade_update&&(h=this._h2.get[e].parent.id,0!=h&&(m=this.cells(h,f),m.cell.wasChanged=!0,b.setUpdated(m.cell.parentNode.idd,!0),this.callEvent("onEditCell",[d,m.cell.parentNode.idd,m.cell._cellIndex])))}1==d?g.isCheckbox()&&b.setUpdated(e,!0):2==d&&g.wasChanged()&&b.setUpdated(e,!0);if(!g.wasChanged()&&b.obj.getRowById&&b.obj._actualEdit){d=b.obj.getRowById(e);f=!1;for(g=0;g<d.cells.length;g++)if(d.cells[g].wasChanged){f=!0;break}f||b.setUpdated(e,
!1)}return!0});this.attachEvent("onRowPaste",this.rowPasteHandler);this.attachEvent("onRowIdChange",function(d,e){var f=b.findRow(d);f<b.updatedRows.length&&(b.updatedRows[f]=e)});this.attachEvent("onSelectStateChanged",function(){"row"==b.updateMode&&b.sendData();return!0});this.attachEvent("onEnter",function(){"row"==b.updateMode&&b.sendData();return!0});this.attachEvent("onXLE",function(d){b.updatedRows=[]});this.attachEvent("onClearAll",function(){b.updatedRows=[]});this.attachEvent("onBeforeRowDeleted",
function(d){if(!this.rowsAr[d])return!0;if(this.dragContext&&b.dnd)return window.setTimeout(function(){b.setUpdated(d,!0)},1),!0;var e=b.getState(d);this._h2&&this._h2.forEachChild(d,function(d){b.setUpdated(d.id,!1);b.markRow(d.id,!0,"deleted")},this);if("inserted"==e)return b.set_invalid(d,!1),b.setUpdated(d,!1),!0;if("deleted"==e)return!1;if("true_deleted"==e)return b.setUpdated(d,!1),!0;b.setUpdated(d,!0,"deleted");return!1});this.attachEvent("onRowAdded",function(d){if(this.dragContext&&b.dnd)return!0;
b.setUpdated(d,!0,"inserted");return!0});b._getRowData=function(b){var e=[];e.gr_id=b;this.obj.isTreeGrid()&&(e.gr_pid=this.obj.getParentId(b));for(var f=this.obj.getRowById(b),g=0;g<this.obj._cCount;g++){var h=this.obj._c_order?this.obj._c_order[g]:g,l=this.obj.cells(f.idd,g);if(l){if(!this._changed||l.wasChanged())if(!this._columns||!("undefined"!=typeof this._columns[h]&&!1==this._columns[h]))this._endnm?e[this.obj.getColumnId(g)]=l.getValue():e["c"+h]=l.getValue()}else e["c"+h]=""}if(b=this.obj.UserData[b])for(f=
0;f<b.keys.length;f++)0!=b.keys[f].indexOf("__")&&(e[b.keys[f]]=b.values[f]);if(b=this.obj.UserData.gridglobaluserdata)for(f=0;f<b.keys.length;f++)e[b.keys[f]]=b.values[f];return e};b._clearUpdateFlag=function(b){var e=this.obj.getRowById(b);b=this.is_invalid(b);if(e)if(b&&b.details)for(var f=0;f<e.cells.length;f++)b.details[f]&&(this.obj.cells4(e.cells[f]).cell.wasChanged=!1);else for(f=0;f<e.cells.length;f++)this.obj.cells4(e.cells[f]).cell.wasChanged=!1};b.checkBeforeUpdate=function(b){if(!this.obj.getRowById(b))return!0;
for(var e=!0,f=[],g=0,h=!0;g<this.obj._cCount;g++){var l=this.obj.cells(b,g);if(l){var m=this.obj._validators&&this.obj._validators.data[g]||l.cell.getAttribute("validate");m&&((h&=this.obj.validateCell(b,g,m,null))||(f[g]=!0));this.mandatoryFields[g]&&(l=this.mandatoryFields[g].call(this.obj,l.getValue(),b,g),"string"==typeof l?(this.messages.push(l),e=!1):(e&=l,f[g]=!l));e&=h}}e||(this.set_invalid(b,"invalid",f),this.setUpdated(b,!1));return e};this._columns?b._columns=this._columns:b._columns&&
(this._columns=b._columns)};
function dhtmlXGridCellObject(b){this.destructor=function(){return this.base=this.grid=this.cell=this.cell.obj=null};this.cell=b;this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell.innerHTML._dhx_trim()};this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()};this.getFont=function(){arOut=Array(3);this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily);if("bold"==this.cell.style.fontWeight||
"bold"==this.cell.parentNode.style.fontWeight)arOut[1]="bold";if("italic"==this.cell.style.fontStyle||"italic"==this.cell.parentNode.style.fontWeight)arOut[1]+="italic";arOut[2]=this.cell.style.fontSize?this.cell.style.fontSize:"";return arOut.join("-")};this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"};this.getBgColor=function(){return this.cell.bgColor?this.cell.bgColor:"#FFFFFF"};this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:
this.cell.style.textAlign?this.cell.style.textAlign:"left"};this.getWidth=function(){return this.cell.scrollWidth};this.setFont=function(b){fntAr=b.split("-");this.cell.style.fontFamily=fntAr[0];this.cell.style.fontSize=fntAr[fntAr.length-1];3==fntAr.length&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))};this.setTextColor=function(b){this.cell.style.color=
b};this.setBgColor=function(b){""==b&&(b=null);this.cell.bgColor=b};this.setHorAlign=function(b){this.cell.style.textAlign=1==b.length?"c"==b?"center":"l"==b?"left":"right":b};this.wasChanged=function(){return this.cell.wasChanged?!0:!1};this.isCheckbox=function(){var b=this.cell.firstChild;return b&&"INPUT"==b.tagName?(type=b.type,"radio"==type||"checkbox"==type?!0:!1):!1};this.isChecked=function(){if(this.isCheckbox())return this.cell.firstChild.checked};this.isDisabled=function(){return this.cell._disabled};
this.setChecked=function(b){this.isCheckbox()&&("true"!=b&&1!=b&&(b=!1),this.cell.firstChild.checked=b)};this.setDisabled=function(b){"true"!=b&&1!=b&&(b=!1);this.isCheckbox()&&(this.cell.firstChild.disabled=b,this.disabledF&&this.disabledF(b));this.cell._disabled=b}}
dhtmlXGridCellObject.prototype={getAttribute:function(b){return this.cell._attrs[b]},setAttribute:function(b,d){this.cell._attrs[b]=d},getInput:function(){if(this.obj&&("INPUT"==this.obj.tagName||"TEXTAREA"==this.obj.tagName))return this.obj;var b=(this.obj||this.cell).getElementsByTagName("TEXTAREA");b.length||(b=(this.obj||this.cell).getElementsByTagName("INPUT"));return b[0]}};
dhtmlXGridCellObject.prototype.setValue=function(b){this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal;"number"!=typeof b&&(!b||""==b.toString()._dhx_trim())?(b="&nbsp;",this.cell._clearCell=!0):this.cell._clearCell=!1;this.setCValue(b)};dhtmlXGridCellObject.prototype.getTitle=function(){var b=this.grid.callEvent("onCellTitle",[this.cell.parentNode.idd,this.cell._cellIndex]);return"string"==typeof b?b:_isIE?this.cell.innerText:this.cell.textContent};
dhtmlXGridCellObject.prototype.setCValue=function(b,d){this.grid._prefix&&this.grid._prefix[this.cell._cellIndex]&&(this.cell._val=b,b=this.grid._prefix[this.cell._cellIndex].replace(/(\{.+\})/g,b));this.cell.innerHTML="string"==typeof b&&""==b._dhx_trim()?"&nbsp;":b;var e=this.getValue();this.val!=e&&this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,"undefined"!=typeof d?d:b])};
dhtmlXGridCellObject.prototype.setCTxtValue=function(b){this.cell.innerHTML="";this.cell.appendChild(document.createTextNode(b));var d=this.getValue();this.val!=d&&this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,b])};dhtmlXGridCellObject.prototype.setLabel=function(b){this.cell.innerHTML=b};dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()};
function eXcell(){this.val=this.obj=this.orignalVal=null;this.changeState=function(){return!1};this.edit=function(){this.val=this.getValue()};this.detach=function(){return!1};this.getPosition=function(b){for(var d=0,e=0;"BODY"!=b.tagName;)d+=b.offsetLeft,e+=b.offsetTop,b=b.offsetParent;return[d,e]};this.setTip=function(b){this.tip=b};this.getTip=function(b){return this.tip}}eXcell.prototype=new dhtmlXGridCellObject;
function eXcell_ed(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.edit=function(){this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA";this.val=this.getValue();this.obj=document.createElement(this.cell.atag);this.obj.setAttribute("autocomplete","off");var b=this.cell.offsetHeight-4;!isNaN(b)&&0<=b&&(this.obj.style.height=b+"px");this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=
function(b){(b||event).cancelBubble=!0};this.obj.onmousedown=function(b){(b||event).cancelBubble=!0};this.obj.value=this.val;this.cell.innerHTML="";this.cell.appendChild(this.obj);if(_isFF&&!window._KHTMLrv&&(this.obj.style.overflow="visible",this.grid.multiLine&&18<=this.obj.offsetHeight&&40>this.obj.offsetHeight))this.obj.style.height="36px",this.obj.style.overflow="scroll";this.obj.onselectstart=function(b){b||(b=event);return b.cancelBubble=!0};_isIE&&this.obj.focus();this.obj.focus()};this.getValue=
function(){var b=this.grid._prefix&&this.grid._prefix[this.cell._cellIndex]?this.cell._val:this.cell.innerHTML.toString()._dhx_trim();return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":b};this.detach=function(b){this.setValue(1==arguments.length?b:this.obj.value);this.cell.originalVal==this.getValue()&&(this.cell.wasChanged=!1);return this.cell.originalVal!=this.getValue()}}eXcell_ed.prototype=new eXcell;
function eXcell_edtxt(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(b){this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal;!b||""==b.toString()._dhx_trim()?(b=" ",this.cell._clearCell=!0):this.cell._clearCell=!1;this.setCTxtValue(b)}}
eXcell_edtxt.prototype=new eXcell_ed;
function eXcell_edn(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.getValue=function(){var b=this.grid._prefix&&this.grid._prefix[this.cell._cellIndex]?this.cell._orig_value:this.cell.innerHTML.toString()._dhx_trim();return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":b||this.grid._aplNFb(b,this.cell._cellIndex,this.getAttribute("format"))};this.detach=function(b){this.setValue(1==arguments.length?b:this.obj.value);
this.cell.originalVal==this.getValue()&&(this.cell.wasChanged=!1);return this.cell.originalVal!=this.getValue()}}eXcell_edn.prototype=new eXcell_ed;
eXcell_edn.prototype.setValue=function(b){if(!b||isNaN(Number(b)))""!==b&&(b=this.cell.originalVal==window.undefined?"":this.cell.originalVal);this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal;if(!b||""==b.toString()._dhx_trim())return this.cell._clearCell=!0,this.setCValue("",0);this.cell._clearCell=!1;this.cell._orig_value=b;this.setCValue(this.grid._aplNF(b,this.cell._cellIndex,this.getAttribute("format")),b)};
function eXcell_ch(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.disabledF=function(b){this.cell.innerHTML=!0==b||1==b?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")};this.changeState=function(b){!0===b&&!this.grid.isActive&&(null!=window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&
window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0));this.grid.isEditable&&(!this.cell.parentNode._locked&&!this.isDisabled())&&(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=this.cell.originalVal!=this.getValue(),this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,
this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"};this.isCheckbox=function(){return!0};this.isChecked=function(){return"1"==this.getValue()?!0:!1};this.setChecked=function(b){this.setValue(b.toString())};this.detach=function(){this.cell.originalVal==this.getValue()&&(this.cell.wasChanged=!1);return this.cell.originalVal!=
this.getValue()};this.edit=null}eXcell_ch.prototype=new eXcell;
eXcell_ch.prototype.setValue=function(b){this.cell.style.verticalAlign="middle";if(b&&(b=b.toString()._dhx_trim(),"false"==b||"0"==b))b="";b?(b="1",this.cell.chstate="1"):(b="0",this.cell.chstate="0");this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal;this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+b+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)};
function eXcell_ra(b){this.base=eXcell_ch;this.base(b);this.grid=b.parentNode.grid;this.disabledF=function(b){this.cell.innerHTML=!0==b||1==b?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")};this.changeState=function(b){!(!1===b&&1==this.getValue())&&(this.grid.isEditable&&!this.cell.parentNode._locked)&&(!1!=this.grid.callEvent("onEditCell",[0,
this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=this.cell.originalVal!=this.getValue(),this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)};this.edit=null}
eXcell_ra.prototype=new eXcell_ch;
eXcell_ra.prototype.setValue=function(b){this.cell.style.verticalAlign="middle";if(b&&(b=b.toString()._dhx_trim(),"false"==b||"0"==b))b="";b?(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]&&(b=this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]),b.setValue("0"),this.grid.rowsAr[b.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,b.cell.parentNode.idd,b.cell._cellIndex])),this.grid._RaSeCol[this.cell._cellIndex]=this.cell,b="1",this.cell.chstate=
"1"):(b="0",this.cell.chstate="0");this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+b+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)};
function eXcell_txt(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.edit=function(){this.val=this.getValue();this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_textarea";this.obj.onclick=function(b){(b||event).cancelBubble=!0};this.obj.value=this.val;this.obj.style.display="";this.obj.style.textAlign=this.cell.style.textAlign;if(_isFF){var b=document.createElement("DIV");b.appendChild(this.obj);b.style.overflow="auto";b.className="dhx_textarea";this.obj.style.margin=
"0px 0px 0px 0px";this.obj.style.border="0px";this.obj=b}this.obj.style.zIndex=11E3;document.body.appendChild(this.obj);_isOpera&&(this.obj.onkeypress=function(b){if(9==b.keyCode)return!1});this.obj.onkeydown=function(b){b=b||event;if(9==b.keyCode)return globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:b.keyCode,shiftKey:b.shiftKey,srcElement:"0"}),!1};b=this.grid.fixPosition2(this.cell,this.obj);this.obj.style.left=b[0]+"px";this.obj.style.top=b[1]+this.cell.offsetHeight+
"px";var e=200>this.cell.offsetWidth?200:this.cell.offsetWidth,e=e+(_isFF?18:16);e+b[0]>=document.body.offsetWidth&&(e=document.body.offsetWidth-b[0]-(8==_isIE?3:2));this.obj.style.width=e+"px";_isFF&&(this.obj.firstChild.style.width=parseInt(this.obj.style.width)+"px",this.obj.firstChild.style.height=this.obj.offsetHeight-3+"px");_isIE&&(this.obj.select(),this.obj.value=this.obj.value);_isFF?this.obj.firstChild.focus():this.obj.focus()};this.detach=function(){var b="",b=_isFF?this.obj.firstChild.value:
this.obj.value;this.cell._clearCell=""==b?!0:!1;this.setValue(b);document.body.removeChild(this.obj);this.obj=null;this.cell.originalVal==this.getValue()&&(this.cell.wasChanged=!1);return this.cell.originalVal!=this.getValue()};this.getValue=function(){return this.obj?_isFF?this.obj.firstChild.value:this.obj.value:this.cell._clearCell?"":this.grid.multiLine?this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}eXcell_txt.prototype=new eXcell;
function eXcell_txttxt(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(b){this.cell._brval=b;!b||""==b.toString()._dhx_trim()?(b=" ",this.cell._clearCell=!0):this.cell._clearCell=!1;null==this.cell.originalVal&&(this.cell.originalVal=
8==_isIE?b.replace(/\n/g,"\r\n"):b);this.setCTxtValue(b)}}eXcell_txttxt.prototype=new eXcell_txt;eXcell_txt.prototype.setValue=function(b){null==this.cell.originalVal&&(this.cell.originalVal=8==_isIE?b.replace(/\n/g,"\r\n"):b);!b||""==b.toString()._dhx_trim()?(b="&nbsp;",this.cell._clearCell=!0):this.cell._clearCell=!1;this.cell._brval=b;this.grid.multiLine?this.setCValue(b.replace(/\n/g,"<br/>"),b):this.setCValue(b,b)};
function eXcell_co(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0);this.shiftNext=function(){var b=this.list.options[this.list.selectedIndex+1];b&&(b.selected=!0);this.obj.value=this.list.options[this.list.selectedIndex].text;return!0};this.shiftPrev=function(){if(0!=this.list.selectedIndex){var b=this.list.options[this.list.selectedIndex-1];b&&(b.selected=!0);this.obj.value=this.list.options[this.list.selectedIndex].text}return!0};
this.edit=function(){this.val=this.getValue();this.text=this.getText()._dhx_trim();this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_combo_edit";var b=this.cell.offsetHeight-4;!isNaN(b)&&0<=b&&(this.obj.style.height=b+"px");this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(b){(b||event).cancelBubble=!0};this.obj.value=this.text;this.obj.onselectstart=function(b){b||(b=event);return b.cancelBubble=!0};var e=this;this.obj.onkeyup=function(b){b=
(b||event).keyCode;if(!(38==b||40==b||9==b)){b=this.readonly?String.fromCharCode(b):this.value;for(var d=e.list.options,f=0;f<d.length;f++)if(0==d[f].text.indexOf(b))return d[f].selected=!0}};this.list=document.createElement("SELECT");this.list.className="dhx_combo_select";this.list.style.width=this.cell.offsetWidth+"px";this.list.onclick=function(b){b=b||window.event;e.editable=!1;e.grid.editStop();b.cancelBubble=!0};for(var f=this.combo.getKeys(),g=!1,h=b=0;h<f.length;h++){var l=this.combo.get(f[h]),
l=new Option(l,f[h]);this.list.options[this.list.options.length]=l;"true"==this.combo.getAttr(f[h],"disabled")&&l.setAttribute("d","true");f[h]==this.val&&(b=this.list.options.length-1,g=!0)}!1==g&&(this.list.options[this.list.options.length]=new Option(this.text,null===this.val?"":this.val),b=this.list.options.length-1);document.body.appendChild(this.list);this.list.size=15<f.length?15:f.length+1;this.cstate=1;this.editable?this.cell.innerHTML="":(this.obj.style.width="1px",this.obj.style.height=
"1px");this.cell.appendChild(this.obj);f=this.grid.fixPosition2(this.cell,this.list);this.list.style.left=f[0]+"px";this.list.style.top=f[1]+this.cell.offsetHeight+"px";this.list.options[b].selected=!0;if(!_isFF||this.editable)this.obj.focus(),this.obj.focus();this.editable||(this.obj.style.visibility="hidden",this.list.focus(),this.list.onkeydown=function(b){b=b||window.event;e.grid.setActive(!0);if(30>b.keyCode)return e.grid.doKey({target:e.cell,keyCode:b.keyCode,shiftKey:b.shiftKey,ctrlKey:b.ctrlKey})});
f=this.list.options;for(h=0;h<f.length;h++)l=this.list.options[h],"true"==l.getAttribute("d")&&l.setAttribute("disabled",!0)};this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value};this.detach=function(){this.val!=this.getValue()&&(this.cell.wasChanged=!0);if(!this.list)return this.val!=this.getValue();if(null!=this.list.parentNode)if(this.editable){var b=this.list.options[this.list.selectedIndex];if(b&&b.text==this.obj.value)this.setValue(this.list.value);
else{var b=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),e=b.values._dhx_find(this.obj.value);-1!=e?this.setValue(b.keys[e]):this.setCValue(this.cell.combo_value=this.obj.value)}}else this.setValue(this.list.value);this.list.parentNode&&this.list.parentNode.removeChild(this.list);this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj);this.cell.originalVal==this.getValue()&&(this.cell.wasChanged=!1);return this.cell.originalVal!=this.getValue()}}eXcell_co.prototype=new eXcell;
eXcell_co.prototype.getText=function(){return this.cell.innerHTML};
eXcell_co.prototype.setValue=function(b){if("object"==typeof b){var d=this.grid.xmlLoader.doXPath("./option",b);d.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var e=0;e<d.length;e++)this.cell._combo.put(d[e].getAttribute("value"),d[e].firstChild?d[e].firstChild.data:"");b=b.firstChild.data}if(""==(b||"").toString()._dhx_trim())b=null;this.cell.combo_value=b;this.cell.originalVal=null==this.cell.originalVal?null==b?"":b:this.cell.originalVal;null!==b?(d=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(b),
this.setCValue(null===d?b:d,b)):this.setCValue("&nbsp;",b)};function eXcell_coro(b){this.base=eXcell_co;this.base(b);this.editable=!1}eXcell_coro.prototype=new eXcell_co;function eXcell_cotxt(b){this.base=eXcell_co;this.base(b)}eXcell_cotxt.prototype=new eXcell_co;eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent};
eXcell_cotxt.prototype.setValue=function(b){if("object"==typeof b){var d=this.grid.xmlLoader.doXPath("./option",b);d.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var e=0;e<d.length;e++)this.cell._combo.put(d[e].getAttribute("value"),d[e].firstChild?d[e].firstChild.data:"");b=b.firstChild.data}if(""==(b||"").toString()._dhx_trim())b=null;null!==b?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(b)||b,b):this.setCTxtValue(" ",b);this.cell.combo_value=b};
function eXcell_corotxt(b){this.base=eXcell_co;this.base(b);this.editable=!1}eXcell_corotxt.prototype=new eXcell_cotxt;
function eXcell_cp(b){try{this.cell=b,this.grid=this.cell.parentNode.grid}catch(d){}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("SPAN");this.obj.style.border="1px solid black";this.obj.style.position="absolute";var b=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj);document.body.appendChild(this.obj);this.obj.style.left=b[0]+"px";this.obj.style.zIndex=1;this.obj.style.top=b[1]+this.cell.offsetHeight+"px"};this.toolDNum=function(b){1==b.length&&(b="0"+
b);return b};this.colorPanel=function(b,d){var g=document.createElement("TABLE");d.appendChild(g);g.cellSpacing=0;g.editor_obj=this;g.style.cursor="default";g.onclick=function(b){b=b||window.event;b=b.target||b.srcElement;var d=b.parentNode.parentNode.parentNode.editor_obj;d.setValue(b._bg);d.grid.editStop()};for(var h=256/b,l=0;l<=256/h;l++)for(var m=g.insertRow(l),k=0;k<=256/h;k++)for(var n=0;n<=256/h;n++){R=new Number(h*l)-(0==l?0:1);G=new Number(h*k)-(0==k?0:1);B=new Number(h*n)-(0==n?0:1);var s=
this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+""+this.toolDNum(B.toString(16)),u=m.insertCell(k);u.width="10px";u.innerHTML="&nbsp;";u.title=s.toUpperCase();u.style.backgroundColor="#"+s;u._bg="#"+s;null!=this.val&&"#"+s.toUpperCase()==this.val.toUpperCase()&&(u.style.border="2px solid white")}};this.getValue=function(){return this.cell.firstChild._bg||""};this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))};this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,
2),16))};this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))};this.detach=function(){null!=this.obj.offsetParent&&document.body.removeChild(this.obj);this.cell.originalVal==this.getValue()&&(this.cell.wasChanged=!1);return this.cell.originalVal!=this.getValue()}}eXcell_cp.prototype=new eXcell;
eXcell_cp.prototype.setValue=function(b){this.setCValue("<div style='width:100%;height:"+(this.grid.multiLine?this.cell.offsetHeight-2:16)+";background-color:"+(b||"")+";border:0px;'>&nbsp;</div>",b);this.cell.firstChild._bg=b;this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal};
function eXcell_img(b){try{this.cell=b,this.grid=this.cell.parentNode.grid}catch(d){}this.getValue=function(){if("IMG"==this.cell.firstChild.tagName)return this.cell.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");if("A"==this.cell.firstChild.tagName){var b=this.cell.firstChild.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:""),b=b+("^"+this.cell.lnk);this.cell.trg&&(b+="^"+this.cell.trg);return b}};this.isDisabled=function(){return!0}}eXcell_img.prototype=new eXcell;
eXcell_img.prototype.getTitle=function(){return this.cell._brval};
eXcell_img.prototype.setValue=function(b){var d=b;this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal;if(-1!=b.indexOf("^")){var e=b.split("^");b=e[0];d=this.cell._attrs.title||e[1];if(2<e.length&&(this.cell.lnk=e[2],e[3]))this.cell.trg=e[3];this.cell.titFl="1"}this.setCValue("<img src='"+this.grid.iconURL+(b||"")._dhx_trim()+"' border='0'>",b);this.cell.lnk&&(this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>");this.cell._brval=
d};function eXcell_price(b){this.base=eXcell_ed;this.base(b);this.getValue=function(){return 1<this.cell.childNodes.length?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}eXcell_price.prototype=new eXcell_ed;eXcell_price.prototype.setValue=function(b){isNaN(parseFloat(b))&&(b=this.val||0);var d="green";0>b&&(d="red");this.setCValue("<span>$</span><span style='padding-right:2px;color:"+d+";'>"+b+"</span>",b);this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal};
function eXcell_eclipse(b){this.base=eXcell_txt;this.base(b);this.getValue=function(){var b=this.cell.innerText;-1<b.lastIndexOf("\n")&&(b=b.substring(0,b.length-1));return this.obj?_isFF?this.obj.firstChild.value:this.obj.value:this.cell._clearCell?"":this.cell._brval||b}}eXcell_eclipse.prototype=new eXcell_txt;
eXcell_eclipse.prototype.setValue=function(b){var d=this.grid.initCellWidth[this.cell._cellIndex];d||(d="200px");"*"==d&&(d="");this.setCValue("<div style='padding-right:2px;white-space: nowrap;overflow: hidden;text-overflow:ellipsis;width:"+d+";'>"+b+"</div>");this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal};function eXcell_edp(b){this.base=eXcell_ed;this.base(b);this.getValue=function(){return this.cell._orignal}}eXcell_edp.prototype=new eXcell_ed;
eXcell_edp.prototype.setValue=function(b){this.cell._orignal=b;b=b.replace(/\s/g,"&nbsp;");this.setCValue(b,b);this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal};function eXcell_pct(b){this.base=eXcell_edn;this.base(b);this.getValue=function(){return this.cell._orignal};this.grid._maskArr[this.cell._cellIndex]||this.grid.setNumberFormat("0.00%",this.cell._cellIndex,".")}eXcell_pct.prototype=new eXcell_edn;
eXcell_pct.prototype.setValue=function(b){this.cell._orignal=b;var d=null==b||""==b||isNaN(b)?"":b,d=""==d?"":this.grid._aplNF(100*b,this.cell._cellIndex);this.setCValue(d,b);this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal};function eXcell_dyn(b){this.base=eXcell_ed;this.base(b);this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}eXcell_dyn.prototype=new eXcell_ed;
eXcell_dyn.prototype.setValue=function(b){if(!b||isNaN(Number(b)))""!==b&&(b=0);if(0<b)var d="green",e="dyn_up.gif";else 0==b?(d="black",e="dyn_.gif"):(d="red",e="dyn_down.gif");this.setCValue("<div style='position:relative;padding-right:2px; width:100%;overflow:hidden; white-space:nowrap;'><img src='"+this.grid.imgURL+""+e+"' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px; width:100%;color:"+d+";'>"+b+"</span></div>",b);this.cell.originalVal=null==this.cell.originalVal?
b:this.cell.originalVal};function eXcell_ro(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){var b=this.grid._prefix&&this.grid._prefix[this.cell._cellIndex]?this.cell._val:this.cell.innerHTML.toString()._dhx_trim();return this.cell._clearCell?"":b}}eXcell_ro.prototype=new eXcell;
function eXcell_ron(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){var b=this.grid._prefix&&this.grid._prefix[this.cell._cellIndex]?this.cell._orig_value:this.cell.innerHTML.toString()._dhx_trim();return this.cell._clearCell?"":b||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)}}eXcell_ron.prototype=new eXcell;
eXcell_ron.prototype.setValue=function(b){if(0!==b&&(!b||""==b.toString()._dhx_trim()))return this.setCValue("&nbsp;"),this.cell._clearCell=!0;this.cell._clearCell=!1;this.setCValue(b?this.grid._aplNF(b,this.cell._cellIndex):"0")};
function eXcell_rotxt(b){this.cell=b;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return!0};this.setValue=function(b){b?this.cell._clearCell=!1:(b=" ",this.cell._clearCell=!0);this.setCTxtValue(b)};this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}eXcell_rotxt.prototype=new eXcell;
function dhtmlXGridComboObject(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray;this.attrs={};this.put=function(b,d,e){for(var f=0;f<this.keys.length;f++)if(this.keys[f]==b)return this.values[f]=d,!0;this.values[this.values.length]=d;this.keys[this.keys.length]=b;e&&(this.attrs[b]=e)};this.getAttr=function(b,d){var e=this.attrs[b];if(e)for(var f=0;f<e.length;f++)if(e[f][0]==d)return e[f][1]};this.get=function(b){for(var d=0;d<this.keys.length;d++)if(this.keys[d]==b)return this.values[d];return null};
this.clear=function(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray;this.attrs={}};this.remove=function(b){for(var d=0;d<this.keys.length;d++)if(this.keys[d]==b)return this.keys._dhx_removeAt(d),this.values._dhx_removeAt(d),"undefined"!=typeof this.attrs[this.keys[d]]&&delete this.attrs[this.keys[d]],!0};this.size=function(){for(var b=0,d=0;d<this.keys.length;d++)null!=this.keys[d]&&b++;return b};this.getKeys=function(){for(var b=[],d=0;d<this.keys.length;d++)null!=this.keys[d]&&(b[b.length]=
this.keys[d]);return b};this.save=function(){this._save=[];for(var b=0;b<this.keys.length;b++)this._save[b]=[this.keys[b],this.values[b],this.attrs[this.keys[b]]]};this.restore=function(){if(this._save){this.keys[b]=[];this.values[b]=[];for(var b=0;b<this._save.length;b++)this.keys[b]=this._save[b][0],this.values[b]=this._save[b][1],this.attrs[this.keys[b]]=this._save[b][2]}};return this}function Hashtable(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray;return this}Hashtable.prototype=new dhtmlXGridComboObject;
dhtmlXGridObject.prototype.filterBy=function(b,d,e){if(!this._is_loading){if(this.isTreeGrid())return this.filterTreeBy(b,d,e);if(this._f_rowsBuffer&&this._f_rowsBuffer.length){if(!e&&(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake))this._fake.rowsBuffer=this.rowsBuffer}else if(this._f_rowsBuffer=[].concat(this.rowsBuffer),this.ignoreSpanRowIndexs={},this._erspan)for(e=this._f_rowsBuffer.length-1;0<=e;e--){this._f_rowsBuffer[e].prev=0<e?this._f_rowsBuffer[e-1]:null;this._f_rowsBuffer[e].rdx=
e;this._f_rowsBuffer[e].clen=this._f_rowsBuffer[e].cells.length;for(var f=[],g=this._f_rowsBuffer[e].cells,h=0;h<g.length;h++)1<g[h].rowSpan&&(f[f.length]=h+"-"+g[h]._cellIndex+"-"+g[h].rowSpan);this._f_rowsBuffer[e].rs=f.join(",")}this.rowsBuffer.length&&(this.dma(!0),this.resetFilterRows(!0),this.ignoreSpanRowIndexs={},this._filterA(b,d),this.dma(!1),this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-1&&this.changePage(0),this._reset_view(),this.ignoreSpanRowIndexs&&this._erspan&&
(""==d||""==d.join("")?this.resetFilterRows(!0):this.resetFilterRows()),this.callEvent("onGridReconstructed",[]),this.callEvent("onFilterByEnd",[b,d]))}};
dhtmlXGridObject.prototype._filterA=function(b,d){var e=b,f=d;if("string"==typeof d){if(""==d)return;e=[];f=[];e[0]=b;f[0]=d}else if("function"==typeof d)e=[],f=[],e[0]=b,f[0]=d;else if(d.join&&""==d.join(""))return;b=-1;if(this.rowsBuffer.length){for(var g=0;g<e.length;g++)"string"==typeof f[g]&&(f[g]=(f[g]||"").toString().toLowerCase(),""!=f[g]&&(b=-1!=b?b:e[g]));this._filterColIdx=b;for(var h=this.rowsBuffer.length-1;0<=h;h--)if(this.rowsBuffer[h]){for(var l=!0,g=0;g<e.length;g++)var m="link"==
this.cellType[e[g]]?"getContent":-1<this.cellType[e[g]].indexOf("co")?"getText":null,m=this._get_cell_value(this.rowsBuffer[h],e[g],m).toString().toLowerCase(),k=!1,k="string"==typeof f[g]?""==f[g]?!0:-1!=m.indexOf(f[g]):f[g].call(this,m,this.rowsBuffer[h].idd),l=l&&k;if(l&&this._erspan){m=1;k=b;if(""!=this.rowsBuffer[h].rs){for(var g=this.rowsBuffer[h].rs.split(","),n=0;n<g.length;n++){var s=g[n].split("-");1*s[1]==b&&(m=1*s[2]);0==n&&(k=1*s[1])}if(1!=m){n=[];for(g=1;g<m;g++)n.push(this._f_rowsBuffer[h+
g]);this.insertIntoRowsbuffer(h,n)}if(""!=this.rowsBuffer[h].rs)if(this.ignoreSpanRowIndexs[h]){g=this.ignoreSpanRowIndexs[h].rs.split(",");for(n=0;n<g.length;n++)s=g[n].split("-"),1*s[1]<b&&(g[n]=s[0]+"-"+s[1]+"-"+(1*s[2]+m));this.ignoreSpanRowIndexs[h].rs=g.join(",")}else{g=this.rowsBuffer[h].rs.split(",");if(g.length)for(n=0;n<g.length;n++)s=g[n].split("-"),1*s[1]<b&&(g[n]=s[0]+"-"+s[1]+"-"+m);this.ignoreSpanRowIndexs[h]={idd:this.rowsBuffer[h].idd,row:this.rowsBuffer[h],rs:g.join(",")}}}this.getParentSpanRow(h,
m,k)}if(!l)if(this._erspan)if(this.ignoreSpanRowIndexs[h]){g=this.ignoreSpanRowIndexs[h].rs.split(",");l=1;m=b;for(n=0;n<g.length;n++)s=g[n].split("-"),1*s[1]==b&&(l=1*s[2]);for(n=0;n<g.length;n++)s=g[n].split("-"),1*s[1]<b&&(g[n]=s[0]+"-"+s[1]+"-"+(1*s[2]+l),m=1*s[1]);this.ignoreSpanRowIndexs[h].rs=g.join(",");this.getParentSpanRow(h,l,m)}else this.rowsBuffer.splice(h,1);else this.rowsBuffer.splice(h,1)}}};
dhtmlXGridObject.prototype.insertIntoRowsbuffer=function(b,d){if(d&&d.length){var e=this.rowsBuffer.slice(b+1,this.rowsBuffer.length);this.rowsBuffer.splice(b+1,this.rowsBuffer.length-b);this.rowsBuffer=this.rowsBuffer.concat(d,e)}};
dhtmlXGridObject.prototype.resetFilterRows=function(b){if(b)for(var d in this.ignoreSpanRowIndexs){if((b=this.getRowById(this.ignoreSpanRowIndexs[d].idd))&&""!=b.rs)for(var e=b.rs.split(","),f=0;f<e.length;f++){var g=e[f].split("-");b.cells[g[0]].rowSpan=1*g[2]}}else for(d in this.ignoreSpanRowIndexs)if(b=this.getRowById(this.ignoreSpanRowIndexs[d].idd)){e=this.ignoreSpanRowIndexs[d].rs.split(",");for(f=0;f<e.length;f++)g=e[f].split("-"),1*g[1]<this._filterColIdx&&(b.cells[g[0]].rowSpan=1*g[2])}};
dhtmlXGridObject.prototype.getParentSpanRow=function(b,d,e){var f=this.rowsBuffer[b].clen;for(b=this.rowsBuffer[b].prev;b&&1*b.clen<=f;)b=b.prev;if(b){var f=b.rdx,g=e;if(this.ignoreSpanRowIndexs[f]){for(var h=this.ignoreSpanRowIndexs[f].rs.split(","),l=h.length-1;0<=l;l--){var m=h[l].split("-");1*m[1]<e&&(h[l]=m[0]+"-"+m[1]+"-"+(1*m[2]+d),g=1*m[1])}this.ignoreSpanRowIndexs[f].rs=h.join(",")}else{h=h=b.rs.split(",");if(h.length)for(l=h.length-1;0<=l;l--)m=h[l].split("-"),1*m[1]<e?(h[l]=m[0]+"-"+m[1]+
"-"+d,g=1*m[1]):1*m[1]<this._filterColIdx&&(h[l]=m[0]+"-"+m[1]+"-0");this.ignoreSpanRowIndexs[f]={idd:b.idd,row:b,rs:h.join(",")}}this.rowsBuffer[f]&&this.getParentSpanRow(f,d,g)}};dhtmlXGridObject.prototype.enableComboFilterLazyLoad=function(b){this._comboFilterLazyLoad=convertStringToBoolean(b)};dhtmlXGridObject.prototype.getFilterElement=function(b){if(this.filters){for(var d=0;d<this.filters.length;d++)if(this.filters[d][1]==b)return this.filters[d][0].combo||this.filters[d][0];return null}};
dhtmlXGridObject.prototype.collectValues=function(b){var d=this.callEvent("onCollectValues",[b]);if(!0!==d)return d;if(this.isTreeGrid())return this.collectTreeValues(b);this.dma(!0);this._build_m_order();d="stree"==this.cellType[b];b=this._m_order?this._m_order[b]:b;for(var e={},f=[],g=this._f_rowsBuffer||this.rowsBuffer,h=0;h<g.length;h++)if(g[h])if(g[h].childNodes){var l=this._get_cell_value(g[h],b);if(l&&(!g[h]._childIndexes||g[h]._childIndexes[b]!=g[h]._childIndexes[b-1]))e[l]=[!0,d?this.cells3(g[h],
b).getText():l]}else if(!this._comboFilterLazyLoad&&g[h].data.childNodes[b]&&(l=g[h].data.childNodes[b].textContent||g[h].data.childNodes[b].text)&&(!g[h]._childIndexes||g[h]._childIndexes[b]!=g[h]._childIndexes[b-1]))e[l]=[!0,d?this.cells3(g[h],b).getText():l];this.dma(!1);b=this.combos[b];for(var m in e)!0===e[m][0]&&f.push([b?b.get(m)||m:e[m][1],d?m:e[m][1]]);return f.sort()};
dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var b=0;b<this._c_order.length;b++)this._m_order[this._c_order[b]]=b}};
dhtmlXGridObject.prototype.filterByAll=function(){var b=[],d=[];this._build_m_order();for(var e=0;e<this.filters.length;e++)if(!(f>=this._cCount)){var f=this._m_order?this._m_order[this.filters[e][1]]:this.filters[e][1];d.push(f);var g=this.filters[e][0]._filter?this.filters[e][0]._filter():this.filters[e][0].value;b.push(g)}this.callEvent("onFilterStart",[d,b])&&(this.filterBy(d,b,!1),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]));this.hideSubTree()};
dhtmlXGridObject.prototype.enableFilterTextOnEnter=function(b){this._filterTextOnEnter=convertStringToBoolean(b)};
dhtmlXGridObject.prototype.makeFilter=function(b,d){this.filters||(this.filters=[]);"object"!=typeof b&&(b=document.getElementById(b));if(b){var e=this;b.style.width||(b.style.width="90%");if("SELECT"==b.tagName)this.filters.push([b,d]),this._loadSelectOptins(b,d),b.onchange=function(){e.filterByAll()},_isIE&&(b.style.marginTop="1px"),this.attachEvent("onEditCell",function(e,f,g){this._build_m_order();2==e&&this.filters&&(this._m_order?g==this._m_order[d]:g==d)&&this._loadSelectOptins(b,d);return!0}),
b.onfocus=function(){e.hideSubTree()};else if("INPUT"==b.tagName)this.filters.push([b,d]),b.value="",b.onkeydown=function(){13==window.event.keyCode&&e._filterTextOnEnter?b.value!=b.old_value&&(e.filterByAll(),b.old_value=b.value):(this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){b.value!=b.old_value&&(e.filterByAll(),b.old_value=b.value)},500))},b.onfocus=function(){e.hideSubTree()};else if("DIV"==b.tagName&&"combo"==b.className){this.filters.push([b,d]);b.style.padding=
"0px";b.style.margin="0px";window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL);var f=new dhtmlXCombo(b,"_filter","90%");f.filterSelfA=f.filterSelf;f.filterSelf=function(){0==this.getSelectedIndex()&&this.setComboText(this._header_combo_default&&this._header_combo_default[d]?this._header_combo_default[d]:"");this.filterSelfA.apply(this,arguments);this.optionsArr[0].hide(!1)};f.enableFilteringMode("between");b.combo=f;b.value="";this._loadComboOptins(b,d);b.combo.selectOption(0);f.attachEvent("onChange",
function(){b.value=f.getSelectedValue();null===b.value&&(b.value="");e.filterByAll()});f.DOMelem_input.onfocus=function(){e.hideSubTree()};b.combo.enableFilteringMode(!0)}else if("DIV"==b.tagName&&"tree"==b.className){this.filters.push([b,d]);b.style.padding="0px";b.style.margin="0px";var g=this,f=document.createElement("input");f.style.width="90%";f.style.fontSize="8pt";f.style.fontFamily="Tahoma";b.appendChild(f);b.value="";f.onkeydown=function(){var h=window.event;13==h.keyCode?(h=""==f.value?
null:g._sub_trees[d][0].findItemIdByLabel(f.value,0,1),b.value=null!=h?h:"",e.filterByAll()):27==h.keyCode&&e.hideSubTree()};f.onclick=function(){var h=g.getPosition(b),l=g._sub_trees[d][0],m=l.parentObject;m.style.top=h[1]+f.offsetHeight+"px";m.style.left=h[0]+"px";m.style.position="absolute";m.style.display="block";l.cur=f;l.attachEvent("onDblClick",function(d){l.cur==f&&(f&&f.tagName&&"input"==f.tagName.toLowerCase())&&(f.value=l.getSelectedItemText(),b.value=d,null===b.value&&(b.value=""),e.filterByAll());
return!0})}}b.parentNode&&(b.parentNode.className+=" filter");this._filters_ready()}};
dhtmlXGridObject.prototype.findCell=function(b,d,e){var f=[];b=b.toString().toLowerCase();"number"!=typeof e&&(e=e?1:0);if(!this.rowsBuffer.length)return f;for(var g=d||0;g<this._cCount;g++){if(this._h2)this._h2.forEachChild(0,function(d){if(e&&f.length==e)return f;-1!=this._get_cell_value(d.buff,g).toString().toLowerCase().indexOf(b)&&f.push([d.id,g])},this);else for(var h=0;h<this.rowsBuffer.length;h++)if(-1!=this._get_cell_value(this.rowsBuffer[h],g).toString().toLowerCase().indexOf(b)&&(f.push([this.rowsBuffer[h].idd,
g]),e&&f.length==e))return f;if("undefined"!=typeof d)break}return f};dhtmlXGridObject.prototype.makeSearch=function(b,d){"object"!=typeof b&&(b=document.getElementById(b));if(b){var e=this;"INPUT"==b.tagName&&(b.onkeypress=function(){this._timer&&window.clearTimeout(this._timer);this._timer=window.setTimeout(function(){if(""!=b.value){var f=e.findCell(b.value,d,!0);f.length&&(e._h2&&e.openItem(f[0][0]),e.selectCell(e.getRowIndex(f[0][0]),d||0))}},500)});b.parentNode&&(b.parentNode.className+=" filter")}};
dhtmlXGridObject.prototype._loadSelectOptins=function(b,d){var e=this.collectValues(d),f=b.value;b.innerHTML="";b.options[0]=new Option("","");for(var g=this._filter_tr?this._filter_tr[d]:null,h=0;h<e.length;h++){var l=g?g(e[h][0]):e[h][0];b.options[b.options.length]=new Option(l,e[h][1])}b.value=f};dhtmlXGridObject.prototype.setSelectFilterLabel=function(b,d){this._filter_tr||(this._filter_tr=[]);this._filter_tr[b]=d};
dhtmlXGridObject.prototype._loadComboOptins=function(b,d){var e=this.collectValues(d),f=Array(e.length),g="stree"==this.cellType[d];b.combo.clearAll();b.combo.render(!1);for(var f=[["",this._header_combo_default&&this._header_combo_default[d]?this._header_combo_default[d]:"&nbsp;"]],h=0;h<e.length;h++)"object"==typeof e[h]?f.push([e[h][0],g?e[h][1]:e[h][0]]):f.push([e[h],e[h]]);b.combo.addOption(f);b.combo.render(!0)};
dhtmlXGridObject.prototype.refreshFilters=function(){if(this.filters)for(var b=0;b<this.filters.length;b++)switch(this.filters[b][0].tagName.toLowerCase()){case "select":this._loadSelectOptins.apply(this,this.filters[b]);break;case "div":(!this.filters[b][0].childNodes||"input"!=this.filters[b][0].childNodes[0].tagName.toLowerCase())&&this._loadComboOptins.apply(this,this.filters[b])}};
dhtmlXGridObject.prototype._filters_ready=function(){this.attachEvent("onXLE",this.refreshFilters);this.attachEvent("onRowCreated",function(b,d){if(this._f_rowsBuffer)for(var e=0;e<this._f_rowsBuffer.length;e++)if(this._f_rowsBuffer[e].idd==b)return this._f_rowsBuffer[e]=d});this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null;this.hdr.rows.length||(this.filters=[])});window.dhtmlXCombo&&this.attachEvent("onScroll",dhtmlXCombo.prototype.closeAll);this._filters_ready=function(){};this._comboFilterLazyLoad&&
this.attachEvent("onPageChanged",this.refreshFilters)};dhtmlXGridObject.prototype._in_header_text_filter=function(b,d){b.innerHTML="<input type='text' style='width:90%; font-size:8pt; font-family:Tahoma; -moz-user-select:text; '>";b.onclick=b.onmousedown=function(b){return(b||event).cancelBubble=!0};b.onselectstart=function(){return event.cancelBubble=!0};this.makeFilter(b.firstChild,d)};
dhtmlXGridObject.prototype._in_header_text_filter_inc=function(b,d){b.innerHTML="<input type='text' style='width:90%; font-size:8pt; font-family:Tahoma; -moz-user-select:text; '>";b.onclick=b.onmousedown=function(b){return(b||event).cancelBubble=!0};b.onselectstart=function(){return event.cancelBubble=!0};this.makeFilter(b.firstChild,d);b.firstChild._filter=function(){return""==b.firstChild.value?"":function(d){return 0==d.toString().toLowerCase().indexOf(b.firstChild.value.toLowerCase())}};this._filters_ready()};
dhtmlXGridObject.prototype._in_header_select_filter=function(b,d){b.innerHTML="<select style='width:90%; font-size:9pt; font-family:Tahoma;'></select>";b.onclick=function(b){(b||event).cancelBubble=!0;return!1};this.makeFilter(b.firstChild,d)};
dhtmlXGridObject.prototype._in_header_select_filter_strict=function(b,d){b.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>";b.onclick=function(b){(b||event).cancelBubble=!0;return!1};this.makeFilter(b.firstChild,d);b.firstChild._filter=function(){return!b.firstChild.value?"":function(d){return""==b.firstChild.value.toLowerCase()?!0:d.toString().toLowerCase()==b.firstChild.value.toLowerCase()}};this._filters_ready()};
dhtmlXGridObject.prototype._in_header_tree_filter=function(b,d){b.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; font-size:8pt; font-family:Tahoma; -moz-user-select:text;' class='tree'></div>";b.onselectstart=function(){return event.cancelBubble=!0};b.onclick=b.onmousedown=function(b){return(b||event).cancelBubble=!0};this.makeFilter(b.firstChild,d)};
dhtmlXGridObject.prototype._in_header_combo_filter=function(b,d){b.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; font-size:8pt; font-family:Tahoma; -moz-user-select:text;' class='combo'></div>";b.onselectstart=function(){return event.cancelBubble=!0};b.onclick=b.onmousedown=function(b){return(b||event).cancelBubble=!0};this.makeFilter(b.firstChild,d)};
dhtmlXGridObject.prototype._in_header_text_search=function(b,d){b.innerHTML="<input type='text' style='width:90%; font-size:8pt; font-family:Tahoma; -moz-user-select:text;'>";b.onclick=b.onmousedown=function(b){return(b||event).cancelBubble=!0};b.onselectstart=function(){return event.cancelBubble=!0};this.makeSearch(b.firstChild,d)};
dhtmlXGridObject.prototype._in_header_numeric_filter=function(b,d){this._in_header_text_filter.call(this,b,d);b.firstChild._filter=function(){var b=this.value,d,g="==",h=parseFloat(b.replace("=","")),l=null;if(b){if(-1!=b.indexOf(".."))return b=b.split(".."),h=parseFloat(b[0]),l=parseFloat(b[1]),function(b){return b>=h&&b<=l?!0:!1};if(d=b.match(/>=|<=|>|</))g=d[0],h=parseFloat(b.replace(g,""));return Function("v"," if (v "+g+" "+h+" ) return true; return false;")}return""}};
dhtmlXGridObject.prototype.enableMasterChxAllCheck=function(b,d,e){var f=convertStringToBoolean(d);this._mcIgnoreDisabed=convertStringToBoolean(e);this.attachEvent("onXLE",function(){this.setMasterChxAllCheck(b,f)})};
dhtmlXGridObject.prototype.setMasterChxAllCheck=function(b,d){for(var e=convertStringToBoolean(d),f=this._m_order?this._m_order[b]:b,g=this.hdr.rows[1].cells[b],g=g.childNodes?g.childNodes[0]:null;g;)if("INPUT"==g.tagName){g.checked=e;break}else g=g.childNodes?g.childNodes[0]:null;this.forEachRowA(function(b){b=this.cells(b,f);b.isCheckbox()&&!b.isDisabled()&&b.setValue(e)})};
dhtmlXGridObject.prototype._in_header_master_checkbox=function(b,d,e){b.innerHTML=e[0]+"<input type='checkbox' />"+e[1];var f=this,g=b.getElementsByTagName("input")[0];e=f._m_order?f._m_order[d]:d;g.onclick=function(b){f._build_m_order();var d=this.checked?1:0;f.callEvent("onMasterCheck",[e,d?!0:!1]);f.forEachRowA(function(b){var f=this.cells(b,e);f.isCheckbox()&&!f.isDisabled()&&(f.setValue(d),f.cell.wasChanged=!0);this.callEvent("onEditCell",[1,b,e,d])});f.callEvent("onAfterMasterCheck",[e,d?!0:
!1]);(b||event).cancelBubble=!0};this.attachEvent("onCheck",function(b,d,f){if(f){var k=!0;this.forEachRowA(function(b){b=this.cells(b,e);b.isCheckbox()&&0==b.getValue()&&(k=!1)});g.checked=k?!0:!1}else g.checked=!1})};
dhtmlXGridObject.prototype._in_header_stat_total=function(b,d,e){this._stat_in_header(b,function(){var b=0;this._build_m_order();for(var e=this._m_order?this._m_order[d]:d,h=0;h<this.rowsBuffer.length;h++)var l=parseFloat(this._get_cell_value(this.rowsBuffer[h],e)),b=b+(isNaN(l)?0:l);return this._maskArr[e]?this._aplNF(b,e):Math.round(100*b)/100},d,e,e)};
dhtmlXGridObject.prototype._in_header_stat_multi_total=function(b,d,e){var f=e[1].split(":");e[1]="";for(var g=0;g<f.length;g++)f[g]=parseInt(f[g]);g=[];for(d=0;d<f.length;d++)g[f[d]]=!0;this._stat_in_header(b,function(){for(var b=0,e=0;e<this.rowsBuffer.length;e++){for(var g=1,k=0;k<f.length;k++)g*=parseFloat(this._get_cell_value(this.rowsBuffer[e],f[k]));b+=isNaN(g)?0:g}return this._maskArr[d]?this._aplNF(b,d):Math.round(100*b)/100},g,e,e)};
dhtmlXGridObject.prototype._in_header_stat_max=function(b,d,e){this._stat_in_header(b,function(){var b=-999999999;if(0==this.getRowsNum())return"&nbsp;";for(var e=0;e<this.rowsBuffer.length;e++)b=Math.max(b,parseFloat(this._get_cell_value(this.rowsBuffer[e],d)));return this._maskArr[d]?this._aplNF(b,d):b},d,e)};
dhtmlXGridObject.prototype._in_header_stat_min=function(b,d,e){this._stat_in_header(b,function(){var b=999999999;if(0==this.getRowsNum())return"&nbsp;";for(var e=0;e<this.rowsBuffer.length;e++)b=Math.min(b,parseFloat(this._get_cell_value(this.rowsBuffer[e],d)));return this._maskArr[d]?this._aplNF(b,d):b},d,e)};
dhtmlXGridObject.prototype._in_header_stat_average=function(b,d,e){this._stat_in_header(b,function(){var b=0,e=0;if(0==this.getRowsNum())return"&nbsp;";for(var h=0;h<this.rowsBuffer.length;h++){var l=parseFloat(this._get_cell_value(this.rowsBuffer[h],d)),b=b+(isNaN(l)?0:l);e++}return this._maskArr[d]?this._aplNF(b/e,d):Math.round(100*(b/e))/100},d,e)};dhtmlXGridObject.prototype._in_header_stat_count=function(b,d,e){this._stat_in_header(b,function(){return this.getRowsNum()},d,e)};
dhtmlXGridObject.prototype._stat_in_header=function(b,d,e,f){var g=function(){this.dma(!0);b.innerHTML=(f[0]?f[0]:"")+d.call(this)+(f[1]?f[1]:"");this.dma(!1);this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var b=0;b<this._stat_events.length;b++)for(var d=0;4>d;d++)this.detachEvent(this._stat_events[b][d]);this._stat_events=[]}}));this._stat_events.push([this.attachEvent("onGridReconstructed",g),this.attachEvent("onXLE",
g),this.attachEvent("onFilterEnd",g),this.attachEvent("onEditCell",function(b,d,f){2==b&&(f==e||e&&e[f])&&g.call(this);return!0})]);b.innerHTML=""};dhtmlXGridObject.prototype.setHeaderComboDefaultText=function(b,d){this._header_combo_default||(this._header_combo_default={});this._header_combo_default[b]=d};dhtmlXGridObject.prototype.resetFilters=function(){for(var b=",",d=this.filters.length;0<=d;d--){var e=this.filters[d][1];-1==b.indexOf(","+e+",")?b+=e+",":this.filters.splice(d,1)}};
dhtmlXGridObject.prototype.toPDF=function(b,d,e,f,g,h,l,m){function k(b,d){return(window.getComputedStyle?window.getComputedStyle(b,null)[d]:b.currentStyle?b.currentStyle[d]:null)||""}function n(b){if(!u.rowsBuffer[b])return"";b=u.render_row(b);if("none"==b.style.display)return"";for(var d="<row>",e=0;e<u._cCount;e++)if((!u._srClmn||u._srClmn[e])&&!u._hrrar[e]){var f=u.cells(b.idd,e);if(s){var g=k(f.cell,"color"),h=k(f.cell,"backgroundColor"),l=k(f.cell,"font-weight")||k(f.cell,"fontWeight"),m=k(f.cell,
"font-style")||k(f.cell,"fontStyle"),n=k(f.cell,"text-align")||k(f.cell,"textAlign"),v=k(f.cell,"font-family")||k(f.cell,"fontFamily");if("transparent"==h||"rgba(0, 0, 0, 0)"==h)h="rgb(255,255,255)";d+="<cell bgColor='"+h+"' textColor='"+g+"' bold='"+l+"' italic='"+m+"' align='"+n+"' font='"+v+"'>"}else d+="<cell>";d+="<![CDATA["+(f.getContent?f.getContent():f.getTitle())+"]]\x3e</cell>"}return d+"</row>"}d=d||"color";var s="full_color"==d,u=this;u._asCDATA=!0;this.target="undefined"===typeof h?' target="_blank"':
h;eXcell_ch.prototype.getContent=function(){return this.getValue()};eXcell_ra.prototype.getContent=function(){return this.getValue()};if(u._fake){var v=[].concat(u._hrrar);for(h=0;h<u._fake._cCount;h++)u._hrrar[h]=null}h=document.createElement("div");h.style.display="none";document.body.appendChild(h);var w="form_"+u.uid();h.innerHTML='<form id="'+w+'" method="post" action="'+b+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> </form>';
document.getElementById(w).firstChild.value=encodeURIComponent(function(b){for(var d=[],g=1;g<u.hdr.rows.length;g++){d[g]=[];for(var h=0;h<u._cCount;h++){var k=u.hdr.rows[g].childNodes[h];d[g][h]||(d[g][h]=[0,0]);k&&(d[g][k._cellIndexS]=[k.colSpan,k.rowSpan])}}b="<rows profile='"+b+"'";e&&(b+=" header='"+e+"'");f&&(b+=" footer='"+f+"'");b+=" without_header='"+(l?"true":"false")+"'";b+=" without_footer='"+(m?"true":"false")+"'";b+="><head>"+u._serialiseExportConfig(d).replace(/^<head/,"<columns").replace(/head>$/,
"columns>");for(g=2;g<u.hdr.rows.length;g++){for(var k=!1,s=0,n=u.hdr.rows[g],v="",h=0;h<u._cCount;h++)if(u._srClmn&&!u._srClmn[h])s++;else if(u._hrrar[h]&&(1>=d[g][h][0]||!u.hasBlockChild(d[g][h][0],h)))s++;else{var w=d[g][h],K=w[0]&&1<w[0]?w[0]:0,O=K;if(1<K)O=u.getBlockChildCount(K,h),k=u._hrrar[h]?!0:!1;else if(k){k=!1;continue}K=1<O?' colspan="'+O+'" ':"";w=w[1]&&1<w[1]?u.getActualRowSpan(g,w[1]):1;1<w&&(K+=' rowspan="'+w+'" ',s=-1);for(var w="",L=0;L<n.cells.length;L++)if(n.cells[L]._cellIndexS==
h){w=n.cells[L].getElementsByTagName("SELECT").length?"":_isIE?n.cells[L].innerText:n.cells[L].textContent;w=w.replace(/[ \n\r\t\xA0]+/," ");break}!u.filters&&(!w||" "==w)&&s++;v+="<column"+K;if(u._exportExcelFormat&&u._exportExcelFormat["c_"+h]&&1>=O)for(var J in u._exportExcelFormat["c_"+h])v+=" "+J+'="'+u._exportExcelFormat["c_"+h][J]+'"';v+="><![CDATA["+w+"]]\x3e</column>"}s!=u._cCount&&(b+="\n<columns>"+v+"</columns>")}var d=b+"</head>\n",H;if(m)H="";else if(g=["<foot>"],u.ftr){for(h=1;h<u.ftr.rows.length;h++){g.push("<columns>");
J=u.ftr.rows[h];for(b=0;b<u._cCount;b++)if((!u._srClmn||u._srClmn[b])&&!u._hrrar[b]){for(k=0;k<J.cells.length;k++){var N=H="";if(J.cells[k]._cellIndexS==b){H=_isIE?J.cells[k].innerText:J.cells[k].textContent;H=H.replace(/[ \n\r\t\xA0]+/," ");J.cells[k].colSpan&&1!=J.cells[k].colSpan&&(N=" colspan='"+J.cells[k].colSpan+"' ");break}}g.push("<column"+N+"><![CDATA["+H+"]]\x3e</column>")}g.push("</columns>")}g.push("</foot>");H=g.join("\n")}else H="";return d+H}(d).replace("\u2013","-")+function(){var b=
[];if(g)for(var d=0;d<g.length;d++)b.push(n(u.getRowIndex(g[d])));else for(d=0;d<u.getRowsNum();d++)b.push(n(d));return b.join("\n")}()+"</rows>");document.getElementById(w).submit();h.parentNode.removeChild(h);u._fake&&(u._hrrar=v);u=null};
dhtmlXGridObject.prototype._serialiseExportConfig=function(b){for(var d="<head>",e=0;e<this.hdr.rows[0].cells.length;e++)if((!this._srClmn||this._srClmn[e])&&!this._hrrar[e]){var f=this.fldSort[e];"cus"==f&&(f=this._customSorts[e].toString(),f=f.replace(/function[\ ]*/,"").replace(/\([^\f]*/,""));var g=this._fake&&e<this._splitColIndex?[this._fake.hdr.rows[1].cells[e].colSpan,this._fake.hdr.rows[1].cells[e].rowSpan]:b[1][e],h=g[1]&&1<g[1]?this.getActualRowSpan(1,g[1]):1,h=1<h?' rowspan="'+h+'" ':
"",g=g[0]&&1<g[0]?g[0]:0,g=1<g?this.getBlockChildCount(g,e):0,h=h+(1<g?' colspan="'+g+'" ':""),d=d+("<column "+h+" width='"+this.getColWidth(e)+"' align='"+this.cellAlign[e]+"' type='"+this.cellType[e]+"' hidden='"+(this.isColumnHidden&&this.isColumnHidden(e)?"true":"false")+"' sort='"+(f||"na")+"' color='"+(this.columnColor[e]||"")+"'"+(this.columnIds[e]?" id='"+this.columnIds[e]+"'":"")+">"),d=d+(this._asCDATA?"<![CDATA["+this.getHeaderCol(e)+"]]\x3e":this.getHeaderCol(e));if(f=this.getCombo(e))for(g=
0;g<f.keys.length;g++)d+="<option value='"+f.keys[g]+"'>"+f.values[g]+"</option>";d+="</column>"}return d+"</head>"};window.eXcell_sub_row_grid&&(window.eXcell_sub_row_grid.prototype.getContent=function(){return""});
dhtmlXGridObject.prototype.setExcelColumnFormat=function(b,d,e){this._exportExcelFormat=this._exportExcelFormat?this._exportExcelFormat:{};b="c_"+b;this._exportExcelFormat[b]||(this._exportExcelFormat[b]={});switch(d){case "wrap":this._exportExcelFormat[b][d]=e;break;default:this._exportExcelFormat[b][d]=e}};
dhtmlXGridObject.prototype.toExcel=function(b,d,e,f,g,h,l){if(this._srnd){for(var m=0;m<this.rowsBuffer.length;m++)this.render_row(m);this._compileMathCells()}document.getElementById("ifr")||(m=document.createElement("iframe"),m.style.display="none",m.setAttribute("name","dhx_export_iframe"),m.setAttribute("src",""),m.setAttribute("id","dhx_export_iframe"),document.body.appendChild(m));eXcell_coro.prototype.getContent=function(){return _isIE?this.cell.innerText:this.cell.textContent};this.toPDF(b,
d,e,f,g,' target="dhx_export_iframe"',h,l);this._doAfterExport()};dhtmlXGridObject.prototype._doAfterExport=function(){eXcell_coro.prototype.getContent=function(){return this.getValue()}};dhtmlXGridObject.prototype.unGroup=function(){this._groups&&(this._dndProblematic=!1,delete this._groups,delete this._gIndex,this._fake&&this._mirror_rowsCol(),this.forEachRow(function(b){this.rowsAr[b].style.display=""}),this._reset_view(),this.callEvent("onGridReconstructed",[]),this.callEvent("onUnGroup",[]))};
dhtmlXGridObject.prototype._mirror_rowsCol=function(){this._fake._groups=this._groups;this._fake._gIndex=this._gIndex;this.rowsBuffer=dhtmlxArray();for(var b=0;b<this.rowsCol.length;b++)this.rowsCol[b]._cntr||this.rowsBuffer.push(this.rowsCol[b]);this._fake.rowsBuffer=dhtmlxArray();for(b=0;b<this._fake.rowsCol.length;b++)this._fake.rowsCol[b]._cntr||this._fake.rowsBuffer.push(this._fake.rowsCol[b])};
dhtmlXGridObject.prototype.groupBy=function(b,d){this._groups&&this.unGroup();this._dndProblematic=!0;this._groups={};if(!d){d=["#title"];for(var e=1;e<this._cCount;e++)d.push("#cspan")}this._gmask=document.createElement("TR");this._gmask.origin=d;for(var f,g=0,e=0;e<d.length;e++)"#cspan"==d[e]?f.colSpan=(parseInt(f.colSpan)||1)+1:(f=document.createElement("TD"),f._cellIndex=e,this._hrrar[e]&&(f.style.display="none"),f.className="group_row",f.innerHTML="&nbsp;","#title"==d[e]?this._gmask._title=g:
f.align=this.cellAlign[e]||"left",this._gmask.appendChild(f),0==d[e].indexOf("#stat")&&(this._gmask._math=!0,f._counter=[this["_g_"+d[e].replace("#","")],e,g]),g++);1==this._gmask.childNodes.length&&(this._gmask.childNodes[0].style.display="");for(var h in this._groups)this._groups[h]=this.undefined;this._gIndex=b;this._fake&&!this._realfake&&(this._fake._groups=[],this._fake._gIndex=this._gIndex);this._nextRow=function(b,d){var e=this.rowsCol[b+d];return e&&("none"==e.style.display||e._cntr)?this._nextRow(b+
d,d):e};this.__sortRowsBG||(this._key_events=dhtmlXHeir({},this._key_events),this._key_events.k38_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{var b=this.row.rowIndex;b&&(b=this._nextRow(b-1,-1))&&this.selectCell(b,this.cell._cellIndex,!0)}},this._key_events.k13_1_0=this._key_events.k13_0_1=function(){},this._key_events.k40_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{var b=this.row.rowIndex;b&&(b=this._nextRow(b-1,1))&&this.selectCell(b,
this.cell._cellIndex,!0)}},this.attachEvent("onFilterStart",function(){this._groups&&(this._groups=this.undefined);return!0}),this.attachEvent("onFilterEnd",function(){"undefined"!=typeof this._gIndex&&this.groupBy(this._gIndex,this._gmask.origin)}),this.sortRows_bg=this.sortRows,this.sortRows=function(b,d,e){if("undefined"==typeof this._groups)return this.sortRows_bg.apply(this,arguments);this.callEvent("onBeforeSorting",[b,d||"str",e||"asc"])},this.attachEvent("onBeforeSorting",function(b,d,e){if("undefined"==
typeof this._groups)return!0;b==this._gIndex?this._sortByGroup(b,d,e):this._sortInGroup(b,d,e);this.setSortImgState(!0,b,e);this._fake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view());this.setSortImgState(!0,b,e);this.callEvent("onAfterSorting",[b,d,e]);return!1}),this.attachEvent("onClearAll",function(){this.unGroup()}),this.attachEvent("onBeforeRowDeleted",function(b){if(!this._groups||!this.rowsAr[b])return!0;b=this.cells(b,this._gIndex).getValue();""===b&&(b=" ");this._dec_group(this._groups[b]);
return!0}),this.attachEvent("onAfterRowDeleted",function(){this.updateGroups()}),this.attachEvent("onCheckbox",function(b,d,e){this.callEvent("onEditCell",[2,b,d,e?1:0,e?0:1])}),this.attachEvent("onXLE",this.updateGroups),this.attachEvent("onColumnHidden",this.hideGroupColumn),this.attachEvent("onEditCell",function(b,d,e,f,g){if(!this._groups)return!0;2==b&&f!=g&&e==this._gIndex?(""===g&&(g=" "),this._dec_group(this._groups[g]),b=this.rowsAr[d],d=this.rowsCol._dhx_find(b),f=this._inc_group(f),e=this.rowsCol[f],
b==e&&(e=e.nextSibling),g=b.parentNode,g.removeChild(b),e?g.insertBefore(b,e):g.appendChild(b),this.rowsCol._dhx_insertAt(f,b),f<d&&d++,this.rowsCol._dhx_removeAt(d,b),this._fixAlterCss()):2==b&&f!=g&&(this.updateGroups(),this._updateGroupView(this._groups[this.cells(d,this._gIndex).getValue()||" "]));return!0}),this.__sortRowsBG=!0);this._groupExisting();if(this._hrrar)for(e=0;e<this._hrrar.length;e++)this._hrrar[e]&&this.hideGroupColumn(e,!0);this.callEvent("onGroup",[]);(this._ahgr||this._awdth)&&
this.setSizes()};dhtmlXGridObject.prototype._sortInGroup=function(b,d,e){var f=this._groups_get();f.reverse();for(var g=0;g<f.length;g++){for(var h=f[g]._cntr._childs,l={},m=0;m<h.length;m++){var k=this.cells3(h[m],b);l[h[m].idd]=k.getDate?k.getDate():k.getValue()}this._sortCore(b,d,e,l,h)}this._groups_put(f);this.setSizes();this.callEvent("onGridReconstructed",[])};
dhtmlXGridObject.prototype._sortByGroup=function(b,d,e){for(var f=this._groups_get(),g=[],h=0;h<f.length;h++)f[h].idd="_sort_"+h,g["_sort_"+h]=f[h]._cntr.text;this._sortCore(b,d,e,g,f);this._groups_put(f);this.callEvent("onGridReconstructed",[]);this.setSizes()};
dhtmlXGridObject.prototype._inc_group=function(b,d,e){""===b&&(b=" ");this._groups[b]||(this._groups[b]={text:b,row:this._addPseudoRow(!1,e),count:0,state:d?"plus":"minus"});b=this._groups[b];b.row._cntr=b;d=this.rowsCol._dhx_find(b.row)+b.count+1;b.count++;e||(this._updateGroupView(b),this.updateGroups());return d};
dhtmlXGridObject.prototype._dec_group=function(b){if(b)return b.count--,0==b.count?(b.row.parentNode.removeChild(b.row),this.rowsCol._dhx_removeAt(this.rowsCol._dhx_find(b.row)),delete this._groups[b.text]):this._updateGroupView(b),this._fake&&!this._realfake&&this._fake._dec_group(this._fake._groups[b.text]),this.updateGroups(),!0};dhtmlXGridObject.prototype._insertRowAt_gA=dhtmlXGridObject.prototype._insertRowAt;
dhtmlXGridObject.prototype._insertRowAt=function(b,d,e){if("undefined"!=typeof this._groups){var f=this._realfake?this._fake._bfs_cells(b.idd,this._gIndex).getValue():this._bfs_cells3?this._bfs_cells3(b,this._gIndex).getValue():this.cells3(b,this._gIndex).getValue();f||(f=" ");d=this._inc_group(f,"none"==b.style.display,d)}b=this._insertRowAt_gA(b,d,e);"undefined"!=typeof this._groups&&(this.expandGroup(f),this._updateGroupView(this._groups[f]),this.updateGroups());return b};
dhtmlXGridObject.prototype._updateGroupView=function(b){if(this._fake&&!this._realfake)return b.row.firstChild.innerHTML="&nbsp;";var d=this._gmask||this._fake._gmask,e="<img style='margin-bottom:-4px' src='"+this.imgURL+b.state+".gif'> ",e=e+(this.customGroupFormat?this.customGroupFormat(b.text,b.count):b.text+" ( "+b.count+" ) ");b.row.childNodes[d._title].innerHTML=e};
dhtmlXGridObject.prototype._addPseudoRow=function(b,d){var e=this._gmask||this._fake._gmask,f=e.cloneNode(!0);if(!b&&0==d)for(var f=this.obj.insertRow(1),g=0;g<e.childNodes.length;g++)f.appendChild(e.childNodes[g].cloneNode(!0));for(g=0;g<f.childNodes.length;g++)if(f.childNodes[g]._cellIndex=e.childNodes[g]._cellIndex,this._realfake)f.childNodes[g].style.display="";var h=this;f.onclick=function(b){h._fake&&h._realfake?h._fake._switchGroupState(h._fake._groups[this._cntr.text].row):h._switchGroupState(this);
(b||event).cancelBubble="true"};f.ondblclick=function(b){(b||event).cancelBubble="true"};b||(0==d?this.rowsCol._dhx_insertAt(0,f):(_isKHTML?this.obj.appendChild(f):this.obj.firstChild.appendChild(f),this.rowsCol.push(f)));return f};
dhtmlXGridObject.prototype._groups_get=function(){var b=[];this._temp_par=this.obj.parentNode;this._temp_par.removeChild(this.obj);for(var d=[],e=this.rowsCol.length-1;0<=e;e--)this.rowsCol[e]._cntr?(this.rowsCol[e]._cntr._childs=d,d=[],b.push(this.rowsCol[e])):d.push(this.rowsCol[e]),this.rowsCol[e].parentNode.removeChild(this.rowsCol[e]);return b};
dhtmlXGridObject.prototype._groups_put=function(b){var d=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray(0);this.rowsCol.stablesort=d;for(d=0;d<b.length;d++){var e=b[d]._cntr;this.obj.firstChild.appendChild(e.row);this.rowsCol.push(e.row);e.row.idd=null;for(var f=0;f<e._childs.length;f++)this.obj.firstChild.appendChild(e._childs[f]),this.rowsCol.push(e._childs[f]);delete e._childs}this._temp_par.appendChild(this.obj)};
dhtmlXGridObject.prototype._groupExisting=function(b){if(this.getRowsNum()){b=[];this._temp_par=this.obj.parentNode;this._temp_par.removeChild(this.obj);for(var d=this.rowsCol.length,e=0;e<d;e++){var f=this.cells4(this.rowsCol[e].childNodes[this._gIndex]).getValue();this.rowsCol[e].style.display="";f||(f=" ");if(!this._groups[f]){this._groups[f]={text:f,row:this._addPseudoRow(!0),count:0,state:"minus"};var g=this._groups[f];g.row._cntr=g;this._groups[f]._childs=[];b.push(g.row)}this._groups[f].count++;
this._groups[f]._childs.push(this.rowsCol[e]);this.rowsCol[e].parentNode.removeChild(this.rowsCol[e])}for(e=0;e<b.length;e++)this._updateGroupView(b[e]._cntr);this._groups_put(b);this._fake&&!this._realfake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view());this.callEvent("onGridReconstructed",[]);this.updateGroups()}};
dhtmlXGridObject.prototype._switchGroupState=function(b){var d=b._cntr;this._fake&&!this._realfake&&(d.state=this._fake._groups[b._cntr.text].row._cntr.state,this._fake._switchGroupState(this._fake._groups[b._cntr.text].row));b=this.rowsCol._dhx_find(d.row)+1;d.state="minus"==d.state?"plus":"minus";for(var e="plus"==d.state?"none":"";this.rowsCol[b]&&!this.rowsCol[b]._cntr;)this.rowsCol[b].style.display=e,b++;this._updateGroupView(d);this.callEvent("onGroupStateChanged",[d.text,"minus"==d.state]);
this.setSizes()};dhtmlXGridObject.prototype.expandGroup=function(b){"plus"==this._groups[b].state&&this._switchGroupState(this._groups[b].row)};dhtmlXGridObject.prototype.collapseGroup=function(b){"minus"==this._groups[b].state&&this._switchGroupState(this._groups[b].row)};dhtmlXGridObject.prototype.expandAllGroups=function(){for(var b in this._groups)this._groups[b]&&"plus"==this._groups[b].state&&this._switchGroupState(this._groups[b].row)};
dhtmlXGridObject.prototype.collapseAllGroups=function(){for(var b in this._groups)this._groups[b]&&"minus"==this._groups[b].state&&this._switchGroupState(this._groups[b].row)};dhtmlXGridObject.prototype.hideGroupColumn=function(b,d){if(!this._fake&&1!=this._gmask.childNodes.length){for(var e=-1,f=this._gmask.childNodes,g=0;g<f.length;g++)if(f[g]._cellIndex==b){e=g;break}if(-1!=e)for(var h in this._groups)this._groups[h].row.childNodes[e].style.display=d?"none":""}};
dhtmlXGridObject.prototype.groupStat=function(b,d,e){e=this["_g_"+(e||"stat_total")];var f=0,g=0;this.forEachRowInGroup(b,function(b){f=e(f,1*this.cells(b,d).getValue(),g);g++});return f};dhtmlXGridObject.prototype.forEachRowInGroup=function(b,d){var e=this._groups[b].row.nextSibling;if(e)for(;e&&!e._cntr;)d.call(this,e.idd),e=e.nextSibling;else if(e=this._groups[b]._childs)for(var f=0;f<e.length;f++)d.call(this,e[f].idd)};
dhtmlXGridObject.prototype.updateGroups=function(){if(this._gmask&&this._gmask._math&&!this._parsing)for(var b=this._gmask.childNodes,d=0;d<b.length;d++)b[d]._counter&&this._b_processing.apply(this,b[d]._counter)};
dhtmlXGridObject.prototype._b_processing=function(b,d,e){var f=0,g=0;this._ecache[this.cellType[d]]||this.cells5({parentNode:{grid:this}},this.cellType[d]);for(var h=this.rowsCol.length-1;0<=h;h--)this.rowsCol[h]._cntr?(this.cells5(this.rowsCol[h].childNodes[e],this.cellType[d]).setValue(f),g=f=0):(f=b(f,1*this.cells3(this.rowsCol[h],d).getValue(),g),g++)};dhtmlXGridObject.prototype._g_stat_total=function(b,d){return b+d};
dhtmlXGridObject.prototype._g_stat_min=function(b,d,e){e||(b=Infinity);return Math.min(b,d)};dhtmlXGridObject.prototype._g_stat_max=function(b,d,e){e||(b=-Infinity);return Math.max(b,d)};dhtmlXGridObject.prototype._g_stat_average=function(b,d,e){return(b*e+d)/(e+1)};dhtmlXGridObject.prototype._g_stat_count=function(b){return b++};
dhtmlXGridObject.prototype.enableDragAndDrop=function(b){"temporary_disabled"==b?(this.dADTempOff=!1,b=!0):this.dADTempOff=!0;this.dragAndDropOff=convertStringToBoolean(b);this._drag_validate=!0;b&&(this.objBox.ondragstart=function(b){(b||event).cancelBubble=!0;return!1})};
dhtmlXGridObject.prototype.setDragBehavior=function(b){this.dadmodec=this.dadmodefix=0;switch(b){case "child":this.dadmode=0;this._sbmod=!1;break;case "sibling":this.dadmode=1;this._sbmod=!1;break;case "sibling-next":this.dadmode=1;this._sbmod=!0;break;case "complex":this.dadmode=2;this._sbmod=!1;break;case "complex-next":this.dadmode=2,this._sbmod=!0;case "replace":this.dadmode=0,this._sbmod=!1}};dhtmlXGridObject.prototype.enableDragOrder=function(b){this._dndorder=convertStringToBoolean(b)};
dhtmlXGridObject.prototype._checkParent=function(b,d){var e=this._h2.get[b.idd].parent;if(e.parent){for(var f=0;f<d.length;f++)if(d[f]==e.id)return!0;return this._checkParent(this.rowsAr[e.id],d)}};
dhtmlXGridObject.prototype._createDragNode=function(b,d){this.editStop();if(window.dhtmlDragAndDrop.dragNode||!this.dADTempOff)return null;b.parentObject={};b.parentObject.treeNod=this;var e=this.callEvent("onBeforeDrag",[b.parentNode.idd,b._cellIndex]);if(!e)return null;for(var f=[],f=(f=this.getSelectedId())&&""!=f?f.split(this.delim):[],g=!1,h=0;h<f.length;h++)f[h]==b.parentNode.idd&&(g=!0);g||(this.selectRow(this.rowsAr[b.parentNode.idd],!1,d.ctrlKey,!1),d.ctrlKey||(f=[]),f[this.selMultiRows?
f.length:0]=b.parentNode.idd);if(this.isTreeGrid())for(h=f.length-1;0<=h;h--)this._checkParent(this.rowsAr[f[h]],f)&&f.splice(h,1);var l=this;f.length&&this._dndorder&&f.sort(function(b,d){return l.rowsAr[b].rowIndex>l.rowsAr[d].rowIndex?1:-1});if(g=this.getFirstParentOfType(_isIE?d.srcElement:d.target,"TD"))this._dndExtra=g._cellIndex;this._dragged=[];for(h=0;h<f.length;h++)this.rowsAr[f[h]]&&(this._dragged[this._dragged.length]=this.rowsAr[f[h]],this.rowsAr[f[h]].treeNod=this);b.parentObject.parentNode=
b.parentNode;f=document.createElement("div");f.innerHTML=!0!==e?e:this.rowToDragElement(b.parentNode.idd);f.style.position="absolute";f.className="dragSpanDiv";return f};dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV");this._sdrgc.innerHTML="&nbsp;";this._sdrgc.className="gridDragLine";this.objBox.appendChild(this._sdrgc)};
function dragContext(b,d,e,f,g,h,l,m,k,n){this.source=b||"grid";this.target=d||"grid";this.mode=e||"move";this.dropmode=f||"child";this.sid=g||0;this.tid=h;this.sobj=l||null;this.tobj=m||null;this.sExtra=k||null;this.tExtra=n||null;return this}dragContext.prototype.valid=function(){if(this.sobj!=this.tobj)return!0;if(this.sid==this.tid)return!1;if("treeGrid"==this.target)for(var b=this.tid;b=this.tobj.getParentId(b);)if(this.sid==b)return!1;return!0};
dragContext.prototype.close=function(){this.tobj=this.sobj=null};dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra)};dragContext.prototype.set=function(b,d){this[b]=d;return this};dragContext.prototype.uid=function(){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];)this.nid+=(new Date).valueOf();return this};
dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):"tree"==this.source?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)};dragContext.prototype.childs=function(){return"treeGrid"==this.source?this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null:null};
dragContext.prototype.pid=function(){if(!this.tid||!this.tobj._h2)return 0;if("treeGrid"==this.target){if("child"==this.dropmode)return this.tid;var b=this.tobj.rowsAr[this.tid],d=this.tobj._h2.get[b.idd].parent.id;if(this.alfa&&this.tobj._sbmod&&b.nextSibling){b=this.tobj._h2.get[b.nextSibling.idd].parent.id;if(b==this.tid)return this.tid;if(b!=d)return b}return d}};
dragContext.prototype.ind=function(){if(this.tid==window.unknown)return 0;"treeGrid"==this.target&&("child"==this.dropmode?this.tobj.openItem(this.tid):this.tobj.openItem(this.tobj.getParentId(this.tid)));var b=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if(this.alfa&&this.tobj._sbmod&&"sibling"==this.dropmode){var d=this.tobj.rowsAr[this.tid];if(d.nextSibling&&this._h2.get[d.nextSibling.idd].parent.id==this.tid)return b+1}return b+1+("treeGrid"==this.target&&0<=b&&"minus"==this.tobj._h2.get[this.tobj.rowsBuffer[b].idd].state?
this.tobj._getOpenLenght(this.tobj.rowsBuffer[b].idd,0):0)};dragContext.prototype.img=function(){return"grid"!=this.target&&this.sobj._h2?this.sobj.getItemImage(this.sid):null};dragContext.prototype.slist=function(){for(var b=[],d=0;d<this.sid.length;d++)b[b.length]=this.sid[d]["tree"==this.source?"id":"idd"];return b.join(",")};
dhtmlXGridObject.prototype._drag=function(b,d,e,f){if(this._realfake)return this._fake._drag();this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);d=e.parentNode;e=b.parentObject;d.idd||(d.grid=this,this.dadmodefix=0);b=new dragContext(0,0,0,1==d.grid.dadmode||d.grid.dadmodec?"sibling":"child");if(e&&e.childNodes)b.set("source","tree").set("sobj",e.treeNod).set("sid",b.sobj._dragged);else{if(!e)return!0;e.treeNod.isTreeGrid&&e.treeNod.isTreeGrid()&&b.set("source","treeGrid");b.set("sobj",
e.treeNod).set("sid",b.sobj._dragged)}d.grid.isTreeGrid()?b.set("target","treeGrid"):b.set("dropmode","sibling");b.set("tobj",d.grid).set("tid",d.idd);2==b.tobj.dadmode&&(1==b.tobj.dadmodec&&0>b.tobj.dadmodefix)&&(b.tid=b.tobj.obj.rows[1].idd!=b.tid?d.previousSibling.idd:0);(f=this.getFirstParentOfType(f,"TD"))&&b.set("tExtra",f._cellIndex);f&&b.set("sExtra",b.sobj._dndExtra);b.sobj.dpcpy&&b.set("mode","copy");b.tobj._realfake&&(b.tobj=b.tobj._fake);b.sobj._realfake&&(b.sobj=b.sobj._fake);b.tobj._clearMove();
if(e&&e.treeNod&&e.treeNod._nonTrivialRow)e.treeNod._nonTrivialRow(this,b.tid,b.dropmode,e);else{b.tobj.dragContext=b;if(!b.tobj.callEvent("onDrag",[b.slist(),b.tid,b.sobj,b.tobj,b.sExtra,b.tExtra]))return b.tobj.dragContext=null;f=[];if("object"==typeof b.sid){d=b.copy();for(e=0;e<b.sid.length;e++)if(d.set("alfa",!e).set("sid",b.sid[e]["tree"==b.source?"id":"idd"]).valid())d.tobj._dragRoutine(d),"treeGrid"==d.target&&"child"==d.dropmode&&d.tobj.openItem(d.tid),f[f.length]=d.nid,d.set("dropmode",
"sibling").set("tid",d.nid);d.close()}else b.tobj._dragRoutine(b);b.tobj.laterLink&&b.tobj.laterLink();b.tobj.callEvent("onDrop",[b.slist(),b.tid,f.join(","),b.sobj,b.tobj,b.sExtra,b.tExtra])}b.tobj.dragContext=null;b.close()};
dhtmlXGridObject.prototype._dragRoutine=function(b){if(b.sobj==b.tobj&&"grid"==b.source&&"move"==b.mode&&!this._fake){if(!b.sobj._dndProblematic){var d=b.sobj.rowsAr[b.sid],e=b.sobj.rowsCol._dhx_find(d);b.sobj.rowsCol._dhx_removeAt(b.sobj.rowsCol._dhx_find(d));b.sobj.rowsBuffer._dhx_removeAt(b.sobj.rowsBuffer._dhx_find(d));b.sobj.rowsBuffer._dhx_insertAt(b.ind(),d);b.tobj._fake&&(b.tobj._fake.rowsCol._dhx_removeAt(e),e=b.tobj._fake.rowsAr[b.sid],e.parentNode.removeChild(e));b.sobj._insertRowAt(d,
b.ind());b.nid=b.sid;b.sobj.callEvent("onGridReconstructed",[])}}else{this._h2&&"undefined"!=typeof b.tid&&"sibling"==b.dropmode&&(this._sbmod||b.tid)?b.alfa&&this._sbmod&&this._h2.get[b.tid].childs.length?(this.openItem(b.tid),d=b.uid().tobj.addRowBefore(b.nid,b.data(),this._h2.get[b.tid].childs[0].id,b.img(),b.childs())):d=b.uid().tobj.addRowAfter(b.nid,b.data(),b.tid,b.img(),b.childs()):d=b.uid().tobj.addRow(b.nid,b.data(),b.ind(),b.pid(),b.img(),b.childs());if("tree"==b.source){this.callEvent("onRowAdded",
[b.nid]);var f=b.sobj._globalIdStorageFind(b.sid);if(f.childsCount){d=b.copy().set("tid",b.nid).set("dropmode","grid"==b.target?"sibling":"child");for(e=0;e<f.childsCount;e++)b.tobj._dragRoutine(d.set("sid",f.childNodes[e].id)),"move"==b.mode&&e--;d.close()}}else if(b.tobj._copyUserData(b),this.callEvent("onRowAdded",[b.nid]),"treeGrid"==b.source)if(b.sobj==b.tobj&&(d._xml=b.sobj.rowsAr[b.sid]._xml),(f=b.sobj._h2.get[b.sid])&&f.childs.length){d=b.copy().set("tid",b.nid);"grid"==b.target?d.set("dropmode",
"sibling"):(d.tobj.openItem(b.tid),d.set("dropmode","child"));for(var g=f.childs.length,e=0;e<g;e++)if(b.sobj.render_row_tree(null,f.childs[e].id),b.tobj._dragRoutine(d.set("sid",f.childs[e].id)),g!=f.childs.length)e--,g=f.childs.length;d.close()}if("move"==b.mode&&(b.sobj["tree"==b.source?"deleteItem":"deleteRow"](b.sid),b.sobj==b.tobj&&!b.tobj.rowsAr[b.sid]))b.tobj.changeRowId(b.nid,b.sid),b.nid=b.sid}};
dhtmlXGridObject.prototype.gridToGrid=function(b,d){for(var e=[],f=0;f<d.hdr.rows[0].cells.length;f++)e[f]=d.cells(b,f).getValue();return e};dhtmlXGridObject.prototype.checkParentLine=function(b,d){return!this._h2||!d||!b?!1:b.id==d?!0:this.checkParentLine(b.parent,d)};
dhtmlXGridObject.prototype._dragIn=function(b,d,e,f){if(!this.dADTempOff)return 0;var g=this.isTreeGrid(),h=d.parentNode.idd?d.parentNode:d.parentObject;if(this._drag_validate&&(b.parentNode==d.parentNode||g&&this==h.grid&&this.checkParentLine(this._h2.get[b.parentNode.idd],d.parentNode.idd)))return 0;if(!this.callEvent("onDragIn",[h.idd||h.id,b.parentNode.idd,h.grid||h.treeNod,b.grid||b.parentNode.grid]))return this._setMove(b,e,f,!0);this._setMove(b,e,f);g&&""!=b.parentNode.expand?(this._autoOpenTimer=
window.setTimeout(new callerFunction(this._autoOpenItem,this),1E3),this._autoOpenId=b.parentNode.idd):this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);return b};dhtmlXGridObject.prototype._autoOpenItem=function(b,d){d.openItem(d._autoOpenId)};dhtmlXGridObject.prototype._dragOut=function(b){this._clearMove();this.callEvent("onDragOut",[b.parentNode.parentObject?b.parentObject.id:b.parentNode.idd]);this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)};
dhtmlXGridObject.prototype._setMove=function(b,d,e,f){if(b.parentNode.idd){d=getAbsoluteTop(b);var g=getAbsoluteTop(this.objBox);d-g>parseInt(this.objBox.offsetHeight)-50&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20);d-g+parseInt(this.objBox.scrollTop)<parseInt(this.objBox.scrollTop)+30&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20);if(f)return 0;2==this.dadmode?(e=e-d+(document.body.scrollTop||document.documentElement.scrollTop)-2-b.offsetHeight/2,0<Math.abs(e)-b.offsetHeight/
6?(this.dadmodec=1,this.dadmodefix=0>e?-1:1):this.dadmodec=0):this.dadmodec=this.dadmode;if(this.dadmodec)this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=d-g+parseInt(this.objBox.scrollTop)+(0<=this.dadmodefix?b.offsetHeight:0)+"px";else if(this._llSelD=b,"TR"==b.parentNode.tagName)for(f=0;f<b.parentNode.childNodes.length;f++)e=b.parentNode.childNodes[f],e._bgCol=e.style.backgroundColor,e.style.backgroundColor="#FFCCCC"}};
dhtmlXGridObject.prototype._clearMove=function(){this._sdrgc&&(this._sdrgc.style.display="none");if(this._llSelD&&"TR"==this._llSelD.parentNode.tagName)for(var b=this._llSelD.parentNode.childNodes,d=0;d<b.length;d++)b[d].style.backgroundColor=b[d]._bgCol;this._llSelD=null};dhtmlXGridObject.prototype.rowToDragElement=function(b){return this.cells(b,0).getValue()};
dhtmlXGridObject.prototype._copyUserData=function(b){if(!b.tobj.UserData[b.nid]||b.tobj!=b.sobj){b.tobj.UserData[b.nid]=new Hashtable;var d=b.sobj.UserData[b.sid];b=b.tobj.UserData[b.nid];d&&(b.keys=b.keys.concat(d.keys),b.values=b.values.concat(d.values))}};dhtmlXGridObject.prototype.moveRow=function(b,d,e,f){switch(d){case "row_sibling":this.moveRowTo(b,e,"move","sibling",this,f);break;case "up":this.moveRowUp(b);break;case "down":this.moveRowDown(b)}};
dhtmlXGridObject.prototype._nonTrivialNode=function(b,d,e,f,g){if(b.callEvent&&!g&&!b.callEvent("onDrag",[f.idd,d.id,e?e.id:null,this,b]))return!1;for(var h=f=f.idd;b._idpull[h];)h+=(new Date).getMilliseconds().toString();var l=this.isTreeGrid()?this.getItemImage(f):"";if(e){for(k=0;k<d.childsCount&&d.childNodes[k]!=e;k++);0!=k?e=d.childNodes[k-1]:(st="TOP",e="")}l=b._attachChildNode(d,h,this.gridToTreeElement(b,h,f),"",l,l,l,"","",e);if(this._h2){var m=this._h2.get[f];if(m.childs.length)for(var k=
0;k<m.childs.length;k++)this._nonTrivialNode(b,l,0,this.rowsAr[m.childs[k].id],1),this.dpcpy||k--}this.dpcpy||this.deleteRow(f);b.callEvent&&!g&&b.callEvent("onDrop",[h,d.id,e?e.id:null,this,b])};dhtmlXGridObject.prototype.gridToTreeElement=function(b,d,e){return this.cells(e,0).getValue()};
dhtmlXGridObject.prototype.treeToGridElement=function(b,d){var e=[],f=this.cellType._dhx_find("tree");-1==f&&(f=0);for(var g=0;g<this.getColumnCount();g++)e[e.length]=g!=f?b.getUserData(d,this.getColumnId(g))||"":b.getItemText(d);return e};dhtmlXGridObject.prototype.moveRowTo=function(b,d,e,f,g,h){b=new dragContext((g||this).isTreeGrid()?"treeGrid":"grid",(h||this).isTreeGrid()?"treeGrid":"grid",e,f||"sibling",b,d,g||this,h||this);b.tobj._dragRoutine(b);b.close();return b.nid};
dhtmlXGridObject.prototype.enableMercyDrag=function(b){this.dpcpy=convertStringToBoolean(b)};dhtmlXGridObject.prototype.attachHeaderA=dhtmlXGridObject.prototype.attachHeader;
dhtmlXGridObject.prototype.attachHeader=function(){this.attachHeaderA.apply(this,arguments);if(this._realfake)return!0;this.formAutoSubmit();"undefined"==typeof this.FormSubmitOnlyChanged&&this.submitOnlyChanged(!0);"undefined"==typeof this._submitAR&&this.submitAddedRows(!0);var b=this;this._added_rows=[];this._deleted_rows=[];this.attachEvent("onRowAdded",function(d){b._added_rows.push(d);b.forEachCell(d,function(b){b.cell.wasChanged=!0});return!0});this.attachEvent("onBeforeRowDeleted",function(d){b._deleted_rows.push(d);
return!0});this.attachHeader=this.attachHeaderA};dhtmlXGridObject.prototype.formAutoSubmit=function(){this.parentForm=this.detectParentFormPresent();if(!1===this.parentForm)return!1;if(!this.formEventAttached){this.formInputs=[];var b=this;dhtmlxEvent(this.parentForm,"submit",function(){b.entBox&&b.parentFormOnSubmit()});this.formEventAttached=!0}};dhtmlXGridObject.prototype.parentFormOnSubmit=function(){this.formCreateInputCollection();if(!this.callEvent("onBeforeFormSubmit",[]))return!1};
dhtmlXGridObject.prototype.submitOnlyChanged=function(b){this.FormSubmitOnlyChanged=convertStringToBoolean(b)};dhtmlXGridObject.prototype.submitColumns=function(b){"string"==typeof b&&(b=b.split(this.delim));this._submit_cols=b};
dhtmlXGridObject.prototype.setFieldName=function(b){b=b.replace(/\{GRID_ID\}/g,"'+a1+'");b=b.replace(/\{ROW_ID\}/g,"'+a2+'");b=b.replace(/\{ROW_INDEX\}/g,"'+this.getRowIndex(a2)+'");b=b.replace(/\{COLUMN_INDEX\}/g,"'+a3+'");b=b.replace(/\{COLUMN_ID\}/g,"'+this.getColumnId(a3)+'");this._input_mask=Function("a1","a2","a3","return '"+b+"';")};dhtmlXGridObject.prototype.submitSerialization=function(b){this.FormSubmitSerialization=convertStringToBoolean(b)};
dhtmlXGridObject.prototype.submitAddedRows=function(b){this._submitAR=convertStringToBoolean(b)};dhtmlXGridObject.prototype.submitOnlySelected=function(b){this.FormSubmitOnlySelected=convertStringToBoolean(b)};dhtmlXGridObject.prototype.submitOnlyRowID=function(b){this.FormSubmitOnlyRowID=convertStringToBoolean(b)};
dhtmlXGridObject.prototype.createFormInput=function(b,d){var e=document.createElement("input");e.type="hidden";e.name=this._input_mask&&"string"!=typeof b?this._input_mask.apply(this,b):((this.globalBox||this.entBox).id||"dhtmlXGrid")+"_"+b;e.value=d;this.parentForm.appendChild(e);this.formInputs.push(e)};
dhtmlXGridObject.prototype.createFormInputRow=function(b){for(var d=(this.globalBox||this.entBox).id,e=0;e<this._cCount;e++){var f=this.cells3(b,e);if((!this.FormSubmitOnlyChanged||f.wasChanged())&&(!this._submit_cols||this._submit_cols[e]))this.createFormInput(this._input_mask?[d,b.idd,e]:b.idd+"_"+e,f.getValue())}};
dhtmlXGridObject.prototype.formCreateInputCollection=function(){if(!1==this.parentForm)return!1;for(var b=0;b<this.formInputs.length;b++)this.parentForm.removeChild(this.formInputs[b]);this.formInputs=[];if(this.FormSubmitSerialization)this.createFormInput("serialized",this.serialize());else if(this.FormSubmitOnlySelected)if(this.FormSubmitOnlyRowID)this.createFormInput("selected",this.getSelectedId());else for(b=0;b<this.selectedRows.length;b++)this.createFormInputRow(this.selectedRows[b]);else this._submitAR&&
(this._added_rows.length&&this.createFormInput("rowsadded",this._added_rows.join(",")),this._deleted_rows.length&&this.createFormInput("rowsdeleted",this._deleted_rows.join(","))),this.forEachRow(function(b){this.getRowById(b);this.createFormInputRow(this.rowsAr[b])})};dhtmlXGridObject.prototype.detectParentFormPresent=function(){for(var b=!1,d=this.entBox;d&&d.tagName&&d!=document.body;)if("form"==d.tagName.toLowerCase()){b=d;break}else d=d.parentNode;return b};
dhtmlXGridObject.prototype.enableHeaderMenu=function(){var b=this;this.attachEvent("onInit",function(){this.hdr.oncontextmenu=function(d){return b._doHContClick(d||window.event)};this.startColResizeA=this.startColResize;this.startColResize=function(b){return 2==b.button||_isMacOS&&b.ctrlKey?this._doHContClick(b):this.startColResizeA(b)};this._chm_ooc=this.obj.onclick;this._chm_hoc=this.hdr.onclick;this.hdr.onclick=function(d){if(d&&(2==d.button||_isMacOS&&d.ctrlKey))return!1;b._showHContext(!1);return b._chm_hoc.apply(this,
arguments)};this.obj.onclick=function(){b._showHContext(!1);return b._chm_ooc.apply(this,arguments)}});dhtmlxEvent(document.body,"click",function(){b._hContext&&b._showHContext(!1)});this.hdr.rows.length&&this.callEvent("onInit",[]);this.enableHeaderMenu=function(){}};
dhtmlXGridObject.prototype._doHContClick=function(b){this._createHContext();var d=function(b){if(b.pageX||b.pageY)return{x:b.pageX,y:b.pageY};var d=_isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:b.clientX+d.scrollLeft-d.clientLeft,y:b.clientY+d.scrollTop-d.clientTop}}(b);this._showHContext(!0,d.x,d.y);b[_isIE?"srcElement":"target"].oncontextmenu=function(b){(b||event).cancelBubble=!0;return!1};b.cancelBubble=!0;b.preventDefault&&b.preventDefault();return!1};
dhtmlXGridObject.prototype._createHContext=function(){if(this._hContext)return this._hContext;var b=document.createElement("DIV");b.oncontextmenu=function(b){(b||event).cancelBubble=!0;return!1};b.onclick=function(b){return(b||event).cancelBubble=!0};b.className="dhx_header_cmenu";b.style.width=b.style.height="5px";b.style.display="none";var d=[],e=0;this._fake&&(e=this._fake._cCount);for(var f=e;e<this.hdr.rows[1].cells.length;e++){var g=this.hdr.rows[1].cells[e],h=g.firstChild&&"DIV"==g.firstChild.tagName?
g.firstChild.innerHTML:g.innerHTML,h=h.replace(/<[^>]*>/gi,"");d.push("<div class='dhx_header_cmenu_item'><input type='checkbox' column='"+f+"' len='"+(g.colSpan||1)+"' checked='true' />"+h+"</div>");f+=g.colSpan||1}b.innerHTML=d.join("");for(var l=this,d=function(){var b=this.getAttribute("column");if(!this.checked&&!l._checkLast(b))return this.checked=!0;l._realfake&&(l=l._fake);for(var d=0;d<this.getAttribute("len");d++)l.setColumnHidden(1*b+1*d,!this.checked);this.checked&&0==l.getColWidth(b)&&
l.adjustColumnSize(b)},e=0;e<b.childNodes.length;e++)b.childNodes[e].firstChild.onclick=d;document.body.insertBefore(b,document.body.firstChild);this._hContext=b;b.style.position="absolute";b.style.zIndex=999;b.style.width="auto";b.style.height="auto";b.style.display="block"};dhtmlXGridObject.prototype._checkLast=function(b){for(var d=0;d<this._cCount;d++)if((!this._hrrar||!this._hrrar[d])&&d!=b)return!0;return!1};
dhtmlXGridObject.prototype._updateHContext=function(){for(var b=0;b<this._hContext.childNodes.length;b++){var d=this._hContext.childNodes[b].firstChild,e=d.getAttribute("column");if(this.isColumnHidden(e)||0==this.getColWidth(e))d.checked=!1}};
dhtmlXGridObject.prototype._showHContext=function(b,d,e){b&&this.aw&&(this._hContext.parentNode.removeChild(this._hContext),this._hContext=null);this._createHContext();this._hContext.style.display=b?"block":"none";b&&(this._updateHContext(!0),this._hContext.style.left=d+"px",this._hContext.style.top=e+"px")};
function eXcell_mathco(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0);this.isDisabled=function(){return!this.editable||!this.grid._mathEdit};this.getTitle=function(){return this.cell.errMsg?this.cell.errMsg:_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(b,e,f,g){if("object"==typeof b){var h=this.grid.xmlLoader.doXPath("./option",b);h.length&&(this.cell._combo=new dhtmlXGridComboObject);
for(var l=0;l<h.length;l++)this.cell._combo.put(h[l].getAttribute("value"),h[l].firstChild?h[l].firstChild.data:"");b=b.firstChild.data}e?0==b.indexOf("=")?this.cell.innerText=this.grid._compileSCL(b,this.cell,this.fix_self,f):this.setCValue(b,null,g):(b=this.grid._compileSCL(b,this.cell,this.fix_self),this.setCValue(b,null,g),this.cell._clearCell=!1,!f&&this.grid._mathCellCompiled&&(this.cell.wasChanged=!0))};this.setCValue=function(b,e,f){this.cell._orignal=b;if(this.grid._maskArr[this.cell._cellIndex]||
this.getAttribute("format"))b=this.grid._aplNF(b,this.cell._cellIndex,this.getAttribute("format"));this.grid._prefix&&this.grid._prefix[this.cell._cellIndex]&&(b=this.grid._prefix[this.cell._cellIndex].replace(/(\{[a-z]+\})/g,b));if(""==(b||"").toString()._dhx_trim())b=null;this.cell.combo_value=b;if(null!==b){var g=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(b);this.cell.innerHTML=null===g?b:g}else this.cell.innerHTML="&nbsp;";f||this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,
this.cell._cellIndex,1<arguments.length?e:b])};this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value}}eXcell_mathco.prototype=new eXcell_co;function eXcell_mathcoro(b){this.base=eXcell_mathco;this.base(b);this.editable=!1}eXcell_mathcoro.prototype=new eXcell_mathco;
function eXcell_math(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.edit=function(){this.grid.editor=new eXcell_ed(this.cell);this.grid.editor.fix_self=!0;this.grid.editor.getValue=this.cell.original?function(){return this.cell.original}:this.getValue;this.grid.editor.setValue=this.setValue;this.grid.editor.edit()};this.isDisabled=function(){return!this.grid._mathEdit};this.getTitle=function(){return this.cell.errMsg?this.cell.errMsg:_isIE?this.cell.innerText:this.cell.textContent};
this.setValue=function(b,e,f,g){e?0==b.indexOf("=")?this.cell.innerText=this.grid._compileSCL(b,this.cell,this.fix_self,f):this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(b):this.setCValue(b,null,g):(b=this.grid._compileSCL(b,this.cell,this.fix_self),this.grid._strangeParams[this.cell._cellIndex]&&!g?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(b):(this.setCValue(b,null,g),this.cell._clearCell=
!1),!f&&this.grid._mathCellCompiled&&(this.cell.wasChanged=!0))};this.setCValue=function(b,e,f){this.cell._orignal=b;if(""==b)this.cell.innerHTML="&nbsp;";else{if(this.grid._maskArr[this.cell._cellIndex]||this.getAttribute("format"))b=this.grid._aplNF(b,this.cell._cellIndex,this.getAttribute("format"));this.grid._prefix&&this.grid._prefix[this.cell._cellIndex]&&(b=this.grid._prefix[this.cell._cellIndex].replace(/(\{[a-z]+\})/g,b));this.cell.innerText=b}f||this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,
this.cell._cellIndex,1<arguments.length?e:b])};this.getValue=function(){return this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).getValue():this.grid._mathOriginalValue?this.cell._orignal:this.cell.innerText}}eXcell_math.prototype=new eXcell;dhtmlXGridObject.prototype._init_point_bm=dhtmlXGridObject.prototype._init_point;
dhtmlXGridObject.prototype._init_point=function(){this._mat_links={};this._aggregators=[];this._aggregate_math=[];for(var b in dhtmlXGridObject.prototype){var d=b+"";0==d.indexOf("_math")&&this._aggregate_math.push(d.substring(6,d.length))}this.attachEvent("onClearAll",function(){this._mat_links={};this._aggregators=[]});this.attachEvent("onCellChanged",function(b,d){if(!this._lazyCompile||this._mathCellCompiled||this._startLazyCompile){if(this._mat_links[b]){var g=this._mat_links[b][d];if(g)for(var h=
0;h<g.length;h++)this.cells5(g[h]).setValue(this._calcSCL(g[h]))}!this._parsing&&this._aggregators[d]&&(g=this._h2.get[b].parent.id,0!=g&&(g=this.cells(g,d),g.setValue(this._calcSCL(g.cell))))}});this.attachEvent("onAfterRowDeleted",function(b,d){if(0!=d&&!this._parsing&&this._aggregators.length)for(var g=0;g<this._aggregators.length;g++)if(this._aggregators[g]){var h=this.cells(d,g);h.setValue(this._calcSCL(h.cell))}return!0});this.attachEvent("onXLE",function(){if(this._h2&&!this._lazyCompile){for(var b=
0;b<this._aggregators.length;b++)this._aggregators[b]&&this._h2.forEachChild(0,function(d){0!=d.childs.length&&(d=this.cells(d.id,b),d.setValue(this._calcSCL(d.cell)))},this);this._mathCellCompiled=!0}});this.attachEvent("onClearAll",function(){this._mathCellCal=0;this._maxMathCall=this._maxMathCall?this._maxMathCall:7;this._startLazyCompile=!1});(this._init_point=this._init_point_bm)&&this._init_point()};dhtmlXGridObject.prototype.enableMathSerialization=function(b){this._mathSerialization=convertStringToBoolean(b)};
dhtmlXGridObject.prototype.setMathRound=function(b){this._roundDl=b;this._roundD=Math.pow(10,b)};dhtmlXGridObject.prototype.enableMathEditing=function(b,d,e,f){this._mathEdit=convertStringToBoolean(b);2<=arguments.length&&(this._ignoreNaN=convertStringToBoolean(d),this._useEmptyStr=convertStringToBoolean(e),this._mathUp=convertStringToBoolean(f))};
dhtmlXGridObject.prototype._toFixed=function(b){"number"==!typeof b&&(b*=1);1E-9>Math.abs(b)&&(b=0);var d=(b+"").replace(/[\-]*[0-9]+[.]([0-9]*)[0|9]{5,}[0-9]{1,}/g,function(d,f,g){return b.toFixed(f.length)});if(-1<d.lastIndexOf(".")){for(;-1<d.lastIndexOf("0")&&d.lastIndexOf("0")==d.length-1;)d=d.substring(0,d.length-1);d.lastIndexOf(".")==d.length-1&&(d=d.substring(0,d.length-1))}return d};
dhtmlXGridObject.prototype._calcSCL=function(b){if(!b._code)return this.cells5(b).getValue();try{dhtmlx.agrid=this;var d;if(this._ignoreNaN)if(b._links&&b._links.length){for(var e=!0,f=0;f<b._links.length;f++){var g=dhtmlx.agrid.cells(b._links[f][0],b._links[f][1]).getValue();!isNaN(g)&&""!=g._dhx_trim()&&(e=!1)}d=e?"":eval(b._code)}else this._aggregators[b._cellIndex]&&(d=eval(b._code));else d=eval(b._code);d=""===d||isNaN(d)||Math.abs(d)==Number.POSITIVE_INFINITY?this._useEmptyStr?"":d:this._toFixed(d);
b.errMsg=""}catch(h){return b.errMsg=b._code+" "+h.description,"#SCL"}if(this._roundD){if(isNaN(d)||Math.abs(d)==Number.POSITIVE_INFINITY)return this._useEmptyStr?"":d;b=1>Math.abs(d)?"0":"";0>d&&(b="-"+b);d=Math.round(Math.abs(d)*this._roundD).toString();if(0==d)return 0;if(0<this._roundDl)return e=d.length-this._roundDl,0>e&&(d=("000000000"+d).substring(9+e),e=0),b+d.substring(0,e)+"."+d.substring(e,d.length)}return d};
dhtmlXGridObject.prototype._countTotal=function(b,d){if(this._h2)for(var e=0,f=this._h2.get[b],g=0;g<f.childs.length&&f.childs[g].buff;g++){if(f.childs[g].buff._parser){this._h2.forEachChild(b,function(b){0==b.childs.length&&(e+=1*this._get_cell_value(b.buff,d))},this);break}e+=1*this._get_cell_value(f.childs[g].buff,d)}return e};
dhtmlXGridObject.prototype._compileSCL=function(b,d,e,f){if(null===b||b===window.undefined)return b;var g=b;b=b.toString().toLowerCase().replace(/(^[\s]*)|([\s]*$)/g,"");if(""==b)return g;if(0!=b.indexOf("="))return this._reLink([],d),e&&(d._code=d.original=null),b;d.original=b;var h=null;b=b.replace("=","");if(-1!=b.indexOf("f{")){h=h||[];b=b.replace("&lt;","<").replace("&rt;","<").replace(/[\f\n\r\t\v]/g," ");b=b.substring(b.indexOf("f{")+2,b.lastIndexOf("}"));b=" "+b;e=RegExp("[^a-z]("+this._aggregate_math.join("|")+
")(?=\\()","g");b=b.replace(e,function(b,d){return b.substr(0,1)+"dhtmlx.agrid._math_"+d});b=b.substring(1,b.length);var l=[];e=/(r\[[^c]+\]|r[\d]+)?c[0-9]+:(r\[[^c]+\]|r[\d]+)?c[0-9]+/g;dhtmlx.agrid=this;b=b.replace(e,function(b){l[l.length]=b;return"~"+(l.length-1)+"~"});e=/(r\[[^c]+\]|r[\d]+)?c([0-9]+)/g;var m=d.parentNode.idd;b=b.replace(e,function(b,d,e){b=(b=d)?-1<b.indexOf("r[")?b.split(/[\[\]]/g)[1]:dhtmlx.agrid.getRowId(b.replace("r","")):m;h[h.length]=[b,e];return dhtmlx.agrid._ignoreNaN?
'dhtmlx.agrid._mathEmpty(dhtmlx.agrid.cells("'+b+'",'+e+").getValue())":'(dhtmlx.agrid.cells("'+b+'",'+e+").getValue()*1)"});for(e=0;e<l.length;e++){g=this._get_aggregate_cells_index(l[e].split(":"),m).split(",");if(0<g.length){for(var k=0;k<g.length;k++)g[k]*=1;for(k=g[0];k<=g[2];k++)for(var n=g[1];n<=g[3];n++)h[h.length]=[this.getRowId(k),n]}b=b.replace("~"+e+"~",'"'+l[e]+'","'+m+'",'+d._cellIndex)}}else{if(-1!=b.indexOf("sum"))return b=b.replace("sum","(dhtmlx.agrid._countTotal('"+d.parentNode.idd+
"',"+d._cellIndex+"))"),this._aggregators||(this._aggregators=[]),this._aggregators[d._cellIndex]="sum",d._code=b,this._parsing||f&&this._lazyCompile?"{...}":this._calcSCL(d);-1!=b.indexOf("[[")&&(e=/(\[\[([^\,]*)\,([^\]]*)]\])/g,dhtmlx.agrid=this,h=h||[],b=b.replace(e,function(b,e,f,g){"-"==f&&(f=d.parentNode.idd);0==f.indexOf("#")&&(f=dhtmlx.agrid.getRowId(f.replace("#","")));h[h.length]=[f,g];return dhtmlx.agrid._ignoreNaN?'dhtmlx.agrid._mathEmpty(dhtmlx.agrid.cells("'+f+'",'+g+").getValue())":
'(dhtmlx.agrid.cells("'+f+'",'+g+").getValue()*1)"}));-1!=b.indexOf(":")?(e=/:(\w+)/g,dhtmlx.agrid=this,m=d.parentNode.idd,h=h||[],b=b.replace(e,function(b,d){h[h.length]=[m,dhtmlx.agrid.getColIndexById(d)];return dhtmlx.agrid._ignoreNaN?'dhtmlx.agrid._mathEmpty(dhtmlx.agrid.cells("'+m+'",dhtmlx.agrid.getColIndexById("'+d+'")).getValue())':'(dhtmlx.agrid.cells("'+m+'",dhtmlx.agrid.getColIndexById("'+d+'")).getValue()*1)'})):(e=/c([0-9]+)/g,dhtmlx.agrid=this,m=d.parentNode.idd,h=h||[],b=b.replace(e,
function(b,d){h[h.length]=[m,d];return dhtmlx.agrid._ignoreNaN?'dhtmlx.agrid._mathEmpty(dhtmlx.agrid.cells("'+m+'",'+d+").getValue())":'(dhtmlx.agrid.cells("'+m+'",'+d+").getValue()*1)"}))}this._reLink(h,d);d._code=b;return f&&this._lazyCompile?"{...}":this._calcSCL(d)};dhtmlXGridObject.prototype.setEmptyCellMathValue=function(b){this._emptyCellMathValue=b};
dhtmlXGridObject.prototype._mathEmpty=function(b){var d="undefined"==typeof this._emptyCellMathValue?"":this._emptyCellMathValue;return""===b||null==b||isNaN(b)?d:1*b};dhtmlXGridObject.prototype._reLink=function(b,d){if(b.length){d._links=b;for(var e=0;e<b.length;e++){this._mat_links[b[e][0]]||(this._mat_links[b[e][0]]={});var f=this._mat_links[b[e][0]];f[b[e][1]]||(f[b[e][1]]=[]);for(var g=!0,h=0;h<f[b[e][1]].length;h++)if(f[b[e][1]][h]==d){g=!1;break}g&&f[b[e][1]].push(d)}}};
dhtmlXGridObject.prototype._hasLinkChan=function(b){var d=!1;if(b=b._links)for(var e=0;e<b.length;e++){var f=this.getRowById(b[e][0]),f=f._childIndexes?f.cells[f._childIndexes[b[e][1]]]:f.cells[b[e][1]];if("math"==this.cellType[b[e][1]]&&0==f.innerText.indexOf("{...}")){d=!0;break}}return d};dhtmlXGridObject.prototype._math_sum=function(b,d,e){b=b.split(":");if(2>b.length)return"";d=this._get_aggregate_cells(b,d);for(e=b=0;e<d.length;e++)b+=1*d[e].getValue();return b};
dhtmlXGridObject.prototype._math_avg=function(b,d,e){b=b.split(":");if(2>b.length)return"";d=this._get_aggregate_cells(b,d);for(e=b=0;e<d.length;e++)b+=1*d[e].getValue();return b/d.length};dhtmlXGridObject.prototype._math_max=function(b,d,e){b=b.split(":");if(2>b.length)return"";d=this._get_aggregate_cells(b,d);for(e=b=0;e<d.length;e++){var f=1*d[e].getValue();b<f&&(b=f)}return b};
dhtmlXGridObject.prototype._math_min=function(b,d,e){b=b.split(":");if(2>b.length)return"";d=this._get_aggregate_cells(b,d);for(e=b=0;e<d.length;e++){var f=1*d[e].getValue();b>f&&(b=f)}return b};dhtmlXGridObject.prototype._math_if=function(b){return b?!0:!1};
dhtmlXGridObject.prototype._get_aggregate_cells=function(b,d){var e=this._get_aggregate_cells_index(b,d).split(","),f=[];if(0<e.length){for(var g=0;g<e.length;g++)e[g]*=1;for(g=e[0];g<=e[2];g++)for(var h=e[1];h<=e[3];h++)f[f.length]=this.cellByIndex(g,h)}return f};
dhtmlXGridObject.prototype._get_aggregate_cells_index=function(b,d){var e=/(r\[[^\]]+\]|r[0-9]+)*c([0-9]+)/g.exec(b[1]),f=e[1],e=e[2],f=f?-1<f.indexOf("r[")?this.getRowIndex(f.split(/[\[\]]/g)[1]):1*f.replace("r",""):this.getRowIndex(d),g=/(r\[[^\]]+\]|r[0-9]+)*c([0-9]+)/g.exec(b[0]),h=g[1],g=g[2],h=h?-1<h.indexOf("r[")?this.getRowIndex(h.split(/[\[\]]/g)[1]):1*h.replace("r",""):this.getRowIndex(d),l;f>h&&(l=f,f=h,h=l);e>g&&(l=e,e=g,g=l);return f+","+e+","+h+","+g};
dhtmlXGridObject.prototype.setMaxCompileMathCells=function(b){this._maxMathCall=b};
dhtmlXGridObject.prototype._compileMathCells=function(){var b=0,d=0;this._startLazyCompile=!0;this._mathCellCal++;this.pagingOn?(b=Math.max(b||0,(this.currentPage-1)*this.rowsBufferOutSize),d=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(b=b||0,d=d||this.rowsBuffer.length);for(this._mathCellCompiled=!1;b<d;b++){var e=this.rowsBuffer[b];if(e&&e.cells)for(var f=0;f<e.cells.length;f++){var g=e.cells[f];g._code&&(0==g.innerText.indexOf("{...}")&&!this._hasLinkChan(g))&&this.cells4(g).setCValue(this._calcSCL(g))}}this._mathCellCompiled=
!0;this.callEvent("onMathCompiled",[])};dhtmlXGridObject.prototype.enableLazyCompile=function(b,d){var e=convertStringToBoolean(b);e&&!this._lazyCompile&&(this.attachEvent("onExpandAll",this._compileMathCells),d||(this.attachEvent("onOpenEnd",this._compileMathCells),this.attachEvent("onXLE",this._compileMathCells)));this._lazyCompile=e;this._mathCellCal=0;this._maxMathCall=this._maxMathCall?this._maxMathCall:7;this._startLazyCompile=!1};
dhtmlXGridObject.prototype.enableMathOriginalValue=function(b){this._mathOriginalValue=convertStringToBoolean(b)};
_isKHTML&&function(){var b=String.prototype.replace;String.prototype.replace=function(d,e){if("function"!=typeof e)return b.apply(this,arguments);var f=""+this,g=e;if(!(d instanceof RegExp)){var h=f.indexOf(d);return-1==h?f:b.apply(f,[d,g(d,h,f)])}for(var l=d,m=[],k=l.lastIndex,n;null!=(n=l.exec(f));)if(h=n.index,n=n.concat(h,f),m.push(f.slice(k,h),g.apply(null,n).toString()),l.global)k=l.lastIndex;else{k+=RegExp.lastMatch.length;break}m.push(f.slice(k));return m.join("")}}();
dhtmlXGridObject.prototype.insertColumn=function(b,d,e,f,g,h,l,m,k){b=parseInt(b);b>this._cCount&&(b=this._cCount);this._cMod||(this._cMod=this._cCount);this._processAllArrays(this._cCount,b-1,[d||"&nbsp;",f||100,e||"ed",h||"left",l||"",g||"na",k||"","",this._cMod,f||100]);this._processAllRows("_addColInRow",b);if("object"==typeof d)for(e=1;e<this.hdr.rows.length;e++)if("#rspan"==d[e-1]){f=e-1;g=!1;for(h=null;!g;){h=this.hdr.rows[f];for(var n=0;n<h.cells.length;n++)if(h.cells[n]._cellIndex==b){g=
n;break}f--}this.hdr.rows[f+1].cells[n].rowSpan=(this.hdr.rows[f].cells[n].rowSpan||1)+1}else this.setHeaderCol(b,d[e-1]||"&nbsp;",e);else this.setHeaderCol(b,d||"&nbsp;");this._cCount++;this._cMod++;this._master_row=null;this.setSizes()};
dhtmlXGridObject.prototype.deleteColumn=function(b){b=parseInt(b);0!=this._cCount&&(this._cMod||(this._cMod=this._cCount),b>=this._cCount||(this._processAllArrays(b,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]),this._processAllRows("_deleteColInRow",b),this._cCount--,this._master_row=null,this.setSizes()))};
dhtmlXGridObject.prototype._processAllRows=function(b,d,e){this[b](this.obj.rows[0],d,e,0);for(var f=this.hdr.rows.length,g=0;g<f;g++)this[b](this.hdr.rows[g],d,e,g);if(this.ftr){f=this.ftr.firstChild.rows.length;for(g=0;g<f;g++)this[b](this.ftr.firstChild.rows[g],d,e,g)}this.forEachRow(function(f){if(this.rowsAr[f]&&"TR"==this.rowsAr[f].tagName)this[b](this.rowsAr[f],d,e,-1)})};
dhtmlXGridObject.prototype._processAllArrays=function(b,d,e){var f="hdrLabels initCellWidth cellType cellAlign cellVAlign fldSort columnColor _hrrar _c_order".split(" ");this.cellWidthPX.length&&f.push("cellWidthPX");this.cellWidthPC.length&&f.push("cellWidthPC");this._col_combos&&f.push("_col_combos");this._mCols&&(f[f.length]="_mCols");this.columnIds&&(f[f.length]="columnIds");this._maskArr&&f.push("_maskArr");this._drsclmW&&f.push("_drsclmW");this.clists&&f.push("clists");this._validators&&this._validators.data&&
f.push(this._validators.data);f.push("combos");this._customSorts&&f.push("_customSorts");this._aggregators&&f.push("_aggregators");var g=b<=d;if(!this._c_order){this._c_order=[];for(var h=this._cCount,l=0;l<h;l++)this._c_order[l]=l}for(l=0;l<f.length;l++)if(h=this[f[l]]||f[l]){if(g){for(var m=h[b],k=b;k<d;k++)h[k]=h[k+1];h[d]=m}else{m=h[b];for(k=b;k>d+1;k--)h[k]=h[k-1];h[d+1]=m}e&&(h[d+(g?0:1)]=e[l])}};
dhtmlXGridObject.prototype.moveColumn=function(b,d){d--;b=parseInt(b);d=parseInt(d);var e=d<b?d+1:d;if(!this.callEvent("onBeforeCMove",[b,e]))return!1;b!=e&&(this.editStop(),this._processAllRows("_moveColInRow",b,d),this._processAllArrays(b,d),this.fldSorted&&this.setSortImgPos(this.fldSorted._cellIndex),this.callEvent("onAfterCMove",[b,e]))};dhtmlXGridObject.prototype._swapColumns=function(b){for(var d=[],e=0;e<this._cCount;e++){var f=b[this._c_order[e]];"undefined"==typeof f&&(f="");d[e]=f}return d};
dhtmlXGridObject.prototype._moveColInRow=function(b,d,e){d=b.childNodes[d];e=b.childNodes[e+1];if(d){e?b.insertBefore(d,e):b.appendChild(d);for(e=0;e<b.childNodes.length;e++)b.childNodes[e]._cellIndex=b.childNodes[e]._cellIndexS=e}};
dhtmlXGridObject.prototype._addColInRow=function(b,d,e,f){e=d;if(b._childIndexes){if(b._childIndexes[d-1]==b._childIndexes[d]||!b.childNodes[b._childIndexes[d-1]]){for(var g=b._childIndexes.length;g>=d;g--)b._childIndexes[g]=g?b._childIndexes[g-1]+1:0;b._childIndexes[d]--}else for(g=b._childIndexes.length;g>=d;g--)b._childIndexes[g]=g?b._childIndexes[g-1]+1:0;e=b._childIndexes[d]}var g=b.childNodes[e],h=document.createElement(f?"TD":"TH");f?h._attrs={}:h.style.width=(parseInt(this.cellWidthPX[d])||
"100")+"px";g?b.insertBefore(h,g):b.appendChild(h);this.dragAndDropOff&&b.idd&&this.dragger.addDraggableItem(b.childNodes[e],this);for(g=e+1;g<b.childNodes.length;g++)b.childNodes[g]._cellIndex=b.childNodes[g]._cellIndexS=b.childNodes[g]._cellIndex+1;b.childNodes[e]&&(b.childNodes[e]._cellIndex=b.childNodes[e]._cellIndexS=d);b.idd||"undefined"!=typeof b.idd?(this.cells3(b,d).setValue(""),h.align=this.cellAlign[d],h.style.verticalAlign=this.cellVAlign[d],h.bgColor=this.columnColor[d]):"TD"==h.tagName&&
(h.innerHTML=!b.idd&&this.forceDivInHeader?"<div class='hdrcell'>&nbsp;</div>":"&nbsp;")};
dhtmlXGridObject.prototype._deleteColInRow=function(b,d){b._childIndexes&&(d=b._childIndexes[d]);var e=b.childNodes[d];if(e){if(e.colSpan&&1<e.colSpan&&e.parentNode.idd){var f=e.colSpan-1,g=this.cells4(e).getValue();this.setColspan(e.parentNode.idd,e._cellIndex,1);if(1<f){var h=1*e._cellIndex;this.setColspan(e.parentNode.idd,h+1,f);this.cells(e.parentNode.idd,1*e._cellIndex+1).setValue(g);b._childIndexes.splice(h,1);for(f=h;f<b._childIndexes.length;f++)b._childIndexes[f]-=1}}else if(b._childIndexes){b._childIndexes.splice(d,
1);for(f=d;f<b._childIndexes.length;f++)b._childIndexes[f]--}e&&b.removeChild(e);for(f=d;f<b.childNodes.length;f++)b.childNodes[f]._cellIndex=b.childNodes[f]._cellIndexS=b.childNodes[f]._cellIndex-1}};
dhtmlXGridObject.prototype.enableColumnMove=function(b,d){this._mCol=convertStringToBoolean(b);"undefined"!=typeof d&&(this._mCols=d.split(","));this._mmevTrue||(dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove),dhtmlxEvent(document.body,"mousemove",this._onColumnMove),dhtmlxEvent(document.body,"mouseup",this._stopColumnMove),this._mmevTrue=!0)};
dhtmlXGridObject.prototype._startColumnMove=function(b){b=b||event;for(var d=b.target||b.srcElement,e=d;"TABLE"!=e.tagName;)e=e.parentNode;if((e=e.grid)&&(e.setActive(),e._mCol&&2!=b.button)){d=e.getFirstParentOfType(d,"TD");if("default"!=d.style.cursor)return!0;if(e&&!e._colInMove&&(e.resized=null,!e._mCols||"true"==e._mCols[d._cellIndex]))e._colInMove=d._cellIndex+1;return!0}};
dhtmlXGridObject.prototype._onColumnMove=function(b){b=b||event;var d=window.globalActiveDHTMLGridObject;if(d&&d._colInMove){d._showHContext&&d._showHContext(!1);if("object"!=typeof d._colInMove){var e=document.createElement("DIV");e._aIndex=d._colInMove-1;e._bIndex=null;e.innerHTML=d.getHeaderCol(e._aIndex);e.className="dhx_dragColDiv";e.style.position="absolute";document.body.appendChild(e);d._colInMove=e}e=[];e[0]=document.body.scrollLeft||document.documentElement.scrollLeft;e[1]=document.body.scrollTop||
document.documentElement.scrollTop;d._colInMove.style.left=b.clientX+e[0]+8+"px";d._colInMove.style.top=b.clientY+e[1]+8+"px";for(var f=b.target||b.srcElement;f&&"undefined"==typeof f._cellIndexS;)f=f.parentNode;d._colInMove._oldHe&&(d._colInMove._oldHe.className=d._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,""),d._colInMove._oldHe=null,d._colInMove._bIndex=null);if(f){var g=d.hdr.rows[1]._childIndexes?d.hdr.rows[1].cells[d.hdr.rows[1]._childIndexes[f._cellIndexS]]:d.hdr.rows[1].cells[f._cellIndexS],
e=b.clientX-(getAbsoluteLeft(g)-d.hdrBox.scrollLeft);0.5<e/g.offsetWidth?(g.className+=" columnTargetR",d._colInMove._bIndex=f._cellIndexS):(g.className+=" columnTargetL",d._colInMove._bIndex=f._cellIndexS-1);g.offsetLeft<d.objBox.scrollLeft+20&&(d.objBox.scrollLeft=Math.max(0,g.offsetLeft-20));g.offsetLeft+g.offsetWidth-d.objBox.scrollLeft>d.objBox.offsetWidth-20&&(d.objBox.scrollLeft=Math.min(d.objBox.scrollLeft+g.offsetWidth+20,d.objBox.scrollWidth-d.objBox.offsetWidth));d._colInMove._oldHe=g}b.cancelBubble=
!0;return!1}return!0};dhtmlXGridObject.prototype._stopColumnMove=function(b){if((b=window.globalActiveDHTMLGridObject)&&b._colInMove)"object"==typeof b._colInMove&&(b._colInMove.parentNode.removeChild(b._colInMove),null!=b._colInMove._bIndex&&b.moveColumn(b._colInMove._aIndex,b._colInMove._bIndex+1),b._colInMove._oldHe&&(b._colInMove._oldHe.className=b._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")),b._colInMove._oldHe=null,b._colInMove.grid=null,b.resized=!0),b._colInMove=0;return!0};
dhtmlXGridObject.prototype.loadCSVFile=function(b,d){this.load(b,d,"csv")};dhtmlXGridObject.prototype.enableCSVAutoID=function(b){this._csvAID=convertStringToBoolean(b)};dhtmlXGridObject.prototype.enableCSVHeader=function(b){this._csvHdr=convertStringToBoolean(b)};dhtmlXGridObject.prototype.setCSVDelimiter=function(b){this.csv.cell=b};dhtmlXGridObject.prototype._csvAID=!0;dhtmlXGridObject.prototype.loadCSVString=function(b){this.parse(b,"csv")};
dhtmlXGridObject.prototype.serializeToCSV=function(b){this.editStop();this._agetm=this._mathSerialization?"getMathValue":this._strictText||b?"getTitle":"getValue";b=[];if(this._csvHdr)for(var d=1;d<this.hdr.rows.length;d++){for(var e=[],f=0;f<this._cCount;f++)(!this._srClmn||this._srClmn[f])&&e.push(this.getColumnLabel(f,d-1));b.push(this.csvParser.str(e,this.csv.cell,this.csv.row))}f=0;for(d=this.rowsBuffer.length;f<d;f++)e=this._serializeRowToCVS(null,f),""!=e&&b.push(e);return this.csvParser.block(b,
this.csv.row)};
dhtmlXGridObject.prototype._serializeRowToCVS=function(b,d,e,f){var g=[];b||(b=this.render_row(d),this._fake&&!this._fake.rowsAr[b.idd]&&this._fake.render_row(d));this._csvAID||(g[g.length]=b.idd);e=e||0;f=f||this._cCount;d=!1;for(var h=e,l=0;l<b.childNodes.length;l++)if(b.childNodes[l]._cellIndex>=e&&b.childNodes[l]._cellIndex<f){e=l;break}for(;h<f&&b.childNodes[e];e++){l=b.childNodes[e]._cellIndex;if(l<h||l>=f)break;if(!this._srClmn||this._srClmn[l]){for(var m=b.childNodes[e],k=this.cells(b.idd,l);h!=
l&&!(h++,g.push(""),h>=f););if(h>=f)break;h++;zxVal=k.cell?k[this._agetm]():"";this._chAttr&&k.wasChanged()&&(d=!0);g[g.length]=null===zxVal?"":zxVal;if(this._ecspn&&m.colSpan&&1<m.colSpan){m=m.colSpan-1;for(l=0;l<m;l++)g[g.length]="",h++}}else h++}return this._onlChAttr&&!d?"":this.csvParser.str(g,this.csv.cell,this.csv.row)};dhtmlXGridObject.prototype.toClipBoard=function(b){window.clipboardData?window.clipboardData.setData("Text",b):(new Clipboard).copy(b)};
dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()};dhtmlXGridObject.prototype.cellToClipboard=function(b,d){if(!b||!d){if(!this.selectedRows[0])return;b=this.selectedRows[0].idd;d=this.cell._cellIndex}var e=this.cells(b,d);this.toClipBoard(((e.getLabel?e.getLabel():e.getValue())||"").toString())};
dhtmlXGridObject.prototype.updateCellFromClipboard=function(b,d){if(!b||!d){if(!this.selectedRows[0])return;b=this.selectedRows[0].idd;d=this.cell._cellIndex}var e=this.cells(b,d);e[e.setImage?"setLabel":"setValue"](this.fromClipBoard())};
dhtmlXGridObject.prototype.rowToClipboard=function(b){var d="";this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue";if(b)d=this._serializeRowToCVS(this.getRowById(b));else{b=[];for(var e=0;e<this.selectedRows.length;e++)b[b.length]=this._serializeRowToCVS(this.selectedRows[e]),d=this.csvParser.block(b,this.csv.row)}this.toClipBoard(d)};
dhtmlXGridObject.prototype.updateRowFromClipboard=function(b){var d=this.fromClipBoard();if(d&&(b=b?this.getRowById(b):this.selectedRows[0])){d=this.csvParser.unblock(d,this.csv.cell,this.csv.row)[0];this._csvAID||d.splice(0,1);for(var e=0;e<d.length;e++){var f=this.cells3(b,e);f[f.setImage?"setLabel":"setValue"](d[e])}}};
dhtmlXGridObject.prototype.csvParser={block:function(b,d){return b.join(d)},unblock:function(b,d,e){e=b&&b.lastIndexOf("\r\n")==b.length-2?"\r\n":e;var f=(b||"").split(e);if(f&&f.length){b.lastIndexOf(e)==b.length-e.length&&-1!=b.lastIndexOf(e)&&f.pop();for(b=0;b<f.length;b++)f[b]=(f[b]||"").split(d)}return f},str:function(b,d){return b.join(d)}};
dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('\\\\"',"g"),block:function(b,d){return b.join(d)},unblock:function(b,d,e){var f=[[]],g=0;if(!b)return f;var h=/^[ ]*"/,l=/"[ ]*$/,m=RegExp(".*"+e+".*$");b=b.split(d);for(d=0;d<b.length;d++)if(b[d].match(h)){for(var k=b[d].replace(h,"");!b[d].match(l);)d++,k+=b[d];f[g].push(k.replace(l,"").replace(this._quote_esc,'"'))}else b[d].match(m)?(k=b[d].split(e,2),f[g].push(k[0]),g++,f[g]=[],b[d]=k[1],d--):(b[d]||d!=b.length-
1)&&f[g].push(b[d]);return f},str:function(b,d){for(var e=0;e<b.length;e++)b[e]='"'+b[e].replace(this._quote,'\\"')+'"';return b.join(d)}};dhtmlXGridObject.prototype.addRowFromClipboard=function(){var b=this.fromClipBoard();if(b)for(var d=this.csvParser.unblock(b,this.csv.cell,this.csv.row),e=0;e<d.length;e++)d[e]&&(b=d[e],b.length&&(this._csvAID?this.addRow(this.getRowsNum()+2,b):(this.rowsAr[b[0]]&&(b[0]=this.uid()),this.addRow(b[0],b.slice(1)))))};dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())};
dhtmlXGridObject.prototype.gridFromClipboard=function(){var b=this.fromClipBoard();b&&this.loadCSVString(b)};
dhtmlXGridObject.prototype.getXLS=function(b){this.xslform||(this.xslform=document.createElement("FORM"),this.xslform.action=(b||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform),b=document.createElement("INPUT"),b.type="hidden",b.name="csv",this.xslform.appendChild(b),b=document.createElement("INPUT"),b.type="hidden",b.name="csv_header",this.xslform.appendChild(b));b=this.serializeToCSV();this.xslform.childNodes[0].value=b;b=[];
for(var d=this._cCount,e=0;e<d;e++)b.push(this.getHeaderCol(e));b=b.join(",");this.xslform.childNodes[1].value=b;this.xslform.submit()};dhtmlXGridObject.prototype.printViewByCheck=function(b){};
dhtmlXGridObject.prototype.printView=function(b,d,e){var f="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }\t\n  </style>",g=null;if(this._fake)for(var g=[].concat(this._hrrar),h=0;h<this._fake._cCount;h++)this._hrrar[h]=null;f+="<base  href='"+document.location.href+"'></base>";this.parentGrid||(f+=b||"");f+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';b=Math.max(this.rowsBuffer.length,
this.rowsCol.length);for(var l=this._cCount,m=this._printWidth(),f=f+'<tr class="header_row_1">',h=0;h<l;h++)if(!this._hrrar||!this._hrrar[h]){for(var k=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(h)]:h],n=k.colSpan||1,s=k.rowSpan||1,k=1;k<n;k++)m[h]+=m[k];f+='<td rowspan="'+s+'" width="'+m[h]+'%" style="background-color:lightgrey;" colspan="'+n+'">'+this.getHeaderCol(h)+"</td>";h+=n-1}f+="</tr>";for(h=2;h<this.hdr.rows.length;h++)if(_isIE){f+="<tr style='background-color:lightgrey' class='header_row_"+
h+"'>";m=this.hdr.rows[h].childNodes;for(k=0;k<m.length;k++)if(!this._hrrar||!this._hrrar[m[k]._cellIndex])f+=m[k].outerHTML;f+="</tr>"}else f+="<tr class='header_row_"+h+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[h].innerHTML:"")+this.hdr.rows[h].innerHTML+"</tr>";for(h=0;h<b;h++)if(f+="<tr>",this.rowsCol[h]&&this.rowsCol[h]._cntr)f+=this.rowsCol[h].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";else if(!(this.rowsCol[h]&&"none"==this.rowsCol[h].style.display)){if(this.rowsCol[h])m=
this.rowsCol[h].idd;else if(this.rowsBuffer[h])m=this.rowsBuffer[h].idd;else continue;for(k=0;k<l;k++)if(!this._hrrar||!this._hrrar[k]){if(this.rowsAr[m]&&"TR"==this.rowsAr[m].tagName)var u=this.cells(m,k),n=u._setState?"":u.getContent?u.getContent():u.getImage||u.combo?u.cell.innerHTML:u.getValue();else n=this._get_cell_value(this.rowsBuffer[h],k);var s=this.columnColor[k]?"background-color:"+this.columnColor[k]+";":"",v=this.cellAlign[k]?"text-align:"+this.cellAlign[k]+";":"",w=u.getAttribute("colspan"),
f=f+('<td style="'+s+v+'" '+(w?'colSpan="'+w+'"':"")+">"+(""===n?"&nbsp;":n)+"</td>");w&&(k+=w-1)}f+="</tr>";this.rowsCol[h]&&this.rowsCol[h]._expanded&&(k=this.cells4(this.rowsCol[h]._expanded.ctrl),f+=k.getSubGrid?'<tr><td colspan="'+l+'">'+k.getSubGrid().printView()+"</td></tr>":'<tr><td colspan="'+l+'">'+this.rowsCol[h]._expanded.innerHTML+"</td></tr>")}if(this.ftr)for(h=1;h<this.ftr.childNodes[0].rows.length;h++)f+="<tr style='background-color:lightgrey'>"+(this._fake?this._fake.ftr.childNodes[0].rows[h].innerHTML:
"")+this.ftr.childNodes[0].rows[h].innerHTML+"</tr>";f+="</table>";if(this.parentGrid)return f;f+=d||"";(d=this._getPrintIframe())&&e?(d.document.open(),d.document.write(f),d.document.close(),e&&(_isIE||_IE10?((parent._dhx_print_frame||_dhx_print_frame).focus(),window.print()):d.print())):(d=window.open("","_blank"),d.document.write(f),d.document.write("<script>window.onerror=function(){return true;}\x3c/script>"),d.document.close());this._fake&&(this._hrrar=g)};
dhtmlXGridObject.prototype.print=function(){this.printView(null,null,!0)};
dhtmlXGridObject.prototype._getPrintIframe=function(){if(!window.frames._dhx_print_frame){var b;if(_isIE)try{b=document.createElement("<iframe name='_dhx_print_frame'>")}catch(d){b=document.createElement("IFRAME"),b.setAttribute("name","_dhx_print_frame")}else b=document.createElement("IFRAME");b.name="_dhx_print_frame";b.frameBorder=0;b.border=0;b.style.width="1px";b.style.height="1px";b.style.position="absolute";b.style.left="-10px";b.setAttribute("src","javascript:false;");document.body.appendChild(b)}return window.frames._dhx_print_frame};
dhtmlXGridObject.prototype._printWidth=function(){for(var b=[],d=0,e=0;e<this._cCount;e++){var f=this.getColWidth(e);b.push(f);d+=f}for(var f=[],g=0,e=0;e<b.length;e++){var h=Math.floor(100*(b[e]/d)),g=g+h;f.push(h)}f[f.length-1]+=100-g;return f};dhtmlXGridObject.prototype.loadObject=function(){};dhtmlXGridObject.prototype.loadJSONFile=function(){};dhtmlXGridObject.prototype.serializeToObject=function(){};dhtmlXGridObject.prototype.serializeToJSON=function(){};
window.clipboardData||(window.clipboardData={_make:function(){var b=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!b)return null;var d=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!d)return null;d.addDataFlavor("text/unicode");var e=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);this._p=[b,d,e];return!0},setData:function(b,
d){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(e){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[b,d]),""}if(!this._make())return!1;this._p[2].data=d;this._p[1].setTransferData("text/unicode",this._p[2],2*d.length);this._p[0].setData(this._p[1],null,Components.interfaces.nsIClipboard.kGlobalClipboard)},getData:function(b){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(d){return dhtmlxError.throwError("Clipboard",
"Access to clipboard denied",[b]),""}if(!this._make())return!1;this._p[0].getData(this._p[1],this._p[0].kGlobalClipboard);b={};var e={};try{this._p[1].getTransferData("text/unicode",e,b)}catch(f){return""}e&&(e=e.value.QueryInterface(Components.interfaces.nsISupportsString));return e?e.data.substring(0,b.value/2):""}});window.dhx4||(window.dhx4={},window.dhx4.isIPad=0<=navigator.userAgent.search(/iPad/gi));
dhtmlXGridObject.prototype.enableBlockSelection=function(b){if("undefined"==typeof this._bs_mode){var d=this;this.obj.onmousedown=function(b){d._bs_mode&&d._OnSelectionStart(b||event,this);return!0};this._CSVRowDelimiter=this.csv.row;this.attachEvent("onResize",function(){d._HideSelection();return!0});this.attachEvent("onGridReconstructed",function(){d._HideSelection();return!0});this.attachEvent("onFilterEnd",this._HideSelection)}if(!1===b)return this._bs_mode=!1,this._HideSelection();this._bs_mode=
!0;!window.dhx4.isIPad&&8!=_isIE&&(b=this._clip_area=document.createElement("textarea"),b.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;",b.onkeydown=function(b){b=b||event;86==b.keyCode&&(b.ctrlKey||b.metaKey)&&d.pasteBlockFromClipboard()},document.body.insertBefore(this._clip_area,document.body.firstChild),dhtmlxEvent(this.entBox,"click",function(){!d.editor&&d._clip_area&&d._clip_area.select()}))};
dhtmlXGridObject.prototype.forceLabelSelection=function(b){this._strictText=convertStringToBoolean(b)};dhtmlXGridObject.prototype.disableBlockSelection=function(){this.obj.onmousedown=null};
dhtmlXGridObject.prototype._OnSelectionStart=function(b){var d=this;if(2!=b.button){var e=b.srcElement||b.target;if(this.editor){if(e.tagName&&"TD"!=e.tagName)return;this.editStop()}d.isActive||d.setActive(!0);var f=this.getPosition(this.obj),g=b.clientX-f[0]+document.body.scrollLeft,f=b.clientY-f[1]+document.body.scrollTop;this._CreateSelection(g-4,f-4);if(e==this._selectionObj)this._HideSelection(),this._startSelectionCell=null;else{for(;"td"!=e.tagName.toLowerCase();)e=e.parentNode;this._startSelectionCell=
e}if(this._startSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex]))return this._startSelectionCell=null;this.obj.onmousedown=null;this.obj[_isIE?"onmouseleave":"onmouseout"]=function(){d._blsTimer&&window.clearTimeout(d._blsTimer)};try{this.obj.onmmold=this.obj.onmousemove}catch(h){}this._init_pos=[g,f];this._selectionObj.onmousemove=this.obj.onmousemove=function(e){e=e||b;e.returnValue=!1;d._OnSelectionMove(e)};this._oldDMP=
document.body.onmouseup;document.body.onmouseup=function(e){e=e||b;d._OnSelectionStop(e,this);return!0};this.callEvent("onBeforeBlockSelection",[]);document.body.onselectstart=function(){return!1}}};
dhtmlXGridObject.prototype._getCellByPos=function(b,d){this._fake&&(b+=this._fake.entBox.offsetWidth);for(var e=0,f=0;f<this.obj.rows.length;f++)if(d-=this.obj.rows[f].offsetHeight,0>=d){e=this.obj.rows[f];break}if(!e||!e.idd)return null;for(f=0;f<this._cCount;f++)if(b-=this.getColWidth(f),0>=b)for(;;)if(e._childIndexes&&e._childIndexes[f+1]==e._childIndexes[f])e=e.previousSibling;else return e.idd?(e=this.cells6(e.idd,f))?e.cell:null:null;return null};
dhtmlXGridObject.prototype._OnSelectionMove=function(b){var d=this;this._ShowSelection();var e=this.getPosition(this.obj),f=b.clientX-e[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),e=b.clientY-e[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(5>Math.abs(this._init_pos[0]-f)&&5>Math.abs(this._init_pos[1]-e))return this._HideSelection();var g=this._endSelectionCell;if(null==this._startSelectionCell)this._endSelectionCell=
this._startSelectionCell=this.getFirstParentOfType(b.srcElement||b.target,"TD");else if(b.srcElement||b.target)if("dhtmlxGrid_selection"==(b.srcElement||b.target).className)this._endSelectionCell=this._getCellByPos(f,e)||this._endSelectionCell;else{var h=this.getFirstParentOfType(b.srcElement||b.target,"TD");h.parentNode.idd&&(this._endSelectionCell=h)}this._endSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])&&(this._endSelectionCell=
g);var g=this.objBox.scrollLeft+this.objBox.clientWidth,h=this.objBox.scrollTop+this.objBox.clientHeight,l=this.objBox.scrollLeft,m=this.objBox.scrollTop,k=!1;this._blsTimer&&window.clearTimeout(this._blsTimer);f+20>=g?(this.objBox.scrollLeft+=20,k=!0):f-20<l&&(this.objBox.scrollLeft-=20,k=!0);e+20>=h&&!this._realfake?(this.objBox.scrollTop+=20,k=!0):e-20<m&&!this._realfake&&(this.objBox.scrollTop-=20,k=!0);this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell);
if(k){var n=b.clientX,s=b.clientY;this._blsTimer=window.setTimeout(function(){d._OnSelectionMove({clientX:n,clientY:s})},100)}};
dhtmlXGridObject.prototype._OnSelectionStop=function(b){var d=this;this._blsTimer&&window.clearTimeout(this._blsTimer);this.obj.onmousedown=function(e){d._bs_mode&&d._OnSelectionStart(e||b,this);return!0};this.obj.onmousemove=this.obj.onmmold||null;this._selectionObj.onmousemove=null;document.body.onmouseup=this._oldDMP||null;if(2>parseInt(this._selectionObj.style.width)&&2>parseInt(this._selectionObj.style.height))this._HideSelection();else{var e=this.getFirstParentOfType(b.srcElement||b.target,
"TD");if(!e||!e.parentNode.idd)e=this._endSelectionCell;if(!e)return this._HideSelection();for(;"td"!=e.tagName.toLowerCase();)e=e.parentNode;this._stopSelectionCell=e;this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell);this.callEvent("onBlockSelected",[this._selectionArea])}document.body.onselectstart=function(){}};
dhtmlXGridObject.prototype._RedrawSelectionPos=function(b,d){var e={};e.LeftTopCol=b._cellIndex;e.LeftTopRow=this.getRowIndex(b.parentNode.idd);e.RightBottomCol=d._cellIndex;e.RightBottomRow=this.getRowIndex(d.parentNode.idd);var f=b.offsetWidth,g=b.offsetHeight;b=this.getPosition(b,this.obj);var h=d.offsetWidth,l=d.offsetHeight;d=this.getPosition(d,this.obj);if(b[0]<d[0])var m=b[0],f=d[0]+h;else h=e.RightBottomCol,e.RightBottomCol=e.LeftTopCol,e.LeftTopCol=h,m=d[0],f=b[0]+f;b[1]<d[1]?(h=b[1],g=d[1]+
l):(h=e.RightBottomRow,e.RightBottomRow=e.LeftTopRow,e.LeftTopRow=h,h=d[1],g=b[1]+g);this._selectionObj.style.left=m+"px";this._selectionObj.style.top=h+"px";this._selectionObj.style.width=f-m+"px";this._selectionObj.style.height=g-h+"px";return e};
dhtmlXGridObject.prototype._CreateSelection=function(b,d){if(null==this._selectionObj){var e=document.createElement("div");e.style.position="absolute";e.style.display="none";e.className="dhtmlxGrid_selection";this._selectionObj=e;this._selectionObj.onmousedown=function(b){b=b||event;if(2==b.button||_isMacOS&&b.ctrlKey)return this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",b])};this._selectionObj.oncontextmenu=function(b){(b||event).cancelBubble=!0;return!1};this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width=
"0px";this._selectionObj.style.height="0px";this._selectionObj.style.left=b+"px";this._selectionObj.style.top=d+"px";this._selectionObj.startX=b;this._selectionObj.startY=d};dhtmlXGridObject.prototype._ShowSelection=function(){this._selectionObj&&(this._selectionObj.style.display="")};dhtmlXGridObject.prototype._HideSelection=function(){this._selectionObj&&(this._selectionObj.style.display="none");this._selectionArea=null;this._clip_area&&(this._clip_area.value="",this._clip_area.blur())};
dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if((8==_isIE||this._clip_area)&&null!=this._selectionArea){var b=[];this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue";for(var d=this._selectionArea.LeftTopRow;d<=this._selectionArea.RightBottomRow;d++){var e=this._serializeRowToCVS(this.rowsBuffer[d],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);b[b.length]=this._csvAID?e:e.substr(e.indexOf(this.csv.cell)+1)}b=b.join(this._CSVRowDelimiter);
8==_isIE||5==document.documentMode?this.toClipBoard(b):(this._clip_area.value=b,this._clip_area.select(),this._serialize_visible=!1)}};dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){if(8==_isIE||5==document.documentMode)this._pasteBlockFromClipboard();else if(this._clip_area){this._clip_area.select();var b=this;window.setTimeout(function(){b._pasteBlockFromClipboard();b=null},1)}};
dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var b=8==_isIE||5==document.documentMode?this.fromClipBoard():this._clip_area.value;if(b){if(null!=this._selectionArea)var d=this._selectionArea.LeftTopRow,e=this._selectionArea.LeftTopCol;else if(null!=this.cell&&!this.editor)d=this.getRowIndex(this.cell.parentNode.idd),e=this.cell._cellIndex;else return!1;var b=this.csvParser.unblock(b,this.csv.cell,this.csv.row),f=d+b.length,g=e+b[0].length;g>this._cCount&&(g=this._cCount);for(var h=
0;d<f;d++){var l=this.render_row(d);if(-1!=l){for(var m=0,k=e;k<g;k++)if(this._hrrar[k]&&!this._fake)g=Math.min(g+1,this._cCount);else{var n=this.cells3(l,k);if(n.isDisabled())m++;else{this._onEditUndoRedo&&this._onEditUndoRedo(2,l.idd,k,b[h][m],n.getValue());if(n.combo){for(var s=n.combo.values,u=0;u<s.length;u++)if(b[h][m]==s[u]){n.setValue(n.combo.keys[u]);s=null;break}null!=s&&n.editable?n.setValue(b[h][m++]):m++}else n[n.setImage?"setLabel":"setValue"](b[h][m++]);n.cell.wasChanged=!0}}this.callEvent("onRowPaste",
[l.idd]);h++}}}};dhtmlXGridObject.prototype.getSelectedBlock=function(){return this._selectionArea?this._selectionArea:null!==this.getSelectedRowId()?{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex2(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex2()}:null};
dhtmlXGridObject.prototype.enablePaging=function(b,d,e,f,g,h){this._pgn_parentObj="string"==typeof f?document.getElementById(f):f;this._pgn_recInfoParentObj="string"==typeof h?document.getElementById(h):h;this.pagingOn=b;this.showRecInfo=g;this.rowsBufferOutSize=parseInt(d);this.currentPage=1;this.pagesInGroup=parseInt(e);this._init_pgn_events();this.setPagingSkin("default")};dhtmlXGridObject.prototype.setXMLAutoLoading=function(b,d){this.xmlFileUrl=b;this._dpref=d};
dhtmlXGridObject.prototype.changePageRelative=function(b){this.changePage(this.currentPage+b)};dhtmlXGridObject.prototype.changePage=function(b){0==arguments.length&&(b=this.currentPage||0);b=parseInt(b);b=Math.max(1,Math.min(b,Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)));this.callEvent("onBeforePageChanged",[this.currentPage,b])&&(this.currentPage=parseInt(b),this._reset_view(),this._fixAlterCss(),this.callEvent("onPageChanged",this.getStateOfView()))};
dhtmlXGridObject.prototype.setPagingSkin=function(b,d){this._pgn_skin=this["_pgn_"+b];"toolbar"==b&&(this._pgn_skin_tlb=d)};dhtmlXGridObject.prototype.setPagingTemplates=function(b,d){this._pgn_templateA=this._pgn_template_compile(b);this._pgn_templateB=this._pgn_template_compile(d);this._page_skin_update()};
dhtmlXGridObject.prototype._page_skin_update=function(b){if(-1!=this.aToolBar){this.pagesInGroup||(this.pagesInGroup=Math.ceil(Math.min(5,this.rowsBuffer.length/this.rowsBufferOutSize)));if((b=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))&&b<this.currentPage)return this.changePage(b);this.pagingOn&&this._pgn_skin&&this._pgn_skin.apply(this,this.getStateOfView())}};
dhtmlXGridObject.prototype._init_pgn_events=function(){this.attachEvent("onXLE",this._page_skin_update);this.attachEvent("onClearAll",this._page_skin_update);this.attachEvent("onPageChanged",this._page_skin_update);this.attachEvent("onGridReconstructed",this._page_skin_update);this._init_pgn_events=function(){}};
dhtmlXGridObject.prototype._pgn_default=function(){if(!this.pagingBlock){this.pagingBlock=document.createElement("DIV");this.pagingBlock.className="pagingBlock";this.recordInfoBlock=document.createElement("SPAN");this.recordInfoBlock.className="recordsInfoBlock";if(!this._pgn_parentObj)return;this._pgn_parentObj.appendChild(this.pagingBlock);this._pgn_recInfoParentObj&&this.showRecInfo&&this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock);this._pgn_templateA||(this._pgn_templateA=this._pgn_template_compile("[prevpages:&lt;:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt;:&nbsp;]"),
this._pgn_templateB=this._pgn_template_compile("Results <b>[from]-[to]</b> of <b>[total]</b>"))}var b=this.getStateOfView();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,b);this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,b);this._pgn_template_active(this.pagingBlock);this._pgn_template_active(this.recordInfoBlock);this.callEvent("onPaging",[])};
dhtmlXGridObject.prototype._pgn_block=function(b){for(var d=Math.floor((this.currentPage-1)/this.pagesInGroup)*this.pagesInGroup,e=Math.min(Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),d+this.pagesInGroup),f=[],d=d+1;d<=e;d++)d==this.currentPage?f.push("<a class='dhx_not_active'><b>"+d+"</b></a>"):f.push("<a onclick='this.grid.changePage("+d+"); return false;'>"+d+"</a>");return f.join(b)};
dhtmlXGridObject.prototype._pgn_link=function(b,d,e){return"prevpages"==b||"prev"==b?1==this.currentPage?e:"<a onclick='this.grid.changePageRelative(-1*"+("prev"==b?"1":"this.grid.pagesInGroup")+"); return false;'>"+d+"</a>":"nextpages"==b||"next"==b?this.rowsBuffer.length/this.rowsBufferOutSize<=this.currentPage?e:1>=this.rowsBuffer.length/(this.rowsBufferOutSize*("next"==b?1:this.pagesInGroup))?e:"<a onclick='this.grid.changePageRelative("+("next"==b?"1":"this.grid.pagesInGroup")+"); return false;'>"+
d+"</a>":"current"==b?(b=this.currentPage+(d?parseInt(d):0),1>b||Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)<b?e:"<a "+(b==this.currentPage?"class='dhx_active_page_link' ":"")+"onclick='this.grid.changePage("+b+"); return false;'>"+b+"</a>"):d};dhtmlXGridObject.prototype._pgn_template_active=function(b){if(b=b.getElementsByTagName("A"))for(var d=0;d<b.length;d++)b[d].grid=this};
dhtmlXGridObject.prototype._pgn_template_compile=function(b){b=b.replace(/\[([^\]]*)\]/g,function(b,e){e=e.split(":");switch(e[0]){case "from":return'"+(arguments[1]*1+(arguments[2]*1?1:0))+"';case "total":return'"+arguments[3]+"';case "to":return'"+arguments[2]+"';case "current":case "prev":case "next":case "prevpages":case "nextpages":return"\"+this._pgn_link('"+e[0]+"','"+e[1]+"','"+e[2]+"')+\"";case "currentpages":return"\"+this._pgn_block('"+e[1]+"')+\""}});return new Function('return "'+b+'";')};
dhtmlXGridObject.prototype.i18n.paging={results:"&#32467;&#26524;&#38598;",records:"&#31532;",to:"&#45;",page:"&#39029; ",perpage:"&#26465;&#47;&#39029;",first:"&#39318;&#39029;",previous:"&#19978;&#19968;&#39029;",found:"&#25214;&#21040;&#35760;&#24405;",next:"&#19979;&#19968;&#39029;",last:"&#26411;&#39029;",of:" &#47;",notfound:"&#26080;&#35760;&#24405;"};dhtmlXGridObject.prototype.setPagingSelectMaxOpen=function(b){this._WTDef_mxo=isNaN(b)?void 0:1*b};
dhtmlXGridObject.prototype.setPagingWTMode=function(b,d,e,f){this._WTDef=[convertStringToBoolean(b),convertStringToBoolean(d),convertStringToBoolean(e),convertStringToBoolean(f)]};
dhtmlXGridObject.prototype._pgn_bricks=function(b,d,e){var f=(this.skin_name||"").split("_")[1],g="";if("light"==f||"modern"==f||"skyblue"==f)g="_"+f;this.pagerElAr=[];this.pagerElAr.pagerCont=document.createElement("DIV");this.pagerElAr.pagerBord=document.createElement("DIV");this.pagerElAr.pagerLine=document.createElement("DIV");this.pagerElAr.pagerBox=document.createElement("DIV");this.pagerElAr.pagerInfo=document.createElement("DIV");this.pagerElAr.pagerInfoBox=document.createElement("DIV");this.pagerElAr.pagerCont.style.width=
(this.globalBox||this.objBox).clientWidth+"px";this.pagerElAr.pagerCont.style.overflow="hidden";this.pagerElAr.pagerCont.style.clear="both";this.pagerElAr.pagerBord.className="dhx_pbox"+g;this.pagerElAr.pagerLine.className="dhx_pline"+g;this.pagerElAr.pagerBox.style.clear="both";this.pagerElAr.pagerInfo.className="dhx_pager_info"+g;this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord);this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine);this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo);
this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox);this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox);this._pgn_parentObj.innerHTML="";this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont);if(0<this.rowsBuffer.length){f=20;if(b>this.pagesInGroup){var h=document.createElement("DIV"),l=document.createElement("DIV");h.className="dhx_page"+g;l.innerHTML="&larr;";h.appendChild(l);this.pagerElAr.pagerBox.appendChild(h);var m=this;h.pgnum=(Math.ceil(b/this.pagesInGroup)-1)*
this.pagesInGroup;h.onclick=function(){m.changePage(this.pgnum)};f+=22}for(var k=1;k<=this.pagesInGroup;k++){h=document.createElement("DIV");l=document.createElement("DIV");h.className="dhx_page"+g;pageNumber=(Math.ceil(b/this.pagesInGroup)-1)*this.pagesInGroup+k;if(pageNumber>Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))break;l.innerHTML=pageNumber;h.appendChild(l);b==pageNumber?(h.className+=" dhx_page_active"+g,l.className="dhx_page_active"+g):(m=this,h.pgnum=pageNumber,h.onclick=function(){m.changePage(this.pgnum)});
f+=parseInt(22/3)*pageNumber.toString().length+15;l.style.width=parseInt(22/3)*pageNumber.toString().length+8+"px";this.pagerElAr.pagerBox.appendChild(h)}Math.ceil(b/this.pagesInGroup)*this.pagesInGroup<Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)&&(h=document.createElement("DIV"),l=document.createElement("DIV"),h.className="dhx_page"+g,l.innerHTML="&rarr;",h.appendChild(l),this.pagerElAr.pagerBox.appendChild(h),m=this,h.pgnum=Math.ceil(b/this.pagesInGroup)*this.pagesInGroup+1,h.onclick=
function(){m.changePage(this.pgnum)},f+=22);this.pagerElAr.pagerLine.style.width=f+"px"}0<this.rowsBuffer.length&&this.showRecInfo?this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(d+1)+this.i18n.paging.to+e+this.i18n.paging.of+this.rowsBuffer.length:0==this.rowsBuffer.length&&(this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound);this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML=
"&nbsp;";this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;";this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;";this.callEvent("onPaging",[])};dhtmlXGridObject.prototype.getPageCount=function(){return this.rowsBuffer&&this.rowsBuffer.length&&this.rowsBufferOutSize?Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize):-1};
dhtmlXGridObject.prototype._pgn_toolbar=function(b,d,e){if(!this.aToolBar||-1==this.aToolBar)this.aToolBar=this._pgn_createToolBar();var f=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);this._WTDef[0]&&(this.aToolBar.ag("right"),this.aToolBar.ag("rightabs"),this.aToolBar.ag("left"),this.aToolBar.ag("leftabs"),this.currentPage>=f&&(this.aToolBar.disableItem("right"),this.aToolBar.disableItem("rightabs")),1==this.currentPage&&(this.aToolBar.disableItem("left"),this.aToolBar.disableItem("leftabs")));
if(this._WTDef[2]){var g=this;this.aToolBar.forEachListOption("pages",function(b){g.aToolBar.removeListOption("pages",b)});for(var h=0;h<f;h++)this.aToolBar.addListOption("pages","pages_"+(h+1),NaN,"button",this.i18n.paging.page+(h+1));this.aToolBar.setItemText("pages","<div style='width:100%; text-align:right'>"+this.i18n.paging.page+b+"</div>")}this._WTDef[1]&&(this.getRowsNum()?this.aToolBar.setItemText("results","<div style='width:100%; text-align:center'>"+(d+1)+this.i18n.paging.to+e+"&nbsp;&nbsp;&nbsp;"+
this.i18n.paging.records+b+"/"+f+this.i18n.paging.page+"</div>"):this.aToolBar.setItemText("results",this.i18n.paging.notfound));this._WTDef[3]&&this.aToolBar.setItemText("perpagenum","<div style='width:100%; text-align:right'>"+this.rowsBufferOutSize.toString()+" "+this.i18n.paging.perpage+"</div>");this.callEvent("onPaging",[])};
dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject(this._pgn_parentObj,this._pgn_skin_tlb||"dhx_blue");this._WTDef||this.setPagingWTMode(!0,!0,!0,!0);var b=this;this.aToolBar.attachEvent("onClick",function(d){d=d.split("_");switch(d[0]){case "leftabs":b.changePage(1);break;case "left":b.changePage(b.currentPage-1);break;case "rightabs":b.changePage(99999);break;case "right":b.changePage(b.currentPage+1);break;case "perpagenum":if(d[1]===this.undefined)break;
b.rowsBufferOutSize=parseInt(d[1]);b.changePage();b.aToolBar.setItemText("perpagenum","<div style='width:100%; text-align:right'>"+d[1]+" "+b.i18n.paging.perpage+"</div>");break;case "pages":if(d[1]===this.undefined)break;b.changePage(d[1]);b.aToolBar.setItemText("pages","<div style='width:100%; text-align:right'>"+b.i18n.paging.page+d[1]+"</div>")}});this._WTDef[0]&&(this.aToolBar.addButton("leftabs",NaN,"",this.imgURL+"ar_left_abs.gif",this.imgURL+"ar_left_abs_dis.gif"),this.aToolBar.setWidth("leftabs",
"20"),this.aToolBar.addButton("left",NaN,"",this.imgURL+"ar_left.gif",this.imgURL+"ar_left_dis.gif"),this.aToolBar.setWidth("left","20"));this._WTDef[1]&&(this.aToolBar.addText("results",NaN,this.i18n.paging.results),this.aToolBar.setWidth("results","150"),this.aToolBar.disableItem("results"));this._WTDef[0]&&(this.aToolBar.addButton("right",NaN,"",this.imgURL+"ar_right.gif",this.imgURL+"ar_right_dis.gif"),this.aToolBar.setWidth("right","20"),this.aToolBar.addButton("rightabs",NaN,"",this.imgURL+
"ar_right_abs.gif",this.imgURL+"ar_right_abs_dis.gif"),this.aToolBar.setWidth("rightabs","20"));this._WTDef[2]&&(this.aToolBar.addButtonSelect("pages",NaN,"select page",[],null,null,null,!0,this._WTDef_mxo),this.aToolBar.setWidth("pages","75"));var d;if(d=this._WTDef[3]){this.aToolBar.addButtonSelect("perpagenum",NaN,"select size",[],null,null,null,!0);"object"!=typeof d&&(d=[5,10,15,20,25,30]);for(var e=0;e<d.length;e++)this.aToolBar.addListOption("perpagenum","perpagenum_"+d[e],NaN,"button",d[e]+
" "+this.i18n.paging.perpage);this.aToolBar.setWidth("perpagenum","135")}return this.aToolBar};dhtmlXGridObject.prototype.hidePivot=function(){if(this._pgridCont){this._pgrid&&this._pgrid.destructor();var b=this._pgridCont.parentNode;b.innerHTML="";b.parentNode==this.entBox&&this.entBox.removeChild(b);this._pgrid=this._pgridSelect=this._pUNI=this._pgridCont=null}};
dhtmlXGridObject.prototype.makePivot=function(b,d){d=d||{};this.hidePivot();b||(b=document.createElement("DIV"),b.style.cssText="position:absolute; top:0px; left:0px;background-color:white;",b.style.height=this.entBox.offsetHeight+"px",b.style.width=this.entBox.offsetWidth+"px","absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative"),this.entBox.appendChild(b));"object"!=typeof b&&(b=document.getElementById(b));if(d.column_list)this._column_list=d.column_list;else{this._column_list=
[];for(var e=0;e<this.hdr.rows[1].cells.length;e++)this._column_list.push(this.hdr.rows[1].cells[e][_isIE?"innerText":"textContent"])}var f=this;b.innerHTML="<table cellspacing='0' cellpadding='0'><tr><td style='width:160px' align='center'></td><td>&nbsp;&nbsp;&nbsp;</td><td></td></tr></table><div></div>";e=this.makePivotSelect(this._column_list);e.style.width="80px";e.onchange=function(){f._pivotS.value=-1!=this.value?this.value:"";f._reFillPivotLists();f._renderPivot2()};var g=this.makePivotSelect(this._column_list);
g.onchange=function(){f._pivotS.x=-1!=this.value?this.value:"";f._reFillPivotLists();f._renderPivot()};var h=this.makePivotSelect(this._column_list);h.onchange=function(){f._pivotS.y=-1!=this.value?this.value:"";f._reFillPivotLists();f._renderPivot()};var l=this.makePivotSelect(["Sum","Min","Max","Average","Count"],-1);l.style.width="70px";l.onchange=function(){f._pivotS.action=-1!=this.value?this.value:null;f._renderPivot2()};d.readonly&&(e.disabled=g.disabled=h.disabled=l.disabled=!0);b.firstChild.rows[0].cells[0].appendChild(l);
b.firstChild.rows[0].cells[0].appendChild(e);b.firstChild.rows[0].cells[2].appendChild(g);var m=b.childNodes[1];m.style.width=b.offsetWidth+"px";m.style.height=b.offsetHeight-20+"px";m.style.overflow="hidden";this._pgridCont=m;this._pgridSelect=[e,g,h,l];this._pData=this._fetchPivotData();this._pUNI=[];this._pivotS={action:d.action||"0",value:"undefined"!=typeof d.value?d.value||"0":null,x:"undefined"!=typeof d.x?d.x||"0":null,y:"undefined"!=typeof d.y?d.y||"0":null};e.value=this._pivotS.value;g.value=
this._pivotS.x;h.value=this._pivotS.y;l.value=this._pivotS.action;f._reFillPivotLists();this._renderPivot()};dhtmlXGridObject.prototype._fetchPivotData=function(){for(var b=[],d=0;d<this._cCount;d++){for(var e=[],f=0;f<this.rowsCol.length;f++)this.rowsCol[f]._cntr||e.push(this.cells2(f,d).getValue());b.push(e)}return b};
dhtmlXGridObject.prototype._renderPivot=function(){_isIE&&this._pgridSelect[2].removeNode(!0);this._pgrid&&this._pgrid.destructor();this._pgrid=new dhtmlXGridObject(this._pgridCont);this._pgrid.attachEvent("onBeforeSelect",function(){return!1});if(this._pivotS.x){for(var b=this._getUniList(this._pivotS.x),d=[160],e=0;e<b.length;e++)d.push(100);b=[""].concat(b);this._pgrid.setHeader(b);this._pgrid.setInitWidths(d.join(","))}else this._pgrid.setHeader(""),this._pgrid.setInitWidths("160");this._pgrid.init();
this._pgrid.setEditable(!1);this._pgrid.setSkin(this.entBox.className.replace("gridbox gridbox_",""));b=this._pgrid.hdr.rows[1].cells[0];b.firstChild&&"DIV"==b.firstChild.tagName&&(b=b.firstChild);b.appendChild(this._pgridSelect[2]);this._pgrid.setSizes();if(this._pivotS.y){b=this._getUniList(this._pivotS.y);for(e=0;e<b.length;e++)this._pgrid.addRow(this._pgrid.uid(),[b[e]],-1)}else this._pgrid.addRow(1,"not ready",1);this._renderPivot2()};
dhtmlXGridObject.prototype._pivot_action_0=function(b,d,e,f,g,h){var l=0;b=h[b];d=h[d];e=h[e];for(h=b.length-1;0<=h;h--)b[h]==f&&d[h]==g&&(l+=parseFloat(e[h]));return l};dhtmlXGridObject.prototype._pivot_action_1=function(b,d,e,f,g,h){ret=9999999999;b=h[b];d=h[d];e=h[e];for(h=b.length-1;0<=h;h--)b[h]==f&&d[h]==g&&(ret=Math.min(parseFloat(e[h]),ret));9999999999==ret&&(ret="");return ret};
dhtmlXGridObject.prototype._pivot_action_2=function(b,d,e,f,g,h){ret=-9999999999;b=h[b];d=h[d];e=h[e];for(h=b.length-1;0<=h;h--)b[h]==f&&d[h]==g&&(ret=Math.max(parseFloat(e[h]),ret));-9999999999==ret&&(ret="");return ret};dhtmlXGridObject.prototype._pivot_action_3=function(b,d,e,f,g,h){var l=0,m=0;b=h[b];d=h[d];e=h[e];for(h=b.length-1;0<=h;h--)b[h]==f&&d[h]==g&&(l+=parseFloat(e[h]),m++);return m?l/m:""};
dhtmlXGridObject.prototype._pivot_action_4=function(b,d,e,f,g,h){e=0;b=h[b];d=h[d];for(h=b.length-1;0<=h;h--)b[h]==f&&d[h]==g&&e++;return e};
dhtmlXGridObject.prototype._renderPivot2=function(){if(this._pivotS.x&&this._pivotS.y&&this._pivotS.value&&this._pivotS.action)for(var b=this["_pivot_action_"+this._pivotS.action],d=this._getUniList(this._pivotS.x),e=this._getUniList(this._pivotS.y),f=0;f<d.length;f++)for(var g=0;g<e.length;g++)this._pgrid.cells2(g,f+1).setValue(Math.round(100*b(this._pivotS.x,this._pivotS.y,this._pivotS.value,d[f],e[g],this._pData))/100)};
dhtmlXGridObject.prototype._getUniList=function(b){if(!this._pUNI[b]){for(var d={},e=[],f=this._pData[b].length-1;0<=f;f--)d[this._pData[b][f]]=!0;for(var g in d)!0===d[g]&&e.push(g);this._pUNI[b]=e.sort()}return this._pUNI[b]};dhtmlXGridObject.prototype._fillPivotList=function(b,d,e,f){e||(e={},f=-1);b.innerHTML="";b.options[b.options.length]=new Option("-select-",-1);for(var g=0;g<d.length;g++)e[g]||null===d[g]||(b.options[b.options.length]=new Option(d[g],g));b.value=parseInt(f)};
dhtmlXGridObject.prototype._reFillPivotLists=function(){for(var b=[],d=[],e=0;3>e;e++)b.push(this._pgridSelect[e]),d.push(b[e].value);var e=this._reFfillPivotLists,f={};f[d[1]]=f[d[2]]=!0;this._fillPivotList(b[0],this._column_list,f,d[0]);f={};f[d[0]]=f[d[2]]=!0;this._fillPivotList(b[1],this._column_list,f,d[1]);f={};f[d[1]]=f[d[0]]=!0;this._fillPivotList(b[2],this._column_list,f,d[2]);this._reFfillPivotLists=e};
dhtmlXGridObject.prototype.makePivotSelect=function(b,d){var e=document.createElement("SELECT");this._fillPivotList(e,b,d);e.style.cssText="width:150px; height:20px; font-family:Tahoma; font-size:8pt; font-weight:normal;";return e};
dhtmlXGridObject.prototype.setRowspan=function(b,d,e){if(-1==this._rspan_history.indexOf(","+b+"~"+d+"~"+e+",")){this._rspan_history+=b+"~"+d+"~"+e+",";var f=this[this._bfs_cells?"_bfs_cells":"cells"](b,d).cell,g=this.rowsAr[b];if(g.nextSibling){if(f.rowSpan&&1!=f.rowSpan)for(var h=g.nextSibling,l=1;l<f.rowSpan;l++){var m=h.childNodes[h._childIndexes[f._cellIndex+1]],k=document.createElement("TD");k.innerHTML="&nbsp;";k._cellIndex=f._cellIndex;k._clearCell=!0;m?m.parentNode.insertBefore(k,m):h.parentNode.appendChild(k);
this._shiftIndexes(h,f._cellIndex,-1);h=h.nextSibling;if(!h)break}f.rowSpan=e;g=this._h2?this.rowsAr[this._h2.get[g.idd].parent.childs[this._h2.get[g.idd].index+1].id]:g.nextSibling||this.rowsCol[this.rowsCol._dhx_find(g)+1];h=[];for(l=1;l<e;l++)m=null,m=this._fake&&!this._realfake?this._bfs_cells3(g,d).cell:this.cells3(g,d).cell,this._shiftIndexes(g,f._cellIndex,1),m&&m.parentNode.removeChild(m),h.push(g),this._h2?(g=this._h2.get[g.idd].parent.childs[this._h2.get[g.idd].index+1])&&(g=this.rowsAr[g.id]):
g=g.nextSibling||this.rowsCol[this.rowsCol._dhx_find(g)+1];this.rowsAr[b]._rowSpan=this.rowsAr[b]._rowSpan||{};this.rowsAr[b]._rowSpan[d]=h;this._fake&&!this._realfake&&d<this._fake._cCount&&this._fake.setRowspan(b,d,e)}}};dhtmlXGridObject.prototype._shiftIndexes=function(b,d,e){if(!b._childIndexes){b._childIndexes=[];for(var f=0;f<b.childNodes.length;f++)b._childIndexes[f]=f}for(f=0;f<b._childIndexes.length;f++)f>d&&(b._childIndexes[f]-=e)};
dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=!0;this.enableRowspan=function(){};this.attachEvent("onAfterSorting",function(){if(!this._dload){for(var b=1;b<this.obj.rows.length;b++)if(this.obj.rows[b]._rowSpan){var d=this.obj.rows[b],e;for(e in d._rowSpan)for(var f=d,g=f._rowSpan[e],h=0;h<g.length;h++)if(!(f&&f.nextSibling?f.nextSibling:g[h]).filterOut){f.nextSibling?f.parentNode.insertBefore(g[h],f.nextSibling):f.parentNode.appendChild(g[h]);if(this._fake){var l=this._fake.rowsAr[f.idd],
m=this._fake.rowsAr[g[h].idd];l.nextSibling?l.parentNode.insertBefore(m,l.nextSibling):l.parentNode.appendChild(m);this._correctRowHeight(f.idd)}f=f.nextSibling}}b=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray;this.rowsCol.stablesort=b;for(b=1;b<this.obj.rows.length;b++)this.rowsCol.push(this.obj.rows[b])}});this.attachEvent("onRenderSet",function(b,d,e,f){b=this.xmlLoader.doXPath("//cell[@rowspan]",f);for(d=0;d<b.length;d++){e=b[d].parentNode;f=e.getAttribute("id");for(var g=b[d].getAttribute("rowspan"),
h=0,l=0;l<e.childNodes.length;l++)if("cell"==e.childNodes[l].tagName)if(e.childNodes[l]==b[d])break;else h++;this.setRowspan(f,h,g)}})};dhtmlXGridObject.prototype._init_point_bspl=dhtmlXGridObject.prototype._init_point;dhtmlXGridObject.prototype._init_point=function(){this._split_later&&this.splitAt(this._split_later);(this._init_point=this._init_point_bspl)&&this._init_point()};
dhtmlXGridObject.prototype.splitAt=function(b,d){function e(d,e,f,g){var h=Array(b).join(this.delim),l=[];if(2==d)for(var m=0;m<b;m++){var k=e[d-1].cells[e[d-1]._childIndexes?e[d-1]._childIndexes[m]:m];k.rowSpan&&1<k.rowSpan&&(l[k._cellIndex]=k.rowSpan-1,g[d-1].cells[g[d-1]._childIndexes?g[d-1]._childIndexes[m]:m].rowSpan=k.rowSpan,_isIE&&(k.rowSpan=1))}for(;d<e.length;d++){this._fake.attachHeader(h,null,f);g=g||this._fake.ftr.childNodes[0].rows;for(var k=b,s=0,n=0;n<k;n++)if(l[n]){l[n]-=1;if(_isIE||
_isFF&&1.9<=_FFrv||_isOpera)m=document.createElement("TD"),_isFF&&(m.style.display="none"),e[d].insertBefore(m,e[d].cells[0]);s++}else{var m=e[d].cells[n-(_isIE?0:s)],u=m.rowSpan,v=g[d].cells[n-s],w=m;w.style.whiteSpace="";var H=w.nextSibling,N=w.parentNode;v.parentNode.insertBefore(w,v);H?N.insertBefore(v,H):N.appendChild(v);H=v.style.display;v.style.display=w.style.display;w.style.display=H;1<u&&(l[n]=u-1,m.rowSpan=u);if(1<g[d].cells[n].colSpan){e[d].cells[n].colSpan=g[d].cells[n].colSpan;k-=g[d].cells[n].colSpan-
1;for(m=1;m<g[d].cells[n].colSpan;m++)g[d].removeChild(g[d].cells[n+1])}}}}function f(b){var d=b.wheelDelta/-40;b.wheelDelta===window.undefined&&(d=b.detail);w.objBox.scrollTop+=40*d;b.preventDefault&&b.preventDefault()}this._merge_filterRow=convertStringToBoolean(d);if(!this.obj.rows[0])return this._split_later=b;b=parseInt(b);var g=document.createElement("DIV");this._splitColIndex=b;this.entBox.appendChild(g);var h=document.createElement("DIV");this.entBox.appendChild(h);for(var l=this.entBox.childNodes.length-
3;0<=l;l--)h.insertBefore(this.entBox.childNodes[l],h.firstChild);this.entBox.style.position="relative";this.globalBox=this.entBox;this.entBox=h;h.grid=this;g.style.cssText+="border:0px solid red !important;";h.style.cssText+="border:0px solid red !important;";h.style.top="0px";h.style.position="absolute";g.style.position="absolute";g.style.top="0px";g.style.left="0px";g.style.zIndex=11;h.style.height=g.style.height=this.globalBox.clientHeight;this._fake=new dhtmlXGridObject(g);this._fake.setSkin("not_existing_skin");
this.globalBox=this._fake.globalBox=this.globalBox;this._fake._fake=this;this._fake._realfake=!0;this._treeC=this.cellType._dhx_find("tree");this._fake.delim=this.delim;this._fake.customGroupFormat=this.customGroupFormat;this._fake.imgURL=this.imgURL;this._fake._customSorts=this._customSorts;this._fake.noHeader=this.noHeader;this._fake._enbTts=this._enbTts;this._fake.clists=this.clists;this._fake.fldSort=[];this._fake.selMultiRows=this.selMultiRows;if((this._fake.multiLine=this.multiLine)||this._erspan){this.attachEvent("onCellChanged",
this._correctRowHeight);var m=function(){this._realfake||this.forEachRow(function(b){this._correctRowHeight(b)})};this.attachEvent("onPageChanged",m);this.attachEvent("onXLE",m);this.attachEvent("onResizeEnd",m);this.multiLine&&this.attachEvent("onSetSizes",m);this._ads_count||this.attachEvent("onAfterSorting",m);this.attachEvent("onDistributedEnd",m)}else 8==_isIE&&(m=function(){this._realfake||this.forEachRow(function(b){this._correctRowHeight(b)})},this.attachEvent("onXLE",m),this.attachEvent("onSRE",
m));this.attachEvent("onGridReconstructed",function(){this._fake.objBox.scrollTop=this.objBox.scrollTop});this._fake.loadedKidsHash=this.loadedKidsHash;this._h2&&(this._fake._h2=this._h2);this._fake._dInc=this._dInc;var m=[[],[],[],[],[],[],[]],k="hdrLabels initCellWidth cellType cellAlign cellVAlign fldSort columnColor".split(" "),n="setHeader setInitWidths setColTypes setColAlign setColVAlign setColSorting setColumnColor".split(" ");this._fake.callEvent=function(){var b=!0;if(this._fake&&this._fake.callEvent){this._fake._split_event=
!0;var d="onScroll"==arguments[0];("onGridReconstructed"==arguments[0]||d)&&this._fake.callEvent.apply(this,arguments);d||(b=this._fake.callEvent.apply(this._fake,arguments));this._fake._split_event=!1;return b}};this._elmn&&this._fake.az(!0);(this.__cssEven||this._cssUnEven)&&this._fake.attachEvent("onGridReconstructed",function(){this._fixAlterCss()});this._fake._cssEven=this._cssEven;this._fake._cssUnEven=this._cssUnEven;this._fake._cssSP=this._cssSP;this._fake.isEditable=this.isEditable;this._fake._edtc=
this._edtc;this._sst&&this._fake.aC(!0);this._fake._sclE=this._sclE;this._fake._dclE=this._dclE;this._fake._f2kE=this._f2kE;this._fake._maskArr=this._maskArr;this._fake._dtmask=this._dtmask;this._fake.combos=this.combos;for(var s=0,u=this.globalBox.offsetWidth,l=0;l<b;l++){for(var v=0;v<k.length;v++)this[k[v]]&&(m[v][l]=this[k[v]][l]),"string"==typeof m[v][l]&&(m[v][l]=m[v][l].replace(RegExp("\\"+this.delim,"g"),"\\"+this.delim));_isFF&&(m[1][l]*=1);"%"==this.cellWidthType?(m[1][l]=Math.round(parseInt(this[k[1]][l])*
u/100),s+=m[1][l]):s+=parseInt(this[k[1]][l])}for(v=0;v<k.length;v++)if(l=m[v].join(this.delim),"setHeader"!=n[v]){if(""!=l)this._fake[n[v]](l)}else this._fake[n[v]](l,null,this._hstyles);this._fake._strangeParams=this._strangeParams;this._fake._drsclmn=this._drsclmn;s=Math.min(this.globalBox.offsetWidth,s);h.style.left=s+"px";g.style.width=s+"px";h.style.width=Math.max(this.globalBox.offsetWidth-s,0);this._ecspn&&(this._fake._ecspn=!0);this._fake.init();this.dragAndDropOff&&this.dragger.addDragLanding(this._fake.entBox,
this);this._fake.objBox.style.overflow="hidden";this._fake.objBox.style.overflowX="scroll";this._fake._srdh=this._srdh||20;this._fake._srnd=this._srnd;var w=this;dhtmlxEvent(this._fake.objBox,"mousewheel",f);dhtmlxEvent(this._fake.objBox,"DOMMouseScroll",f);2<this.hdr.rows.length&&e.call(this,2,this.hdr.rows,"_aHead",this._fake.hdr.rows);this.ftr&&(e.call(this,1,this.ftr.childNodes[0].rows,"_aFoot"),this._fake.ftr.parentNode.style.bottom=(_isFF?2:1)+"px");s=0;u=this.globalBox.offsetWidth;for(l=0;l<
b;l++)for(v=0;v<k.length;v++)this.setColumnHidden(l,!0);this.saveSizeToCookie&&(this.saveSizeToCookie=function(d,e){if(this._realfake)return this._fake.saveSizeToCookie.apply(this._fake,arguments);d||(d=this.entBox.id);for(var f=[],g=0;g<this.cellWidthPX.length;g++)f[g]=g<b?this._fake.cellWidthPX[g]:this.cellWidthPX[g];f=f.join(",");this.setCookie(d,e,0,f);f=(this.initCellWidth||[]).join(",");this.setCookie(d,e,1,f);return!0},this.loadSizeFromCookie=function(d){d||(d=this.entBox.id);var e=this._getCookie(d,
1);if(e){this.initCellWidth=e.split(",");e=this._getCookie(d,0);this.cellWidthType="px";d=0;if(e&&e.length)for(var e=e.split(","),f=0;f<e.length;f++)f<b?(this._fake.cellWidthPX[f]=e[f],d+=1*e[f]):this.cellWidthPX[f]=e[f];this._fake.entBox.style.width=d+"px";this._fake.objBox.style.width=d+"px";e=this.globalBox.childNodes[1];e.style.left=d-0+"px";this.ftr&&(this.ftr.style.left=d-0+"px");e.style.width=this.globalBox.offsetWidth-d+"px";this.setSizes();return!0}},this._fake.onRSE=this.onRSE);this.setCellTextStyleA=
this.setCellTextStyle;this.setCellTextStyle=function(d,e,f){e<b&&this._fake.setCellTextStyle(d,e,f);this.setCellTextStyleA(d,e,f)};this.setRowTextBoldA=this.setRowTextBold;this.setRowTextBold=function(b){this.setRowTextBoldA(b);this._fake.setRowTextBold(b)};this.setRowColorA=this.setRowColor;this.setRowColor=function(b,d){this.setRowColorA(b,d);this._fake.setRowColor(b,d)};this.setRowHiddenA=this.setRowHidden;this.setRowHidden=function(b,d){this.setRowHiddenA(b,d);this._fake.setRowHidden(b,d)};this.setRowTextNormalA=
this.setRowTextNormal;this.setRowTextNormal=function(b){this.setRowTextNormalA(b);this._fake.setRowTextNormal(b)};this.getChangedRows=function(b){function d(b){for(var f=0;f<b.childNodes.length;f++)if(b.childNodes[f].wasChanged)return e[e.length]=b.idd}var e=[];this.forEachRow(function(f){var g=this.rowsAr[f];f=this._fake.rowsAr[f];"TR"!=g.tagName||"TR"!=f.tagName||(b&&g._added?e[e.length]=g.idd:d(g)||d(f))});return e.join(this.delim)};this.setRowTextStyleA=this.setRowTextStyle;this.setRowTextStyle=
function(b,d){this.setRowTextStyleA(b,d);this._fake.rowsAr[b]&&this._fake.setRowTextStyle(b,d)};this.lockRowA=this.lockRow;this.lockRow=function(b,d){this.lockRowA(b,d);this._fake.lockRow(b,d)};this.getColWidth=function(d){return d<b?parseInt(this._fake.cellWidthPX[d]):parseInt(this.cellWidthPX[d])};this.getColumnLabel=function(d){return this._fake.getColumnLabel.apply(d<b?this._fake:this,arguments)};this.setColWidthA=this._fake.setColWidthA=this.setColWidth;this.setColWidth=function(d,e){d*=1;d<
b?this._fake.setColWidthA(d,e):this.setColWidthA(d,e);d+1<=b&&this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth,this._fake.obj.offsetWidth))};this.adjustColumnSizeA=this.adjustColumnSize;this.setColumnLabelA=this.setColumnLabel;this.setColumnLabel=function(d,e,f,g){var h=this;d<b&&(h=this._fake);return this.setColumnLabelA.apply(h,[d,e,f,g])};this.adjustColumnSize=function(d,e){if(d<b)_isIE&&(this._fake.obj.style.tableLayout=""),this._fake.adjustColumnSize(d,e),_isIE&&(this._fake.obj.style.tableLayout=
"fixed"),this._fake._correctSplit();else return this.adjustColumnSizeA(d,e)};g="cells";this._bfs_cells=this[g];this[g]=function(){return arguments[1]<b?this._fake.cells.apply(this._fake,arguments):this._bfs_cells.apply(this,arguments)};this._bfs_setColumnHidden=this.setColumnHidden;this.setColumnHidden=function(){return parseInt(arguments[0])<b?(this._fake.setColumnHidden.apply(this._fake,arguments),this._fake._correctSplit()):this._bfs_setColumnHidden.apply(this,arguments)};g="cells2";this._bfs_cells2=
this[g];this[g]=function(){return arguments[1]<b?this._fake.cells2.apply(this._fake,arguments):this._bfs_cells2.apply(this,arguments)};g="cells3";this._bfs_cells3=this[g];this[g]=function(d,e){if(arguments[1]<b&&this._fake.rowsAr[arguments[0].idd]){if(this._fake.rowsAr[d.idd]&&0==this._fake.rowsAr[d.idd].childNodes.length)return this._bfs_cells3.apply(this,arguments);arguments[0]=arguments[0].idd;return this._fake.cells.apply(this._fake,arguments)}return this._bfs_cells3.apply(this,arguments)};g=
"changeRowId";this._bfs_changeRowId=this[g];this[g]=function(){this._bfs_changeRowId.apply(this,arguments);this._fake.rowsAr[arguments[0]]&&this._fake.changeRowId.apply(this._fake,arguments)};this._fake.getRowById=function(b){var d=this.rowsAr[b];!d&&this._fake.rowsAr[b]&&(d=this._fake.getRowById(b));if(d){if("TR"!=d.tagName){for(var e=0;e<this.rowsBuffer.length;e++)if(this.rowsBuffer[e]&&this.rowsBuffer[e].idd==b)return this.render_row(e);if(this._h2)return this.render_row(null,d.idd)}return d}return null};
this.collapseKids&&(this._fake._bfs_collapseKids=this.collapseKids,this._fake.collapseKids=function(b){return this._fake.collapseKids.apply(this._fake,[this._fake.rowsAr[b.idd]])},this._bfs_collapseKids=this.collapseKids,this.collapseKids=function(){this._bfs_collapseKids.apply(this,arguments);this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._fake._bfs_expandKids=this.expandKids,this._fake.expandKids=function(b){this._fake.expandKids.apply(this._fake,[this._fake.rowsAr[b.idd]]);
this._cssSP||this._fake._fixAlterCss()},this._bfs_expandAll=this.expandAll,this.expandAll=function(){this._bfs_expandAll();this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._bfs_collapseAll=this.collapseAll,this.collapseAll=function(){this._bfs_collapseAll();this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._bfs_expandKids=this.expandKids,this.expandKids=function(){this._bfs_expandKids.apply(this,arguments);this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},
this._fake._h2syncModel=function(){this._fake.pagingOn?this._fake._renderSort():this._renderSort()},this._updateTGRState=function(b){return this._fake._updateTGRState(b)});this._elmnh&&(this._setRowHoverA=this._fake._setRowHoverA=this._setRowHover,this._unsetRowHoverA=this._fake._unsetRowHoverA=this._unsetRowHover,this._setRowHover=this._fake._setRowHover=function(){var b=this.grid;b._setRowHoverA.apply(this,arguments);var d=_isIE?event.srcElement:arguments[0].target;(d=b._fake.rowsAr[b.getFirstParentOfType(d,
"TD").parentNode.idd])&&b._fake._setRowHoverA.apply(b._fake.obj,[{target:d.childNodes[0]},arguments[1]])},this._unsetRowHover=this._fake._unsetRowHover=function(){var b=arguments[1]?this:this.grid;b._unsetRowHoverA.apply(this,arguments);b._fake._unsetRowHoverA.apply(b._fake.obj,arguments)},this._fake.aB(!0,this._hvrCss),this.aB(!1),this.aB(!0,this._fake._hvrCss));this._updateTGRState=function(b){b.update&&0!=b.id&&(this.rowsAr[b.id].imgTag&&(this.rowsAr[b.id].imgTag.src=this.imgURL+b.state+".gif"),
this._fake.rowsAr[b.id]&&this._fake.rowsAr[b.id].imgTag&&(this._fake.rowsAr[b.id].imgTag.src=this.imgURL+b.state+".gif"),b.update=!1)};this.copy_row=function(d){var e=d.cloneNode(!0);e._skipInsert=d._skipInsert;var f=b;e._attrs={};e._css=d._css;if(this._ecspn)for(var g=f=0;f<e.childNodes.length&&g<b;g+=e.childNodes[f].colSpan||1)f++;for(;e.childNodes.length>f;)e.removeChild(e.childNodes[e.childNodes.length-1]);for(g=0;g<f;g++)if(this.dragAndDropOff&&this.dragger.addDraggableItem(e.childNodes[g],this),
e.childNodes[g].style.display=this._fake._hrrar?this._fake._hrrar[g]?"none":"":"",e.childNodes[g]._cellIndex=g,e.childNodes[g].combo_value=d.childNodes[g].combo_value,e.childNodes[g].originalVal=d.childNodes[g].originalVal,e.childNodes[g]._clearCell=d.childNodes[g]._clearCell,e.childNodes[g]._cellType=d.childNodes[g]._cellType,e.childNodes[g]._brval=d.childNodes[g]._brval,e.childNodes[g]._attrs=d.childNodes[g]._attrs,e.childNodes[g].chstate=d.childNodes[g].chstate,d._attrs.style&&(e.childNodes[g].style.cssText+=
";"+d._attrs.style),1<e.childNodes[g].colSpan)this._childIndexes=this._fake._childIndexes;this._h2&&this._treeC<b&&(g=this._h2.get[d.idd],e.imgTag=e.childNodes[this._treeC].childNodes[0].childNodes[g.level],e.valTag=e.childNodes[this._treeC].childNodes[0].childNodes[g.level+2]);e.idd=d.idd;e.grid=this._fake;return e};g="_insertRowAt";this._bfs_insertRowAt=this[g];this[g]=function(){var b=this._bfs_insertRowAt.apply(this,arguments);arguments[0]=this.copy_row(arguments[0]);var d=this._fake._insertRowAt.apply(this._fake,
arguments);b._fhd&&(d.parentNode.removeChild(d),this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(d)),b._fhd=!1);return b};this._bfs_setSizes=this.setSizes;this.setSizes=function(){this._notresize||(this._bfs_setSizes(this,arguments),this.sync_headers(),this.sync_scroll()&&this._ahgr&&this.setSizes(),this._fake.entBox.style.height=this.entBox.style.height,this._fake.objBox.style.height=this.objBox.style.height,this._fake.hdrBox.style.height=this.hdrBox.style.height,this._fake.objBox.scrollTop=
this.objBox.scrollTop,this._fake.setColumnSizes(this._fake.entBox.clientWidth),this.globalBox.style.width=parseInt(this.entBox.style.width)+parseInt(this._fake.entBox.style.width),this.globalBox.style.height=this.entBox.style.height)};this.sync_scroll=this._fake.sync_scroll=function(b){var d=this.objBox.style.overflowX;if(this.obj.offsetWidth<=this.objBox.offsetWidth){if(!b)return this._fake.sync_scroll(!0);this.objBox.style.overflowX="hidden";this._fake.objBox.style.overflowX="hidden"}else this.objBox.style.overflowX=
"scroll",this._fake.objBox.style.overflowX="scroll";return d!=this.objBox.style.overflowX};this.sync_headers=this._fake.sync_headers=!this._merge_filterRow?function(){if(!(this.noHeader||this._fake.hdr.scrollHeight==this.hdr.offsetHeight))for(var d=1;d<this.hdr.rows.length;d++){var e=this.hdr.rows[d].scrollHeight,f=this._fake.hdr.rows[d].scrollHeight;e!=f&&(this._fake.hdr.rows[d].style.height=this.hdr.rows[d].style.height=Math.max(e,f)+"px");window._KHTMLrv&&(this._fake.hdr.rows[d].childNodes[0].style.height=
this.hdr.rows[d].childNodes[b].style.height=Math.max(e,f)+"px")}}:function(){if(!(this.noHeader||this._fake.hdr.scrollHeight==this.hdr.offsetHeight))for(var b=1,d=1,e=1;e<this.hdr.rows.length;e++){for(var f=this.hdr.rows[e].scrollHeight,g=this._fake.hdr.rows[e].scrollHeight,b=1*this._fake.hdr.rows[e].cells[0].rowSpan,h=0;h<this._fake.hdr.rows[e].cells.length;h++)var l=this._fake.hdr.rows[e].cells[h],b=b<1*l.rowSpan?b:1*l.rowSpan;if(f!=g||1<d)if(1==b)1<d?(d--,this._fake.hdr.rows[e].style.display="none"):
this._fake.hdr.rows[e].style.height=this.hdr.rows[e].style.height=Math.max(f,g)+"px";else{f=0;for(d=e;d<e+b;d++)f+=this.hdr.rows[d].scrollHeight;d=b;this._fake.hdr.rows[e].style.height=f+(_isIE?b-1:0)+"px"}}};this._fake._bfs_setSizes=this._fake.setSizes;this._fake.setSizes=function(){this._fake._notresize||this._fake._bfs_setSizes()};g="_doOnScroll";this._bfs__doOnScroll=this[g];this[g]=function(){this._bfs__doOnScroll.apply(this,arguments);this._fake.objBox.scrollTop=this.objBox.scrollTop;this._fake._doOnScroll.apply(this._fake,
arguments)};g="selectAll";this._bfs__selectAll=this[g];this[g]=function(){this._bfs__selectAll.apply(this,arguments);this._bfs__selectAll.apply(this._fake,arguments)};g="doClick";this._bfs_doClick=this[g];this[g]=function(){this._bfs_doClick.apply(this,arguments);if("TD"==arguments[0].tagName){var d=arguments[0]._cellIndex>=b;arguments[0].parentNode.idd&&(d||(arguments[0].className=arguments[0].className.replace(/cellselected/g,"")),this._fake.rowsAr[arguments[0].parentNode.idd]||this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd)),
arguments[0]=this._fake.cells(arguments[0].parentNode.idd,d?0:arguments[0]._cellIndex).cell,d&&(this._fake.cell=null),this._fake._bfs_doClick.apply(this._fake,arguments),d?this._fake.cell=this.cell:this.cell=this._fake.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),d?(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell,this._fake.objBox.scrollTop=this.objBox.scrollTop):this.objBox.scrollTop=
this._fake.objBox.scrollTop)}};this._fake._bfs_doClick=this._fake[g];this._fake[g]=function(){this._bfs_doClick.apply(this,arguments);if("TD"==arguments[0].tagName){var d=arguments[0]._cellIndex<b;if(arguments[0].parentNode.idd&&(arguments[0]=this._fake._bfs_cells(arguments[0].parentNode.idd,d?b:arguments[0]._cellIndex).cell,this._fake.cell=null,this._fake._bfs_doClick.apply(this._fake,arguments),this._fake.cell=this.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),d))arguments[0].className=
arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell,this._fake.objBox.scrollTop=this.objBox.scrollTop}};this.clearSelectionA=this.clearSelection;this.clearSelection=function(b){b&&this._fake.clearSelection();this.clearSelectionA()};this.moveRowUpA=this.moveRowUp;this.moveRowUp=function(b){this._h2||this._fake.moveRowUp(b);this.moveRowUpA(b);this._h2&&this._fake._h2syncModel()};this.moveRowDownA=this.moveRowDown;this.moveRowDown=function(b){this._h2||
this._fake.moveRowDown(b);this.moveRowDownA(b);this._h2&&this._fake._h2syncModel()};this._fake.getUserData=function(){return this._fake.getUserData.apply(this._fake,arguments)};this._fake.setUserData=function(){return this._fake.setUserData.apply(this._fake,arguments)};this.getSortingStateA=this.getSortingState;this.getSortingState=function(){var b=this.getSortingStateA();return 0!=b.length?b:this._fake.getSortingState()};this.setSortImgStateA=this._fake.setSortImgStateA=this.setSortImgState;this.setSortImgState=
function(d,e,f,g){this.setSortImgStateA(d,e,f,g);1*e<b?(this._fake.setSortImgStateA(d,e,f,g),this.setSortImgStateA(!1)):this._fake.setSortImgStateA(!1)};this._fake.doColResizeA=this._fake.doColResize;this._fake.doColResize=function(d,e,f,g,h){var l=-1,m=0;if(arguments[1]._cellIndex==b-1){if(l=this._initalSplR+(d.clientX-g),this._initalSplF||(this._initalSplF=arguments[3]+this.objBox.scrollWidth-this.objBox.offsetWidth),this.objBox.scrollWidth==this.objBox.offsetWidth&&(this._fake.alter_split_resize||
0<d.clientX-g))arguments[3]=this._initalSplF||arguments[3]}else this.obj.offsetWidth<this.entBox.offsetWidth&&(l=this.obj.offsetWidth);m=this.doColResizeA.apply(this,arguments);this._correctSplit(l);this.resized=this._fake.resized=1;return m};this._fake.changeCursorState=function(b){var d=b.target||b.srcElement;"TD"!=d.tagName&&(d=this.getFirstParentOfType(d,"TD"));if(!("TD"==d.tagName&&this._drsclmn&&!this._drsclmn[d._cellIndex])){var e=(b.layerX||0)+(!_isIE&&"DIV"==b.target.tagName?d.offsetLeft:
0),f=parseInt(this.getPosition(d,this.hdrBox));d.style.cursor=d.offsetWidth-(b.offsetX||-1*(f-e))<(_isOpera?20:10)||this.entBox.offsetWidth-(b.offsetX?b.offsetX+d.offsetLeft:e)+this.objBox.scrollLeft-0<(_isOpera?20:10)?"E-resize":"default";_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}};this._fake.startColResizeA=this._fake.startColResize;this._fake.startColResize=function(b){b=this.startColResizeA(b);this._initalSplR=this.entBox.offsetWidth;this._initalSplF=null;if(this.entBox.onmousemove){var d=
this.entBox.parentNode;if(d._aggrid)return b;d._aggrid=d.grid;d.grid=this;this.entBox.parentNode.onmousemove=this.entBox.onmousemove;this.entBox.onmousemove=null}return b};this._fake.stopColResizeA=this._fake.stopColResize;this._fake.stopColResize=function(b){if(this.entBox.parentNode.onmousemove){var d=this.entBox.parentNode;d.grid=d._aggrid;d._aggrid=null;this.entBox.onmousemove=this.entBox.parentNode.onmousemove;this.entBox.parentNode.onmousemove=null;this.obj.offsetWidth<this.entBox.offsetWidth&&
this._correctSplit(this.obj.offsetWidth)}return this.stopColResizeA(b)};this.doKeyA=this.doKey;this._fake.doKeyA=this._fake.doKey;this._fake.doKey=this.doKey=function(d){if(!d||this._htkebl)return!0;if((d.target||d.srcElement).value!==window.undefined){var e=d.target||d.srcElement;if(!e.parentNode||-1==e.parentNode.className.indexOf("editable"))return!0}switch(d.keyCode){case 9:if(d.shiftKey)if(this._realfake){if(this.cell&&0==this.cell._cellIndex){d.preventDefault&&d.preventDefault();if(f=this._fake.rowsBuffer[this._fake.getRowIndex(this.cell.parentNode.idd)-
1]){this._fake.showRow(f.idd);for(e=this._fake._cCount-1;"none"==f.childNodes[e].style.display;)e--;this._fake.selectCell(this._fake.getRowIndex(f.idd),e,!1,!1,!0)}return!1}}else{if(this.cell&&this.cell._cellIndex==b)return d.preventDefault&&d.preventDefault(),this._fake.selectCell(this.getRowIndex(this.cell.parentNode.idd),b-1,!1,!1,!0),!1}else{if(this._realfake){if(this.cell&&this.cell._cellIndex==b-1){d.preventDefault&&d.preventDefault();for(e=b;this._fake._hrrar&&this._fake._hrrar[e];)e++;this._fake.selectCell(this._fake.getRowIndex(this.cell.parentNode.idd),
e,!1,!1,!0);return!1}var f=this.doKeyA(d);globalActiveDHTMLGridObject=this;return f}if(this.cell){for(e=this.cell._cellIndex+1;this.rowsCol[0].childNodes[e]&&"none"==this.rowsCol[0].childNodes[e].style.display;)e++;if(e==this.rowsCol[0].childNodes.length&&(d.preventDefault&&d.preventDefault(),f=this.rowsBuffer[this.getRowIndex(this.cell.parentNode.idd)+1]))return this.showRow(f.idd),this._fake.selectCell(this._fake.getRowIndex(f.idd),0,!1,!1,!0),!1}}}return this.doKeyA(d)};this.editCellA=this.editCell;
this.editCell=function(){return this.cell&&this.cell.parentNode.grid!=this?this._fake.editCell():this.editCellA()};this.deleteRowA=this.deleteRow;this.deleteRow=function(b,d){if(!1===this.deleteRowA(b,d))return!1;this._fake.rowsAr[b]&&this._fake.deleteRow(b)};this.clearAllA=this.clearAll;this.clearAll=function(b){this.clearAllA(b);this._fake.clearAll()};this.editStopA=this.editStop;this.editStop=function(){this._fake.editor?this._fake.editStop():this.editStopA()};this.attachEvent("onAfterSorting",
function(d){d>=b&&this._fake.setSortImgState(!1)});this._fake.sortField=function(b,d){this._fake.sortField.call(this._fake,b,d,this._fake.hdr.rows[0].cells[b]);if("na"!=this.fldSort[b]&&this._fake.fldSorted){var e=this._fake.getSortingState()[1];this._fake.setSortImgState(!1);this.setSortImgState(!0,b,e)}};this.sortTreeRowsA=this.sortTreeRows;this._fake.sortTreeRowsA=this._fake.sortTreeRows;this.sortTreeRows=this._fake.sortTreeRows=function(b,d,e,f){if(this._realfake)return this._fake.sortTreeRows(b,
d,e,f);this.sortTreeRowsA(b,d,e,f);this._fake._h2syncModel();this._fake.setSortImgStateA(!1);this._fake.fldSorted=null};this._fake._fillers=[];this._fake.rowsBuffer=this.rowsBuffer;this.attachEvent("onClearAll",function(){this._fake.rowsBuffer=this.rowsBuffer});this._add_filler_s=this._add_filler;this._add_filler=function(b,d,e,f){if(!f){this._fake._fillers||(this._fake._fillers=[]);var g;e&&(e.idd?g=this._fake.rowsAr[e.idd]:e.nextSibling&&(g={},g.nextSibling=this._fake.rowsAr[e.nextSibling.idd],
g.parentNode=g.nextSibling.parentNode));this._fake._fillers.push(this._fake._add_filler(b,d,g))}return this._add_filler_s.apply(this,arguments)};this._add_from_buffer_s=this._add_from_buffer;this._add_from_buffer=function(){var b=this._add_from_buffer_s.apply(this,arguments);-1!=b&&(this._fake._add_from_buffer.apply(this._fake,arguments),this.multiLine&&this._correctRowHeight(this.rowsBuffer[arguments[0]].idd));return b};this._fake.render_row=function(b){b=this._fake.render_row(b);return-1==b?-1:
b?this.rowsAr[b.idd]=this.rowsAr[b.idd]||this._fake.copy_row(b):null};this._reset_view_s=this._reset_view;this._reset_view=function(){this._fake._reset_view(!0);this._fake._fillers=[];this._reset_view_s()};this.moveColumn_s=this.moveColumn;this.moveColumn=function(d,e){if(e>=b)return this.moveColumn_s(d,e)};this.attachEvent("onCellChanged",function(d,e,f){if(this._split_event&&e<b&&this.rowsAr[d]){var g=this._fake.rowsAr[d];g&&(g=g._childIndexes?g.childNodes[g._childIndexes[e]]:g.childNodes[e],d=
this._bfs_cells(d,e).cell,d._treeCell&&d.firstChild.lastChild?d.firstChild.lastChild.innerHTML=f:d.innerHTML=g.innerHTML,d.wasChanged=g.wasChanged,d._clearCell=!1,d.chstate=g.chstate)}});this._fake.combos=this.combos;this.setSizes();this.rowsBuffer[0]&&this._reset_view();this.attachEvent("onXLE",function(){this._fake._correctSplit()});this._fake._correctSplit()};
dhtmlXGridObject.prototype._correctSplit=function(b){b=b||this.obj.scrollWidth-this.objBox.scrollLeft;b=Math.min(this.globalBox.offsetWidth,b);if(-1<b){this.entBox.style.width=b+"px";this.objBox.style.width=b+"px";var d=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;this._fake.entBox.style.left=b+"px";this._fake.entBox.style.width=Math.max(0,this.globalBox.offsetWidth-b-(this.quirks?0:2)*d)+"px";this._fake.ftr&&(this._fake.ftr.parentNode.style.width=this._fake.entBox.style.width);if(_isIE){var e=
_isIE&&!window.xmlHttpRequest,d=this.globalBox.offsetWidth-this.globalBox.clientWidth;this._fake.hdrBox.style.width=this._fake.objBox.style.width=Math.max(0,this.globalBox.offsetWidth-(e?d:0)-b)+"px"}}};dhtmlXGridObject.prototype._correctRowHeight=function(b){if(this.rowsAr[b]&&this._fake.rowsAr[b]){var d=Math.max(this.rowsAr[b].offsetHeight,this._fake.rowsAr[b].offsetHeight);d&&(this.rowsAr[b].style.height=this._fake.rowsAr[b].style.height=d+"px")}};
dhtmlXGridObject.prototype.enableSmartRendering=function(b,d,e){2<arguments.length&&(d&&!this.rowsBuffer[d-1]&&(this.rowsBuffer[d-1]=0),d=e);this._srnd=convertStringToBoolean(b);this._srdh=this._srdh||20;this._dpref=d||0;this.attachEvent("onSRE",this._compileMathCells)};dhtmlXGridObject.prototype.cs=function(b){this._srnd_pr=parseInt(b||50)};
dhtmlXGridObject.prototype.forceFullLoading=function(b){b=b||50;for(var d=0;d<this.rowsBuffer.length;d++)if(!this.rowsBuffer[d]){if(this.callEvent("onDynXLS",[d,b])){var e=this;this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+d+"&count="+b,function(){window.setTimeout(function(){e.forceFullLoading(b)},100)},this._data_type)}break}};dhtmlXGridObject.prototype.setAwaitedRowHeight=function(b){this._srdh=parseInt(b)};
dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2};
dhtmlXGridObject.prototype._add_filler=function(b,d,e,f){if(!d)return null;var g=this._prepareRow("__filler__");g.firstChild.style.width="1px";for(var h=1;h<g.childNodes.length;h++)g.childNodes[h].style.display="none";g.firstChild.style.height=d*this._srdh+"px";(e=e||this.rowsCol[b])&&e.nextSibling?e.parentNode.insertBefore(g,e.nextSibling):_isKHTML?this.obj.appendChild(g):this.obj.rows[0].parentNode.appendChild(g);this.callEvent("onAddFiller",[b,d,g,e,f]);return[b,d,g]};
dhtmlXGridObject.prototype._update_srnd_view=function(b){var d=Math.floor(this.objBox.scrollTop/this._srdh),e=d+this._get_view_size();if(this.multiLine){e=this.objBox.scrollTop;for(d=0;0<e;)e-=this.rowsCol[d]?this.rowsCol[d].offsetHeight:this._srdh,d++;e=d+this._get_view_size();0<d&&d--}e+=this._srnd_pr||0;e>this.rowsBuffer.length&&(e=this.rowsBuffer.length);for(var f=!1;d<e;d++)if(!this.rowsCol[d]){if(-1==this._add_from_buffer(d)){this.xmlFileUrl&&(this._current_load=[d,this._dpref?this._dpref:e-
d],this.callEvent("onDynXLS",[d,this._current_load[1]])&&this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+d+"&count="+this._current_load[1],this._data_type));return}if(this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[d].idd],this.rowsBuffer[d]),this._updateParentLine(this._h2.get[this.rowsBuffer[d].idd],this.rowsBuffer[d])),d&&d==(this._realfake?this._fake:this)._r_select)this.selectCell(d,this.cell?this.cell._cellIndex:0,!0);f=!0}this._srnd&&(f||b)&&this.callEvent("onSRE",
[this]);this._fake&&(!this._realfake&&this.multiLine)&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)};
dhtmlXGridObject.prototype._add_from_buffer=function(b){var d=this.render_row(b);if(-1==d)return-1;if(d._attrs.selected||d._attrs.select)this.selectRow(d,!1,!0),d._attrs.selected=d._attrs.select=null;if(this._cssSP){if(this._h2){var e=this._h2.get[d.idd];d.className+=" "+(e.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+e.level+(this.rowsAr[e.id]._css||"")}}else this._cssEven&&0==b%2?d.className=this._cssEven+(-1!=d.className.indexOf("rowselected")?" rowselected ":
" ")+(d._css||""):this._cssUnEven&&1==b%2&&(d.className=this._cssUnEven+(-1!=d.className.indexOf("rowselected")?" rowselected ":" ")+(d._css||""));for(e=0;e<this._fillers.length;e++){var f=this._fillers[e];if(f&&f[0]<=b&&f[0]+f[1]>b){var g=b-f[0];0==g?(this._insert_before(b,d,f[2]),this._update_fillers(e,-1,1)):g==f[1]-1?(this._insert_after(b,d,f[2]),this._update_fillers(e,-1,0)):(this._fillers.push(this._add_filler(b+1,f[1]-g-1,f[2],1)),this._insert_after(b,d,f[2]),this._update_fillers(e,-f[1]+g,
0));break}}};dhtmlXGridObject.prototype._update_fillers=function(b,d,e){var f=this._fillers[b];f[1]+=d;f[0]+=e;f[1]?(f[2].firstChild.style.height=parseFloat(f[2].firstChild.style.height)+d*this._srdh+"px",this.callEvent("onUpdateFiller",[f[2]])):(this.callEvent("onRemoveFiller",[f[2]]),f[2].parentNode.removeChild(f[2]),this._fillers.splice(b,1))};dhtmlXGridObject.prototype._insert_before=function(b,d,e){e.parentNode.insertBefore(d,e);this.rowsCol[b]=d;this.callEvent("onRowInserted",[d,null,e,"before"])};
dhtmlXGridObject.prototype._insert_after=function(b,d,e){e.nextSibling?e.parentNode.insertBefore(d,e.nextSibling):e.parentNode.appendChild(d);this.rowsCol[b]=d;this.callEvent("onRowInserted",[d,null,e,"after"])};dhtmlXGridObject.prototype.enableAutoSizeSaving=function(b,d){this.attachEvent("onResizeEnd",function(){this.saveSizeToCookie(b,d)})};
dhtmlXGridObject.prototype.saveOpenStates=function(b,d){b||(b=this.entBox.id);var e=[];this._h2.forEachChild(0,function(b){"minus"==b.state&&e.push(b.id)});var f="gridOpen"+(b||"")+"="+e.join("|")+(d?"; "+d:"");document.cookie=f};dhtmlXGridObject.prototype.loadOpenStates=function(b){if(b=this.getCookie(b,"gridOpen")){b=b.split("|");for(var d=0;d<b.length;d++)this.openItem(b[d])}};
dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving=function(b,d){this.attachEvent("onColumnHidden",function(){this.saveHiddenColumnsToCookie(b,d)})};dhtmlXGridObject.prototype.enableSortingSaving=function(b,d){this.attachEvent("onBeforeSorting",function(){var e=this;window.setTimeout(function(){e.saveSortingToCookie(b,d)},1);return!0})};dhtmlXGridObject.prototype.enableOrderSaving=function(b,d){this.attachEvent("onAfterCMove",function(){this.saveOrderToCookie(b,d);this.saveSizeToCookie(b,d)})};
dhtmlXGridObject.prototype.enableAutoSaving=function(b,d){this.enableOrderSaving(b,d);this.enableAutoSizeSaving(b,d);this.enableSortingSaving(b,d)};dhtmlXGridObject.prototype.saveSizeToCookie=function(b,d){var e="px"==this.cellWidthType?this.cellWidthPX.join(","):this.cellWidthPC.join(","),f=(this.initCellWidth||[]).join(",");this.setCookie(b,d,0,e);this.setCookie(b,d,1,f)};
dhtmlXGridObject.prototype.saveHiddenColumnsToCookie=function(b,d){var e=[].concat(this._hrrar||[]);if(this._fake&&this._fake._hrrar)for(var f=0;f<this._fake._cCount;f++)e[f]=this._fake._hrrar[f]?"1":"";this.setCookie(b,d,4,e.join(",").replace(/display:none;/g,"1"))};dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie=function(b){var d=this._getCookie(b,4);b=(d||"").split(",");if(!(b.length>this._cCount)&&d)for(d=0;d<b.length;d++)this.setColumnHidden(d,b[d]?!0:!1)};
dhtmlXGridObject.prototype.saveSortingToCookie=function(b,d){this.setCookie(b,d,2,(this.getSortingState()||[]).join(","))};dhtmlXGridObject.prototype.loadSortingFromCookie=function(b){b=this._getCookie(b,2);b=(b||"").split(",");1<b.length&&b[0]<this._cCount&&(this.sortRows(b[0],null,b[1]),this.setSortImgState(!0,b[0],b[1]))};
dhtmlXGridObject.prototype.saveOrderToCookie=function(b,d){if(!this._c_order){this._c_order=[];for(var e=this._cCount,f=0;f<e;f++)this._c_order[f]=f}this.setCookie(b,d,3,(this._c_order||[]).slice(0,this._cCount).join(","));this.saveSortingToCookie()};
dhtmlXGridObject.prototype.loadOrderFromCookie=function(b){b=this._getCookie(b,3);b=(b||"").split(",");if(1<b.length&&b.length<=this._cCount)for(var d=0;d<b.length;d++)if(!this._c_order&&b[d]!=d||this._c_order&&b[d]!=this._c_order[d]){var e=b[d];if(this._c_order)for(var f=0;f<this._c_order.length;f++)if(this._c_order[f]==b[d]){e=f;break}this.moveColumn(1*e,d)}};
dhtmlXGridObject.prototype.loadSizeFromCookie=function(b){var d=this._getCookie(b,1);d&&(this.initCellWidth=d.split(","));if((d=this._getCookie(b,0))&&d.length){if(!this._fake&&this._hrrar)for(b=0;b<d.length;b++)this._hrrar[b]&&(d[b]=0);"px"==this.cellWidthType?this.cellWidthPX=d.split(","):this.cellWidthPC=d.split(",")}this.setSizes();return!0};dhtmlXGridObject.prototype.clearConfigCookie=function(b){b||(b=this.entBox.id);document.cookie="gridSettings"+b+"=||||"};
dhtmlXGridObject.prototype.clearSizeCookie=dhtmlXGridObject.prototype.clearConfigCookie;dhtmlXGridObject.prototype.setCookie=function(b,d,e,f){b||(b=this.entBox.id);var g=this.getCookie(b),g=(g||"||||").split("|");g[e]=f;b="gridSettings"+b+"="+g.join("|")+(d?"; "+d:"");document.cookie=b};
dhtmlXGridObject.prototype.getCookie=function(b,d){b||(b=this.entBox.id);var e=(d||"gridSettings")+b+"=";if(0<document.cookie.length){var f=document.cookie.indexOf(e);if(-1!=f)return f+=e.length,e=document.cookie.indexOf(";",f),-1==e&&(e=document.cookie.length),document.cookie.substring(f,e)}};dhtmlXGridObject.prototype._getCookie=function(b,d){return(this.getCookie(b)||"||||").split("|")[d]};
function dhtmlXGridFromTable(b,d){"object"!=typeof b&&(b=document.getElementById(b));b.className="";var e=document.createElement("DIV");e.setAttribute("width",b.getAttribute("gridWidth")||(b.offsetWidth?b.offsetWidth+"px":0)||(window.getComputedStyle?window.getComputedStyle(b,null).width:b.currentStyle?b.currentStyle.width:0));e.setAttribute("height",b.getAttribute("gridHeight")||(b.offsetHeight?b.offsetHeight+"px":0)||(window.getComputedStyle?window.getComputedStyle(b,null).height:b.currentStyle?
b.currentStyle.height:0));var f=b,g=b.getAttribute("dragAndDrop");f.parentNode.insertBefore(e,f);var h=f.getAttribute("name")||"name_"+(new Date).valueOf(),e=new dhtmlXGridObject(e);window[h]=e;var l=f.getAttribute("onbeforeinit"),h=f.getAttribute("oninit");l&&eval(l);e.setImagePath(e.imgURL||f.getAttribute("imgpath")||"");d&&d(e);for(var l=f.rows[0],m="",k="",n="",s="",u="",v=0;v<l.cells.length;v++){var m=m+((m?",":"")+l.cells[v].innerHTML),w=l.cells[v].getAttribute("width")||l.cells[v].offsetWidth||
(window.getComputedStyle?window.getComputedStyle(l.cells[v],null).width:l.cells[v].currentStyle?l.cells[v].currentStyle.width:0),k=k+((k?",":"")+("*"==w?w:parseInt(w))),n=n+((n?",":"")+(l.cells[v].getAttribute("align")||"left")),s=s+((s?",":"")+(l.cells[v].getAttribute("type")||"ed")),u=u+((u?",":"")+(l.cells[v].getAttribute("sort")||"str"));if(w=l.cells[v].getAttribute("format"))-1!=l.cells[v].getAttribute("type").toLowerCase().indexOf("calendar")?e._dtmask=w:e.setNumberFormat(w,v)}e.setHeader(m);
e.setInitWidths(k);e.setColAlign(n);e.setColTypes(s);e.setColSorting(u);"auto"==b.getAttribute("gridHeight")&&e.enableAutoHeigth(!0);b.getAttribute("multiline")&&e.enableMultiline(!0);(l=f.getAttribute("lightnavigation"))&&e.enableLightMouseNavigation(l);l=f.getAttribute("evenrow");m=f.getAttribute("unevenrow");(l||m)&&e.enableAlterCss(l,m);g&&e.enableDragAndDrop(!0);e.init();b.getAttribute("split")&&e.splitAt(b.getAttribute("split"));e._process_inner_html(f,1);h&&eval(h);b.parentNode&&b.parentNode.removeChild&&
b.parentNode.removeChild(b);return e}dhtmlXGridObject.prototype._process_html=function(b){if(b.tagName&&"TABLE"==b.tagName)return this._process_inner_html(b,0);var d=document.createElement("DIV");d.innerHTML=b.xmlDoc.responseText;b=d.getElementsByTagName("TABLE")[0];this._process_inner_html(b,0)};
dhtmlXGridObject.prototype._process_inner_html=function(b,d){for(var e=b.rows.length,f=d;f<e;f++){var g=b.rows[f].getAttribute("id")||f;this.rowsBuffer.push({idd:g,data:b.rows[f],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset();this.setSizes()};
dhtmlXGridObject.prototype._process_html_row=function(b,d){var e=d.getElementsByTagName("TD"),f=[];b._attrs=this._xml_attrs(d);for(var g=0;g<e.length;g++){var h=e[g],l=h.getAttribute("type");b.childNodes[g]&&(l&&(b.childNodes[g]._cellType=l),b.childNodes[g]._attrs=this._xml_attrs(e[g]));h.firstChild?f.push(h.innerHTML):f.push("");if(1<h.colSpan){b.childNodes[g]._attrs.colspan=h.colSpan;for(l=1;l<h.colSpan;l++)f.push("")}}for(;g<b.childNodes.length;g++)b.childNodes[g]._attrs={};this._fillRow(b,this._c_order?
this._swapColumns(f):f);return b};dhtmlXGridObject.prototype._get_html_data=function(b,d){for(b=b.firstChild;;){if(!b)return"";"TD"==b.tagName&&d--;if(0>d)break;b=b.nextSibling}return b.firstChild?b.firstChild.data:""};dhtmlxEvent(window,"load",function(){for(var b=document.getElementsByTagName("table"),d=0;d<b.length;d++)"dhtmlxGrid"==b[d].className&&dhtmlXGridFromTable(b[d])});
dhtmlXGridObject.prototype.enableUndoRedo=function(){var b=this;this.attachEvent("onEditCell",function(){return b._onEditUndoRedo.apply(b,arguments)});this.attachEvent("onCheckbox",function(d,e,f){return b._onEditUndoRedo.apply(b,[2,d,e,f?1:0,f?0:1])});this._IsUndoRedoEnabled=!0;this._UndoRedoData=[];this._UndoRedoPos=-1};dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=!1;this._UndoRedoData=[];this._UndoRedoPos=-1};
dhtmlXGridObject.prototype._onEditUndoRedo=function(b,d,e,f,g){this._IsUndoRedoEnabled&&(2==b&&g!=f)&&(-1!==this._UndoRedoPos&&this._UndoRedoPos!=this._UndoRedoData.length-1?this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1):-1===this._UndoRedoPos&&0<this._UndoRedoData.length&&(this._UndoRedoData=[]),this._UndoRedoData.push({old_value:g,new_value:f,row_id:d,cell_index:e}),this._UndoRedoPos++);return!0};
dhtmlXGridObject.prototype.doUndo=function(){if(-1===this._UndoRedoPos)return!1;var b=this._UndoRedoData[this._UndoRedoPos--],d=this.cells(b.row_id,b.cell_index);"tree"==this.getColType(b.cell_index)?d.setLabel(b.old_value):d.setValue(b.old_value)};dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1)return!1;var b=this._UndoRedoData[++this._UndoRedoPos];this.cells(b.row_id,b.cell_index).setValue(b.new_value)};
dhtmlXGridObject.prototype.getRedo=function(){return this._UndoRedoPos==this._UndoRedoData.length-1?[]:this._UndoRedoData.slice(this._UndoRedoPos+1)};dhtmlXGridObject.prototype.getUndo=function(){return-1==this._UndoRedoPos?[]:this._UndoRedoData.slice(0,this._UndoRedoPos+1)};
function eXcell_sub_row(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")};this._setState=function(b,e){(e||this.cell).innerHTML="<img src='"+this.grid.imgURL+b+"' width='18' height='18' />";(e||this.cell).firstChild.onclick=this.grid._expandMonolite};this.open=function(){this.cell.firstChild.onclick(null,!0)};this.close=function(){this.cell.firstChild.onclick(null,!1,!0)};this.isOpen=function(){return!!this.cell.parentNode._expanded};
this.setValue=function(b){b&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",b);this._setState(b?"plus.gif":"blanc.gif")};this.setContent=function(b){this.cell.parentNode._expanded?(this.cell.parentNode._expanded.innerHTML=b,this.grid._detectHeight(this.cell.parentNode._expanded,this.cell,this.cell.parentNode._expanded.scrollHeight)):(this.cell._previous_content=null,this.setValue(b),this.cell._sub_row_type=null)};this.isDisabled=function(){return!0};this.getTitle=function(){return this.grid.getUserData(this.cell.parentNode.idd,
"__sub_row")?"click to expand|collapse":""}}eXcell_sub_row.prototype=new eXcell;function eXcell_sub_row_ajax(b){this.base=eXcell_sub_row;this.base(b);this.setValue=function(b){b&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",b);this.cell._sub_row_type="ajax";this._setState(b?"plus.gif":"blanc.gif")}}eXcell_sub_row_ajax.prototype=new eXcell_sub_row;
function eXcell_sub_row_grid(b){this.base=eXcell_sub_row;this.base(b);this.setValue=function(b){b&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",b);this.cell._sub_row_type="grid";this._setState(b?"plus.gif":"blanc.gif")};this.getSubGrid=function(){return!b._sub_grid?null:b._sub_grid}}eXcell_sub_row_grid.prototype=new eXcell_sub_row;
dhtmlXGridObject.prototype._expandMonolite=function(b,d,e){var f=this.parentNode,g=f.parentNode,h=g.grid;if(b||window.event)!e&&!g._expanded&&h.editStop(),(b||event).cancelBubble=!0;b=h.getUserData(g.idd,"__sub_row");h._sub_row_editor||(h._sub_row_editor=new eXcell_sub_row(f));if(b){if(g._expanded&&!d){h._sub_row_editor._setState("plus.gif",f);f._previous_content=g._expanded;h.objBox.removeChild(g._expanded);g._expanded=!1;g.style.height=(g.oldHeight||20)+"px";f.style.height=(g.oldHeight||20)+"px";
h._fake&&(h._fake.rowsAr[g.idd].style.height=(g.oldHeight||20)+"px");for(e=0;e<g.cells.length;e++)g.cells[e].style.verticalAlign="middle",g.cells[e].style.paddingTop="0px";delete h._flow[g.idd];h._correctMonolite();g._expanded.ctrl=null}else if(!g._expanded&&!e){h._sub_row_editor._setState("minus.gif",f);g.oldHeight=f.offsetHeight;if(f._previous_content)d=f._previous_content,d.ctrl=f,h.objBox.appendChild(d),h._detectHeight(d,f,parseInt(d.style.height));else{d=document.createElement("DIV");d.ctrl=
f;if(f._sub_row_type)h._sub_row_render[f._sub_row_type](h,d,f,b);else d.innerHTML=b;d.style.cssText="position:absolute; left:0px; top:0px; overflow:auto; font-family:Tahoma; font-size:8pt; margin-top:2px; margin-left:4px;";d.className="dhx_sub_row";h.objBox.appendChild(d);h._detectHeight(d,f)}h._flow||(h.attachEvent("onGridReconstructed",function(){this.pagingOn||this._srnd?this._collapsMonolite():this._correctMonolite()}),h.attachEvent("onResizeEnd",function(){this._correctMonolite(!0)}),h.attachEvent("onAfterCMove",
function(){this._correctMonolite(!0)}),h.attachEvent("onDrop",function(){this._correctMonolite(!0)}),h.attachEvent("onBeforePageChanged",function(){this._collapsMonolite();return!0}),h.attachEvent("onGroupStateChanged",function(){this._correctMonolite();return!0}),h.attachEvent("onFilterEnd",function(){this._collapsMonolite()}),h.attachEvent("onUnGroup",function(){this._collapsMonolite()}),h.attachEvent("onPageChanged",function(){this._collapsMonolite()}),h.attachEvent("onXLE",function(){this._collapsMonolite()}),
h.attachEvent("onClearAll",function(){for(var b in this._flow)this._flow[b]&&this._flow[b].parentNode&&this._flow[b].parentNode.removeChild(this._flow[b]);this._flow=[]}),h.attachEvent("onEditCell",function(b,d,e){2!==b&&this._flow[d]&&"ch"!=this.cellType[e]&&"ra"!=this.cellType[e]&&this._expandMonolite.apply(this._flow[d].ctrl.firstChild,[0,!1,!0]);return!0}),h.attachEvent("onCellChanged",function(b,d){if(this._flow[b]){var e=this.cells(b,d).cell;e.style.verticalAlign="top";e.style.paddingTop="3px"}}),
h._flow=[]);h._flow[g.idd]=d;h._correctMonolite();for(e=0;e<g.cells.length;e++)g.cells[e].style.verticalAlign="top",g.cells[e].style.paddingTop="3px";if(h._fake){b=h._fake.rowsAr[g.idd];for(e=0;e<b.cells.length;e++)b.cells[e].style.verticalAlign="top",b.cells[e].style.paddingTop="3px"}f.style.paddingTop="1px";g._expanded=d}h._ahgr&&h.setSizes();h.parentGrid&&h.callEvent("onGridReconstructed",[]);h.callEvent("onSubRowOpen",[g.idd,!!g._expanded])}};
dhtmlXGridObject.prototype._sub_row_render={ajax:function(b,d,e,f){d.innerHTML="Loading...";var g=new dtmlXMLLoaderObject(function(){d.innerHTML=g.xmlDoc.responseText;var f=g.xmlDoc.responseText.match(/<script[^>]*>([^<]+)<\/script>/g);if(f)for(var l=0;l<f.length;l++)eval(f[l].replace(/<([\/]{0,1})s[^>]*>/g,""));b._detectHeight(d,e);b._correctMonolite();b.setUserData(e.parentNode.idd,"__sub_row",g.xmlDoc.responseText);e._sub_row_type=null;b._ahgr&&b.setSizes();b.callEvent("onSubAjaxLoad",[e.parentNode.idd,
g.xmlDoc.responseText])},this,!0,!0);g.loadXML(f)},grid:function(b,d,e,f){e._sub_grid=new dhtmlXGridObject(d);b.skin_name&&e._sub_grid.setSkin(b.skin_name);e._sub_grid.parentGrid=b;e._sub_grid.setImagePath(b.imgURL);e._sub_grid.enableAutoHeight(!0);e._sub_grid._delta_x=e._sub_grid._delta_y=null;e._sub_grid.attachEvent("onGridReconstructed",function(){b._detectHeight(d,e,e._sub_grid.objBox.scrollHeight+e._sub_grid.hdr.offsetHeight+(this.ftr?this.ftr.offsetHeight:0));b._correctMonolite();this.setSizes();
b.parentGrid&&b.callEvent("onGridReconstructed",[])});b.callEvent("onSubGridCreated",[e._sub_grid,e.parentNode.idd,e._cellIndex,f])&&e._sub_grid.loadXML(f,function(){b._detectHeight(d,e,e._sub_grid.objBox.scrollHeight+e._sub_grid.hdr.offsetHeight+(e._sub_grid.ftr?e._sub_grid.ftr.offsetHeight:0));e._sub_grid.objBox.style.overflow="hidden";b._correctMonolite();e._sub_row_type=null;b.callEvent("onSubGridLoaded",[e._sub_grid,e.parentNode.idd,e._cellIndex,f])&&b._ahgr&&b.setSizes()})}};
dhtmlXGridObject.prototype._detectHeight=function(b,d,e){var f=d.offsetLeft+d.offsetWidth;b.style.left=f+"px";b.style.width=Math.max(0,d.parentNode.offsetWidth-f-4)+"px";e=e||b.scrollHeight;b.style.overflow="hidden";b.style.height=e+"px";b=d.parentNode;d.parentNode.style.height=(b.oldHeight||20)+3+1*e+"px";d.style.height=(b.oldHeight||20)+3+1*e+"px";this._fake&&(this._fake.rowsAr[d.parentNode.idd].style.height=(b.oldHeight||20)+3+1*e+"px")};
dhtmlXGridObject.prototype._correctMonolite=function(b){if(!this._in_correction){this._in_correction=!0;for(var d in this._flow)if(this._flow[d]&&"DIV"==this._flow[d].tagName)if(this.rowsAr[d])if("none"==this.rowsAr[d].style.display)this.cells4(this._flow[d].ctrl).close();else{if(this._flow[d].style.top=this.rowsAr[d].offsetTop+(this.rowsAr[d].oldHeight||20)+"px",b){var e=this._flow[d].ctrl.offsetLeft+this._flow[d].ctrl.offsetWidth;this._flow[d].style.left=e+"px";this._flow[d].style.width=this.rowsAr[d].offsetWidth-
e-4+"px"}}else this._flow[d].ctrl=null,this.objBox.removeChild(this._flow[d]),delete this._flow[d];this._in_correction=!1}};dhtmlXGridObject.prototype._collapsMonolite=function(){for(var b in this._flow)this._flow[b]&&"DIV"==this._flow[b].tagName&&this.rowsAr[b]&&this.cells4(this._flow[b].ctrl).close()};DhtmlxValidation=function(){};
DhtmlxValidation.prototype={trackInput:function(b,d,e,f){var g=b.getInput();g&&dhtmlxEvent(g,"keyup",function(){dhtmlxValidation._timer&&(window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null);dhtmlxValidation._timer=window.setTimeout(function(){if(dhtmlxValidation.checkInput(b,d))b.cell.className=b.cell.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),f&&f(b,b.getValue(),d);else if(!e||e(b,b.getValue(),d))b.cell.className+=" dhtmlx_live_validation_error"},250)})},checkInput:function(b,
d){var e=b.getInput()?b.getInput().value:b.getValue();return this.checkValue(e,d)},checkValue:function(b,d){"string"==typeof d&&(d=d.split(","));for(var e=!0,f=0;f<d.length;f++)this["is"+d[f]]?e=e&&this["is"+d[f]](b):alert("Incorrect validation rule: "+d[f]);return e},isEmpty:function(b){return""==b},isNotEmpty:function(b){return""==!b},isValidBoolean:function(b){return!!b.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(b){return""==b||!!b.match(/(^([a-z0-9_\.]*)@([0-9a-z_\.]*)([.][a-z]{3})$)|(^[a-z]([a-z_\.]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,3})$)/i)},
isValidInteger:function(b){return!!b.toString().match(/(^-?\d+$)/)},isValidNumeric:function(b){return!!b.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(b){return!!b.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(b){return(b=b.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/))&&!!(9999>=b[1]&&12>=b[2]&&31>=b[3]&&59>=b[4]&&59>=b[5]&&59>=b[6])||!1},isValidDate:function(b){return(b=b.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/))&&
!!(9999>=b[1]&&12>=b[2]&&31>=b[3])||!1},isValidTime:function(b){return(b=b.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/))&&!!(24>=b[1]&&59>=b[2]&&59>=b[3])||!1},isValidIPv4:function(b){return(b=b.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/))&&!!(255>=b[1]&&255>=b[2]&&255>=b[3]&&255>=b[4])||!1},isValidCurrency:function(b){return b.toString().match(/^\$?\s?\d+?[\.,\,]?\d+?\s?\$?$/)&&!0||!1},isValidSSN:function(b){return b.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},
isValidSIN:function(b){return b.toString().match(/^\d{9}$/)&&!0||!1}};dhtmlxValidation=new DhtmlxValidation;dhtmlXGridObject.prototype.enableValidation=function(b,d){this._validators=(b=convertStringToBoolean(b))?{data:[]}:!1;1<arguments.length&&(this._validators._live=d);this._validators._event||(this._validators._event=this.attachEvent("onEditCell",this.validationEvent))};
dhtmlXGridObject.prototype.setColValidators=function(b,d){this._validators||this.enableValidation(!0);d?this._validators.data[d]=b:("string"==typeof b&&(b=b.split(this.delim)),this._validators.data=b)};
dhtmlXGridObject.prototype.validationEvent=function(b,d,e,f){var g=this._validators;if(!g)return!0;var h=g.data[e]||this.cells(d,e).getAttribute("validate")||"";if(1==b&&h){var l=this.editor||(this._fake||{}).editor;if(!l)return!0;l.cell.className=l.cell.className.replace(/[ ]*dhtmlx_validation_error/g,"");if(g._live){var m=this;dhtmlxValidation.trackInput||(dhtmlxValidation=new DhtmlxValidation);dhtmlxValidation.trackInput(l,h,function(b,f,g){return m.callEvent("onLiveValidationError",[d,e,f,b,g])},
function(b,f,g){return m.callEvent("onLiveValidationCorrect",[d,e,f,b,g])})}}2==b&&this.validateCell(d,e,h,f);return!0};
dhtmlXGridObject.prototype.validateCell=function(b,d,e,f){e=e||this._validators.data[d]||this.cells(b,d).getAttribute("validate");f=f||this.cells(b,d).getValue();if(e){var g=this.cells(b,d).cell,h=!0;"string"==typeof e&&(e=e.split(this.delim));dhtmlxValidation.checkValue||(dhtmlxValidation=new DhtmlxValidation);for(var l=0;l<e.length;l++)dhtmlxValidation.checkValue(f,e[l])||(this.callEvent("onValidationError",[b,d,f,e[l]])&&(g.className+=" dhtmlx_validation_error"),h=!1);h&&(this.callEvent("onValidationCorrect",
[b,d,f,e]),g.className=g.className.replace(/[ ]*dhtmlx_validation_error/g,""));return h}};dhtmlXGridObject.prototype.isCellVisible=function(b,d){var e=this.getPosition(b);return e[0]<d[0]||e[1]>d[3]-b.clientHeight||e[1]<d[1]||e[0]>d[2]-b.clientWidth?!1:!0};
dhtmlXGridObject.prototype.enableEditorAutoScroll=function(b){this._editorAS=convertStringToBoolean(b);this.attachEvent("onscroll",function(){if(this.editor&&this._editorAS){var b=this.editor.list;this.getColType(this.editor.cell._cellIndex);b&&(this.editor.posi.X||(this.editor.posi.X=1*b.style.left.replace("px",""),this.editor.posi.Y=1*b.style.top.replace("px","")),b.style.left=this.editor.posi.X-(this.objBox.scrollLeft-this.editor.posi.L)+"px",b.style.top=this.editor.posi.Y-(this.objBox.scrollTop-
this.editor.posi.T)+"px",this.isCellVisible(this.editor.cell,this.editor.posi.P)?b.style.display="":b.style.display="none")}});this.attachEvent("onEditCell",function(b){this.editor&&this._editorAS&&(2==b?this.editor.posi=window.undefined:1==b&&(this.editor.posi={L:this.objBox.scrollLeft,T:this.objBox.scrollTop,P:this.getPosition(this.objBox.parentElement)},this.editor.posi.P[2]=this.editor.posi.P[0]+this.objBox.parentElement.clientWidth,this.editor.posi.P[3]=this.editor.posi.P[1]+this.objBox.parentElement.clientHeight))})};
function eXcell_dhxCalendar(b){if(b&&(this.cell=b,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){b=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[b]);b.setDateFormat(this.getDateFormat());var d=this.grid,e=document.createElement("DIV");b.base.appendChild(e);b.base.style.backgroundPosition="0px 0px";e.style.marginLeft="3px";e.style.marginTop="3px";e.style.height="24px";e.style.textAlign="center";var f=this.getDateFormat();e.style.paddingTop=
f&&-1<f.indexOf("%H")?"3px":"0px";e.style.fontSize="10px";e.innerHTML="<button t='t' style='font-size:10px; width:48px; display:none; height:21px;'>\u786e\u5b9a</button>&nbsp;&nbsp;<button style='font-size:10px; width:48px; height:21px;'>\u6e05\u7a7a</button>";e.c=b;b.c=e;e.onclick=function(){this.c._last_operation_calendar=!0;event.srcElement.getAttribute("t")||(this.c.clear_last_operation_calendar=!0);window.setTimeout(function(){d.editStop()},1);return!0};b.attachEvent("onClick",function(){if(!(this._onlyMonthYear||
"none"!=this.c.childNodes[0].style.display))return this._last_operation_calendar=!0,window.setTimeout(function(){d.editStop()},1),!0});dhtmlxEvent(b.base,"click",function(b){(b||event).cancelBubble=!0});b=null}}eXcell_dhxCalendar.prototype=new eXcell;
eXcell_dhxCalendar.prototype.edit=function(){var b=this.grid.getPosition(this.cell);this.grid._grid_calendarA.setDateFormat(this.getDateFormat());this.grid._grid_calendarA._onlyMonthYear||-1!=this.grid._grid_calendarA._dateFormat.indexOf("%H")?this.grid._grid_calendarA.c.childNodes[0].style.display="":this.grid._grid_calendarA.c.childNodes[0].style.display="none";var d=this.getDateFormat();this.grid._grid_calendarA.c.style.paddingTop=d&&-1<d.indexOf("%H")?"3px":"0px";this.grid._grid_calendarA._show(!1,
!1);var d=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop)+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight),e=b[1]+this.cell.offsetHeight;e+217>d&&(e=b[1]-217);b=this.grid.fixPosition2(this.cell,this.grid._grid_calendarA.base);this.grid._grid_calendarA.setPosition(b[0],b[1]);this.grid._grid_calendarA._last_operation_calendar=!1;this.grid.callEvent("onCalendarShow",
[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.cell._cediton=!0;this.val=this.cell.val;this._val=this.cell.innerHTML;b=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDate(this.val||new Date);this.grid._grid_calendarA.draw=b};eXcell_dhxCalendar.prototype.getDate=function(){return this.cell.val?this.cell.val:null};
eXcell_dhxCalendar.prototype.setCValue=function(b,d){this.grid._prefix&&this.grid._prefix[this.cell._cellIndex]&&(this.cell._val=b,b=this.grid._prefix[this.cell._cellIndex].replace(/(\{[a-z]+\})/g,b));this.cell.innerHTML="string"==typeof b&&""==b._dhx_trim()?"&nbsp;":b;this.val!=this.getDate()&&this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,"undefined"!=typeof d?d:b])};
eXcell_dhxCalendar.prototype.getValue=function(){var b=this.getDataFormat();return this.cell._clearCell?"":b&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(b,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()};
eXcell_dhxCalendar.prototype.detach=function(b,d){if(this.grid._grid_calendarA&&((d||this.grid._grid_calendarA._last_operation_calendar)&&this.grid._grid_calendarA.hide(),this.cell._cediton)){this.cell._cediton=!1;if(this.grid._grid_calendarA._last_operation_calendar){if(this.grid._grid_calendarA.clear_last_operation_calendar){var e=""!=this.cell.val;this.cell.val="";this.setCValue("",null);this.cell._clearCell=!0;this.val=this._val;this.grid._grid_calendarA.clear_last_operation_calendar=!1;return this.grid._formatVal||
this.grid._formatVals&&this.grid._formatVals[this.cell._cellIndex]?""!=this.val:e}var f=this.getDateFormat(),e=this.grid._grid_calendarA.getFormatedDate(f),g=this.grid._grid_calendarA.getDate();this.cell.val=new Date(g);this.setCValue(e,g);this.cell._clearCell=!e;this.val=this._val;if(this.grid._formatVal||this.grid._formatVals&&this.grid._formatVals[this.cell._cellIndex])return f=this.grid._grid_calendarA.getFormatedDate(f,this.cell.originalVal),f==e&&(this.cell.wasChanged=!1),f!=e;if(d=this.cell.originalVal?
this.cell.originalVal.valueOf()==this.getDate().valueOf():this.cell.originalVal==this.getDate())this.cell.wasChanged=!1;return!d}return!1}};eXcell_dhxCalendar.prototype.getDateFormat=function(){return this.grid._dtmask_inc&&this.grid._dtmask_inc[this.cell._cellIndex]||this.grid._dtmask||"%Y-%m-%d"};eXcell_dhxCalendar.prototype.getDataFormat=function(){return this.grid._dtformat_inc&&this.grid._dtformat_inc[this.cell._cellIndex]||this.grid._dtformat||this.getDateFormat()};
eXcell_dhxCalendar.prototype.setValue=function(b){var d=this.getDateFormat(),e=this.getDataFormat();"object"==typeof b?(this.cell.val=b,this.cell._clearCell=!1,this.setCValue(this.grid._grid_calendarA.getFormatedDate(d,b).toString(),this.cell.val)):(!b||""==b.toString()._dhx_trim()?(b="&nbsp",this.cell._clearCell=!0,this.cell.val=""):(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(e,b.toString(),null,!0)),d&&this.cell.val&&(b=this.grid._grid_calendarA.getFormatedDate(d,
this.cell.val))),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell._clearCell=!0,this.cell.val=new Date,this.setCValue("&nbsp;",0)):this.setCValue((b||"").toString(),this.cell.val));this.cell.originalVal=null==this.cell.originalVal?this.cell.val:this.cell.originalVal};
function eXcell_dhxCalendarA(b){if(b&&(this.cell=b,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){b=this.grid._grid_calendarA=new dhtmlxCalendarObject(!1,!1,{isYearEditable:!0});this.grid.callEvent("onDhxCalendarCreated",[b]);var d=this.grid;b.setDateFormat(this.getDateFormat());var e=document.createElement("DIV");b.base.appendChild(e);b.base.style.backgroundPosition="0px 0px";e.style.marginLeft="3px";e.style.marginTop="3px";e.style.height="24px";var f=this.getDateFormat();e.style.paddingTop=
f&&-1<f.indexOf("%H")?"3px":"0px";e.style.fontSize="10px";e.innerHTML="<button t='t' style='font-size:10px; width:48px; display:none; height:21px;'>\u786e\u5b9a</button>&nbsp;&nbsp;<button style='font-size:10px; width:48px; height:21px;'>\u6e05\u7a7a</button>";e.c=b;b.c=e;e.onclick=function(){this.c._last_operation_calendar=!0;event.srcElement.getAttribute("t")||(this.c.clear_last_operation_calendar=!0);window.setTimeout(function(){d.editStop()},1);return!0};b.attachEvent("onClick",function(){if(!(this._onlyMonthYear||
"none"!=this.c.childNodes[0].style.display))return this._last_operation_calendar=!0,window.setTimeout(function(){d.editStop()},1),!0});dhtmlxEvent(b.base,"click",function(b){(b||event).cancelBubble=!0})}}eXcell_dhxCalendarA.prototype=new eXcell;
eXcell_dhxCalendarA.prototype.edit=function(){var b=this.grid.fixPosition2(this.cell,this.grid._grid_calendarA.base);this.grid._grid_calendarA.setDateFormat(this.getDateFormat());this.grid._grid_calendarA._onlyMonthYear||-1!=this.grid._grid_calendarA._dateFormat.indexOf("%H")?this.grid._grid_calendarA.c.childNodes[0].style.display="":this.grid._grid_calendarA.c.childNodes[0].style.display="none";var d=this.getDateFormat();this.grid._grid_calendarA.c.style.paddingTop=d&&-1<d.indexOf("%H")?"3px":"0px";
this.grid._grid_calendarA._show(!1,!1);this.grid._grid_calendarA.setPosition(1*b[0],1*b[1]+this.cell.offsetHeight);this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid._grid_calendarA._last_operation_calendar=!1;this.cell._cediton=!0;this.val=this.cell.val;this._val=this.cell.innerHTML;b=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDate(this.val||new Date);this.grid._grid_calendarA.draw=
b;this.grid._grid_calendarA.draw();this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA";this.obj=document.createElement(this.cell.atag);this.obj.style.height=this.cell.offsetHeight-(_isIE?4:2)+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.align;this.obj._dhtmlxcalendar_uid=this.grid._grid_calendarA.uid();this.obj.onclick=function(b){(b||event).cancelBubble=!0};this.obj.onmousedown=function(b){(b||event).cancelBubble=
!0};var e=this.grid._grid_calendarA;e._activeGridInp=this.obj;e.attachEvent("onChange",function(b){this._activeGridInp.value=this._dateToStr(new Date(b.getTime()))});this.obj.onkeyup=function(b){e._doOnInpKeyUp(b)};this.obj.value=this.grid._grid_calendarA.getFormatedDate(this.getDateFormat(),this.getValue()).toString();this.cell.innerHTML="";this.cell.appendChild(this.obj);if(_isFF&&(this.obj.style.overflow="visible",this.grid.multiLine&&18<=this.obj.offsetHeight&&40>this.obj.offsetHeight))this.obj.style.height=
"36px",this.obj.style.overflow="scroll";this.obj.onselectstart=function(b){b||(b=event);return b.cancelBubble=!0};this.obj.focus()};eXcell_dhxCalendarA.prototype.getDate=function(){return this.cell.val?this.cell.val:null};eXcell_dhxCalendarA.prototype.getValue=function(){var b=this.getDataFormat();return this.cell._clearCell?"":b&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(b,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()};
eXcell_dhxCalendarA.prototype.detach=function(b,d){if(this.grid._grid_calendarA&&((d||this.grid._grid_calendarA._last_operation_calendar)&&this.grid._grid_calendarA.hide(),this.cell._cediton)){this.cell._cediton=!1;var e=this.getDateFormat();if(this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=!1;if(this.grid._grid_calendarA.clear_last_operation_calendar)return e=""!=this.cell.val,this.cell.val="",this.setCValue("",null),this.cell._clearCell=!0,
this.val=this._val,this.grid._grid_calendarA.clear_last_operation_calendar=!1,this.grid._formatVal||this.grid._formatVals&&this.grid._formatVals[this.cell._cellIndex]?""!=this.val:e;var f=this.grid._grid_calendarA.getFormatedDate(e),g=this.grid._grid_calendarA.getDate();this.cell.val=new Date(g);this.setCValue(f,g);this.cell._clearCell=!f;this.val=this.cell.val;if(this.grid._formatVal||this.grid._formatVals&&this.grid._formatVals[this.cell._cellIndex])return e=this.grid._grid_calendarA.getFormatedDate(e,
this.cell.originalVal),e==f&&(this.cell.wasChanged=!1),e!=f;if(d=this.cell.originalVal.valueOf()==this.getDate().valueOf())this.cell.wasChanged=!1;return!d}f=this.obj.value;this.grid._grid_calendarA._onlyTime&&this.cell._dates&&(e=this.getDataFormat(),f=this.cell._dates+" "+f);this.setValue(this.grid._grid_calendarA._strToDate(f,!1,e));c=this.val;this.val=this._val;return this.cell.val.valueOf()!=(c||"").valueOf()}};
eXcell_dhxCalendarA.prototype.setValue=function(b){var d=this.getDateFormat(),e=this.getDataFormat(),f=-1==d.indexOf("%Y")&&-1==d.indexOf("%m")&&-1<e.indexOf("%Y")&&-1<e.indexOf("%m")?!0:!1;"object"==typeof b?(this.cell.val=b,this.cell._clearCell=!1,this.setCValue(this.grid._grid_calendarA.getFormatedDate(d,b).toString(),this.cell.val)):(!b||""==b.toString()._dhx_trim()?(b="&nbsp",this.cell._clearCell=!0,this.cell.val=""):(f&&(this.cell._dates?b=this.cell._dates+" "+b.toString():this.cell._dates=
b.toString().split(" ")[0]),this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(e,b.toString(),null,!0))),d&&this.cell.val&&(b=this.grid._grid_calendarA.getFormatedDate(d,this.cell.val)),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell.val=new Date,this.cell._clearCell=!0,this.setCValue("&nbsp;",0)):this.setCValue((b||"").toString(),this.cell.val));this.cell.originalVal=null==this.cell.originalVal?this.cell.val:this.cell.originalVal};
eXcell_dhxCalendarA.prototype.getDateFormat=eXcell_dhxCalendar.prototype.getDateFormat;eXcell_dhxCalendarA.prototype.getDataFormat=eXcell_dhxCalendar.prototype.getDataFormat;
function eXcell_cntr(b){this.cell=b;this.grid=this.cell.parentNode.grid;!this.grid._ex_cntr_ready&&!this._realfake&&(this.grid._ex_cntr_ready=!0,this.grid._h2&&this.grid.attachEvent("onOpenEnd",function(){this.resetCounter(b._cellIndex)}),this.grid.attachEvent("onBeforeSorting",function(){var d=this;window.setTimeout(function(){d._fake&&!d._realfake&&b._cellIndex<d._fake._cCount?d._fake.resetCounter(b._cellIndex):d.resetCounter(b._cellIndex)},1);return!0}),this.grid.attachEvent("onFilterByEnd",function(){this.resetCounter(b._cellIndex)}),
this.grid.attachEvent("onFilterEnd",function(){this.resetCounter(b._cellIndex)}));this.edit=function(){};this.getValue=function(){return this.cell.innerHTML};this.setValue=function(){this.cell.style.paddingRight="2px";var b=this.cell;window.setTimeout(function(){if(b.parentNode&&b.parentNode.grid.rowsBuffer){var e=b.parentNode.rowIndex;if(b.parentNode.grid.currentPage||0>e||b.parentNode.grid._srnd)e=b.parentNode.grid.rowsBuffer._dhx_find(b.parentNode)+1;var f=b.parentNode.grid._groups;if(f){var g=
!1,h;for(h in f){var l=f[h].row.nextSibling;if(l)for(var m=1;l&&!l._cntr;){if(l.rowIndex==e){e=m;g=!0;break}m++;l=l.nextSibling}if(g)break}}0>=e||(b.innerHTML=e,b.parentNode.grid._fake&&b._cellIndex<b.parentNode.grid._fake._cCount&&b.parentNode.grid._fake.rowsAr[b.parentNode.idd]&&b.parentNode.grid._fake.cells(b.parentNode.idd,b._cellIndex).setCValue(e),b=null)}},100)}}
dhtmlXGridObject.prototype.resetCounter=function(b){this._fake&&!this._realfake&&b<this._fake._cCount&&this._fake.resetCounter(b,this.currentPage);for(var d=b||0,d=0;d<this.rowsBuffer.length;d++)this.rowsBuffer[d]&&("TR"==this.rowsBuffer[d].tagName&&this.rowsAr[this.rowsBuffer[d].idd])&&(this.rowsAr[this.rowsBuffer[d].idd].childNodes[b].innerHTML=d+1)};eXcell_cntr.prototype=new eXcell;
function eXcell_link(b){this.cell=b;this.grid=this.cell.parentNode.grid;this.isDisabled=function(){return!0};this.edit=function(){};this.getValue=function(){return this.cell.firstChild.getAttribute?this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href"):""};this.setValue=function(b){if("number"!=typeof b&&(!b||""==b.toString()._dhx_trim()))return this.setCValue("&nbsp;",e),this.cell._clearCell=!0;var e=b.split("^");1==e.length?e[1]="":1<e.length&&(e[1]="href='"+e[1]+"'",e[1]+=
(3==e.length?" target='"+e[2]+"'":" target='_blank'")+(e[3]?" title='"+e[3]+"'":""));this.setCValue("<a "+e[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+e[0]+"</a>",e)}}eXcell_link.prototype=new eXcell;eXcell_link.prototype.getTitle=function(){var b=this.cell.firstChild;return b=(b=b&&b.tagName?b.getAttribute("href"):"")&&"-1"!=b.indexOf("javascript")?this.getContent():b};eXcell_link.prototype.getContent=function(){return this.cell.innerText};
function eXcell_stree(b){if(b){this.cell=b;this.cell.prompt="\u8f93\u5165\u6309\u56de\u8f66\u67e5\u8be2\uff0c\u2191\u4e0a\u4e00\u4e2a \u2193\u4e0b\u4e00\u4e2a";this.grid=this.cell.parentNode.grid;if(!this.grid._sub_trees)return;this._sub=this.grid._sub_trees[b._cellIndex];if(!this._sub)return;this._sub=this._sub[0]}this.getValue=function(){return this.cell._val};this.setValue=function(b){this.cell._val=b;if(this._sub.checkBoxOff){b=b.split(",");for(var e=[],f=0;f<b.length;f++)e.push(this._sub.getItemText(b[f]));
b=e.join(",")}else b=this._sub.getItemText(this.cell._val);this.cell._txt=b;this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal;this.setCValue(b||"&nbsp;",b)};this.edit=function(){this._sub.parentObject.style.display="block";this._sub.searchIpt.style.display="block";this._sub.parentObject.style.zIndex=99999;var b=1*this._sub.parentObject.style.width.replace("px",""),e=1*this._sub.parentObject.style.height.replace("px",""),b=dhx_fixPosition(this.cell,b,e);this._sub.cur=this.cell;
this.cell._txt?(this._sub.selectItem(this.cell._val),this._sub.searchIpt.childNodes[0].value=this.cell._txt,this._sub.searchIpt.childNodes[0].style.color=""):(this._sub.searchIpt.childNodes[0].value=this.cell.prompt,this._sub.searchIpt.childNodes[0].style.color="gray");this._sub.searchIpt.childNodes[0]._value="";this._sub.parentObject.style.top=b[1]+(_isIE&&5==document.documentMode?21:25)+"px";this._sub.parentObject.style.left=b[0]+"px";this._sub.searchIpt.style.top=b[1]+"px";this._sub.searchIpt.style.left=
b[0]+"px";this._sub.parentObject.style.position="absolute";b=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=b;this._sub.searchIpt.childNodes[0].focus()};this.detach=function(){this._sub.parentObject.style.display="none";this._sub.searchIpt.style.display="none";if(null!=this.grid._sub_id)return this.setValue(this._sub[this.grid._subTreeVms&&this.grid._subTreeVms[this.cell._cellIndex]?this.grid._subTreeVms[this.cell._cellIndex]:this.grid._subTreeVm]()),this.grid._sub_id=null,
this.cell.originalVal==this.getValue()&&(this.cell.wasChanged=!1),this.cell.originalVal!=this.getValue()}}eXcell_stree.prototype=new eXcell;eXcell_stree.prototype.getText=function(){return this.cell.innerText};dhtmlXGridObject.prototype.setSubTreeValueMethod=function(b,d){d?(this._subTreeVms||(this._subTreeVms=[]),this._subTreeVms[d]=b):this._subTreeVm=b};
dhtmlXGridObject.prototype.setSubTree=function(b,d){this._subTreeVm||(this._subTreeVm="getSelectedItemId");"string"==typeof b&&(b=eval(b));if(b.parentObject){this._sub_trees||(this._sub_trees=[]);this._sub_trees[d]=[b];var e=b.parentObject.childNodes[0],f=1*b.parentObject.style.width.replace("px",""),g=1*b.parentObject.style.height.replace("px","");f&&g&&(e.style.width=f-2+"px",e.style.height=g-2+"px");e.style.border="1px solid gray";b.parentObject.style.display="none";e=document.createElement("DIV");
e.style.position="absolute";e.style.display="none";e.style.height="24px";e.style.padding="0px";e.style.background="transparent";e.style.zIndex="9999";e.innerHTML="<input style='width:100%;height:21px;'>";document.body.appendChild(e);b.searchIpt=e;e=_isIE&&5==document.documentMode?2:4;f&&(b.searchIpt.style.width=f-e+"px");var h=this;b.searchIpt.childNodes[0].onclick=function(b){this.value=this.value==h.cell.prompt?"":this.value;this.style.color=this.value==h.cell.prompt?"gray":""};b.searchIpt.onkeydown=
function(d){var e=this.childNodes[0];d=d||window.event;if(38==d.keyCode||40==d.keyCode)return e._value=e._value?e._value:e.value,""!=e._value&&((d=b.findItem(e._value,40!=d.keyCode,!e.found))?(e.found=!0,e.value=b.getItemText(d)):e.found=!1),!1;if(13==d.keyCode)if(e.found){if(d=b.getSelectedItemText(),d==e.value)return h._sub_id=b.getSelectedItemId(),h.editStop(),!0}else{if(""==e.value)return h._sub_id=null,h.editStop(!0),!0;e._value=e.value;(d=b.findItem(e.value,!1,!0))?(e.found=!0,e.value=b.getItemText(d)):
e.found=!1}else{if(37==d.keyCode||39==d.keyCode)event.cancelBubble=!0;else if(27==d.keyCode)return h.editStop(),!0;e.found=!1}};b.searchIpt.onclick=function(b){(b||window.event).cancelBubble=!0;return!1};b.parentObject.onclick=function(b){(b||window.event).cancelBubble=!0;return!1};b.ev_onDblClick=null;b.attachEvent("onDblClick",function(b){h._sub_id=b;h.editStop();return!0});b._chRRS=!0}else{var l=this;b.attachEvent("onXLE",function(){l.setSubTree(b,d)})}};
function eXcell_clist(b){try{this.cell=b,this.grid=this.cell.parentNode.grid}catch(d){}this.edit=function(){this.val=this.getValue();var b=this.cell._combo||this.grid.clists[this.cell._cellIndex];if(b){this.obj=document.createElement("DIV");for(var d=this.val.split(","),g="",h=0;h<b.length;h++){for(var l=!1,m=0;m<d.length;m++)b[h]==d[m]&&(l=!0);g+=l?"<div><input type='checkbox' checked='true' /><label>"+b[h]+"</label></div>":"<div><input type='checkbox' id='ch_lst_"+h+"'/><label>"+b[h]+"</label></div>"}this.obj.editor=
this;this.obj.innerHTML=g+"<div><input type='button' value='Apply' style='width:100px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/></div>";10<b.length&&(this.obj.style.overflowY="auto",this.obj.style.height="200px");document.body.appendChild(this.obj);this.obj.style.position="absolute";this.obj.className="dhx_clist";this.obj.onclick=function(b){return(b||event).cancelBubble=!0};b=this.grid.fixPosition(this.cell,this.obj);this.obj.style.left=b[0]+"px";this.obj.style.top=
b[1]+this.cell.offsetHeight+"px";this.obj.getValue=function(){for(var b="",d=0;d<this.childNodes.length-1;d++)this.childNodes[d].childNodes[0].checked&&(b&&(b+=","),b+=this.childNodes[d].childNodes[1].innerHTML);return b}}};this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()};this.detach=function(){this.obj&&(this.setValue(this.obj.getValue()),this.obj.editor=null,this.obj.parentNode.removeChild(this.obj),this.obj=null);return this.val!=this.getValue()}}
eXcell_clist.prototype=new eXcell;eXcell_clist.prototype.setValue=function(b){if("object"==typeof b){var d=this.grid.xmlLoader.doXPath("./option",b);d.length&&(this.cell._combo=[]);for(var e=0;e<d.length;e++)this.cell._combo.push(d[e].firstChild?d[e].firstChild.data:"");b=b.firstChild.data}""===b||b===this.undefined?(this.setCTxtValue(" ",b),this.cell._clearCell=!0):(this.setCValue(b),this.cell._clearCell=!1)};
dhtmlXGridObject.prototype.registerCList=function(b,d){this.clists||(this.clists=[]);"object"!=typeof d&&(d=d.split(","));this.clists[b]=d};
function eXcell_clist2(b){try{this.cell=b,this.grid=this.cell.parentNode.grid}catch(d){}this.edit=function(){this.val=this.getValue();var b=this.cell._combo||this.grid.clists&&this.grid.clists[this.cell._cellIndex];if(b){this.obj=document.createElement("DIV");var d=this.val.split(","),g="",h=0,l;for(l in b){for(var m=!1,k=0;k<d.length;k++)l==d[k]&&(m=!0);g+=m?"<div><input type='checkbox' value=\""+l+"\" checked='true' /><label>"+b[l]+"</label></div>":"<div><input type='checkbox' value=\""+l+"\" id='ch_lst_"+
h+"'/><label>"+b[l]+"</label></div>";h++}this.obj.editor=this;this.obj.innerHTML=g+"<div><input type='button' value='&#30830;&#23450;' style='width:60px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/></div>";10<h&&(this.obj.style.overflowY="auto",this.obj.style.height="200px");document.body.appendChild(this.obj);this.obj.style.position="absolute";this.obj.className="dhx_clist";this.obj.onclick=function(b){return(b||event).cancelBubble=!0};b=this.grid.fixPosition(this.cell,
this.obj);this.obj.style.left=b[0]+"px";this.obj.style.top=b[1]+this.cell.offsetHeight+"px";this.cell.clientWidth>this.obj.clientWidth&&(this.obj.style.width=this.cell.clientWidth+"px",(b=this.obj.childNodes[this.obj.childNodes.length-1])&&(b.style.width="100%",b.style.textAlign="center"));this.obj.getValue=function(){for(var b="",d="",e=0;e<this.childNodes.length-1;e++)this.childNodes[e].childNodes[0].checked&&(b&&(b+=","),d&&(d+=","),b+=this.childNodes[e].childNodes[0].value,d+=this.childNodes[e].childNodes[1].innerHTML);
return this.editor.cell.combo_value=b}}};this.getValue=function(){return this.cell._clearCell?"":this.cell.combo_value};this.detach=function(){this.obj&&(this.setValue(this.obj.getValue()),this.obj.editor=null,this.obj.parentNode.removeChild(this.obj),this.obj=null);return this.val!=this.getValue()}}eXcell_clist2.prototype=new eXcell;
eXcell_clist2.prototype.setValue=function(b){if("object"==typeof b){var d=this.grid.xmlLoader.doXPath("./option",b);d.length&&(this.cell._combo={});for(var e=0;e<d.length;e++)this.cell._combo[d[e].getAttribute("value")]=d[e].firstChild?d[e].firstChild.data:"";b=b.firstChild.data}d="";if(this.grid.clists&&(e=this.grid.clists[this.cell._cellIndex])&&"undefined"!=typeof b){for(var f=b.split(","),g=[],h=0;h<f.length;h++)g.push(e[f[h]]);g.length&&(d=g.join(","))}""===d||b===this.undefined?(this.setCTxtValue(" ",
b),this.cell._clearCell=!0):(this.cell.combo_value=b,this.setCValue(d),this.cell._clearCell=!1)};dhtmlXGridObject.prototype.registerCList2=function(b,d){this.clists||(this.clists=[]);var e={};if("object"!=typeof d){d=d.split(";");for(var f=0;f<d.length;f++){var g=d[f].split(",");e[g[0]]=g[1]}d=e}this.clists[b]=d};function eXcell_ra_str(b){b&&(this.base=eXcell_ra,this.base(b),this.grid=b.parentNode.grid)}eXcell_ra_str.prototype=new eXcell_ch;
eXcell_ra_str.prototype.setValue=function(b){this.cell.style.verticalAlign="middle";if(b&&(b=b.toString()._dhx_trim(),"false"==b||"0"==b))b="";if(b){if(this.grid.rowsAr[this.cell.parentNode.idd])for(b=0;b<this.grid._cCount;b++)if(b!==this.cell._cellIndex){var d=this.grid.cells(this.cell.parentNode.idd,b);"ra_str"==(d.cell._cellType||this.grid.cellType[d.cell._cellIndex])&&d.getValue()&&d.setValue("0")}b="1";this.cell.chstate="1"}else b="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+
"radio_chk"+b+".gif' onclick='new eXcell_ra_str(this.parentNode).changeState()'>",this.cell.chstate)};
dhtmlXGridObject.prototype._init_column_combo=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL);this._col_combos=[];for(var b=!1,d=0;d<this._cCount;d++)if(-1<this.cellType[d].indexOf("combo")){var b=!0,e=-1<this.cellType[d].indexOf("imgcombo")?"image":"";this._col_combos[d]=eXcell_combo.prototype.initCombo.call({grid:this},d,e)}!this._loading_handler_set&&b&&(this._loading_handler_set=this.attachEvent("onXLE",function(b,d,e,l){eXcell_combo.prototype.fillColumnCombos(this,
l);this.detachEvent(this._loading_handler_set)}))};dhtmlXGridObject.prototype._init_point_bcg=dhtmlXGridObject.prototype._init_point;dhtmlXGridObject.prototype._init_point=function(){this._init_column_combo();(this._init_point=this._init_point_bcg)&&this._init_point()};
function eXcell_combo(b){b&&(this.cell=b,this.grid=b.parentNode.grid,this._combo_pre="",this._combo_pre_width=18);this.edit=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL);this.val=this.getValue();var b=this.getText();this.cell._clearCell&&(b="");this.cell.innerHTML="";this.combo=this.cell._brval?this.cell._brval:(this.grid._realfake?this.grid._fake:this.grid)._col_combos[this.cell._cellIndex];this.cell.appendChild(this.combo.DOMParent);this.combo.DOMParent.style.margin=
"0";this.combo.DOMelem_input.focus();this.combo.setSize(this.cell.offsetWidth-2);this.combo._xml?this.combo.setComboText(b):-1!=this.combo.getIndexByValue(this.cell.combo_value)?this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value)):this.combo.getOptionByLabel(b)?this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(b).value)):this.combo.setComboText(b);this.combo.openSelect()};this.selectComboOption=function(b,e){e.selectOption(e.getIndexByValue(e.getOptionByLabel(b).value))};
this.getValue=function(){return this.cell.combo_value};this.getText=function(){var b=this.cell;""==this._combo_pre&&b.childNodes[1]&&(b=b.childNodes[1]);return _isIE?b.innerText:b.textContent};this.setValue=function(b){if("object"==typeof b){this.cell._brval=this.initCombo();var e=this.cell._cellIndex,f=this.cell.parentNode.idd;b.firstChild?this.cell.combo_value=b.firstChild.data:(this.cell.combo_value="&nbsp;",this.cell._clearCell=!0);this.setComboOptions(this.cell._brval,b,this.grid,e,f)}else{this.cell.combo_value=
b;e=null;if((e=this.cell._brval)&&"object"==typeof this.cell._brval)b=(e.getOption(b)||{}).text||b;else if(e=this.grid._col_combos[this.cell._cellIndex]||this.grid._fake&&(e=this.grid._fake._col_combos[this.cell._cellIndex]))b=(e.getOption(b)||{}).text||b;if(""==(b||"").toString()._dhx_trim())b=null;null!==b?this.setComboCValue(b):(this.setComboCValue("&nbsp;",""),this.cell._clearCell=!0)}this.cell.originalVal=null==this.cell.originalVal?this.cell.combo_value:this.cell.originalVal};this.detach=function(){this.cell.removeChild(this.combo.DOMParent);
!this.combo.getComboText()||""==this.combo.getComboText().toString()._dhx_trim()?(this.setComboCValue("&nbsp;"),this.cell._clearCell=!0):(this.setComboCValue(this.combo.getComboText(),this.combo.getActualValue()),this.cell._clearCell=!1);this.combo._confirmSelection();this.cell.combo_value=this.combo.getSelectedValue();this.combo.closeAll();this.grid._still_active=!0;this.grid.setActive(1);this.cell.originalVal==this.getValue()&&(this.cell.wasChanged=!1);return this.cell.originalVal!=this.getValue()}}
eXcell_combo.prototype=new eXcell;eXcell_combo_v=function(b){b=new eXcell_combo(b);b._combo_pre="<img src='"+(window.dhx_globalImgPath?window.dhx_globalImgPath:this.grid.imgURL)+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif' style='float:right;"+(_isIE?"margin-right:-3px":"")+"'/>";b._combo_pre_width=28;return b};eXcell_combo.prototype.setColumnOptions=function(b){this.grid.setColumnComboOptions(this.cell._cellIndex,b,this)};
eXcell_combo.prototype.initCombo=function(b,d){var e=arguments.length?b:this.cell._cellIndex;d=2==arguments.length?d:"";var f=document.createElement("DIV"),e=(e=this.grid.defVal[e])?e.replace("=",""):d,f=new dhtmlXCombo(f,"combo",0,e);"image"==e&&f.readonly(!0);this.grid.defVal[arguments.length?b:this.cell._cellIndex]="";f.DOMelem.className+=" fake_editable";var g=this.grid;f.DOMelem.onselectstart=function(){return event.cancelBubble=!0};f.attachEvent("onKeyPressed",function(b){if(13==b||27==b)g.editStop(),
g._fake&&g._fake.editStop()});dhtmlxEvent(f.DOMlist,"click",function(){g.editStop();g._fake&&g._fake.editStop()});f.DOMelem.style.border="0px";f.DOMelem.style.height="18px";return f};
eXcell_combo.prototype.fillColumnCombos=function(b,d,e){if(d||b.combo_columns){b.combo_columns=b.combo_columns||[];var f=b.xmlLoader.doXPath("//column",d);b._combocolumns=b._combocolumns||f;for(var g=f?f.length:0,h=0;h<g;h++)!b._combocolumns[h]&&(f&&f[h])&&(b._combocolumns[h]=f[h]);for(f=0;f<b._combocolumns.length;f++)if(-1<((b._combocolumns[f]?b._combocolumns[f].getAttribute("type"):b.cellType[b])||"").indexOf("combo"))b.combo_columns[b.combo_columns.length]=f,b._combocolumns[f].getAttribute("img_src")&&
b._col_combos[f].setDefaultImage(b._combocolumns[f].getAttribute("img_src")),3==arguments.length?this.setComboOptions(b._col_combos[f],b._combocolumns[f],b,f,e):this.setComboOptions(b._col_combos[f],b._combocolumns[f],b,f)}};
eXcell_combo.prototype.setComboCValue=function(b,d){""!=this._combo_pre&&(b=this._combo_pre+"<div style='float:left;width:"+(this.cell.offsetWidth-this._combo_pre_width)+"px;line-height:"+(this.cell.offsetHeight-1)+"px;overflow:hidden'>"+b+"</div>");1<arguments.length?this.setCValue(b,d):this.setCValue(b)};
eXcell_combo.prototype.setComboOptions=function(b,d,e,f,g){if(b&&!b.optionsArr.length){if(convertStringToBoolean(d.getAttribute("xmlcontent"))&&!d.getAttribute("source")){for(var h=d.childNodes,l=[],m=0;m<h.length;m++)if("option"==h[m].tagName){var k=h[m].firstChild?h[m].firstChild.data:"";l[l.length]=[h[m].getAttribute("value"),k,h[m].getAttribute("css"),h[m].getAttribute("checked"),h[m].getAttribute("img_src")]}b.addOption(l);if(4==arguments.length)e.forEachRow(function(d){d=e.cells(d,f);!d.cell._brval&&
!d.cell._cellType&&d.cell._cellIndex==f&&(""==d.cell.combo_value?d.setComboCValue("&nbsp;",""):b.getOption(d.cell.combo_value)?d.setComboCValue(b.getOption(d.cell.combo_value).text):d.setComboCValue(d.cell.combo_value))});else{var n=this.cell?this:e.cells(g,f);d.getAttribute("text")?""==d.getAttribute("text")._dhx_trim()?n.setComboCValue("&nbsp;",""):n.setComboCValue(d.getAttribute("text")):!n.cell.combo_value||""==n.cell.combo_value._dhx_trim()?n.setComboCValue("&nbsp;",""):b.getOption(n.cell.combo_value)?
n.setComboCValue(b.getOption(n.cell.combo_value).text):n.setComboCValue(n.cell.combo_value)}}if(d.getAttribute("source"))if(d.getAttribute("auto")&&convertStringToBoolean(d.getAttribute("auto")))d.getAttribute("xmlcontent")?(n=this.cell?this:e.cells(g,f),d.getAttribute("text")&&n.setComboCValue(d.getAttribute("text"))):e.forEachRow(function(b){b=e.cells(b,f);if(!b.cell._brval&&!b.cell._cellType){var d=b.cell.combo_value.toString();-1!=d.indexOf("^")&&(d=d.split("^"),b.cell.combo_value=d[0],b.setComboCValue(d[1]))}}),
b.enableFilteringMode(!0,d.getAttribute("source"),convertStringToBoolean(d.getAttribute("cache")||!0),convertStringToBoolean(d.getAttribute("sub")||!1));else{var s=arguments.length;b.loadXML(d.getAttribute("source"),function(){if(4==s)e.forEachRow(function(d){d=e.cells(d,f);!d.cell._brval&&!d.cell._cellType&&(b.getOption(d.cell.combo_value)?d.setComboCValue(b.getOption(d.cell.combo_value).text):""==(d.cell.combo_value||"").toString()._dhx_trim()?(d.setComboCValue("&nbsp;",""),d.cell._clearCell=!0):
d.setComboCValue(d.cell.combo_value))});else{var d=e.cells(g,f);b.getOption(d.cell.combo_value)?d.setComboCValue(b.getOption(d.cell.combo_value).text):d.setComboCValue(d.cell.combo_value)}})}if(!d.getAttribute("auto")||!convertStringToBoolean(d.getAttribute("auto")))d.getAttribute("editable")&&!convertStringToBoolean(d.getAttribute("editable"))&&b.readonly(!0),d.getAttribute("filter")&&convertStringToBoolean(d.getAttribute("filter"))&&b.enableFilteringMode(!0)}};
eXcell_combo.prototype.getCellCombo=function(){this.cell._brval||(this.cell._brval=this.initCombo());return this.cell._brval};dhtmlXGridObject.prototype.getColumnCombo=function(b){if(!this._col_combos||!this._col_combos[b])this._col_combos||(this._col_combos=[]),this._col_combos[b]="combo"==this.cellType[b]?eXcell_combo.prototype.initCombo.call({grid:this},b):eXcell_imgcombo.prototype.initCombo.call({grid:this},b);return this._col_combos[b]};
dhtmlXGridObject.prototype.setColumnComboOptions=function(b,d,e){this._combocolumns=this._combocolumns||[];if(!this._combocolumns[b]&&("string"==typeof d?(e=new dtmlXMLLoaderObject,e.loadXMLString(d),this._combocolumns[b]=e.doXPath("//column",e.xmlDoc)[0]):"object"==typeof d&&(this._combocolumns[b]=d),this._col_combos&&this._col_combos[b])){d=this._col_combos[b];b=this._combocolumns[b].childNodes;e=[];for(var f=0;f<b.length;f++)if("option"==b[f].tagName){var g=b[f].firstChild?b[f].firstChild.data:
"";e[e.length]=[b[f].getAttribute("value"),g,b[f].getAttribute("css"),b[f].getAttribute("checked"),b[f].getAttribute("img_src")]}d.addOption(e)}};
dhtmlXGridObject.prototype.setColumnComboCascade=function(b,d,e){var f=this;this.cascadeCombos.length||f.attachEvent("onXLE",function(){for(var b=0;b<f.cascadeCombos.length;b++){var d=f.cells(row_id,f.cascadeCombos[b][0]).getCellCombo();d.child_combos=d.child_combos||[];d.child_combos[d.child_combos.length]=[f.cells(row_id,f.cascadeCombos[b][1]).getCellCombo(),f.cascadeCombos[b][2]];d.attachEvent("onChange",function(){for(var b=0;b<this.child_combos.length;b++)this.child_combos[b][0].loadXML(this.child_combos[b][1]+
this.getSelectedValue())})}});this.cascadeCombos=this.cascadeCombos||[];this.cascadeCombos.push([b,d,e])};
dhtmlXGridObject.prototype.setColumnComboCascade2=function(b,d,e){var f=this;this.cascadeCombos.length||f.attachEvent("onXLE",function(){for(var b=0;b<f.cascadeCombos.length;b++){var d=f.cells(row_id,f.cascadeCombos[b][0]).getCellCombo(),e=f.cells(row_id,f.cascadeCombos[b][1]).getCellCombo();d.attachChildCombo(e,f.cascadeCombos[b][2])}});this.cascadeCombos=this.cascadeCombos||[];this.cascadeCombos.push([b,d,e])};function eXcell_imgcombo(b){b&&(this.base=eXcell_combo,this.base(b))}
eXcell_imgcombo.prototype=new eXcell_combo;
eXcell_imgcombo.prototype.setComboCValue=function(b,d){var e=this.combo?this.combo:this.grid._col_combos?this.grid._col_combos[this.cell._cellIndex]:null,f=this.combo?e.getSelectedValue():this.cell.combo_value;this.cell.combo_value=f;e=(f=e.getOption?e.getOption(f):e.get(f))?f.text:"";f=f&&f.img_src?f.img_src:"";f=""!=f?"<img src='"+f+"'>"+e:e;""!=this._combo_pre&&(b=this._combo_pre+"<div style='float:left;width:"+(this.cell.offsetWidth-this._combo_pre_width)+"px;line-height:"+(this.cell.offsetHeight-
1)+"px;overflow:hidden'>"+b+"</div>");1<arguments.length?this.setCValue(f,d):this.setCValue(f)};function xmlPointer(b){this.d=b}
xmlPointer.prototype={text:function(){return!_isFF?this.d.xml:(new XMLSerializer).serializeToString(this.d)},get:function(b){return this.d.getAttribute(b)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.data:""},each:function(b,d,e,f){var g=this.d.childNodes,h=new xmlPointer;if(g.length)for(f=f||0;f<g.length&&!(g[f].tagName==b&&(h.d=g[f],-1==d.apply(e,[h,f])));f++);},get_all:function(){for(var b={},d=this.d.attributes,e=0;e<d.length;e++)b[d[e].name]=
d[e].value;return b},sub:function(b){var d=this.d.childNodes,e=new xmlPointer;if(d.length)for(var f=0;f<d.length;f++)if(d[f].tagName==b)return e.d=d[f],e},up:function(){return new xmlPointer(this.d.parentNode)},set:function(b,d){this.d.setAttribute(b,d)},clone:function(){return new xmlPointer(this.d)},sub_exists:function(b){var d=this.d.childNodes;if(d.length)for(var e=0;e<d.length;e++)if(d[e].tagName==b)return!0;return!1},through:function(b,d,e,f,g){var h=this.d.childNodes;if(h.length)for(var l=
0;l<h.length;l++){if(h[l].tagName==b&&null!=h[l].getAttribute(d)&&""!=h[l].getAttribute(d)&&(!e||h[l].getAttribute(d)==e)){var m=new xmlPointer(h[l]);f.apply(g,[m,l])}m=this.d;this.d=h[l];this.through(b,d,e,f,g);this.d=m}}};
function dhtmlXTreeObject(b,d,e,f){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}this.parentObject="object"!=typeof b?document.getElementById(b):b;this.parentObject.style.overflow="hidden";this._itim_dg=!0;this.dlmtr=",";this.dropLower=!1;this.enableIEImageFix();this.xmlstate=0;this.mytype="tree";this.smcheck=!0;this.width=d;this.height=e;this.rootId=f||0;this.specialRoot="undefined"!=typeof f?!0:!1;this.childCalc=null;this.def_line_img_y=this.def_line_img_x=this.def_img_y=
this.def_img_x="18px";this._dragged=[];this._selected=[];this.style_pointer="pointer";this._aimgs=!0;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.mlitems=this.cMenu=0;this.iconURL="";this.dadmode=0;this.slowParse=!1;this.autoScroll=!0;this.hfMode=0;this.nodeCut=[];this.XMLloadingWarning=this.XMLsource=0;this._idpull={};this._pullSize=0;this.treeLinesOn=!0;this.tscheck=!1;this.timgen=!0;this.dpcpy=!1;this._ld_id=null;this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray=
"iconUncheckAll.gif iconCheckAll.gif iconCheckGray.gif iconUncheckDis.gif iconCheckDis.gif iconCheckDis.gif".split(" ");this.radioArray="radio_off.gif radio_on.gif radio_on.gif radio_off.gif radio_on.gif radio_on.gif".split(" ");this.lineArray="line2.gif line3.gif line4.gif blank.gif blank.gif line1.gif".split(" ");this.minusArray=["minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"];this.plusArray=["plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"];this.imageArray=["leaf.gif",
"folderOpen.gif","folderClosed.gif"];this.cutImg=[0,0,0];this.cutImage="but_cut.gif";dhtmlxEventable(this);this.dragger=new dhtmlDragAndDropObject;this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow=
"hidden");var h=this;this.allTree.onselectstart=new Function("return false;");_isMacOS&&(this.allTree.oncontextmenu=function(b){return h._doContClick(b||window.event,!0)});this.allTree.onmousedown=function(b){return h._doContClick(b||window.event)};this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe);_isIE&&this.preventIECashing(!0);this.selectionBar=document.createElement("DIV");this.selectionBar.className="selectionBar";this.selectionBar.innerHTML="&nbsp;";this.selectionBar.style.display=
"none";this.allTree.appendChild(this.selectionBar);window.addEventListener&&window.addEventListener("unload",function(){try{h.destructor()}catch(b){}},!1);window.attachEvent&&window.attachEvent("onunload",function(){try{h.destructor()}catch(b){}});this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);dhtmlx.skin&&this.setSkin(dhtmlx.skin);return this}dhtmlXTreeObject.prototype.setDataMode=function(b){this._datamode=b};
dhtmlXTreeObject.prototype._doContClick=function(b,d){if(!d&&2!=b.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var e=_isIE?b.srcElement:b.target;e&&"BODY"!=e.tagName&&!e.parentObject;)e=e.parentNode;if(!e||!e.parentObject)return!0;var f=e.parentObject;this.callEvent("onRightClick",[f.id,b])||((b.srcElement||b.target).oncontextmenu=function(b){(b||event).cancelBubble=!0;return!1});if(this._acMenu=f.cMenu||this.cMenu){if(!this.callEvent("onBeforeContextMenu",
[f.id]))return!0;(b.srcElement||b.target).oncontextmenu=function(b){(b||event).cancelBubble=!0;return!1};if(this._acMenu.showContextMenu){var e=window.document.documentElement,g=window.document.body,g=[e.scrollLeft||g.scrollLeft,e.scrollTop||g.scrollTop];_isIE?(e=b.clientX+g[0],g=b.clientY+g[1]):(e=b.pageX,g=b.pageY);this._acMenu.showContextMenu(e-1,g-1);this.contextID=f.id;b.cancelBubble=!0;this._acMenu._skip_hide=!0}else e.contextMenuId=f.id,e.contextMenu=this._acMenu,e.a=this._acMenu._contextStart,
e.a(e,b),e.a=null;return!1}return!0};
dhtmlXTreeObject.prototype.enableIEImageFix=function(b){b?(this._getImg=function(){var b=document.createElement("DIV");b.innerHTML="&nbsp;";b.className="dhx_bg_img_fix";return b},this._setSrc=function(b,e){b.style.backgroundImage="url("+e+")"},this._getSrc=function(b){b=b.style.backgroundImage;return b.substr(4,b.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(b){return document.createElement(b==this.rootId?"div":"img")},this._setSrc=function(b,e){b.src=e},this._getSrc=function(b){return b.src})};
dhtmlXTreeObject.prototype.destructor=function(){for(var b in this._idpull){var d=this._idpull[b];d&&(d.parentObject=null,d.treeNod=null,d.childNodes=null,d.span=null,d.tr.nodem=null,d.tr=null,d.htmlNode.objBelong=null,d.htmlNode=null,this._idpull[b]=null)}this.parentObject.innerHTML="";this.XMLLoader&&this.XMLLoader.destructor();this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(b in this)this[b]=null};function cObject(){return this}
cObject.prototype={};cObject.prototype.clone=function(){function b(){}b.prototype=this;return new b};
function dhtmlXTreeItemObject(b,d,e,f,g,h){this.scolor=this.acolor=this.htmlNode="";this.span=this.dragMove=this.dragSpan=this.tempDOMU=this.tempDOMM=this.childsCount=this.tr=0;this.closeble=1;this.childNodes=[];this.userData=new cObject;this.checkstate=0;this.treeNod=f;this.label=d;this.parentObject=e;this.actionHandler=g;this.images=[f.imageArray[0],f.imageArray[1],f.imageArray[2]];this.id=f._globalIdStorageAdd(b,this);this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,h):this.treeNod._createItem(0,
this,h);this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(b,d){if(this._globalIdStorageFind(b,1,1))return b=b+"_"+(new Date).valueOf(),this._globalIdStorageAdd(b,d);this._idpull[b]=d;this._pullSize++;return b};dhtmlXTreeObject.prototype._globalIdStorageSub=function(b){this._idpull[b]&&(this._unselectItem(this._idpull[b]),this._idpull[b]=null,this._pullSize--);this._locker&&this._locker[b]&&(this._locker[b]=!1)};
dhtmlXTreeObject.prototype._globalIdStorageFind=function(b,d,e,f){var g=this._idpull[b];if(g){"object"==typeof g.unParsed&&!e&&this.reParse(g,0);this._srnd&&!g.htmlNode&&this._buildSRND(g,e);if(f&&this._edsbpsA)for(d=0;d<this._edsbpsA.length;d++)if(this._edsbpsA[d][2]==b)return dhtmlxError.throwError("getItem","Requested item still in parsing process.",b),null;return g}return this.slowParse&&0!=b&&!d?this.preParse(b):null};
dhtmlXTreeObject.prototype._getSubItemsXML=function(b){var d=[];b.each("item",function(b){d.push(b.get("id"))},this);return d.join(",")};dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(b){this.slowParse=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.findXML=function(){};
dhtmlXTreeObject.prototype._getAllCheckedXML=function(b,d,e){var f=[];2==e&&b.through("item","checked",-1,function(b){f.push(b.get("id"))},this);1==e&&b.through("item","id",null,function(b){b.get("checked")&&-1!=b.get("checked")&&f.push(b.get("id"))},this);0==e&&b.through("item","id",null,function(b){(!b.get("checked")||0==b.get("checked"))&&f.push(b.get("id"))},this);return f.length?d+(d?",":"")+f.join(","):d?d:""};
dhtmlXTreeObject.prototype._setSubCheckedXML=function(b,d){var e=b?"1":"";d.through("item","id",null,function(b){b.set("checked",e)},this)};dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(b){var d=[],e=function(b){b.sub_exists("item")?b.each("item",e,this):d.push(b.get("id"))};e(b);return d.join(",")};dhtmlXTreeObject.prototype._getAllFatItemsXML=function(b){var d=[],e=function(b){b.sub_exists("item")&&(d.push(b.get("id")),b.each("item",e,this))};e(b);return d.join(",")};
dhtmlXTreeObject.prototype._getAllSubItemsXML=function(b,d,e){d=[];e.through("item","id",null,function(b){d.push(b.get("id"))},this);return d.join(",")};
dhtmlXTreeObject.prototype.reParse=function(b){this.parsCount||this.callEvent("onXLS",[this,b.id]);this.xmlstate=1;var d=b.unParsed;b.unParsed=0;this.XMLloadingWarning=1;var e=this.parsingOn,f=this.waitUpdateXML,g=this.parsedArray;this.parsedArray=[];this.waitUpdateXML=!1;this.parsingOn=b.id;this.parsedArray=[];this.setCheckList="";this._parse(d,b.id,2);for(var h=this.setCheckList.split(this.dlmtr),l=0;l<this.parsedArray.length;l++)b.htmlNode.childNodes[0].appendChild(this.parsedArray[l]);d.get("order")&&
"none"!=d.get("order")&&this._reorderBranch(b,d.get("order"),!0);this.oldsmcheck=this.smcheck;this.smcheck=!1;for(d=0;d<h.length;d++)h[d]&&this.setCheck(h[d],1);this.smcheck=this.oldsmcheck;this.parsingOn=e;this.waitUpdateXML=f;this.parsedArray=g;this.XMLloadingWarning=0;this._redrawFrom(this,b);this._srnd&&!b._sready&&this.prepareSR(b.id);this.xmlstate=0;return!0};
dhtmlXTreeObject.prototype.preParse=function(b){if(!b||!this._p)return null;var d=!1;this._p.clone().through("item","id",b,function(b){this._globalIdStorageFind(b.up().get("id"));return d=!0},this);if(d){var e=this._globalIdStorageFind(b,!0,!1);e||dhtmlxError.throwError("getItem","The item "+b+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",b)}return e};
dhtmlXTreeObject.prototype._escape=function(b){switch(this.utfesc){case "none":return b;case "utf8":return encodeURIComponent(b);default:return escape(b)}};dhtmlXTreeObject.prototype._drawNewTr=function(b){var d=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("td");e.appendChild(document.createTextNode(" "));f.colSpan=3;f.appendChild(b);d.appendChild(e);d.appendChild(f);return d};
dhtmlXTreeObject.prototype.loadXMLString=function(b,d){this.parsCount||this.callEvent("onXLS",[this,null]);this.xmlstate=1;d&&(this.XMLLoader.waitCall=d);this.XMLLoader.loadXMLString(b)};
dhtmlXTreeObject.prototype.loadXML=function(b,d){if(this._datamode&&"xml"!=this._datamode)return this["load"+this._datamode.toUpperCase()](b,d);this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe);d&&(this.XMLLoader.waitCall=d);this.specialRoot&&(b+=(-1<b.indexOf("?")?"&":"?")+"pid="+this.rootId);this.XMLLoader.loadXML(b)};
dhtmlXTreeObject.prototype._attachChildNode=function(b,d,e,f,g,h,l,m,k,n,s){n&&n.parentObject&&(b=n.parentObject);0==b.XMLload&&(this.XMLsource&&!this.XMLloadingWarning)&&(b.XMLload=1,this._loadDynXML(b.id));var u=b.childsCount,v=b.childNodes;s&&s.tr.previousSibling&&(s.tr.previousSibling.previousSibling?n=s.tr.previousSibling.nodem:m=m.replace("TOP","")+",TOP");if(n){for(s=0;s<u;s++)if(v[s]==n){for(;u!=s;u--)v[1+u]=v[u];break}s++;u=s}if(m)for(var w=m.split(","),x=0;x<w.length;x++)switch(w[x]){case "TOP":0<
b.childsCount&&(n={},n.tr=b.childNodes[0].tr.previousSibling);b._has_top=!0;for(s=u;0<s;s--)v[s]=v[s-1];u=0}var A;if(!(A=this._idpull[d])||-1!=A.span)A=v[u]=new dhtmlXTreeItemObject(d,e,b,this,f,1),d=v[u].id,b.childsCount++;A.htmlNode||(A.label=e,A.htmlNode=this._createItem(this.checkBoxOff?1:0,A),A.htmlNode.objBelong=A);g&&(A.images[0]=g);h&&(A.images[1]=h);l&&(A.images[2]=l);e=this._drawNewTr(A.htmlNode);if(this.XMLloadingWarning||this._hAdI)A.htmlNode.parentNode.parentNode.style.display="none";
n&&n.tr.nextSibling?b.htmlNode.childNodes[0].insertBefore(e,n.tr.nextSibling):this.parsingOn==b.id?this.parsedArray[this.parsedArray.length]=e:b.htmlNode.childNodes[0].appendChild(e);n&&!n.span&&(n=null);this.XMLsource&&(A.XMLload=k&&0!=k?0:1);A.tr=e;e.nodem=A;0==b.itemId&&(e.childNodes[0].className="hiddenRow");(b._r_logic||this._frbtr)&&this._setSrc(A.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]);if(m){w=m.split(",");for(x=0;x<w.length;x++)switch(w[x]){case "SELECT":this.selectItem(d,
!1);break;case "CALL":this.selectItem(d,!0);break;case "CHILD":A.XMLload=0;break;case "CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+d:this.setCheck(d,1);break;case "HCHECKED":this._setCheck(A,"unsure");break;case "OPEN":A.openMe=1}}if(!this.XMLloadingWarning&&(0>this._getOpenState(b)&&!this._hAdI&&this.openItem(b.id),n&&(this._correctPlus(n),this._correctLine(n)),this._correctPlus(b),this._correctLine(b),this._correctPlus(A),2<=b.childsCount&&(this._correctPlus(v[b.childsCount-2]),
this._correctLine(v[b.childsCount-2])),2!=b.childsCount&&this._correctPlus(v[0]),this.tscheck&&this._correctCheckStates(b),this._onradh))if(1==this.xmlstate){var D=this.onXLE;this.onXLE=function(b){this._onradh(d);D&&D(b)}}else this._onradh(d);return A};dhtmlXTreeObject.prototype.enableContextMenu=function(b){b&&(this.cMenu=b)};
dhtmlXTreeObject.prototype.setItemContextMenu=function(b,d){for(var e=b.toString().split(this.dlmtr),f=0;f<e.length;f++){var g=this._globalIdStorageFind(e[f]);g&&(g.cMenu=d)}};dhtmlXTreeObject.prototype.insertNewItem=function(b,d,e,f,g,h,l,m,k){b=this._globalIdStorageFind(b);if(!b)return-1;d=this._attachChildNode(b,d,e,f,g,h,l,m,k);!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(b);return d};
dhtmlXTreeObject.prototype.insertNewChild=function(b,d,e,f,g,h,l,m,k){return this.insertNewItem(b,d,e,f,g,h,l,m,k)};dhtmlXTreeObject.prototype._parseXMLTree=function(b,d,e,f,g){d=new xmlPointer(g.getXMLTopNode("tree"));b._parse(d);d.d.id==b.rootId&&this.xmlDoc.response&&(b._initXmlString=this.xmlDoc.response);b._p=d};
dhtmlXTreeObject.prototype._parseItem=function(b,d,e,f){var g;if(this._srnd&&(!this._idpull[g=b.get("id")]||!this._idpull[g].span))this._addItemSRND(d.id,g,b);else{var h=b.get_all();if("object"==typeof this.waitUpdateXML&&!this.waitUpdateXML[h.id])this._parse(b,h.id,1);else{if(null===h.text||"undefined"==typeof h.text)if(h.text=b.sub("itemtext"),h.text)h.text=h.text.content();g=[];h.select&&g.push("SELECT");h.top&&g.push("TOP");h.call&&(this.nodeAskingCall=h.id);-1==h.checked?g.push("HCHECKED"):h.checked&&
g.push("CHECKED");h.open&&g.push("OPEN");this.waitUpdateXML?this._globalIdStorageFind(h.id)?f=this.updateItem(h.id,h.text,h.im0,h.im1,h.im2,h.checked,h.child):(0==this.npl?g.push("TOP"):e=d.childNodes[this.npl],f=this._attachChildNode(d,h.id,h.text,0,h.im0,h.im1,h.im2,g.join(","),h.child,0,e),e=null):f=this._attachChildNode(d,h.id,h.text,0,h.im0,h.im1,h.im2,g.join(","),h.child,f||0,e);h.tooltip&&(f.span.parentNode.parentNode.title=h.tooltip);h.style&&(f.span.style.cssText?f.span.style.cssText+=";"+
h.style:f.span.setAttribute("style",f.span.getAttribute("style")+"; "+h.style));h.radio&&(f._r_logic=!0);h.nocheckbox&&(e=f.span.parentNode.previousSibling.previousSibling,e.childNodes[0].style.display="none",window._KHTMLrv&&(e.style.display="none"),f.nocheckbox=!0);h.disabled&&(null!=h.checked&&this._setCheck(f,h.checked),this.disableCheckbox(f,1));f._acc=h.child||0;this.parserExtension&&this.parserExtension._parseExtension.call(this,b,h,d?d.id:0);this.setItemColor(f,h.aCol,h.sCol);"1"==h.locked&&
this.lockItem(f.id,!0,!0);(h.imwidth||h.imheight)&&this.setIconSize(h.imwidth,h.imheight,f);("0"==h.closeable||"1"==h.closeable)&&this.setItemCloseable(f,h.closeable);d="";h.topoffset&&this.setItemTopOffset(f,h.topoffset);!this.slowParse||"object"==typeof this.waitUpdateXML?b.sub_exists("item")&&(d=this._parse(b,h.id,1)):(!f.childsCount&&b.sub_exists("item")&&(f.unParsed=b.clone()),b.each("userdata",function(b){this.setUserData(h.id,b.get("name"),b.content())},this));""!=d&&(this.nodeAskingCall=d);
b.each("userdata",function(d){this.setUserData(b.get("id"),d.get("name"),d.content())},this)}}};
dhtmlXTreeObject.prototype._parse=function(b,d,e,f){if(this._srnd&&!this.parentObject.offsetHeight){var g=this;return window.setTimeout(function(){g._parse(b,d,e,f)},100)}if(b.exists()){this.skipLock=!0;d||(d=b.get("id"),b.get("radio")&&(this.htmlNode._r_logic=!0),this.parsingOn=d,this.parsedArray=[],this.nodeAskingCall=this.setCheckList="");var h=this._idpull[d]&&this._idpull[d].unParsed,l=this._globalIdStorageFind(d);if(!l)return h=this.XMLLoader.xmlDoc,dhtmlx.message({type:"alert",text:"<h4>Debug info:</h4><br><div style='width:100%; text-align:left'>domain:"+
document.domain+"<br>protocal:"+document.location.protocol+"<br>port:"+document.location.port+"<br>url:"+this.XMLLoader.filePath+"<br>statusText:"+h.statusText+"<br>status:"+h.status+"<br>responseText:<br><textarea style='width:100%;'>"+h.responseText+"</textarea></div>"}),dhtmlxError.throwError("DataStructure","XML refers to not existing parent");this.parsCount=this.parsCount?this.parsCount+1:1;this.XMLloadingWarning=1;this.npl=0;h||b.each("item",function(f,g){l.XMLload=1;this._parseItem(f,l,0,0);
if(this._edsbps&&this.npl==this._edsbpsC)return this._distributedStart(b,g+1,d,e,l.childsCount),-1;this.npl++},this,f);if(!e){b.each("userdata",function(d){this.setUserData(b.get("id"),d.get("name"),d.content())},this);l.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=!1;for(h=l.childsCount-1;0<=h;h--)l.childNodes[h]._dmark&&this.deleteItem(l.childNodes[h].id)}this._globalIdStorageFind(this.parsingOn);for(h=0;h<this.parsedArray.length;h++)l.htmlNode.childNodes[0].appendChild(this.parsedArray[h]);
this.parsedArray=[];this.lastLoadedXMLId=d;this.XMLloadingWarning=0;for(var h=this.setCheckList.split(this.dlmtr),m=0;m<h.length;m++)h[m]&&this.setCheck(h[m],1);this.XMLsource&&this.tscheck&&this.smcheck&&l.id!=this.rootId&&(0===l.checkstate?this._setSubChecked(0,l):1===l.checkstate&&this._setSubChecked(1,l));this._redrawFrom(this,null,f);b.get("order")&&"none"!=b.get("order")&&this._reorderBranch(l,b.get("order"),!0);""!=this.nodeAskingCall&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]);
this._branchUpdate&&this._branchUpdateNext(b)}if(1==this.parsCount){this.parsingOn=null;this._srnd&&l.id!=this.rootId&&(this.prepareSR(l.id),this.XMLsource&&this.openItem(l.id));b.through("item","open",null,function(b){this.openItem(b.get("id"))},this);if(!this._edsbps||!this._edsbpsA.length){var k=this;window.setTimeout(function(){k&&k.callEvent&&k.callEvent("onXLE",[k,d])},1);this.xmlstate=0}this.skipLock=!1}this.parsCount--;k=this;this._edsbps&&window.setTimeout(function(){k&&k._distributedStep&&
k._distributedStep(d)},this._edsbpsD);if(!e&&this.onXLE)this.onXLE(this,d);return this.nodeAskingCall}};dhtmlXTreeObject.prototype._branchUpdateNext=function(b){b.each("item",function(b){var e=b.get("id");if(!this._idpull[e]||this._idpull[e].XMLload)this._branchUpdate++,this.smartRefreshItem(b.get("id"),b)},this);this._branchUpdate--};
dhtmlXTreeObject.prototype.checkUserData=function(b,d){if(1==b.nodeType&&"userdata"==b.tagName){var e=b.getAttribute("name");e&&b.childNodes[0]&&this.setUserData(d,e,b.childNodes[0].data)}};
dhtmlXTreeObject.prototype._redrawFrom=function(b,d,e,f){if(d)g=d;else{var g=b._globalIdStorageFind(b.lastLoadedXMLId);b.lastLoadedXMLId=-1;if(!g)return 0}var h=0;for(e=e?e-1:0;e<g.childsCount;e++){if(!this._branchUpdate||1==this._getOpenState(g))if(!d||1==f)g.childNodes[e].htmlNode.parentNode.parentNode.style.display="";1==g.childNodes[e].openMe&&(this._openItem(g.childNodes[e]),g.childNodes[e].openMe=0);b._redrawFrom(b,g.childNodes[e]);if(null!=this.childCalc){if(g.childNodes[e].unParsed||!g.childNodes[e].XMLload&&
this.XMLsource)g.childNodes[e].span.innerHTML=g.childNodes[e]._acc?g.childNodes[e].label+this.htmlcA+g.childNodes[e]._acc+this.htmlcB:g.childNodes[e].label;if(g.childNodes[e].childNodes.length&&this.childCalc){1==this.childCalc&&(g.childNodes[e].span.innerHTML=g.childNodes[e].label+this.htmlcA+g.childNodes[e].childsCount+this.htmlcB);if(2==this.childCalc){var l=g.childNodes[e].childsCount-(g.childNodes[e].pureChilds||0);l&&(g.childNodes[e].span.innerHTML=g.childNodes[e].label+this.htmlcA+l+this.htmlcB);
g.pureChilds?g.pureChilds++:g.pureChilds=1}3==this.childCalc&&(g.childNodes[e].span.innerHTML=g.childNodes[e].label+this.htmlcA+g.childNodes[e]._acc+this.htmlcB);if(4==this.childCalc&&(l=g.childNodes[e]._acc))g.childNodes[e].span.innerHTML=g.childNodes[e].label+this.htmlcA+l+this.htmlcB}else 4==this.childCalc&&h++;h+=g.childNodes[e]._acc;3==this.childCalc&&h++}}if(!g.unParsed&&(g.XMLload||!this.XMLsource))g._acc=h;b._correctLine(g);b._correctPlus(g);this.childCalc&&!d&&b._fixChildCountLabel(g)};
dhtmlXTreeObject.prototype._createSelf=function(){var b=document.createElement("div");b.className="containerTableStyle";b.style.width=this.width;b.style.height=this.height;this.parentObject.appendChild(b);return b};dhtmlXTreeObject.prototype._xcloseAll=function(b){if(!b.unParsed){if(this.rootId!=b.id){if(!b.htmlNode)return;for(var d=b.htmlNode.childNodes[0].childNodes,e=d.length,f=1;f<e;f++)d[f].style.display="none";this._correctPlus(b)}for(f=0;f<b.childsCount;f++)b.childNodes[f].childsCount&&this._xcloseAll(b.childNodes[f])}};
dhtmlXTreeObject.prototype._xopenAll=function(b){this._HideShow(b,2);for(var d=0;d<b.childsCount;d++)this._xopenAll(b.childNodes[d])};
dhtmlXTreeObject.prototype._correctPlus=function(b){if(b.htmlNode){var d=b.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,e=b.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],f=this.lineArray;if(this.XMLsource&&!b.XMLload){if(f=this.plusArray,this._setSrc(e,this.iconURL+b.images[2]),this._txtimg)return d.innerHTML="[+]"}else if(b.childsCount||b.unParsed)if(b.htmlNode.childNodes[0].childNodes[1]&&"none"!=b.htmlNode.childNodes[0].childNodes[1].style.display){if(b.wsign||
(f=this.minusArray),this._setSrc(e,this.iconURL+b.images[1]),this._txtimg)return d.innerHTML="[-]"}else{if(b.wsign||(f=this.plusArray),this._setSrc(e,this.iconURL+b.images[2]),this._txtimg)return d.innerHTML="[+]"}else this._setSrc(e,this.iconURL+b.images[0]);e=2;b.treeNod.treeLinesOn?(b.parentObject&&(e=this._getCountStatus(b.id,b.parentObject)),this._setSrc(d,this.imPath+f[e])):this._setSrc(d,this.imPath+f[3])}};
dhtmlXTreeObject.prototype._correctLine=function(b){if(b.htmlNode){var d=b.parentObject;if(d)if(0==this._getLineStatus(b.id,d)||!this.treeLinesOn)for(d=1;d<=b.childsCount&&b.htmlNode.childNodes[0].childNodes[d];d++)b.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundImage="",b.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundRepeat="";else for(d=1;d<=b.childsCount&&b.htmlNode.childNodes[0].childNodes[d];d++)b.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundImage=
"url("+this.imPath+this.lineArray[5]+")",b.htmlNode.childNodes[0].childNodes[d].childNodes[0].style.backgroundRepeat="repeat-y"}};dhtmlXTreeObject.prototype._getCountStatus=function(b,d){return 1>=d.childsCount?d.id==this.rootId?4:0:d.childNodes[0].id==b?d.id==this.rootId?2:1:d.childNodes[d.childsCount-1].id==b?0:1};dhtmlXTreeObject.prototype._getLineStatus=function(b,d){return d.childNodes[d.childsCount-1].id==b?0:1};
dhtmlXTreeObject.prototype._HideShow=function(b,d){if(this.XMLsource&&!b.XMLload)1!=d&&(b.XMLload=1,this._loadDynXML(b.id));else{b.unParsed&&this.reParse(b);var e=b.htmlNode.childNodes[0].childNodes,f=e.length;if(1<f){("none"!=e[1].style.display||1==d)&&2!=d?(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none"):nodestyle="";for(var g=1;g<f;g++)e[g].style.display=nodestyle}this._correctPlus(b)}};
dhtmlXTreeObject.prototype._getOpenState=function(b){if(!b.htmlNode)return 0;b=b.htmlNode.childNodes[0].childNodes;return 1>=b.length?0:"none"!=b[1].style.display?1:-1};
dhtmlXTreeObject.prototype.onRowClick2=function(){var b=this.parentObject.treeNod;if(!b.callEvent("onDblClick",[this.parentObject.id,b]))return!1;this.parentObject.closeble&&"0"!=this.parentObject.closeble?b._HideShow(this.parentObject):b._HideShow(this.parentObject,2);b.checkEvent("onOpenEnd")&&(b.xmlstate?(b._oie_onXLE.push(b.onXLE),b.onXLE=b._epnFHe):b.callEvent("onOpenEnd",[this.parentObject.id,b._getOpenState(this.parentObject)]));return!1};
dhtmlXTreeObject.prototype.onRowClick=function(){var b=this.parentObject.treeNod;if(!b.callEvent("onOpenStart",[this.parentObject.id,b._getOpenState(this.parentObject)]))return 0;this.parentObject.closeble&&"0"!=this.parentObject.closeble?b._HideShow(this.parentObject):b._HideShow(this.parentObject,2);b.checkEvent("onOpenEnd")&&(b.xmlstate?(b._oie_onXLE.push(b.onXLE),b.onXLE=b._epnFHe):b.callEvent("onOpenEnd",[this.parentObject.id,b._getOpenState(this.parentObject)]))};
dhtmlXTreeObject.prototype._epnFHe=function(b,d,e){d!=this.rootId&&this.callEvent("onOpenEnd",[d,b.getOpenState(d)]);b.onXLE=b._oie_onXLE.pop();if(!e&&!b._oie_onXLE.length&&b.onXLE)b.onXLE(b,d)};dhtmlXTreeObject.prototype.onRowClickDown=function(b){b=b||window.event;this.parentObject.treeNod._selectItem(this.parentObject,b)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var b=[],d=0;d<this._selected.length;d++)b[d]=this._selected[d].id;return b.join(this.dlmtr)};
dhtmlXTreeObject.prototype._selectItem=function(b,d){this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId());(!this._amsel||!d||!d.ctrlKey&&!d.metaKey&&!d.shiftKey)&&this._unselectItems();if(b.i_sel&&this._amsel&&d&&(d.ctrlKey||d.metaKey))this._unselectItem(b);else if(!b.i_sel&&(!this._amselS||0==this._selected.length||this._selected[0].parentObject==b.parentObject))if(this._amsel&&d&&d.shiftKey&&0!=this._selected.length&&this._selected[this._selected.length-1].parentObject==b.parentObject){var e=
this._getIndex(this._selected[this._selected.length-1]),f=this._getIndex(b);if(f<e)var g=e,e=f,f=g;for(;e<=f;e++)b.parentObject.childNodes[e].i_sel||this._markItem(b.parentObject.childNodes[e])}else this._markItem(b);this.checkEvent("onSelect")&&(f=this.getSelectedItemId(),f!=this._onSSCFold&&this.callEvent("onSelect",[f]))};dhtmlXTreeObject.prototype._markItem=function(b){b.scolor&&(b.span.style.color=b.scolor);b.span.className="selectedTreeRow";b.i_sel=!0;this._selected[this._selected.length]=b};
dhtmlXTreeObject.prototype.getIndexById=function(b){b=this._globalIdStorageFind(b);return!b?null:this._getIndex(b)};dhtmlXTreeObject.prototype._getIndex=function(b){for(var d=b.parentObject,e=0;e<d.childsCount;e++)if(d.childNodes[e]==b)return e};dhtmlXTreeObject.prototype._unselectItem=function(b){if(b&&b.i_sel){b.span.className="standartTreeRow";b.acolor&&(b.span.style.color=b.acolor);b.i_sel=!1;for(b=0;b<this._selected.length;b++)if(!this._selected[b].i_sel){this._selected.splice(b,1);break}}};
dhtmlXTreeObject.prototype._unselectItems=function(){for(var b=0;b<this._selected.length;b++){var d=this._selected[b];d.span.className="standartTreeRow";d.acolor&&(d.span.style.color=d.acolor);d.i_sel=!1}this._selected=[]};dhtmlXTreeObject.prototype.onRowSelect=function(b,d,e){b=b||window.event;var f=this.parentObject;d&&(f=d.parentObject);d=f.treeNod;var g=d.getSelectedItemId();(!b||!b.skipUnSel)&&d._selectItem(f,b);e||(f.actionHandler?f.actionHandler(f.id,g):d.callEvent("onClick",[f.id,g]))};
dhtmlXTreeObject.prototype._correctCheckStates=function(b){if(this.tscheck&&b&&b.id!=this.rootId){var d=b.childNodes,e=0,f=0;if(0!=b.childsCount){for(var g=0;g<b.childsCount;g++)if(!d[g].dscheck)if(0==d[g].checkstate)e=1;else if(1==d[g].checkstate)f=1;else{f=e=1;break}e&&f?this._setCheck(b,"unsure"):e?this._setCheck(b,!1):this._setCheck(b,!0);this._correctCheckStates(b.parentObject)}}};
dhtmlXTreeObject.prototype.onCheckBoxClick=function(){if(this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){if(this.parentObject.dscheck)return!0;this.treeNod.tscheck?1==this.parentObject.checkstate?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):1==this.parentObject.checkstate?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0);this.treeNod._correctCheckStates(this.parentObject.parentObject);
return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])}};
dhtmlXTreeObject.prototype._createItem=function(b,d,e){var f=document.createElement("table");f.cellSpacing=0;f.cellPadding=0;f.border=0;this.hfMode&&(f.style.tableLayout="fixed");f.style.margin=0;f.style.padding=0;var g=document.createElement("tbody"),h=document.createElement("tr"),l=document.createElement("td");l.className="standartTreeImage";if(this._txtimg){var m=document.createElement("div");l.appendChild(m);m.className="dhx_tree_textSign"}else m=this._getImg(d.id),m.border="0","IMG"==m.tagName&&
(m.align="absmiddle"),l.appendChild(m),m.style.padding=0,m.style.margin=0,m.style.width=this.def_line_img_x,m.style.height=this.def_line_img_y;var m=document.createElement("td"),k=this._getImg(this.cBROf?this.rootId:d.id);k.checked=0;this._setSrc(k,this.imPath+this.checkArray[0]);k.style.width="16px";k.style.height="16px";b||((!_isIE?m:k).style.display="none");m.appendChild(k);!this.cBROf&&"IMG"==k.tagName&&(k.align="absmiddle");k.onclick=this.onCheckBoxClick;k.treeNod=this;k.parentObject=d;m.width=
!b?"1px":window._KHTMLrv?"16px":"20px";b=document.createElement("td");b.className="standartTreeImage";k=this._getImg(this.timgen?d.id:this.rootId);k.onmousedown=this._preventNsDrag;k.ondragstart=this._preventNsDrag;k.border="0";this._aimgs&&(k.parentObject=d,"IMG"==k.tagName&&(k.align="absmiddle"),k.onclick=this.onRowSelect);e||this._setSrc(k,this.iconURL+this.imageArray[0]);b.appendChild(k);k.style.padding=0;k.style.margin=0;if(this.timgen)b.style.width=k.style.width=this.def_img_x,k.style.height=
this.def_img_y;else if(k.style.width="0px",k.style.height="0px",_isOpera||window._KHTMLrv)b.style.display="none";e=document.createElement("td");e.className="standartTreeRow";d.span=document.createElement("span");d.span.className="standartTreeRow";this.mlitems?(d.span.style.width=this.mlitems,d.span.style.display="block"):e.noWrap=!0;_isIE&&7<document.documentMode?e.style.width="999999px":window._KHTMLrv||(e.style.width="100%");d.span.innerHTML=d.label;e.appendChild(d.span);e.parentObject=d;l.parentObject=
d;e.onclick=this.onRowSelect;l.onclick=this.onRowClick;e.ondblclick=this.onRowClick2;this.ettip&&(h.title=d.label);this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(b,this),b.parentObject=d),this.dragger.addDraggableItem(e,this));d.span.style.paddingLeft="5px";d.span.style.paddingRight="5px";e.style.verticalAlign="";e.style.fontSize="10pt";e.style.cursor=this.style_pointer;h.appendChild(l);h.appendChild(m);h.appendChild(b);h.appendChild(e);g.appendChild(h);f.appendChild(g);if(this.ehlt||
this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))h.onmousemove=this._itemMouseIn,h[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut;return f};dhtmlXTreeObject.prototype.setImagePath=function(b){this.iconURL=this.imPath=b};dhtmlXTreeObject.prototype.setIconPath=function(b){this.iconURL=b};dhtmlXTreeObject.prototype._getLeafCount=function(b){for(var d=0,e=0;e<b.childsCount;e++)0==b.childNodes[e].childsCount&&d++;return d};
dhtmlXTreeObject.prototype._getChildCounterValue=function(b){b=this._globalIdStorageFind(b);if(!b)return 0;if(b.unParsed||!b.XMLload&&this.XMLsource)return b._acc;switch(this.childCalc){case 1:return b.childsCount;case 2:return this._getLeafCount(b);case 3:return b._acc;case 4:return b._acc}};
dhtmlXTreeObject.prototype._fixChildCountLabel=function(b){if(null!=this.childCalc)if(b.unParsed||!b.XMLload&&this.XMLsource)b.span.innerHTML=b._acc?b.label+this.htmlcA+b._acc+this.htmlcB:b.label;else switch(this.childCalc){case 1:b.span.innerHTML=0!=b.childsCount?b.label+this.htmlcA+b.childsCount+this.htmlcB:b.label;break;case 2:var d=this._getLeafCount(b);b.span.innerHTML=0!=d?b.label+this.htmlcA+d+this.htmlcB:b.label;break;case 3:if(0!=b.childsCount){for(var e=d=0;e<b.childsCount;e++)b.childNodes[e]._acc||
(b.childNodes[e]._acc=0),d+=1*b.childNodes[e]._acc;d+=1*b.childsCount;b.span.innerHTML=b.label+this.htmlcA+d+this.htmlcB;b._acc=d}else b.span.innerHTML=b.label,b._acc=0;b.parentObject&&b.parentObject!=this.htmlNode&&this._fixChildCountLabel(b.parentObject);break;case 4:if(0!=b.childsCount){for(e=d=0;e<b.childsCount;e++)b.childNodes[e]._acc||(b.childNodes[e]._acc=1),d+=1*b.childNodes[e]._acc;b.span.innerHTML=b.label+this.htmlcA+d+this.htmlcB;b._acc=d}else b.span.innerHTML=b.label,b._acc=1;b.parentObject&&
b.parentObject!=this.htmlNode&&this._fixChildCountLabel(b.parentObject)}};dhtmlXTreeObject.prototype.setChildCalcMode=function(b){switch(b){case "child":this.childCalc=1;break;case "leafs":this.childCalc=2;break;case "childrec":this.childCalc=3;break;case "leafsrec":this.childCalc=4;break;case "disabled":this.childCalc=null;break;default:this.childCalc=4}};dhtmlXTreeObject.prototype.setChildCalcHTML=function(b,d){this.htmlcA=b;this.htmlcB=d};
dhtmlXTreeObject.prototype.setOnRightClickHandler=function(b){this.attachEvent("onRightClick",b)};dhtmlXTreeObject.prototype.setOnClickHandler=function(b){this.attachEvent("onClick",b)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(b){this.attachEvent("onSelect",b)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(b){this.XMLsource=b};dhtmlXTreeObject.prototype.setOnCheckHandler=function(b){this.attachEvent("onCheck",b)};
dhtmlXTreeObject.prototype.setOnOpenHandler=function(b){this.attachEvent("onOpenStart",b)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(b){this.attachEvent("onOpenStart",b)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(b){this.attachEvent("onOpenEnd",b)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(b){this.attachEvent("onDblClick",b)};dhtmlXTreeObject.prototype.openAllItems=function(b){b=this._globalIdStorageFind(b);if(!b)return 0;this._xopenAll(b)};
dhtmlXTreeObject.prototype.getOpenState=function(b){b=this._globalIdStorageFind(b);return!b?"":this._getOpenState(b)};dhtmlXTreeObject.prototype.closeAllItems=function(b){b===window.undefined&&(b=this.rootId);b=this._globalIdStorageFind(b);if(!b)return 0;this._xcloseAll(b);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};
dhtmlXTreeObject.prototype.setUserData=function(b,d,e){if(b=this._globalIdStorageFind(b,0,!0))"hint"==d&&(b.htmlNode.childNodes[0].childNodes[0].title=e),"undefined"==typeof b.userData["t_"+d]&&(b._userdatalist?b._userdatalist+=","+d:b._userdatalist=d),b.userData["t_"+d]=e};dhtmlXTreeObject.prototype.getUserData=function(b,d){var e=this._globalIdStorageFind(b,0,!0);return!e?void 0:e.userData["t_"+d]};
dhtmlXTreeObject.prototype.getItemColor=function(b){b=this._getItemById(b);if(!b)return 0;var d={};b.acolor&&(d.acolor=b.acolor);b.scolor&&(d.scolor=b.scolor);return d};dhtmlXTreeObject.prototype.setItemColor=function(b,d,e){if(b=b&&b.span?b:this._globalIdStorageFind(b))b.i_sel?e&&(b.span.style.color=e):d&&(b.span.style.color=d),e&&(b.scolor=e),d&&(b.acolor=d);else return 0};
dhtmlXTreeObject.prototype._getItemById=function(b){return this._idpull[b]&&this._idpull[b].i_sel?this._idpull[b]:this._globalIdStorageFind(b,!1,!0)};dhtmlXTreeObject.prototype.getItemText=function(b){b=this._getItemById(b);return!b?0:b.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerText};dhtmlXTreeObject.prototype.getParentId=function(b){b=this._globalIdStorageFind(b);return!b||!b.parentObject?"":b.parentObject.id};
dhtmlXTreeObject.prototype.changeItemId=function(b,d){if(b!=d){var e=this._globalIdStorageFind(b);if(!e)return 0;e.id=d;e.span.contextMenuId=d;this._idpull[d]=this._idpull[b];delete this._idpull[b]}};
dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut();this.nodeCut=[].concat(this._selected);for(var b=0;b<this.nodeCut.length;b++){var d=this.nodeCut[b];d._cimgs=[];d._cimgs[0]=d.images[0];d._cimgs[1]=d.images[1];d._cimgs[2]=d.images[2];d.images[0]=d.images[1]=d.images[2]=this.cutImage;this._correctPlus(d)}};
dhtmlXTreeObject.prototype.doPaste=function(b){b=this._globalIdStorageFind(b);if(!b)return 0;for(var d=0;d<this.nodeCut.length;d++)this._checkPNodes(b,this.nodeCut[d])||this._moveNode(this.nodeCut[d],b);this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var b=0;b<this.nodeCut.length;b++){var d=this.nodeCut[b];d.images[0]=d._cimgs[0];d.images[1]=d._cimgs[1];d.images[2]=d._cimgs[2];this._correctPlus(d)}this.nodeCut=[]};
dhtmlXTreeObject.prototype._moveNode=function(b,d){if(1==this.dadmodec){var e=d;if(0>this.dadmodefix){for(;;){e=this._getPrevNode(e);if(-1==e){e=this.htmlNode;break}if(0==e.tr||""==e.tr.style.display||!e.parentObject)break}var f=d}else{if(e.tr&&e.tr.nextSibling&&e.tr.nextSibling.nodem&&!this._getOpenState(e))e=e.tr.nextSibling.nodem;else if(e=this._getNextNode(e),-1==e)e=this.htmlNode;f=e;e=d}return this._getNodeLevel(e,0)>this._getNodeLevel(f,0)?this.dropLower?f.id!=this.rootId?this._moveNodeTo(b,
f.parentObject,f):this._moveNodeTo(b,this.htmlNode,null):this._moveNodeTo(b,e.parentObject):this._moveNodeTo(b,f.parentObject,f)}return this._moveNodeTo(b,d)};dhtmlXTreeObject.prototype._fixNodesCollection=function(b,d){var e=0,f=b.childNodes,g=b.childsCount-1;if(d!=f[g]){for(var h=0;h<g;h++)f[h]==f[g]&&(f[h]=f[h+1],f[h+1]=f[g]);for(h=0;h<g+1;h++)if(e){var l=f[h];f[h]=e;e=l}else f[h]==d&&(e=f[h],f[h]=f[g])}};
dhtmlXTreeObject.prototype._recreateBranch=function(b,d,e,f){var g,h="";if(e){for(g=0;g<d.childsCount&&d.childNodes[g]!=e;g++);0!=g?e=d.childNodes[g-1]:(h="TOP",e="")}g=this._onradh;this._onradh=null;e=this._attachChildNode(d,b.id,b.label,0,b.images[0],b.images[1],b.images[2],h,0,e);e._userdatalist=b._userdatalist;e.userData=b.userData.clone();e.XMLload=b.XMLload;g&&(this._onradh=g,this._onradh(e.id));b.treeNod.dpcpy?b.treeNod._globalIdStorageFind(b.id):e.unParsed=b.unParsed;this._correctPlus(e);
for(g=0;g<b.childsCount;g++)this._recreateBranch(b.childNodes[g],e,0,1);!f&&this.childCalc&&this._redrawFrom(this,d);return e};
dhtmlXTreeObject.prototype._moveNodeTo=function(b,d,e){if(b.treeNod._nonTrivialNode)return b.treeNod._nonTrivialNode(this,d,e,b);if(this._checkPNodes(d,b))return!1;var f=d.mytype?b.treeNod.lWin!=d.lWin:b.treeNod.lWin!=d.treeNod.lWin;if(!this.callEvent("onDrag",[b.id,d.id,e?e.id:null,b.treeNod,d.treeNod]))return!1;0==d.XMLload&&this.XMLsource&&(d.XMLload=1,this._loadDynXML(d.id));this.openItem(d.id);var g=b.treeNod,h=b.parentObject.childsCount,l=b.parentObject;if(f||g.dpcpy){var m=b.id;b=this._recreateBranch(b,
d,e);g.dpcpy||g.deleteItem(m)}else{var k=d.childsCount,n=d.childNodes;0==k&&(d._open=!0);g._unselectItem(b);n[k]=b;b.treeNod=d.treeNod;d.childsCount++;k=this._drawNewTr(n[k].htmlNode);e?(d.htmlNode.childNodes[0].insertBefore(k,e.tr),this._fixNodesCollection(d,e),n=d.childNodes):(d.htmlNode.childNodes[0].appendChild(k),1==this.dadmode&&this._fixNodesCollection(d,e))}if(!g.dpcpy&&!f){var s=b.tr;document.all&&-1!=navigator.appVersion.search(/MSIE\ 5\.0/gi)?window.setTimeout(function(){s.parentNode.removeChild(s)},
250):b.parentObject.htmlNode.childNodes[0].removeChild(b.tr);if(!e||d!=b.parentObject)for(m=0;m<l.childsCount;m++){if(l.childNodes[m].id==b.id){l.childNodes[m]=0;break}}else l.childNodes[l.childsCount-1]=0;g._compressChildList(l.childsCount,l.childNodes);l.childsCount--}if(!f&&!g.dpcpy){b.tr=k;k.nodem=b;b.parentObject=d;if(g!=d.treeNod){if(b.treeNod._registerBranch(b,g))return;this._clearStyles(b);this._redrawFrom(this,b.parentObject);this._onradh&&this._onradh(b.id)}this._correctPlus(d);this._correctLine(d);
this._correctLine(b);this._correctPlus(b);e?this._correctPlus(e):2<=d.childsCount&&(this._correctPlus(n[d.childsCount-2]),this._correctLine(n[d.childsCount-2]));this._correctPlus(n[d.childsCount-1]);this.tscheck&&this._correctCheckStates(d);g.tscheck&&g._correctCheckStates(l)}1<h&&(g._correctPlus(l.childNodes[h-2]),g._correctLine(l.childNodes[h-2]));g._correctPlus(l);g._correctLine(l);this._fixChildCountLabel(d);g._fixChildCountLabel(l);this.callEvent("onDrop",[b.id,d.id,e?e.id:null,g,d.treeNod]);
return b.id};
dhtmlXTreeObject.prototype._clearStyles=function(b){if(b.htmlNode){var d=b.htmlNode.childNodes[0].childNodes[0].childNodes[1],e=d.nextSibling.nextSibling;b.span.innerHTML=b.label;b.i_sel=!1;b._aimgs&&this.dragger.removeDraggableItem(d.nextSibling);this.checkBoxOff?(d.childNodes[0].style.display="",d.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(d.childNodes[0],this.imPath+this.checkArray[b.checkstate])):d.childNodes[0].style.display="none";d.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(e);this.dragAndDropOff&&
this.dragger.addDraggableItem(e,this);this._aimgs&&this.dragger.addDraggableItem(d.nextSibling,this);e.childNodes[0].className="standartTreeRow";e.onclick=this.onRowSelect;e.ondblclick=this.onRowClick2;d.previousSibling.onclick=this.onRowClick;this._correctLine(b);this._correctPlus(b);for(d=0;d<b.childsCount;d++)this._clearStyles(b.childNodes[d])}};
dhtmlXTreeObject.prototype._registerBranch=function(b,d){d&&d._globalIdStorageSub(b.id);b.id=this._globalIdStorageAdd(b.id,b);b.treeNod=this;for(var e=0;e<b.childsCount;e++)this._registerBranch(b.childNodes[e],d);return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(b){this.tscheck=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(b){this.ehlt=!0;this.attachEvent("onMouseIn",b)};
dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(b){this.ehlt=!0;this.attachEvent("onMouseOut",b)};dhtmlXTreeObject.prototype.enableMercyDrag=function(b){this.dpcpy=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.enableTreeImages=function(b){this.timgen=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.co=function(b){this.hfMode=convertStringToBoolean(b)};
dhtmlXTreeObject.prototype.enableCheckBoxes=function(b,d){this.checkBoxOff=convertStringToBoolean(b);this.cBROf=!(this.checkBoxOff||convertStringToBoolean(d))};dhtmlXTreeObject.prototype.setStdImages=function(b,d,e){this.imageArray[0]=b;this.imageArray[1]=d;this.imageArray[2]=e};dhtmlXTreeObject.prototype.enableTreeLines=function(b){this.treeLinesOn=convertStringToBoolean(b)};
dhtmlXTreeObject.prototype.setImageArrays=function(b,d,e,f,g,h){switch(b){case "plus":this.plusArray[0]=d;this.plusArray[1]=e;this.plusArray[2]=f;this.plusArray[3]=g;this.plusArray[4]=h;break;case "minus":this.minusArray[0]=d,this.minusArray[1]=e,this.minusArray[2]=f,this.minusArray[3]=g,this.minusArray[4]=h}};dhtmlXTreeObject.prototype.openItem=function(b){return(b=this._globalIdStorageFind(b))?this._openItem(b):0};
dhtmlXTreeObject.prototype._openItem=function(b){var d=this._getOpenState(b);if(0>d||this.XMLsource&&!b.XMLload){if(!this.callEvent("onOpenStart",[b.id,d]))return 0;this._HideShow(b,2);this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,b.id,!0),!this.xmlstate||!this.XMLsource?this.callEvent("onOpenEnd",[b.id,this._getOpenState(b)]):(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe))}else this._srnd&&this._HideShow(b,2);b.parentObject&&!this._skip_open_parent&&this._openItem(b.parentObject)};
dhtmlXTreeObject.prototype.closeItem=function(b){if(this.rootId==b)return 0;b=this._globalIdStorageFind(b);if(!b)return 0;b.closeble&&this._HideShow(b,1)};dhtmlXTreeObject.prototype.getLevel=function(b){b=this._globalIdStorageFind(b);return!b?0:this._getNodeLevel(b,0)};dhtmlXTreeObject.prototype.setItemCloseable=function(b,d){d=convertStringToBoolean(d);var e=b&&b.span?b:this._globalIdStorageFind(b);if(!e)return 0;e.closeble=d};
dhtmlXTreeObject.prototype._getNodeLevel=function(b,d){return b.parentObject?this._getNodeLevel(b.parentObject,d+1):d};dhtmlXTreeObject.prototype.hasChildren=function(b){return(b=this._globalIdStorageFind(b))?this.XMLsource&&!b.XMLload?!0:b.childsCount:0};dhtmlXTreeObject.prototype._getLeafCount=function(b){for(var d=0,e=0;e<b.childsCount;e++)0==b.childNodes[e].childsCount&&d++;return d};
dhtmlXTreeObject.prototype.setItemText=function(b,d,e){b=this._globalIdStorageFind(b);if(!b)return 0;b.label=d;b.span.innerHTML=d;this.childCalc&&this._fixChildCountLabel(b);b.span.parentNode.parentNode.title=e||""};dhtmlXTreeObject.prototype.getItemTooltip=function(b){b=this._getItemById(b);return!b?"":b.span.parentNode.parentNode._dhx_title||b.span.parentNode.parentNode.title||""};
dhtmlXTreeObject.prototype.refreshItem=function(b){b||(b=this.rootId);this._globalIdStorageFind(b);this.deleteChildItems(b);this._loadDynXML(b)};dhtmlXTreeObject.prototype.refreshTree=function(b){b||(b=this.rootId);this._globalIdStorageFind(b);this.deleteChildItems(b);this.loadXMLString(this._initXmlString)};
dhtmlXTreeObject.prototype.filterTree=function(b,d){this._filter_or=convertStringToBoolean(d);if(this._filtered){this.deleteChildItems(this.rootId);var e=this._idpull[this.rootId];this._idpull={};this._idpull[this.rootId]=e;tree.loadJSONObject(eval("("+this._orignalJson+")"));if(0==arguments.length){this._filtered=!1;this.filterText=null;this.toggleFilterbar(!1);return}}else{if(0==arguments.length)return;this._orignalJson=this.serializeTreeToJSON()}this.filterText=b;for(var e=this.findItemQuiet(b,
0,1),f=[];e&&!(f.push(e),e=this.findItem(b),e==f[0]););b=['{"id":"'+this.rootId+'", "item":['];this._filteredNodes={};for(var g=0,h=this._filteredNodes._filteredCount=0;h<f.length;h++)for(e=this._getItemById(f[h]);e&&e.id!=this.rootId&&!this._filteredNodes[e.id];)this._filteredNodes[e.id]=e,g++,e=e.parentObject;this._filteredNodes._filteredCount=g;f=this.serializeFilteredTreeToJSON();this.deleteChildItems(this.rootId);e=this._idpull[this.rootId];this._idpull={};this._idpull[this.rootId]=e;e=eval("("+
f+")");tree.loadJSONObject(e);this._filtered=!0;this.toggleFilterbar(!0)};
dhtmlXTreeObject.prototype.toggleFilterbar=function(b){if(!this.filterbar){this.filterbar=document.createElement("div");this.filterbar.style.position="block";this.filterbar.style.backgroundColor="white";this.filterbar.style.top="0px";this.filterbar.style.width="100%";this.filterbar.style.height="22px";this.filterbar.style.padding="2px 1px 0px 2px";this.filterbar.style.borderBottom="1px solid #CCC";this.filterbar.innerHTML='<span>"'+this.filterText+"\"</span><a href='javascript:false'  title='\u6e05\u9664' style='text-align:center; font-size:14px; float:right;width:22px; height:20px;'>x</a>";
this.parentObject.style.position="relative";this.parentObject.insertBefore(this.filterbar,this.parentObject.childNodes[0]);var d=this;this.filterbar.onclick=function(){"A"==event.srcElement.tagName&&d.filterTree()}}b?(this.filterbar.childNodes[0].innerHTML='"'+this.filterText+'"',this.filterbar.style.display="block"):this.filterbar.style.display="none"};
dhtmlXTreeObject.prototype.serializeFilteredTreeToJSON=function(){for(var b=['{"id":"'+this.rootId+'", "item":['],d=[],e=0;e<this.htmlNode.childsCount&&!(this._filteredNodes[this.htmlNode.childNodes[e].id]&&(d.push(this._serializeItemJSON(this.htmlNode.childNodes[e],!0)),this._filteredNodes._filteredCount--),0==this._filteredNodes._filteredCount);e++);b.push(d.join(","));b.push("]}");return b.join("")};
dhtmlXTreeObject.prototype.setItemImage2=function(b,d,e,f){b=this._globalIdStorageFind(b);if(!b)return 0;b.images[1]=e;b.images[2]=f;b.images[0]=d;this._correctPlus(b)};dhtmlXTreeObject.prototype.setItemImage=function(b,d,e){b=this._globalIdStorageFind(b);if(!b)return 0;e?(b.images[1]=d,b.images[2]=e):b.images[0]=d;this._correctPlus(b)};
dhtmlXTreeObject.prototype.getSubItems=function(b){b=this._globalIdStorageFind(b,0,1);if(!b)return 0;if(b.unParsed)return this._getSubItemsXML(b.unParsed);var d="";for(i=0;i<b.childsCount;i++)d?d+=this.dlmtr+b.childNodes[i].id:d=b.childNodes[i].id;return d};
dhtmlXTreeObject.prototype._getAllScraggyItems=function(b){for(var d="",e=0;e<b.childsCount;e++)if(b.childNodes[e].unParsed||0<b.childNodes[e].childsCount){var f=b.childNodes[e].unParsed?this._getAllScraggyItemsXML(b.childNodes[e].unParsed,1):this._getAllScraggyItems(b.childNodes[e]);f&&(d?d+=this.dlmtr+f:d=f)}else d?d+=this.dlmtr+b.childNodes[e].id:d=b.childNodes[e].id;return d};
dhtmlXTreeObject.prototype._getAllFatItems=function(b){for(var d="",e=0;e<b.childsCount;e++)if(b.childNodes[e].unParsed||0<b.childNodes[e].childsCount){d?d+=this.dlmtr+b.childNodes[e].id:d=b.childNodes[e].id;var f=b.childNodes[e].unParsed?this._getAllFatItemsXML(b.childNodes[e].unParsed,1):this._getAllFatItems(b.childNodes[e]);f&&(d+=this.dlmtr+f)}return d};
dhtmlXTreeObject.prototype._getAllSubItems=function(b,d,e){e=e?e:this._globalIdStorageFind(b);if(!e)return 0;d="";for(var f=0;f<e.childsCount;f++){d?d+=this.dlmtr+e.childNodes[f].id:d=e.childNodes[f].id;var g=this._getAllSubItems(0,d,e.childNodes[f]);g&&(d+=this.dlmtr+g)}e.unParsed&&(d=this._getAllSubItemsXML(b,d,e.unParsed));return d};
dhtmlXTreeObject.prototype.selectItem=function(b,d,e){d=convertStringToBoolean(d);b=this._globalIdStorageFind(b);if(!b||!b.parentObject)return 0;this.XMLloadingWarning?b.parentObject.openMe=1:this._openItem(b.parentObject);var f=null;if(e&&(f={ctrlKey:!0},b.i_sel))f.skipUnSel=!0;if(d)this.onRowSelect(f,b.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1);else this.onRowSelect(f,b.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)};
dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var b=[],d=0;d<this._selected.length;d++)b[d]=this._selected[d].span.innerText;return b.join(this.dlmtr)};dhtmlXTreeObject.prototype._compressChildList=function(b,d){b--;for(var e=0;e<b;e++)0==d[e]&&(d[e]=d[e+1],d[e+1]=0)};
dhtmlXTreeObject.prototype._deleteNode=function(b,d,e){if(!d||!d.parentObject)return 0;var f=0,g=0;d.tr.nextSibling&&(f=d.tr.nextSibling.nodem);d.tr.previousSibling&&(g=d.tr.previousSibling.nodem);for(var h=d.parentObject,l=h.childsCount,m=h.childNodes,k=0;k<l;k++)if(m[k].id==b){e||h.htmlNode.childNodes[0].removeChild(m[k].tr);m[k]=0;break}this._compressChildList(l,m);e||h.childsCount--;f&&(this._correctPlus(f),this._correctLine(f));g&&(this._correctPlus(g),this._correctLine(g));this.tscheck&&this._correctCheckStates(h);
e||this._globalIdStorageRecSub(d)};dhtmlXTreeObject.prototype.setCheck=function(b,d){var e=this._globalIdStorageFind(b,0,1);e&&("unsure"===d?this._setCheck(e,d):(d=convertStringToBoolean(d),this.tscheck&&this.smcheck?this._setSubChecked(d,e):this._setCheck(e,d)),this.smcheck&&this._correctCheckStates(e.parentObject))};
dhtmlXTreeObject.prototype._setCheck=function(b,d){if(b){if((b.parentObject._r_logic||this._frbtr)&&d)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=b;else for(var e=0;e<b.parentObject.childsCount;e++)this._setCheck(b.parentObject.childNodes[e],0);e=b.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];b.checkstate="unsure"==d?2:d?1:0;b.dscheck&&(b.checkstate=b.dscheck);this._setSrc(e,this.imPath+(b.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[b.checkstate])}};
dhtmlXTreeObject.prototype.setSubChecked=function(b,d){var e=this._globalIdStorageFind(b);this._setSubChecked(d,e);this._correctCheckStates(e.parentObject)};
dhtmlXTreeObject.prototype._setSubChecked=function(b,d){b=convertStringToBoolean(b);if(d){if((d.parentObject._r_logic||this._frbtr)&&b)for(var e=0;e<d.parentObject.childsCount;e++)this._setSubChecked(0,d.parentObject.childNodes[e]);d.unParsed&&this._setSubCheckedXML(b,d.unParsed);if(d._r_logic||this._frbtr)this._setSubChecked(b,d.childNodes[0]);else for(e=0;e<d.childsCount;e++)this._setSubChecked(b,d.childNodes[e]);e=d.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];d.checkstate=
b?1:0;d.dscheck&&(d.checkstate=d.dscheck);this._setSrc(e,this.imPath+(d.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[d.checkstate])}};dhtmlXTreeObject.prototype.isItemChecked=function(b){b=this._globalIdStorageFind(b);return!b?void 0:b.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(b){if(b=this._globalIdStorageFind(b))for(var d=b.childsCount,e=0;e<d;e++)this._deleteNode(b.childNodes[0].id,b.childNodes[0])};
dhtmlXTreeObject.prototype.deleteItem=function(b,d){if(!this._onrdlh||this._onrdlh(b)){var e=this._deleteItem(b,d);e&&this._fixChildCountLabel(e)}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(b,d,e){d=convertStringToBoolean(d);var f=this._globalIdStorageFind(b);if(f){var g=this.getParentId(b),h=f.parentObject;this._deleteNode(b,f,e);this._correctPlus(h);this._correctLine(h);d&&g!=this.rootId&&this.selectItem(g,1);return h}};
dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(b){for(var d=0;d<b.childsCount;d++)this._globalIdStorageRecSub(b.childNodes[d]),this._globalIdStorageSub(b.childNodes[d].id);this._globalIdStorageSub(b.id);b.span=null;b.tr.nodem=null;b.tr=null;b.htmlNode=null};
dhtmlXTreeObject.prototype.insertNewNext=function(b,d,e,f,g,h,l,m,k){b=this._globalIdStorageFind(b);if(!b||!b.parentObject)return 0;d=this._attachChildNode(0,d,e,f,g,h,l,m,k,b);!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(b.parentObject);return d};dhtmlXTreeObject.prototype.getItemIdByIndex=function(b,d){var e=this._globalIdStorageFind(b);return!e||d>=e.childsCount?null:e.childNodes[d].id};
dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(b,d){var e=this._globalIdStorageFind(b);return!e||d>=e.childsCount?null:e.childNodes[d].id};dhtmlXTreeObject.prototype.setDragHandler=function(b){this.attachEvent("onDrag",b)};
dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null);this.selectionBar.style.display="none";this.allTree.className=this.allTree.className.replace(" selectionBox","")};
dhtmlXTreeObject.prototype.enableDragAndDrop=function(b,d){"temporary_disabled"==b?(this.dADTempOff=!1,b=!0):this.dADTempOff=!0;(this.dragAndDropOff=convertStringToBoolean(b))&&this.dragger.addDragLanding(this.allTree,this);1<arguments.length&&(this._ddronr=!convertStringToBoolean(d))};
dhtmlXTreeObject.prototype._setMove=function(b,d,e){if(b.parentObject.span){d=getAbsoluteTop(b);var f=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;if(2==this.dadmode)if(e=e-d+(document.body.scrollTop||document.documentElement.scrollTop)-2-b.offsetHeight/2,0<Math.abs(e)-b.offsetHeight/6){if(this.dadmodec=1,0>e)this.dadmodefix=0-b.offsetHeight}else this.dadmodec=0;0==this.dadmodec?(b=b.parentObject.span,b.className+=" dragAndDropRow",this._lastMark=
b):(this._clearMove(),this.selectionBar.style.top=d-f+((parseInt(b.parentObject.span.parentNode.previousSibling.childNodes[0].style.height)||18)-1)+this.dadmodefix+"px",this.selectionBar.style.left="5px",20<this.allTree.offsetWidth&&(this.selectionBar.style.width=this.allTree.offsetWidth-(_isFF?30:25)+"px"),this.selectionBar.style.display="");this._autoScroll(null,d,f)}};
dhtmlXTreeObject.prototype._autoScroll=function(b,d,e){this.autoScroll&&(b&&(d=getAbsoluteTop(b),e=getAbsoluteTop(this.allTree)),d-e-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),d-e<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))};
dhtmlXTreeObject.prototype._createDragNode=function(b,d){if(!this.dADTempOff)return null;var e=b.parentObject;if(!this.callEvent("onBeforeDrag",[e.id,d]))return null;e.i_sel||this._selectItem(e,d);this._checkMSelectionLogic();var e=document.createElement("div"),f=[];if(this._itim_dg)for(var g=0;g<this._selected.length;g++)f[g]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[g].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+
this._selected[g].span.innerHTML+"</td></tr></table>";else f=this.getSelectedItemText().split(this.dlmtr);e.innerHTML=f.join("");e.style.position="absolute";e.className="dragSpanDiv";this._dragged=[].concat(this._selected);return e};dhtmlXTreeObject.prototype._focusNode=function(b){b=getAbsoluteTop(b.htmlNode)-getAbsoluteTop(this.allTree);if(b>this.allTree.offsetHeight-30||0>b)this.allTree.scrollTop=b+this.allTree.scrollTop};
dhtmlXTreeObject.prototype._preventNsDrag=function(b){b&&b.preventDefault&&b.preventDefault();return!1};
dhtmlXTreeObject.prototype._drag=function(b,d,e){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer);e.parentObject||(e=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0);this._clearMove();(d=b.parentObject.treeNod)&&d._clearMove&&d._clearMove("");if(!this.dragMove||this.dragMove()){b=!d||!d._clearMove||!d._dragged?Array(b.parentObject):d._dragged;e=e.parentObject;for(var f=0;f<b.length;f++){var g=this._moveNode(b[f],e);this.dadmodec&&!1!==g&&(e=this._globalIdStorageFind(g,
!0,!0));g&&!this._sADnD&&this.selectItem(g,0,1)}}d&&(d._dragged=[])};
dhtmlXTreeObject.prototype._dragIn=function(b,d,e,f){if(!this.dADTempOff)return 0;var g=d.parentObject;if((d=b.parentObject)||!this._ddronr){if(!this.callEvent("onDragIn",[g.id,d?d.id:null,g.treeNod,this]))return d&&this._autoScroll(b),0;if(d){if(null==g.childNodes)return this._setMove(b,e,f),b;for(var g=g.treeNod,h=0;h<g._dragged.length;h++)if(this._checkPNodes(d,g._dragged[h]))return this._autoScroll(b),0;this.selectionBar.parentNode.removeChild(this.selectionBar);d.span.parentNode.appendChild(this.selectionBar);
this._setMove(b,e,f);0>=this._getOpenState(d)&&(this._autoOpenId=d.id,this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1E3))}else this.allTree.className+=" selectionBox";return b}};dhtmlXTreeObject.prototype._autoOpenItem=function(b,d){d.openItem(d._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(){this._clearMove();this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)};
dhtmlXTreeObject.prototype._getNextNode=function(b,d){return!d&&b.childsCount?b.childNodes[0]:b==this.htmlNode?-1:b.tr&&b.tr.nextSibling&&b.tr.nextSibling.nodem?b.tr.nextSibling.nodem:this._getNextNode(b.parentObject,!0)};dhtmlXTreeObject.prototype._lastChild=function(b){return b.childsCount?this._lastChild(b.childNodes[b.childsCount-1]):b};
dhtmlXTreeObject.prototype._getPrevNode=function(b){return b.tr&&b.tr.previousSibling&&b.tr.previousSibling.nodem?this._lastChild(b.tr.previousSibling.nodem):b.parentObject?b.parentObject:-1};dhtmlXTreeObject.prototype.findItemQuiet=function(b,d,e){return(b=this._findNodeByLabel(b,d,e?this.htmlNode:null))?(this.selectItem(b.id,!1),this._focusNode(b),b.id):null};
dhtmlXTreeObject.prototype.findItem=function(b,d,e){return(b=this._findNodeByLabel(b,d,e?this.htmlNode:null))?(this.selectItem(b.id,!0),this._focusNode(b),b.id):null};dhtmlXTreeObject.prototype.findItemIdByLabel=function(b,d,e){return(b=this._findNodeByLabel(b,d,e?this.htmlNode:null))?b.id:null};
dhtmlXTreeObject.prototype.findStrInXML=function(b,d,e){if(!b.childNodes&&b.item)return this.findStrInJSON(b,d,e);for(var f=0;f<b.childNodes.length;f++)if(1==b.childNodes[f].nodeType){var g=b.childNodes[f].getAttribute(d);!g&&"itemtext"==b.childNodes[f].tagName&&(g=b.childNodes[f].firstChild.data);if(g&&-1!=g.toLowerCase().search(e)||this.findStrInXML(b.childNodes[f],d,e))return!0}return!1};
dhtmlXTreeObject.prototype.findStrInJSON=function(b,d,e){for(var f=0;f<b.item.length;f++){var g=b.item[f].text;if(g&&-1!=g.toLowerCase().search(e)||b.item[f].item&&this.findStrInJSON(b.item[f],d,e))return!0}return!1};
dhtmlXTreeObject.prototype._findNodeByLabel=function(b,d,e){b=b.replace(/^( )+/,"").replace(/( )+$/,"");b=b.replace(/([\?\*\+\\\[\]\(\)]{1})/gi,"\\$1");b=this._filter_or?b.replace(/ /gi,"|"):b.replace(/ /gi,".*");b=RegExp(b,"gi");if(!e&&(e=this._selected[0],!e))e=this.htmlNode;var f=e;if(d){var g=this._getPrevNode(f);-1==g&&(g=this._lastChild(this.htmlNode));g.unParsed&&this.findStrInXML(g.unParsed.d,"text",b)?(this.reParse(g),e=this._getPrevNode(f)):e=g;-1==e&&(e=this._lastChild(this.htmlNode))}else e.unParsed&&
this.findStrInXML(e.unParsed.d,"text",b)&&this.reParse(e),e=this._getNextNode(f),-1==e&&(e=this.htmlNode.childNodes[0]);for(;e&&e!=f;){if(e.label&&-1!=e.label.search(b))return e;if(d)g=this._getPrevNode(e),-1==g&&(g=this._lastChild(this.htmlNode)),g.unParsed&&this.findStrInXML(g.unParsed.d,"text",b)?(this.reParse(g),e=this._getPrevNode(e)):e=g,-1==e&&(e=this._lastChild(this.htmlNode));else{if(-1==e){if(f==this.htmlNode)break;e=this.htmlNode.childNodes[0]}e.unParsed&&this.findStrInXML(e.unParsed.d,
"text",b)&&this.reParse(e);e=this._getNextNode(e);-1==e&&(e=this.htmlNode)}}return null};
dhtmlXTreeObject.prototype.moveItem=function(b,d,e,f){b=this._globalIdStorageFind(b);if(!b)return 0;switch(d){case "right":alert("Not supported yet");break;case "item_child":d=(f||this)._globalIdStorageFind(e);if(!d)return 0;(f||this)._moveNodeTo(b,d,0);break;case "item_sibling":d=(f||this)._globalIdStorageFind(e);if(!d)return 0;(f||this)._moveNodeTo(b,d.parentObject,d);break;case "item_sibling_next":d=(f||this)._globalIdStorageFind(e);if(!d)return 0;d.tr&&d.tr.nextSibling&&d.tr.nextSibling.nodem?
(f||this)._moveNodeTo(b,d.parentObject,d.tr.nextSibling.nodem):(f||this)._moveNodeTo(b,d.parentObject);break;case "left":b.parentObject.parentObject&&this._moveNodeTo(b,b.parentObject.parentObject,b.parentObject);break;case "up":f=this._getPrevNode(b);if(-1==f||!f.parentObject)return;this._moveNodeTo(b,f.parentObject,f);break;case "up_strict":f=this._getIndex(b);0!=f&&this._moveNodeTo(b,b.parentObject,b.parentObject.childNodes[f-1]);break;case "down_strict":f=this._getIndex(b);d=b.parentObject.childsCount-
2;f==d?this._moveNodeTo(b,b.parentObject):f<d&&this._moveNodeTo(b,b.parentObject,b.parentObject.childNodes[f+2]);break;case "down":f=this._getNextNode(this._lastChild(b));if(-1==f||!f.parentObject)return;f.parentObject==b.parentObject&&(f=this._getNextNode(f));if(-1==f)this._moveNodeTo(b,b.parentObject);else{if(-1==f||!f.parentObject)return;this._moveNodeTo(b,f.parentObject,f)}}_isIE&&8>_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0")};
dhtmlXTreeObject.prototype.setDragBehavior=function(b,d){this._sADnD=!convertStringToBoolean(d);switch(b){case "child":this.dadmode=0;break;case "sibling":this.dadmode=1;break;case "complex":this.dadmode=2}};
dhtmlXTreeObject.prototype._loadDynXML=function(b,d){d=d||this.XMLsource;var e=(new Date).valueOf();this._ld_id=b;var f=(this._dataProcessor?"&pid=":"&id=")+this._escape(b);"function"==this.xmlalb?d&&d(this._escape(b)):"name"==this.xmlalb?this.loadXML(d+this._escape(b)+"&dhx_srnd=1"):"xmlname"==this.xmlalb?this.loadXML(d+this._escape(b)+".xml?uid="+e):this.loadXML(d+getUrlSymbol(d)+"uid="+e+f+"&dhx_srnd=1")};
dhtmlXTreeObject.prototype.enableMultiselection=function(b,d){this._amsel=convertStringToBoolean(b);this._amselS=convertStringToBoolean(d)};dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){for(var b=[],d=0;d<this._selected.length;d++)for(var e=0;e<this._selected.length;e++)d!=e&&this._checkPNodes(this._selected[e],this._selected[d])&&(b[b.length]=this._selected[e]);for(d=0;d<b.length;d++)this._unselectItem(b[d])};
dhtmlXTreeObject.prototype._checkPNodes=function(b,d){return this._dcheckf?!1:d==b?1:b.parentObject?this._checkPNodes(b.parentObject,d):0};dhtmlXTreeObject.prototype.disableDropCheck=function(b){this._dcheckf=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.enableDistributedParsing=function(b,d,e){this._edsbps=convertStringToBoolean(b);this._edsbpsA=[];this._edsbpsC=d||10;this._edsbpsD=e||250};dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return!(!this._edsbpsA||!this._edsbpsA.length)};
dhtmlXTreeObject.prototype.getItemParsingState=function(b){if(!this._globalIdStorageFind(b,!0,!0))return 0;if(this._edsbpsA)for(var d=0;d<this._edsbpsA.length;d++)if(this._edsbpsA[d][2]==b)return-1;return 1};dhtmlXTreeObject.prototype._distributedStart=function(b,d,e,f,g){this._edsbpsA||(this._edsbpsA=[]);this._edsbpsA[this._edsbpsA.length]=[b,d,e,f,g]};
dhtmlXTreeObject.prototype._distributedStep=function(b){var d=this;if(!this._edsbpsA||!this._edsbpsA.length)d.XMLloadingWarning=0;else{var e=this._edsbpsA[0];this.parsedArray=[];this._parse(e[0],e[2],e[3],e[1]);var f=this._globalIdStorageFind(e[2]);this._redrawFrom(this,f,e[4],this._getOpenState(f));e=this.setCheckList.split(this.dlmtr);for(f=0;f<e.length;f++)e[f]&&this.setCheck(e[f],1);this._edsbpsA=[].concat(this._edsbpsA.slice(1));this._edsbpsA.length||(window.setTimeout(function(){if(d.onXLE)d.onXLE(d,
b);d.callEvent("onXLE",[d,b])},1),d.xmlstate=0)}};dhtmlXTreeObject.prototype.enableTextSigns=function(b){this._txtimg=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.preventIECaching=function(b){this.no_cashe=convertStringToBoolean(b);this.XMLLoader.rSeed=this.no_cashe};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;
dhtmlXTreeObject.prototype.disableCheckbox=function(b,d){var e="object"!=typeof b?this._globalIdStorageFind(b,0,1):b;if(e&&(e.dscheck=convertStringToBoolean(d)?(e.checkstate||0)%3+3:2<e.checkstate?e.checkstate-3:e.checkstate,this._setCheck(e),3>e.dscheck))e.dscheck=!1};dhtmlXTreeObject.prototype.smartRefreshBranch=function(b,d){this._branchUpdate=1;this.smartRefreshItem(b,d)};
dhtmlXTreeObject.prototype.smartRefreshItem=function(b,d){for(var e=this._globalIdStorageFind(b),f=0;f<e.childsCount;f++)e.childNodes[f]._dmark=!0;this.waitUpdateXML=!0;d&&d.exists?this._parse(d,b):this._loadDynXML(b,d)};dhtmlXTreeObject.prototype.refreshItems=function(b,d){var e=b.toString().split(this.dlmtr);this.waitUpdateXML=[];for(var f=0;f<e.length;f++)this.waitUpdateXML[e[f]]=!0;this.loadXML((d||this.XMLsource)+getUrlSymbol(d||this.XMLsource)+"ids="+this._escape(b))};
dhtmlXTreeObject.prototype.updateItem=function(b,d,e,f,g,h,l){var m=this._globalIdStorageFind(b);m.userData=new cObject;d&&(m.label=d);m.images=[e||this.imageArray[0],f||this.imageArray[1],g||this.imageArray[2]];this.setItemText(b,d);h&&this._setCheck(m,!0);"1"==l&&(m.XMLload=0);this._correctPlus(m);m._dmark=!1;return m};dhtmlXTreeObject.prototype.setDropHandler=function(b){this.attachEvent("onDrop",b)};dhtmlXTreeObject.prototype.setOnLoadingStart=function(b){this.attachEvent("onXLS",b)};
dhtmlXTreeObject.prototype.setOnLoadingEnd=function(b){this.attachEvent("onXLE",b)};dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(b){this.xmlalb=b};dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(b){this.smcheck=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.getXMLState=function(){return 1==this.xmlstate};
dhtmlXTreeObject.prototype.setItemTopOffset=function(b,d){var e="string"==typeof b?this._globalIdStorageFind(b):b,f=e.span.parentNode.parentNode;e.span.style.paddingBottom="1px";for(var g=0;g<f.childNodes.length;g++){if(0!=g)_isIE?(f.childNodes[g].style.height="18px",f.childNodes[g].style.paddingTop=parseInt(d)+"px"):f.childNodes[g].style.height=18+parseInt(d)+"px";else{var h=f.childNodes[g].firstChild;"DIV"!=f.childNodes[g].firstChild.tagName&&(h=document.createElement("DIV"),f.childNodes[g].insertBefore(h,
f.childNodes[g].firstChild));h.style.height=parseInt(d)+"px";if((e.parentObject.id!=this.rootId||e.parentObject.childNodes[0]!=e)&&this.treeLinesOn)h.style.backgroundImage="url("+this.imPath+this.lineArray[5]+")";h.innerHTML="&nbsp;";h.style.overflow="hidden";0==parseInt(d)&&f.childNodes[g].removeChild(h)}_isIE||(f.childNodes[g].style.verticalAlign="bottom");_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0")}};
dhtmlXTreeObject.prototype.setIconSize=function(b,d,e){if(e){e=e&&e.span?e:this._globalIdStorageFind(e);if(!e)return 0;e=e.span.parentNode.previousSibling.childNodes[0];if(b&&(e.style.width=b,window._KHTMLrv))e.parentNode.style.width=b;if(d&&(e.style.height=d,window._KHTMLrv))e.parentNode.style.height=d}else this.def_img_x=b,this.def_img_y=d};dhtmlXTreeObject.prototype.getItemImage=function(b,d,e){b=this._getItemById(b);if(!b)return"";d=b.images[d||0];e&&(d=this.iconURL+d);return d};
dhtmlXTreeObject.prototype.enableRadioButtons=function(b,d){if(1==arguments.length)this._frbtr=convertStringToBoolean(b),this.checkBoxOff=this.checkBoxOff||this._frbtr;else{var e=this._globalIdStorageFind(b);if(!e)return"";if((d=convertStringToBoolean(d))&&!e._r_logic){e._r_logic=!0;for(var f=0;f<e.childsCount;f++)this._setCheck(e.childNodes[f],e.childNodes[f].checkstate)}if(!d&&e._r_logic){e._r_logic=!1;for(f=0;f<e.childsCount;f++)this._setCheck(e.childNodes[f],e.childNodes[f].checkstate)}}};
dhtmlXTreeObject.prototype.enableSingleRadioMode=function(b){this._frbtrs=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.openOnItemAdded=function(b){this._hAdI=!convertStringToBoolean(b)};dhtmlXTreeObject.prototype.openOnItemAdding=function(b){this._hAdI=!convertStringToBoolean(b)};dhtmlXTreeObject.prototype.enableMultiLineItems=function(b){this.mlitems=!0===b?"100%":b};dhtmlXTreeObject.prototype.enableAutoTooltips=function(b){this.ettip=convertStringToBoolean(b)};
dhtmlXTreeObject.prototype.clearSelection=function(b){b?this._unselectItem(this._globalIdStorageFind(b)):this._unselectItems()};dhtmlXTreeObject.prototype.showItemSign=function(b,d){var e=this._globalIdStorageFind(b);if(!e)return 0;convertStringToBoolean(d)?(e.closeble=!0,e.wsign=!1):(this._openItem(e),e.closeble=!1,e.wsign=!0);this._correctPlus(e)};
dhtmlXTreeObject.prototype.showItemCheckbox=function(b,d){if(!b)for(var e in this._idpull)this.showItemCheckbox(this._idpull[e],d);"object"!=typeof b&&(b=this._globalIdStorageFind(b,0,0));if(!b)return 0;b.nocheckbox=!convertStringToBoolean(d);e=b.span.parentNode.previousSibling.previousSibling.childNodes[0];e.style.display=!b.nocheckbox?"":"none";window._KHTMLrv&&(e.parentNode.style.display=!b.nocheckbox?"":"none")};dhtmlXTreeObject.prototype.setListDelimeter=function(b){this.dlmtr=b};
dhtmlXTreeObject.prototype.setEscapingMode=function(b){this.utfesc=b};dhtmlXTreeObject.prototype.enableHighlighting=function(b){this.ehlt=!0;this.ehlta=convertStringToBoolean(b)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var b=this.childNodes[3].parentObject,d=b.treeNod;d.callEvent("onMouseOut",[b.id]);b.id==d._l_onMSI&&(d._l_onMSI=null);d.ehlta&&(b.span.className=b.span.className.replace("_lor",""))};
dhtmlXTreeObject.prototype._itemMouseIn=function(){var b=this.childNodes[3].parentObject,d=b.treeNod;d._l_onMSI!=b.id&&d.callEvent("onMouseIn",[b.id]);d._l_onMSI=b.id;d.ehlta&&(b.span.className=b.span.className.replace("_lor",""),b.span.className=b.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))};dhtmlXTreeObject.prototype.cl=function(b){this._aimgs=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.focusItem=function(b){b=this._globalIdStorageFind(b);if(!b)return 0;this._focusNode(b)};
dhtmlXTreeObject.prototype.getAllSubItems=function(b){return this._getAllSubItems(b)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;
dhtmlXTreeObject.prototype._getAllScraggyItems=function(b){for(var d="",e=0;e<b.childsCount;e++)if(b.childNodes[e].unParsed||0<b.childNodes[e].childsCount){var f=b.childNodes[e].unParsed?this._getAllScraggyItemsXML(b.childNodes[e].unParsed,1):this._getAllScraggyItems(b.childNodes[e]);f&&(d?d+=this.dlmtr+f:d=f)}else d?d+=this.dlmtr+b.childNodes[e].id:d=b.childNodes[e].id;return d};
dhtmlXTreeObject.prototype._getAllFatItems=function(b){for(var d="",e=0;e<b.childsCount;e++)if(b.childNodes[e].unParsed||0<b.childNodes[e].childsCount){d?d+=this.dlmtr+b.childNodes[e].id:d=b.childNodes[e].id;var f=b.childNodes[e].unParsed?this._getAllFatItemsXML(b.childNodes[e].unParsed,1):this._getAllFatItems(b.childNodes[e]);f&&(d+=this.dlmtr+f)}return d};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};
dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(b){b&&(b=this._globalIdStorageFind(b));return this._getAllChecked(b,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};
dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var b=[this._getAllChecked("","",1)],d=this._getAllChecked("","",2);d&&b.push(d);return b.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(b,d,e){b||(b=this.htmlNode);b.checkstate==e&&!b.nocheckbox&&(d?d+=this.dlmtr+b.id:d=b.id);for(var f=b.childsCount,g=0;g<f;g++)d=this._getAllChecked(b.childNodes[g],d,e);b.unParsed&&(d=this._getAllCheckedXML(b.unParsed,d,e));return d?d:""};
dhtmlXTreeObject.prototype.setItemStyle=function(b,d,e){e=e||!1;b=this._globalIdStorageFind(b);if(!b)return 0;b.span.style.cssText?b.span.style.cssText=e?d:b.span.style.cssText+";"+d:b.span.setAttribute("style",b.span.getAttribute("style")+"; "+d)};dhtmlXTreeObject.prototype.enableImageDrag=function(b){this._itim_dg=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setOnDragIn=function(b){this.attachEvent("onDragIn",b)};
dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(b){this.autoScroll=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setSkin=function(b){var d=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=d+" dhxtree_"+b};
(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(b){return[b.parent,b.width||"100%",b.height||"100%",b.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",
editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",
xml:"loadXML",skin:"setSkin"},{})})();
dhtmlXTreeObject.prototype._dp_init=function(b){b.attachEvent("insertCallback",function(b,e,f){b=this._loader.doXPath(".//item",b)[0].getAttribute("text");this.obj.insertNewItem(f,e,b,0,0,0,0,"CHILD")});b.attachEvent("updateCallback",function(b,e,f){b=this._loader.doXPath(".//item",b)[0].getAttribute("text");this.obj.setItemText(e,b);this.obj.getParentId(e)!=f&&this.obj.moveItem(e,"item_child",f);this.setUpdated(e,!0,"updated")});b.attachEvent("deleteCallback",function(b,e){this.obj.setUserData(e,
this.action_param,"true_deleted");this.obj.deleteItem(e,!1)});b._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(d,e){3==d&&b.setUpdated(e,!0);return!0});this.attachEvent("onDrop",function(d,e,f,g,h){g==h&&b.setUpdated(d,!0)});this._onrdlh=function(d){var e=b.getState(d);if("inserted"==e)return b.set_invalid(d,!1),b.setUpdated(d,!1),!0;if("true_deleted"==e)return b.setUpdated(d,!1),!0;b.setUpdated(d,!0,"deleted");return!1};this._onradh=function(d){b.setUpdated(d,
!0,"inserted")};b._getRowData=function(b){var e={};b=this.obj._globalIdStorageFind(b);for(var f=b.parentObject,g=0,g=0;g<f.childsCount&&f.childNodes[g]!=b;g++);e.tr_id=b.id;e.tr_pid=f.id;e.tr_order=g;e.tr_text=b.span.innerHTML;f=(b._userdatalist||"").split(",");for(g=0;g<f.length;g++)e[f[g]]=b.userData["t_"+f[g]];return e}};dhtmlXTreeObject.prototype.parserExtension={_parseExtension:function(b,d){this._idpull[d.id]._attrs=d}};
dhtmlXTreeObject.prototype.getAttribute=function(b,d){this._globalIdStorageFind(b);var e=this._idpull[b]._attrs;return e?e[d]:window.undefined};dhtmlXTreeObject.prototype.setAttribute=function(b,d,e){this._globalIdStorageFind(b);var f=this._idpull[b]._attrs||{};f[d]=e;this._idpull[b]._attrs=f};
dhtmlXTreeObject.prototype.makeDraggable=function(b,d){"object"!=typeof b&&(b=document.getElementById(b));dragger=new dhtmlDragAndDropObject;dropper=new dhx_dragSomethingInTree;dragger.addDraggableItem(b,dropper);b.dragLanding=null;b.ondragstart=dropper._preventNsDrag;b.onselectstart=new Function("return false;");b.parentObject={};b.parentObject.img=b;b.parentObject.treeNod=dropper;dropper._customDrop=d};dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable;
dhtmlXTreeObject.prototype.makeAllDraggable=function(b){for(var d=document.getElementsByTagName("div"),e=0;e<d.length;e++)d[e].getAttribute("dragInDhtmlXTree")&&this.makeDragable(d[e],b)};
function dhx_dragSomethingInTree(){this.lWin=window;this._createDragNode=function(b){var d=document.createElement("div");d.style.position="absolute";d.innerHTML=b.innerHTML||b.value;d.className="dragSpanDiv";return d};this._preventNsDrag=function(b){(b||window.event).cancelBubble=!0;b&&b.preventDefault&&b.preventDefault();return!1};this._nonTrivialNode=function(b,d,e,f){if(this._customDrop)return this._customDrop(b,f.img.id,d.id,e?e.id:null);var g=f.img.getAttribute("image")||"",h=f.img.id||"new";
f=f.img.getAttribute("text")||(_isIE?f.img.innerText:f.img.textContent);b[e?"insertNewNext":"insertNewItem"](e?e.id:d.id,h,f,"",g,g,g)}}
dhtmlXTreeObject.prototype.enableItemEditor=function(b){this._eItEd=convertStringToBoolean(b);this._eItEdFlag||(this._edn_dblclick=this._edn_click_IE=!0,this._ie_aFunc=this.aFunc,this._ie_dblclickFuncHandler=this.dblclickFuncHandler,this.setOnDblClickHandler(function(b,e){this._edn_dblclick&&this._editItem(b,e);return!0}),this.setOnClickHandler(function(b,e){this._stopEditItem(b,e);this.ed_hist_clcik==b&&this._edn_click_IE&&this._editItem(b,e);this.ed_hist_clcik=b;return!0}),this._eItEdFlag=!0)};
dhtmlXTreeObject.prototype.setOnEditHandler=function(b){this.attachEvent("onEdit",b)};dhtmlXTreeObject.prototype.setEditStartAction=function(b,d){this._edn_click_IE=convertStringToBoolean(b);this._edn_dblclick=convertStringToBoolean(d)};
dhtmlXTreeObject.prototype._stopEdit=function(b){if(this._editCell&&(this.dADTempOff=this.dADTempOffEd,this._editCell.id!=b)){var d=!0,d=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value]);!0===d?d=this._editCell.span.childNodes[0].value:!1===d&&(d=this._editCell._oldValue);b=d!=this._editCell._oldValue;this._editCell.span.innerHTML=d;this._editCell.label=this._editCell.span.innerHTML;this._editCell.span.className=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";
this._editCell.span.parentNode.className="standartTreeRow";this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px";this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};d=this._editCell.id;this.childCalc&&this._fixChildCountLabel(this._editCell);this._editCell=null;this.callEvent("onEdit",[3,d,this,b]);this._enblkbrd&&(this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus())}};dhtmlXTreeObject.prototype._stopEditItem=function(b){this._stopEdit(b)};
dhtmlXTreeObject.prototype.stopEdit=function(){this._editCell&&this._stopEdit(this._editCell.id+"_non")};dhtmlXTreeObject.prototype.editItem=function(b){this._editItem(b,this)};
dhtmlXTreeObject.prototype._editItem=function(b){if(this._eItEd){this._stopEdit();var d=this._globalIdStorageFind(b);if(d){editText=this.callEvent("onEdit",[0,b,this,d.span.innerHTML]);if(!0===editText)editText=d.span.innerText||d.span.textContent;else if(!1===editText)return;this.dADTempOffEd=this.dADTempOff;this.dADTempOff=!1;this._editCell=d;d._oldValue=editText;d.span.innerHTML="<input type='text' class='intreeeditRow' />";d.span.style.paddingRight=d.span.style.paddingLeft="0px";d.span.onclick=
d.span.ondblclick=function(b){(b||event).cancelBubble=!0};d.span.childNodes[0].value=editText;d.span.childNodes[0].onselectstart=function(b){return(b||event).cancelBubble=!0};d.span.childNodes[0].onmousedown=function(b){return(b||event).cancelBubble=!0};d.span.childNodes[0].focus();d.span.childNodes[0].focus();d.span.onclick=function(b){(b||event).cancelBubble=!0;return!1};d.span.className="";d.span.parentNode.className="";var e=this;d.span.childNodes[0].onkeydown=function(b){b||(b=window.event);
13==b.keyCode?(b.cancelBubble=!0,e._stopEdit(window.undefined)):27==b.keyCode&&(e._editCell.span.childNodes[0].value=e._editCell._oldValue,e._stopEdit(window.undefined));(b||event).cancelBubble=!0};this.callEvent("onEdit",[1,b,this])}}};function jsonPointer(b,d){this.d=b;this.dp=d}
jsonPointer.prototype={text:function(){var b=function(b){for(var f=[],g=0;g<b.length;g++)f.push("{"+d(b[g])+"}");return f.join(",")},d=function(e){var f=[],g;for(g in e)"object"==typeof e[g]?g.length?f.push('"'+g+'":['+b(e[g])+"]"):f.push('"'+g+'":{'+d(e[g])+"}"):f.push('"'+g+'":"'+e[g]+'"');return f.join(",")};return"{"+d(this.d)+"}"},get:function(b){return this.d[b]},exists:function(){return!!this.d},content:function(){return this.d.content},each:function(b,d,e){b=this.d[b];var f=new jsonPointer;
if(b)for(var g=0;g<b.length;g++)f.d=b[g],d.apply(e,[f,g])},get_all:function(){return this.d},sub:function(b){return new jsonPointer(this.d[b],this.d)},sub_exists:function(b){return!!this.d[b]},each_x:function(b,d,e,f,g){b=this.d[b];var h=new jsonPointer(0,this.d);if(b)for(g=g||0;g<b.length&&(!b[g][d]||!(h.d=b[g],-1==e.apply(f,[h,g])));g++);},up:function(){return new jsonPointer(this.dp,this.d)},set:function(b,d){this.d[b]=d},clone:function(){return new jsonPointer(this.d,this.dp)},through:function(b,
d,e,f,g){var h=this.d[b];if(h.length)for(var l=0;l<h.length;l++){if(null!=h[l][d]&&""!=h[l][d]&&(!e||h[l][d]==e)){var m=new jsonPointer(h[l],this.d);f.apply(g,[m,l])}m=this.d;this.d=h[l];this.sub_exists(b)&&this.through(b,d,e,f,g);this.d=m}}};
dhtmlXTreeObject.prototype.loadJSArrayFile=function(b,d){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var e=this;this.XMLLoader=new dtmlXMLLoaderObject(function(b,d,h,l,m){eval("var z="+m.xmlDoc.responseText);e.loadJSArray(z)},this,!0,this.no_cashe);d&&(this.XMLLoader.waitCall=d);this.XMLLoader.loadXML(b)};
dhtmlXTreeObject.prototype.loadCSV=function(b,d){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var e=this;this.XMLLoader=new dtmlXMLLoaderObject(function(b,d,h,l,m){e.loadCSVString(m.xmlDoc.responseText)},this,!0,this.no_cashe);d&&(this.XMLLoader.waitCall=d);this.XMLLoader.loadXML(b)};
dhtmlXTreeObject.prototype.loadJSArray=function(b,d){for(var e=[],f=0;f<b.length;f++)e[b[f][1]]||(e[b[f][1]]=[]),e[b[f][1]].push({id:b[f][0],text:b[f][2]});var f={id:this.rootId},g=function(b,d){if(e[b.id]){b.item=e[b.id];for(var f=0;f<b.item.length;f++)d(b.item[f],d)}};g(f,g);this.loadJSONObject(f,d)};
dhtmlXTreeObject.prototype.loadCSVString=function(b,d){for(var e=[],f=b.split("\n"),g=0;g<f.length;g++){var h=f[g].split(",");e[h[1]]||(e[h[1]]=[]);e[h[1]].push({id:h[0],text:h[2]})}f={id:this.rootId};g=function(b,d){if(e[b.id]){b.item=e[b.id];for(var f=0;f<b.item.length;f++)d(b.item[f],d)}};g(f,g);this.loadJSONObject(f,d)};
dhtmlXTreeObject.prototype.loadJSONObject=function(b,d){this.parsCount||this.callEvent("onXLS",[this,null]);this.xmlstate=1;var e=new jsonPointer(b);this._parse(e);this._p=e;d&&d()};
dhtmlXTreeObject.prototype.loadJSON=function(b,d){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var e=this;this.XMLLoader=new dtmlXMLLoaderObject(function(b,d,h,l,m){try{eval("var t="+m.xmlDoc.responseText)}catch(k){dhtmlxError.throwError("LoadXML","Incorrect JSON",[m.xmlDoc,this]);return}b=new jsonPointer(t);e._parse(b);e._p=b},this,!0,this.no_cashe);d&&(this.XMLLoader.waitCall=d);this.XMLLoader.loadXML(b)};
dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var b=['{"id":"'+this.rootId+'", "item":['],d=[],e=0;e<this.htmlNode.childsCount;e++)d.push(this._serializeItemJSON(this.htmlNode.childNodes[e]));b.push(d.join(","));b.push("]}");return b.join("")};
dhtmlXTreeObject.prototype._serializeItemJSON=function(b,d){var e=[];if(b.unParsed)return b.unParsed.text();var f=this._selected.length?this._selected[0].id:"",g=b.span.innerHTML;if(this._xescapeEntities)for(var h=0;h<this._serEnts.length;h++)g=g.replace(this._serEnts[h][2],this._serEnts[h][1]);this._xfullXML?e.push('{ "id":"'+b.id+'", '+(1==this._getOpenState(b)?' "open":"1", ':"")+(f==b.id?' "select":"1",':"")+' "text":"'+g+'", "im0":"'+b.images[0]+'", "im1":"'+b.images[1]+'", "im2":"'+b.images[2]+
'" '+(b.acolor?', "aCol":"'+b.acolor+'" ':"")+(b.scolor?', "sCol":"'+b.scolor+'" ':"")+(1==b.checkstate?', "checked":"1" ':2==b.checkstate?', "checked":"-1"':"")+(b.closeable?', "closeable":"1" ':"")+(this.XMLsource&&0==b.XMLload?', "child":"1" ':"")):e.push('{ "id":"'+b.id+'", '+(1==this._getOpenState(b)?' "open":"1", ':"")+(f==b.id?' "select":"1",':"")+' "text":"'+g+'"'+(this.XMLsource&&0==b.XMLload?', "child":"1" ':""));if(this._xuserData&&b._userdatalist){e.push(', "userdata":[');d=b._userdatalist.split(",");
f=[];for(h=0;h<d.length;h++)f.push('{ "name":"'+d[h]+'" , "content":"'+b.userData["t_"+d[h]]+'" }');e.push(f.join(","));e.push("]")}if(b.childsCount){e.push(', "item":[');f=[];for(h=0;h<b.childsCount;h++)if(d){if(this._filteredNodes[b.childNodes[h].id]&&(f.push(this._serializeItemJSON(b.childNodes[h],d)),this._filteredNodes._filteredCount--),0==this._filteredNodes._filteredCount)break}else f.push(this._serializeItemJSON(b.childNodes[h]));e.push(f.join(","));e.push("]\n")}e.push("}\n");return e.join("")};
dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(b){if(this._enblkbrd=convertStringToBoolean(b)){if(_isFF){var d=window.getComputedStyle(this.parentObject,null).position;"absolute"!=d&&"relative"!=d&&(this.parentObject.style.position="relative")}this._navKeys=[["up",38],["down",40],["open",39],["close",37],["call",13],["edit",113]];var e=this,d=document.createElement("INPUT");d.className="a_dhx_hidden_input";d.autocomplete="off";window._KHTMLrv&&(d.style.color="white");this.parentObject.appendChild(d);
this.parentObject[_isOpera?"onkeypress":"onkeydown"]=function(b){if(e.callEvent("onKeyPress",[(b||window.event).keyCode,b||window.event]))return e._onKeyDown(b||window.event)};this.parentObject.onclick=function(){(_isFF||_isIE)&&d.select();(window._KHTMLrv||_isOpera)&&d.focus()}}else this.parentObject.onkeydown=null};
dhtmlXTreeObject.prototype._onKeyDown=function(b){for(var d=0;d<this._navKeys.length;d++)if(this._navKeys[d][1]==b.keyCode)return this["_onkey_"+this._navKeys[d][0]].apply(this,[this.getSelectedItemId()]),b.preventDefault&&b.preventDefault(),(b||event).cancelBubble=!0,!1;return this._textSearch?this._searchItemByKey(b):!0};dhtmlXTreeObject.prototype._onkey_up=function(b){if(b=this._globalIdStorageFind(b))b=this._getPrevVisibleNode(b),b.id!=this.rootId&&(this.focusItem(b.id),this.selectItem(b.id,!1))};
dhtmlXTreeObject.prototype._onkey_down=function(b){if(b=this._globalIdStorageFind(b))b=this._getNextVisibleNode(b),b.id!=this.rootId&&(this.focusItem(b.id),this.selectItem(b.id,!1))};dhtmlXTreeObject.prototype._onkey_open=function(b){this.openItem(b)};dhtmlXTreeObject.prototype._onkey_close=function(b){this.closeItem(b)};
dhtmlXTreeObject.prototype._onkey_call=function(b){this.stopEdit?(this.stopEdit(),this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus(),this.selectItem(b,!0)):this.selectItem(this.getSelectedItemId(),!0)};dhtmlXTreeObject.prototype._onkey_edit=function(b){this.editItem&&this.editItem(b)};
dhtmlXTreeObject.prototype._getNextVisibleNode=function(b,d){return!d&&0<this._getOpenState(b)?b.childNodes[0]:b.tr&&b.tr.nextSibling&&b.tr.nextSibling.nodem?b.tr.nextSibling.nodem:b.parentObject?this._getNextVisibleNode(b.parentObject,1):b};dhtmlXTreeObject.prototype._getPrevVisibleNode=function(b){return b.tr&&b.tr.previousSibling&&b.tr.previousSibling.nodem?this._lastVisibleChild(b.tr.previousSibling.nodem):b.parentObject?b.parentObject:b};
dhtmlXTreeObject.prototype._lastVisibleChild=function(b){return 0<this._getOpenState(b)?this._lastVisibleChild(b.childNodes[b.childsCount-1]):b};
dhtmlXTreeObject.prototype._searchItemByKey=function(b){if(8==b.keyCode)return this._textSearchString="",!0;var d=String.fromCharCode(b.keyCode).toUpperCase();return d.match(/[A-Z,a-z,0-9\ ]/)?(this._textSearchString+=d,this._textSearchInProgress=!0,(this.getSelectedItemText()||"").match(RegExp("^"+this._textSearchString,"i"))||this.findItem("^"+this._textSearchString,0),this._textSearchInProgress=!1,b.preventDefault&&b.preventDefault(),(b||event).cancelBubble=!0,!1):!0};
dhtmlXTreeObject.prototype.assignKeys=function(b){this._navKeys=b};dhtmlXTreeObject.prototype.enableKeySearch=function(b){if(this._textSearch=convertStringToBoolean(b)){this._textSearchString="";var d=this;this._markItem2=this._markItem;this._markItem=function(b){d._textSearchInProgress||(d._textSearchString="");d._markItem2(b)}}};dhtmlXTreeObject.prototype.enableLoadingItem=function(b){this.attachEvent("onXLS",this._showFakeItem);this.attachEvent("onXLE",this._hideFakeItem);this._tfi_text=b||"Loading..."};
dhtmlXTreeObject.prototype._showFakeItem=function(b,d){if(!(null===d||this._globalIdStorageFind("fake_load_xml_"+d))){var e=this.XMLsource;this.XMLsource=null;this.insertNewItem(d,"fake_load_xml_"+d,this._tfi_text);this.XMLsource=e}};dhtmlXTreeObject.prototype._hideFakeItem=function(b,d){null!==d&&this.deleteItem("fake_load_xml_"+d)};dhtmlXTreeObject.prototype.isLocked=function(b){this._locker||this._init_lock();return!0==this._locker[b]};
dhtmlXTreeObject.prototype._lockItem=function(b,d,e){this._locker||this._init_lock();if(d){if(!0==this._locker[b.id])return;this._locker[b.id]=!0;b.bIm0=b.images[0];b.bIm1=b.images[1];b.bIm2=b.images[2];b.images[0]=this.lico0;b.images[1]=this.lico1;b.images[2]=this.lico2;d=b.span.parentNode;var f=d.previousSibling;this.dragger.removeDraggableItem(d);this.dragger.removeDraggableItem(f)}else{if(!0!=this._locker[b.id])return;this._locker[b.id]=!1;b.images[0]=b.bIm0;b.images[1]=b.bIm1;b.images[2]=b.bIm2;
d=b.span.parentNode;f=d.previousSibling;this.dragger.addDraggableItem(d,this);this.dragger.addDraggableItem(f,this)}e||this._correctPlus(b)};dhtmlXTreeObject.prototype.lockItem=function(b,d){this._locker||this._init_lock();this._lockOn=!1;var e=this._globalIdStorageFind(b);this._lockOn=!0;this._lockItem(e,convertStringToBoolean(d))};dhtmlXTreeObject.prototype.setLockedIcons=function(b,d,e){this._locker||this._init_lock();this.lico0=b;this.lico1=d;this.lico2=e};
dhtmlXTreeObject.prototype._init_lock=function(){this._locker=[];this._locker_count="0";this._lockOn=!0;this._globalIdStorageFindA=this._globalIdStorageFind;this._globalIdStorageFind=this._lockIdFind;this._serializeItem&&(this._serializeItemA=this._serializeItem,this._serializeItem=this._serializeLockItem,this._serializeTreeA=this.serializeTree,this.serializeTree=this._serializeLockTree);this.setLockedIcons(this.imageArray[0],this.imageArray[1],this.imageArray[2])};
dhtmlXTreeObject.prototype._lockIdFind=function(b,d,e){return!this.skipLock&&!e&&!0==this._lockOn&&!0==this._locker[b]?null:this._globalIdStorageFindA(b,d,e)};dhtmlXTreeObject.prototype._serializeLockItem=function(b){return!0==this._locker[b.id]?"":this._serializeItemA(b)};dhtmlXTreeObject.prototype._serializeLockTree=function(){return this._serializeTreeA().replace(/<item[^>]+locked\=\"1\"[^>]+\/>/g,"")};dhtmlXTreeObject.prototype._moveNodeToA=dhtmlXTreeObject.prototype._moveNodeTo;
dhtmlXTreeObject.prototype._moveNodeTo=function(b,d,e){return d.treeNod.isLocked&&d.treeNod.isLocked(d.id)?!1:this._moveNodeToA(b,d,e)};dhtmlXTreeObject.prototype.lockTree=function(b){convertStringToBoolean(b)?this._initTreeLocker():this._TreeLocker&&(this._TreeLocker.parentNode.removeChild(this._TreeLocker),this._TreeLocker=null)};
dhtmlXTreeObject.prototype._initTreeLocker=function(){if(!this._TreeLocker){this.parentObject.style.overflow="hidden";"absolute"!=this.parentObject.style.position&&(this.parentObject.style.position="relative");var b=document.createElement("div");b.style.position="absolute";b.style.left="0px";b.style.top="0px";b.className="dhx_tree_opacity";b.style.width=this.allTree.offsetWidth+"px";b.style.backgroundColor="#FFFFFF";b.style.height=this.allTree.offsetHeight+"px";this._TreeLocker=b;this.parentObject.appendChild(this._TreeLocker)}};
dhtmlXTreeObject.prototype.enableRTL=function(b){if((b=convertStringToBoolean(b))&&!this.rtlMode||!b&&this.rtlMode)this.rtlMode=b,this._switchToRTL(this.rtlMode)};
dhtmlXTreeObject.prototype._switchToRTL=function(b){b?(this.allTree.className=this._ltr_line=this.lineArray,this._ltr_min=this.minusArray,this._ltr_plus=this.plusArray,this.lineArray="line2_rtl.gif line3_rtl.gif line4_rtl.gif blank.gif blank.gif line1_rtl.gif".split(" "),this.minusArray=["minus2_rtl.gif","minus3_rtl.gif","minus4_rtl.gif","minus.gif","minus5_rtl.gif"],this.plusArray=["plus2_rtl.gif","plus3_rtl.gif","plus4_rtl.gif","plus.gif","plus5_rtl.gif"],this.allTree.className="containerTableStyleRTL"):
(this.allTree.className="containerTableStyle",this.lineArray=this._ltr_line,this.minusArray=this._ltr_min,this.plusArray=this._ltr_plus);this.htmlNode.childsCount&&this._redrawFrom(this,this.htmlNode)};dhtmlXTreeObject.prototype.sortTree=function(b,d,e){b=this._globalIdStorageFind(b);if(!b)return!1;this._reorderBranch(b,"asc"==d.toString().toLowerCase(),convertStringToBoolean(e))};dhtmlXTreeObject.prototype.setCustomSortFunction=function(b){this._csfunca=b};
dhtmlXTreeObject.prototype._reorderBranch=function(b,d,e){var f=[],g=b.childsCount;if(g){for(var h=b.childNodes[0].tr.parentNode,l=0;l<g;l++)f[l]=b.childNodes[l],h.removeChild(f[l].tr);var m=this;1==d?this._csfunca?f.sort(function(b,d){return m._csfunca(b.id,d.id)}):f.sort(function(b,d){return b.span.innerHTML.toUpperCase()>d.span.innerHTML.toUpperCase()?1:b.span.innerHTML.toUpperCase()==d.span.innerHTML.toUpperCase()?0:-1}):this._csfunca?f.sort(function(b,d){return m._csfunca(d.id,b.id)}):f.sort(function(b,
d){return b.span.innerHTML.toUpperCase()<d.span.innerHTML.toUpperCase()?1:b.span.innerHTML.toUpperCase()==d.span.innerHTML.toUpperCase()?0:-1});for(l=0;l<g;l++)h.appendChild(f[l].tr),b.childNodes[l]=f[l],e&&f[l].unParsed?f[l].unParsed.set("order",d?1:-1):e&&f[l].childsCount&&this._reorderBranch(f[l],d,e);for(l=0;l<g;l++)this._correctPlus(f[l]),this._correctLine(f[l])}};
dhtmlXTreeObject.prototype._reorderXMLBranch=function(b){var d=b.getAttribute("order");if("none"!=d){var e=1==d,f=b.childNodes.length;if(f){for(var g=[],h=0,l=0;l<f;l++)1==b.childNodes[l].nodeType&&(g[h]=b.childNodes[l],h++);for(l=f-1;0!=l;l--)b.removeChild(b.childNodes[l]);e?g.sort(function(b,d){return b.getAttribute("text")>d.getAttribute("text")?1:b.getAttribute("text")==d.getAttribute("text")?0:-1}):g.sort(function(b,d){return b.getAttribute("text")<d.getAttribute("text")?1:b.getAttribute("text")==
d.getAttribute("text")?0:-1});for(l=0;l<h;l++)g[l].setAttribute("order",d),b.appendChild(g[l]);b.setAttribute("order","none")}}};dhtmlXTreeObject.prototype.enableSmartRendering=function(){this.enableSmartXMLParsing(!0);this._srnd=!0;this.itemHeight=18;var b=this;this.allTree.onscroll=function(){b._srndT||(b._srndT=window.setTimeout(function(){b._srndT=null;b._renderState()},300))};this.attachEvent("onXLE",function(){b._renderState()});this._singleTimeSRND()};
dhtmlXTreeObject.prototype._renderState=function(){this._idpull[this.rootId]._sready||this.prepareSR(this.rootId,!0);var b=this.allTree.scrollTop,d=Math.ceil(this.allTree.offsetHeight/this.itemHeight);this._group_render=!0;this._getItemByPos(b,this.itemHeight,d,null,!1,this._renderItemSRND);this._group_render=!1};
dhtmlXTreeObject.prototype._renderItemSRND=function(b,d){if(!b.span){b.span=-1;for(var e=b.parentObject.htmlNode.childNodes[0].childNodes,f=d*this.itemHeight,g=null,h=1;h<e.length;h++){var g=e[h],l=g.nodem?this.itemHeight:g.offsetHeight||parseInt(g.childNodes[1].firstChild.style.height),f=f-l;if(0>f)if(-1==f)f++;else{var m=g.childNodes[1].firstChild;m.style.height=parseInt(m.style.height)-(l-Math.abs(f)+this.itemHeight)+"px";Math.abs(f)!=l&&(e=this._drawNewHolder(f+l,!0),g.parentNode.insertBefore(e,
g));g.tr={nextSibling:g};break}}if(m&&"0px"!=m.style.height&&!g.offsetHeight){var k=this._hAdI;this._hAdI=!0}this._parseItem(b._sxml,b.parentObject,null,g);m&&("0px"!=m.style.height&&!g.offsetHeight)&&(this._hAdI=k);b.unParsed&&this._correctPlus(b);m&&"0px"==m.style.height&&g.parentNode.removeChild(g)}};
dhtmlXTreeObject.prototype._buildSRND=function(b,d){b.parentObject&&this._globalIdStorageFind(b.parentObject.id);this._idpull[this.rootId]._sready||this.prepareSR(this.rootId,!0);this._renderItemSRND(b,this._getIndex(b));b.unParsed&&!d&&this.reParse(b,0);b.prepareSR||this.prepareSR(b.id)};dhtmlXTreeObject.prototype._getIndex=function(b){for(var d=0;d<b.parentObject.childsCount;d++)if(b.parentObject.childNodes[d]==b)return d};
dhtmlXTreeObject.prototype.prepareSR=function(b,d){b=this._idpull[b];if(!b._sready){var e=this._drawNewHolder(this.itemHeight*b.childsCount,d);b.htmlNode.childNodes[0].appendChild(e);b._sready=!0}};
dhtmlXTreeObject.prototype._drawNewHolder=function(b,d){var e=document.createElement("TR"),f=document.createElement("TD"),g=document.createElement("TD"),h=document.createElement("DIV");h.innerHTML="&nbsp;";f.appendChild(h);e.appendChild(g);e.appendChild(f);d||(e.style.display="none");h.style.height=b+"px";return e};
dhtmlXTreeObject.prototype._getNextNodeSR=function(b,d){return!d&&b.childsCount?b.childNodes[0]:b==this.htmlNode?-1:b.tr&&b.tr.nextSibling&&b.tr.nextSibling.nodem?b.tr.nextSibling.nodem:this._getNextNode(b.parentObject,!0)};
dhtmlXTreeObject.prototype._getItemByPos=function(b,d,e,f,g,h){f||(this._pos_c=b,f=this._idpull[this.rootId]);for(b=0;b<f.childsCount;b++){this._pos_c-=d;0>=this._pos_c&&(g=!0);g&&(h.apply(this,[f.childNodes[b],b]),e--);if(0>e)break;if(f.childNodes[b]._open&&(e=this._getItemByPos(null,d,e,f.childNodes[b],g,h),0>e))break}return e};
dhtmlXTreeObject.prototype._addItemSRND=function(b,d,e){b=this._idpull[b];var f=b.childsCount,g=b.childNodes;g[f]=new dhtmlXTreeItemObject(d,"",b,this,null,1);itemId=g[f].id;g[f]._sxml=e.clone();b.childsCount++};
dhtmlXTreeObject.prototype._singleTimeSRND=function(){this._redrawFrom=function(){};var b=dhtmlXTreeItemObject;this._singleTimeSRND=function(){};window.dhtmlXTreeItemObject=function(d,e,f,g,h,l){if(!g._srnd)return b.call(this,d,e,f,g,h,l);this.scolor=this.acolor=this.htmlNode="";this.span=this.dragMove=this.dragSpan=this.tempDOMU=this.tempDOMM=this.childsCount=this.tr=0;this.closeble=1;this.childNodes=[];this.userData=new cObject;this.checkstate=0;this.treeNod=g;this.label=e;this.parentObject=f;this.actionHandler=
h;this.images=[g.imageArray[0],g.imageArray[1],g.imageArray[2]];this.id=g._globalIdStorageAdd(d,this);d==g.rootId&&(this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,l):this.treeNod._createItem(0,this,l),this.htmlNode.objBelong=this);return this};this.setCheckSR=this.setCheck;this.setCheck=function(b,e){this._globalIdStorageFind(b);return this.setCheckSR(b,e)};this._get_srnd_p=function(b){for(var e=[];b!=this.rootId;){for(var f=this.getParentId(b),g=0;g<this._idpull[f].childsCount;g++)if(this._idpull[f].childNodes[g].id==
b){e.push([f,g]);break}b=f}e.reverse();return e};this._get_srnd_p_last=function(b,e,f){e=e||[];for(var g=0;;){var h=this._idpull[b];h._sxml&&this.findStrInXML(h._sxml.d,"text",f)&&this._globalIdStorageFind(h.id);g=h.childsCount;if(!g)break;e.push([b,g-1]);b=h.childNodes[g-1].id}return e};this._get_prev_srnd=function(b,e){b.length||b.push.apply(b,this._get_srnd_p_last(0,null,e));var f=b[b.length-1];if(f[1])f[1]--,this._get_srnd_p_last(this._idpull[f[0]].childNodes[f[1]].id,b,e);else if(b.pop(),!b.length)return this._get_prev_srnd(b,
e);f=b[b.length-1];return this._idpull[f[0]].childNodes[f[1]]};this._get_next_srnd=function(b,e){if(!b.length)return b.push([this.rootId,0]),this._idpull[this.rootId].childNodes[0];var f=b[b.length-1],g=this._idpull[f[0]].childNodes[f[1]];if(g.childsCount&&!e)return b.push([g.id,0]),g.childNodes[0];f[1]++;if(g=this._idpull[f[0]].childNodes[f[1]])return g;b.pop();return!b.length?this.htmlNode:this._get_next_srnd(b,!0)};this._findNodeByLabel=function(b,e,f){b=b.replace(/^( )+/,"").replace(/( )+$/,"");
b=RegExp(b.replace(/([\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi");if(!f&&(f=this._selected[0],!f))f=this.htmlNode;for(var g=f,h=this._get_srnd_p(g.id);f=e?this._get_prev_srnd(h,b):this._get_next_srnd(h);){if(f.label){if(-1!=f.label.search(b))return f}else if(f._sxml){if(-1!=f._sxml.get("text").search(b))return f;this.findStrInXML(f._sxml.d,"text",b)&&this._globalIdStorageFind(f.id)}f.unParsed&&this.findStrInXML(f.unParsed.d,"text",b)&&this.reParse(f);if(g==f)break}return null};this.deleteChildItems=
function(b){if(this.rootId==b&&(this._selected=[],this._idpull={},this._p=this._pos_c=this._pullSize=null,this.allTree.removeChild(this.htmlNode.htmlNode),this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this),this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none",this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow",this.allTree.insertBefore(this.htmlNode.htmlNode,this.selectionBar),_isFF))this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow=
"hidden"};this._HideShow=function(b,e){if(this.XMLsource&&!b.XMLload)1!=e&&(b.XMLload=1,this._loadDynXML(b.id));else if(b.span||this._buildSRND(b),b.unParsed&&(this.reParse(b),this.prepareSR(b.id)),0!=b.childsCount){var f=b.htmlNode.childNodes[0].childNodes,g=f.length;if(1<g){if(("none"!=f[1].style.display||1==e)&&2!=e){this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";var h="none";b._open=!1}else h="",b._open=!0;for(var l=1;l<g;l++)f[l].style.display=h;this._renderState()}this._correctPlus(b)}}};
function dhtmlXTreeFromHTML(b){"object"!=typeof b&&(b=document.getElementById(b));for(var d,e=b.id,f="",g=0;g<b.childNodes.length;g++)if("1"==b.childNodes[g].nodeType){if("XMP"==b.childNodes[g].tagName)for(var g=b.childNodes[g],h=0;h<g.childNodes.length;h++)f+=g.childNodes[h].data;else"ul"==b.childNodes[g].tagName.toLowerCase()&&(f=dhx_li2trees(b.childNodes[g],[],0));break}b.innerHTML="";g=new dhtmlXTreeObject(b,"100%","100%",0);h=[];for(d in g)h[d.toLowerCase()]=d;d=b.attributes;for(var l=0;l<d.length;l++)if(0==
d[l].name.indexOf("set")||0==d[l].name.indexOf("enable")){var m=d[l].name;g[m]||(m=h[d[l].name]);g[m].apply(g,d[l].value.split(","))}if("object"==typeof f){g.XMLloadingWarning=1;for(h=0;h<f.length;h++)d=g.insertNewItem(f[h][0],f[h][3],f[h][1]),f[h][2]&&g._setCheck(d,f[h][2]);g.XMLloadingWarning=0;g.lastLoadedXMLId=0;g._redrawFrom(g)}else g.loadXMLString("<tree id='0'>"+f+"</tree>");window[e]=g;(b=b.getAttribute("oninit"))&&eval(b);return g}
function dhx_init_trees(){for(var b=document.getElementsByTagName("div"),d=0;d<b.length;d++)"dhtmlxTree"==b[d].className&&dhtmlXTreeFromHTML(b[d])}
function dhx_li2trees(b,d,e){for(var f=0;f<b.childNodes.length;f++){var g=b.childNodes[f];if(1==g.nodeType&&"li"==g.tagName.toLowerCase()){for(var h="",l=null,m=g.getAttribute("checked"),k=0;k<g.childNodes.length;k++){var n=g.childNodes[k];3==n.nodeType?h+=n.data:"ul"!=n.tagName.toLowerCase()?h+=dhx_outer_html(n):l=n}d[d.length]=[e,h,m,g.id||d.length+1];l&&(d=dhx_li2trees(l,d,g.id||d.length))}}return d}
function dhx_outer_html(b){if(b.outerHTML)return b.outerHTML;var d=document.createElement("DIV");d.appendChild(b.cloneNode(!0));return d.innerHTML}window.addEventListener?window.addEventListener("load",dhx_init_trees,!1):window.attachEvent&&window.attachEvent("onload",dhx_init_trees);dhtmlXTreeObject.prototype._serEnts=[["&","&amp;"],["<","&lt;"],[">","&gt;"]];dhtmlXTreeObject.prototype.registerXMLEntity=function(b,d){this._serEnts[this._serEnts.length]=[b,d,RegExp(b,"g")]};
dhtmlXTreeObject.prototype.setSerializationLevel=function(b,d,e,f,g){this._xuserData=convertStringToBoolean(b);this._xfullXML=convertStringToBoolean(d);this._dtd=g;this._xescapeEntities=convertStringToBoolean(e);convertStringToBoolean(f)&&(this._apreUC="<![CDATA[",this._apstUC="]]\x3e");for(b=0;b<this._serEnts.length;b++)this._serEnts[b][2]=RegExp(this._serEnts[b][0],"g")};
dhtmlXTreeObject.prototype.serializeTree=function(){this.stopEdit&&this.stopEdit();this._apreUC=this._apreUC||"";this._apstUC=this._apstUC||"";var b='<?xml version="1.0"?>';this._dtd&&(b+='<!DOCTYPE tree SYSTEM "'+this._dtd+'">');b+='<tree id="'+this.rootId+'">';if(this._xuserData&&this._idpull[this.rootId]._userdatalist)for(var d=this._idpull[this.rootId]._userdatalist.split(","),e=0;e<d.length;e++)b+='<userdata name="'+d[e]+'">'+this._apreUC+this._idpull[this.rootId].userData["t_"+d[e]]+this._apstUC+
"</userdata>";for(e=0;e<this.htmlNode.childsCount;e++)b+=this._serializeItem(this.htmlNode.childNodes[e]);return b+"</tree>"};
dhtmlXTreeObject.prototype._serializeItem=function(b){if(b.unParsed)return document.all?b.unParsed.d.xml:(new XMLSerializer).serializeToString(b.unParsed.d);var d="",d=this._selected.length?this._selected[0].id:'"',e=b.span.innerHTML;if(this._xescapeEntities)for(var f=0;f<this._serEnts.length;f++)e=e.replace(this._serEnts[f][2],this._serEnts[f][1]);d=this._xfullXML?'<item id="'+b.id+'" '+(1==this._getOpenState(b)?' open="1" ':"")+(d==b.id?' select="1"':"")+' text="'+e+'" im0="'+b.images[0]+'" im1="'+
b.images[1]+'" im2="'+b.images[2]+'" '+(b.acolor?'aCol="'+b.acolor+'" ':"")+(b.scolor?'sCol="'+b.scolor+'" ':"")+(1==b.checkstate?'checked="1" ':2==b.checkstate?'checked="-1"':"")+(b.closeable?'closeable="1" ':"")+(this.XMLsource&&0==b.XMLload?' child="1" ':"")+">":'<item id="'+b.id+'" '+(1==this._getOpenState(b)?' open="1" ':"")+(d==b.id?' select="1"':"")+' text="'+e+'"'+(this.XMLsource&&0==b.XMLload?' child="1" ':"")+">";if(this._xuserData&&b._userdatalist){e=b._userdatalist.split(",");for(f=0;f<
e.length;f++)d+='<userdata name="'+e[f]+'">'+this._apreUC+b.userData["t_"+e[f]]+this._apstUC+"</userdata>"}for(f=0;f<b.childsCount;f++)d+=this._serializeItem(b.childNodes[f]);return d+"</item>"};dhtmlXTreeObject.prototype.saveSelectedItem=function(b,d){this.setCookie("treeStateSelected"+(b||""),this.getSelectedItemId(),d)};dhtmlXTreeObject.prototype.restoreSelectedItem=function(b){b=this.getCookie("treeStateSelected"+(b||""));this.selectItem(b,!1)};
dhtmlXTreeObject.prototype.enableAutoSavingSelected=function(b,d){if((this.assMode=convertStringToBoolean(b))&&!this.oldOnSelect)this.oldOnSelect=this.onRowSelect,this.onRowSelect=function(b,d,g){d||(d=this);d.parentObject.treeNod.oldOnSelect(b,d,g);d.parentObject.treeNod.assMode&&d.parentObject.treeNod.saveSelectedItem(d.parentObject.treeNod.assCookieName)};this.assCookieName=d};
dhtmlXTreeObject.prototype.saveState=function(b,d){var e=this._escape(this.serializeTree());if(4E3<e.length){if(-1!=navigator.appName.indexOf("Microsoft"))return!1;this.setCookie("treeStatex"+b,Math.ceil(e.length/4E3));for(var f=0;f<Math.ceil(e.length/4E3);f++)this.setCookie("treeStatex"+b+"x"+f,e.substr(4E3*f,4E3),d)}else this.setCookie("treeStatex"+b,e,d);e=this.getCookie("treeStatex"+b);return!e?(this.setCookie("treeStatex"+b,"",d),!1):!0};
dhtmlXTreeObject.prototype.loadState=function(b){var d=this.getCookie("treeStatex"+b);if(!d)return!1;if(d.length){if(4>d.toString().length){for(var e="",f=0;f<d;f++)e+=this.getCookie("treeStatex"+b+"x"+f);d=e}this.loadXMLString("utf8"==this.utfesc?decodeURI(d):unescape(d))}return!0};dhtmlXTreeObject.prototype.setCookie=function(b,d,e){document.cookie=b+"="+d+(e?"; "+e:"")};
dhtmlXTreeObject.prototype.getCookie=function(b){var d=b+"=";if(0<document.cookie.length&&(b=document.cookie.indexOf(d),-1!=b))return b+=d.length,d=document.cookie.indexOf(";",b),-1==d&&(d=document.cookie.length),document.cookie.substring(b,d)};dhtmlXTreeObject.prototype.saveOpenStates=function(b,d){for(var e=[],f=0;f<this.htmlNode.childsCount;f++)e=e.concat(this._collectOpenStates(this.htmlNode.childNodes[f]));e=e.join(this.dlmtr);this.setCookie("treeOpenStatex"+b,e,d)};
dhtmlXTreeObject.prototype.loadOpenStates=function(b){for(var d=0;d<this.htmlNode.childsCount;d++)this._xcloseAll(this.htmlNode.childNodes[d]);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0";if(d=getCookie("treeOpenStatex"+b))for(var e=d.split(this.dlmtr),d=0;d<e.length;d++){var f=this._globalIdStorageFind(e[d]);if(f){if(this.XMLsource&&!f.XMLload&&f.id!=this.rootId){this._delayedLoad(f,"loadOpenStates('"+b+"')");return}this.openItem(e[d])}}this.callEvent("onAllOpenDynamic",
[])};dhtmlXTreeObject.prototype._delayedLoad=function(b,d){this.afterLoadMethod=d;this.onLoadReserve=this.onXLE;this.onXLE=this._delayedLoadStep2;this._loadDynXML(b.id)};dhtmlXTreeObject.prototype._delayedLoadStep2=function(b){b.onXLE=b.onLoadReserve;window.setTimeout(function(){eval("tree."+b.afterLoadMethod)},100);if(b.onXLE)b.onXLE(b);b.callEvent("onXLE",[b])};
dhtmlXTreeObject.prototype._collectOpenStates=function(b){var d=[];if(1==this._getOpenState(b)){d.push(b.id);for(var e=0;e<b.childsCount;e++)d=d.concat(this._collectOpenStates(b.childNodes[e]))}return d};function setCookie(b,d){document.cookie=b+"="+d}function getCookie(b){var d=b+"=";if(0<document.cookie.length&&(b=document.cookie.indexOf(d),-1!=b))return b+=d.length,d=document.cookie.indexOf(";",b),-1==d&&(d=document.cookie.length),document.cookie.substring(b,d)}
dhtmlXTreeObject.prototype.openAllItemsDynamic=function(b){this.ClosedElem=[];this.G_node=null;var d=this._globalIdStorageFind(b||this.rootId);d.id!=this.rootId&&0!=tree.getOpenState(d.id)&&this.openItem(b);this._openAllNodeChilds(d,0);0<this.ClosedElem.length&&(this.onLoadReserve=this.onXLE,this.onXLE=this._loadAndOpen,this._loadAndOpen(this))};
dhtmlXTreeObject.prototype._openAllNodeChilds=function(b){(0==b.XMLload||b.unParsed)&&this.ClosedElem.push(b);for(var d=0;d<b.childsCount;d++)0>this._getOpenState(b.childNodes[d])&&this._HideShow(b.childNodes[d],2),0<b.childNodes[d].childsCount&&this._openAllNodeChilds(b.childNodes[d]),(0==b.childNodes[d].XMLload||b.childNodes[d].unParsed)&&this.ClosedElem.push(b.childNodes[d])};
dhtmlXTreeObject.prototype._loadAndOpen=function(b){b.G_node&&(b._openItem(b.G_node),b._openAllNodeChilds(b.G_node),b.G_node=null);0<b.ClosedElem.length&&(b.G_node=b.ClosedElem.shift());if(b.G_node)b.G_node.unParsed?b.reParse(b.G_node):window.setTimeout(function(){b._loadDynXML(b.G_node.id)},100);else{b.onXLE=b.onLoadReserve;if(b.onXLE)b.onXLE(b);b.callEvent("onAllOpenDynamic",[b])}};
dhtmlXTreeObject.prototype.openItemsDynamic=function(b,d){this.onXLE!=this._stepOpen&&(this._opnItmsDnmcFlg=convertStringToBoolean(d),this.onLoadReserve=this.onXLE,this.onXLE=this._stepOpen,this.ClosedElem=b.split(",").reverse(),this._stepOpen(this))};
dhtmlXTreeObject.prototype._stepOpen=function(b){b.ClosedElem.length?(b.G_node=b.ClosedElem.pop(),0===b._globalIdStorageFind(b.G_node).XMLload?b.openItem(b.G_node):(b.openItem(b.G_node),b._stepOpen(b))):(b.onXLE=b.onLoadReserve,b._opnItmsDnmcFlg&&b.selectItem(b.G_node,!0),b.onXLE&&arguments[1]&&b.onXLE.apply(b,arguments),b.callEvent("onOpenDynamicEnd",[]))};
dhtmlXGridObject.prototype._updateTGRState=function(b){b.update&&0!=b.id&&(this.rowsAr[b.id].imgTag&&(this.rowsAr[b.id].imgTag.src=this.imgURL+b.state+".gif"),b.update=!1)};dhtmlXGridObject.prototype.doExpand=function(b){this.editStop();b=b.parentNode.parentNode.parentNode;var d=this._h2.get[b.idd];if(this.callEvent("onOpen",[b.idd,"plus"==d.state?-1:1]))"plus"==d.state?this.expandKids(b):"minus"==d.state&&!d._closeable&&this.collapseKids(b)};
function dhtmlxHierarchy(){var b={id:0,childs:[],level:-1,parent:null,index:0,state:dhtmlXGridObject._emptyLineImg};this.order=[b];this.get={0:b};this.swap=function(b,e){var f=b.parent,g=b.index;f.childs[g]=e;f.childs[e.index]=b;b.index=e.index;e.index=g};this.forEachChildF=function(b,e,f,g){b=this.get[b];for(var h=0;h<b.childs.length;h++)if(e.apply(f||this,[b.childs[h]]))b.childs[h].childs.length&&this.forEachChildF(b.childs[h].id,e,f,g),g&&g.call(f||this,b.childs[h])};this.forEachChild=function(b,
e,f){b=this.get[b];for(var g=0;g<b.childs.length;g++)e.apply(f||this,[b.childs[g]]),b.childs[g].childs.length&&this.forEachChild(b.childs[g].id,e,f)};this.change=function(b,e,f){b=this.get[b];b[e]!=f&&(b[e]=f,b.update=!0)};this.add=function(b,e){return this.addAfter(b,e)};this.addAfter=function(b,e,f,g){var h=this.get[e||0];g=f?this.get[f].index+(g?0:1):h.childs.length;var l={id:b,childs:[],level:h.level+1,parent:h,index:g,state:dhtmlXGridObject._emptyLineImg};h.state==dhtmlXGridObject._emptyLineImg&&
this.change(e,"state",0==e?"minus":"plus");if(f){for(e=g;e<h.childs.length;e++)h.childs[e].index++;h.childs=h.childs.slice(0,g).concat([l]).concat(h.childs.slice(g,h.childs.length))}else h.childs.push(l);return this.get[b]=l};this.addBefore=function(b,e,f){return this.addAfter(b,e,f,!0)};this.remove=function(b){for(var e=this.get[b||0],f=0;f<e.childs.length;f++)this.deleteAll(e.childs[f].id);e.childs=[];e.parent.childs=e.parent.childs.slice(0,e.index).concat(e.parent.childs.slice(e.index+1));for(f=
e.index;f<e.parent.childs.length;f++)e.parent.childs[f].index--;delete this.get[b]};this.deleteAll=function(b){for(var e=this.get[b||0],f=0;f<e.childs.length;f++)this.deleteAll(e.childs[f].id);e.childs=[];delete this.get[b]};return this}dhtmlXGridObject.prototype._getOpenLenght=function(b,d){var e=this._h2.get[b].childs;d+=e.length;for(var f=0;f<e.length;f++)e[f].childs.length&&"minus"==e[f].state&&(d+=this._getOpenLenght(e[f].id,0));return d};
dhtmlXGridObject.prototype.collapseKids=function(b){var d=this._h2.get[b.idd];if("minus"==d.state&&this.callEvent("onOpenStart",[b.idd,1])){var e=b.rowIndex;0>e&&(e=this.rowsCol._dhx_find(b)+1);this._h2.change(d.id,"state","plus");this._updateTGRState(d);if(this._srnd||this.pagingOn)this._h2_to_buff(),this._renderSort();else{for(var d=this._getOpenLenght(this.rowsCol[e-1].idd,0),f=0;f<d;f++)this.rowsCol[e+f].parentNode.removeChild(this.rowsCol[e+f]);this.rowsCol.splice(e,d)}this.callEvent("onGridReconstructed",
[]);this.setSizes();this._h2_to_buff();this.callEvent("onOpenEnd",[b.idd,-1])}};
dhtmlXGridObject.prototype._massInsert=function(b,d,e){var f=[],g=_isKHTML?this.obj:this.obj.rows[0].parentNode;this._h2_to_buff();if(this._srnd||this.pagingOn)return this._renderSort();for(var h=this._getOpenLenght(b.id,0),l=0;l<h;l++){var m=this.render_row(e+l);d&&d.parentNode?d.parentNode.insertBefore(m,d):g.appendChild(m);f.push(m)}this.rowsCol=dhtmlxArray(this.rowsCol.slice(0,e).concat(f).concat(this.rowsCol.slice(e)));return b.childs.length+f.length};
dhtmlXGridObject.prototype.expandKids=function(b,d){var e=this._h2.get[b.idd];if(e.childs.length||e._xml_await)if("plus"==e.state&&(e._loading||d||this.callEvent("onOpenStart",[e.id,-1]))){var f=this.getRowIndex(e.id)+1;e.childs.length?(e._loading=!1,this._h2.change(e.id,"state","minus"),this._updateTGRState(e),this._massInsert(e,this.rowsCol[f],f),this.callEvent("onGridReconstructed",[])):e._xml_await&&(e._loading=!0,this.callEvent("onDynXLS",[e.id])&&this.loadXML(this.kidsXmlFile+""+(-1!=this.kidsXmlFile.indexOf("?")?
"&":"?")+"id="+e.id));this.setSizes();e._loading||this.callEvent("onOpenEnd",[e.id,1]);this._fixAlterCss()}};dhtmlXGridObject.prototype.kidsXmlFile="";
dhtmlXGridObject.prototype.sortTreeRows=function(b,d,e){var f="getValue";this.cells5({parentNode:{grid:this}},this.getColType(b)).getDate&&(f="getDate",d="str");this.forEachRow(function(e){if(e=this._h2.get[e]){var g=this._get_cell_value(e.buff,b,f);"int"==d?(e._sort=parseFloat(g),e._sort=isNaN(e._sort)?-99999999999999:e._sort):e._sort=g}});var g=this,h=1,l=-1;"des"==e&&(h=-1,l=1);var m=null;"cus"==d&&(m=function(d,f){return g._customSorts[b](d._sort,f._sort,e,d.id,f.id)});"str"==d&&(m=function(b,
d){return b._sort<d._sort?l:b._sort==d._sort?0:h});"int"==d&&(m=function(b,d){return b._sort<d._sort?l:b._sort==d._sort?0:h});"date"==d&&(m=function(b,d){return(Date.parse(new Date(b._sort||"01/01/1900"))-Date.parse(new Date(d._sort||"01/01/1900")))*h});this._sortTreeRows(m,0);this._renderSort(0,!0);this.callEvent("onGridReconstructed",[])};
dhtmlXGridObject.prototype._sortTreeRows=function(b,d){var e=this._h2.get[d].childs;this.rowsCol.stablesort?this.rowsCol.stablesort.call(e,b):e.sort(b);for(var f=0;f<e.length;f++)e[f].childs.length&&this._sortTreeRows(b,e[f].id),e[f].index=f};dhtmlXGridObject.prototype._renderSort=function(){this._h2_to_buff();var b=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=b};
dhtmlXGridObject.prototype._fixAlterCssTGR=function(){this._realfake||this._h2.forEachChild(0,function(b){if("TR"==b.buff.tagName){var d=(this._cssSP?b.level%2:b.index%2)?this._cssUnEven:this._cssEven;this.rowsAr[b.id].className=d+(this._cssSU?" "+d+"_"+b.level:"")+" "+(this.rowsAr[b.id]._css||"")+(-1!=this.rowsAr[b.id].className.indexOf("rowselected")?" rowselected":"")}},this)};
dhtmlXGridObject.prototype.moveRowUDTG=function(b,d){var e=this._h2.get[b],f=e.parent.childs[e.index+d];if(f&&f.parent==e.parent){var g=[e.state,f.state];this.collapseKids(this.rowsAr[e.id]);this.collapseKids(this.rowsAr[f.id]);var h=this.rowsCol._dhx_find(this.rowsAr[b]),l=this.rowsBuffer._dhx_find(this.rowsAr[b]),m=this.obj.rows[0].parentNode.removeChild(this.rowsCol[h]),k=this.rowsCol[h+(1==d?2:d)];k?k.parentNode.insertBefore(m,k):this.obj.rows[0].parentNode.appendChild(m);this.rowsCol._dhx_swapItems(h,
h+d);this.rowsBuffer._dhx_swapItems(l,l+d);this._h2.swap(f,e);"minus"==g[0]&&this.expandKids(this.rowsAr[e.id]);"minus"==g[1]&&this.expandKids(this.rowsAr[f.id]);this._fixAlterCss(Math.min(h,h+d))}};
function eXcell_tree(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.isDisabled=function(){return this.cell._disabled||this.grid._edtc};this.edit=function(){!this.er&&!this.grid._edtc&&(this.er=this.cell.parentNode.valTag,this.val=this.getLabel(),this.er.parentNode.style.textOverflow="clip",this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF||_isIE)?"INPUT":"TEXTAREA",this.er.innerHTML="<"+this.cell.atag+" class='dhx_combo_edit' type='text' style='height:"+(this.cell.offsetHeight-
6)+"px; width:100%; border:0px; margin:0px; padding:0px; padding-top:"+(_isFF?1:2)+"px; overflow:hidden;'></"+this.cell.atag+">",this.er.childNodes[0].onmousedown=function(b){(b||event).cancelBubble=!0},this.er.childNodes[0].onselectstart=function(b){b||(b=event);return b.cancelBubble=!0},_isFF&&(this.er.style.top="1px"),this.er.className+=" editable",this.er.firstChild.onclick=function(b){(b||event).cancelBubble=!0},this.er.firstChild.value=this.val,this.obj=this.er.firstChild,this.er.firstChild.style.width=
Math.max(10,this.cell.offsetWidth-this.er.offsetLeft-10)+"px",this.er.firstChild.focus(),_isIE&&this.er.firstChild.focus())};this.detach=function(){if(this.er){this.setLabel(this.er.firstChild.value);this.er.className=this.er.className.replace("editable","");var b=this.val!=this.er.innerHTML;_isFF&&(this.er.style.top="2px");this.er.parentNode.style.textOverflow="ellipsis";this.obj=this.er=null;return b}};this.getValue=function(){return this.getLabel()};this.setImage=function(b){this.cell.parentNode.imgTag.nextSibling.src=
this.grid.iconURL+b;this.grid._h2.get[this.cell.parentNode.idd].image=b};this.getImage=function(){};this.setLabel=function(b){this.setValueA(b)};this.getLabel=function(){return this.cell.parentNode.valTag.innerHTML}}eXcell_tree.prototype=new eXcell;eXcell_tree.prototype.setValueA=function(b){this.cell.parentNode.valTag.innerHTML=b;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,b])};
eXcell_tree.prototype.setValue=function(b){if(this.cell.parentNode.imgTag)return this.setLabel(b);if(null==this.grid._tgc.imgURL||this.grid._tgc.imgURL!=this.grid.imgURL){var d={};d.spacer="<img src='"+this.grid.imgURL+"blank.gif'  align='absmiddle' class='space'>";d.imst="<img src='"+this.grid.imgURL;d.imsti="<img src='"+(this.grid.iconURL||this.grid.imgURL);d.imact="' align='absmiddle'  onclick='this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'>";
d.plus=d.imst+"plus.gif"+d.imact;d.minus=d.imst+"minus.gif"+d.imact;d.blank=d.imst+"blank.gif"+d.imact;d.start="<div class='treegrid_cell' style='overflow:hidden; white-space : nowrap; height:"+(_isIE?20:18)+"px;'>";d.itemim="' align='absmiddle' "+(this.grid._img_height?' height="'+this.grid._img_height+'"':"")+(this.grid._img_width?' width="'+this.grid._img_width+'"':"")+" ><span "+(_isFF||_isOpera?"style='position:relative; top:2px;'":"")+"id='nodeval'>";d.close="</span></div>";this.grid._tgc=d}var d=
this.grid._tgc,e=this.cell.parentNode.idd,f=this.grid._h2.get[e]||this.grid._f_rowsBuffer.get[e];if(this.grid.kidsXmlFile||this.grid._slowParse)f.has_kids=f.has_kids||this.cell.parentNode._attrs.xmlkids&&"minus"!=f.state,f._xml_await=!!f.has_kids;f.image=f.image||this.cell._attrs.image||"leaf.gif";f.label=b;for(var g=[d.start],h=0;h<f.level;h++)g.push(d.spacer);f.has_kids?(g.push(d.plus),f.state="plus"):g.push(d.imst+f.state+".gif"+d.imact);g.push(d.imsti);g.push(f.image);g.push(d.itemim);g.push(f.label);
g.push(d.close);this.cell.innerHTML=g.join("");this.cell._treeCell=!0;this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[f.level];this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[f.level+2];_isKHTML&&(this.cell.vAlign="top");0!=f.parent.id&&"plus"==f.parent.state&&(this.grid._updateTGRState(f.parent,!1),this.cell.parentNode._skipInsert=!0);this.grid.callEvent("onCellChanged",[e,this.cell._cellIndex,b])};
dhtmlXGridObject.prototype._process_tree_xml=function(b,d,e){this._parsing=!0;var f=!1;d||(this.render_row=this.render_row_tree,f=!0,d=b.getXMLTopNode(this.xml.top),e=d.getAttribute("parent")||0,"0"==e&&(e=0),this._h2||(this._h2=new dhtmlxHierarchy),this._fake&&(this._fake._h2=this._h2));var g=b.doXPath(this.xml.row,d);this._open=this._open||[];for(d=0;d<g.length;d++){var h=g[d].getAttribute("id");h&&!this._h2.get[h]||(h=this.uid(),g[d].setAttribute("id",h));var l=this._h2.add(h,e);l.buff={idd:h,
data:g[d],_parser:this._process_xml_row,_locator:this._get_xml_data};g[d].getAttribute("open")&&(l.state="minus",this._open.push(h));this.rowsAr[h]=l.buff;this._process_tree_xml(b,g[d],h)}if(f){g.length?0!=e&&!this._srnd&&this._h2.change(e,"state","minus"):this._h2.change(e,"state",dhtmlXGridObject._emptyLineImg);for(d=0;d<this._open.length;d++)f=this._h2.get[this._open[d]],f.childs.length||(f.state=dhtmlXGridObject._emptyLineImg);this._updateTGRState(this._h2.get[e]);this._h2_to_buff();0!=e&&this._srnd?
this.openItem(e):this.pagingOn?this._renderSort():this.render_dataset();if(this.kidsXmlFile)for(d=0;d<this._open.length;d++)f=this._h2.get[this._open[d]],f._xml_await&&this.expandKids({idd:f.id});this._open=[];!1===this._slowParse&&this.forEachRow(function(b){this.render_row_tree(0,b)});this._parsing=!1;0!=e&&!this._srnd&&this.callEvent("onOpenEnd",[e,1])}return b.xmlDoc.responseXML?b.xmlDoc.responseXML:b.xmlDoc};
dhtmlXGridObject.prototype._h2_to_buff=function(b){if(!b&&(b=this._h2.get[0],this.rowsBuffer=new dhtmlxArray,this._fake&&!this._realfake))this._fake.rowsBuffer=this.rowsBuffer;for(var d=0;d<b.childs.length;d++)this.rowsBuffer.push(b.childs[d].buff),"minus"==b.childs[d].state&&this._h2_to_buff(b.childs[d])};
dhtmlXGridObject.prototype.render_row_tree=function(b,d){if(d)var e=this._h2.get[d]||this._f_rowsBuffer.get[d],e=e?e.buff:e;else e=this.rowsBuffer[b];if(!e)return-1;if(e._parser){if(this.rowsAr[e.idd]&&"TR"==this.rowsAr[e.idd].tagName)return this._h2.get[e.idd].buff=this.rowsBuffer[b]=this.rowsAr[e.idd];var f=this._prepareRow(e.idd);this.rowsAr[e.idd]=f;d||(this.rowsBuffer[b]=f);(this._h2.get[e.idd]||this._f_rowsBuffer.get).buff=f;e._parser.call(this,f,e.data);this._postRowProcessing(f);return f}return e};
dhtmlXGridObject.prototype._removeTrGrRow=function(b,d){if(d)this._h2.forEachChild(d.id,function(b){this._removeTrGrRow(null,b);delete this.rowsAr[b.id]},this);else{var e=this.getRowIndex(b.idd);d=this._h2.get[b.idd];if(-1!=e&&e!==this.undefined){var f=1;d&&"minus"==d.state&&(f+=this._getOpenLenght(d.id,0));for(var g=0;g<f;g++)this.rowsCol[g+e]&&this.rowsCol[g+e].parentNode.removeChild(this.rowsCol[g+e]);if(this._fake){for(g=0;g<f;g++)this._fake.rowsCol[g+e]&&this._fake.rowsCol[g+e].parentNode.removeChild(this._fake.rowsCol[g+
e]);1<f&&this._fake.rowsCol.splice(e+1,f-1)}this.rowsCol.splice(e,f);this.rowsBuffer.splice(e,f)}d&&(this._removeTrGrRow(null,d),delete this.rowsAr[d.id],1==d.parent.childs.length&&(this._h2.change(d.parent.id,"state",dhtmlXGridObject._emptyLineImg),this._updateTGRState(d.parent)),this._h2.remove(d.id))}};dhtmlXGridObject.prototype.openItem=function(b){var d=this._h2.get[b||0];(b=this.getRowById(b||0))&&(d.parent&&0!=d.parent.id&&this.openItem(d.parent.id),this.expandKids(b))};
dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.addRow;
dhtmlXGridObject.prototype.addRow=function(b,d,e,f,g,h){if(!this._h2)return this._addRowClassic(b,d,e);f=f||0;this.cellType._dhx_find("tree");"string"==typeof d&&(d=d.split(this.delim));var l=this._h2.get[b];l||(0==f?e=this.rowsBuffer.length:(e=this.getRowIndex(f)+1,"minus"==this._h2.get[f].state?e+=this._getOpenLenght(f,0):this._skipInsert=!0));l=l||this._h2.add(b,f);l.image=g;l.has_kids=h;return l.buff=this._addRowClassic(b,d,e)};
dhtmlXGridObject.prototype.addRowBefore=function(b,d,e,f,g){if(this.rowsAr[e]){if(!this._h2)return this.addRow(b,d,this.getRowIndex(e));var h=this._h2.get[e].parent.id,l=this.getRowIndex(e);-1==l&&(this._skipInsert=!0);this._h2.addBefore(b,h,e);return this.addRow(b,d,l,this._h2.get[e].parent.id,f,g)}};
dhtmlXGridObject.prototype.addRowAfter=function(b,d,e,f,g){if(this.rowsAr[e]){if(!this._h2)return this.addRow(b,d,this.getRowIndex(e)+1);var h=this._h2.get[e].parent.id,l=this.getRowIndex(e);-1==l&&(this._skipInsert=!0);"minus"==this._h2.get[e].state?l+=this._getOpenLenght(e,0)+1:l++;this._h2.addAfter(b,h,e);return this.addRow(b,d,l,h,f,g)}};dhtmlXGridObject.prototype.enableSmartXMLParsing=function(b){this._slowParse=convertStringToBoolean(b)};
dhtmlXGridObject.prototype._copyTreeGridRowContent=function(b,d,e){var f=this.cellType._dhx_find("tree");for(i=0;i<b.cells.length;i++)i!=f?this.cells(e,i).setValue(this.cells(d,i).getValue()):this.cells(e,i).setValueA(this.cells(d,i).getValue())};dhtmlXGridObject.prototype.closeItem=function(b){(b=this.getRowById(b))&&this.collapseKids(b)};dhtmlXGridObject.prototype.deleteChildItems=function(b){if(b=this._h2.get[b])for(;b.childs.length;)this.deleteRow(b.childs[0].id)};
dhtmlXGridObject.prototype.getAllSubItems=function(b){var d=[];if(b=this._h2.get[b||0])for(var e=0;e<b.childs.length;e++)d.push(b.childs[e].id),b.childs[e].childs.length&&(d=d.concat(this.getAllSubItems(b.childs[e].id).split(this.delim)));return d.join(this.delim)};dhtmlXGridObject.prototype.getChildItemIdByIndex=function(b,d){var e=this._h2.get[b||0];return!e?null:e.childs[d]?e.childs[d].id:null};dhtmlXGridObject.prototype.getItemText=function(b){return this.cells(b,this.cellType._dhx_find("tree")).getLabel()};
dhtmlXGridObject.prototype.getOpenState=function(b){if(b=this._h2.get[b||0])return"minus"==b.state?!0:!1};dhtmlXGridObject.prototype.getParentId=function(b){b=this._h2.get[b||0];return!b||!b.parent?null:b.parent.id};dhtmlXGridObject.prototype.getSubItems=function(b){var d=[];if(b=this._h2.get[b||0])for(var e=0;e<b.childs.length;e++)d.push(b.childs[e].id);return d.join(this.delim)};
dhtmlXGridObject.prototype.expandAll=function(b){this.isTreeGrid()&&(this._lazyCompile&&(this._startLazyCompile=!1),this._renderAllExpand(b||0),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this.callEvent("onExpandAll",[]),this._redrawLines&&this._redrawLines())};
dhtmlXGridObject.prototype._renderAllExpand=function(b){b=this._h2.get[b].childs;for(var d=0;d<b.length;d++)b[d].childs.length&&(this._h2.change(b[d].id,"state","minus"),this._updateTGRState(b[d]),this._renderAllExpand(b[d].id))};
dhtmlXGridObject.prototype.collapseAll=function(b){this._h2.forEachChild(b||0,function(b){b&&"minus"==b.state&&(b.state="plus",b.update=!0,this._updateTGRState(b))},this);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent("onGridReconstructed",[]);this._redrawLines&&this._redrawLines()};dhtmlXGridObject.prototype.hasChildren=function(b){if(this.isTreeGrid())return(b=this._h2.get[b])&&b.childs.length?b.childs.length:b._xml_await?-1:0};
dhtmlXGridObject.prototype.setItemCloseable=function(b,d){var e=this._h2.get[b];e&&(e._closeable=!convertStringToBoolean(d))};dhtmlXGridObject.prototype.setItemText=function(b,d){return this.cells(b,this.cellType._dhx_find("tree")).setLabel(d)};dhtmlXGridObject.prototype.setItemImage=function(b,d){this._h2.get[b].image=d;this.rowsAr[b].imgTag.nextSibling.src=(this.iconURL||"")+d};dhtmlXGridObject.prototype.getItemImage=function(b){this.getRowById(b);return this._h2.get[b].image};
dhtmlXGridObject.prototype.setImageSize=function(b,d){this._img_width=b;this._img_height=d};dhtmlXGridObject.prototype._getRowImage=function(b){return this._h2.get[b.idd].image};dhtmlXGridObject.prototype.setOnOpenStartHandler=function(b){this.attachEvent("onOpenStart",b)};dhtmlXGridObject.prototype.setOnOpenEndHandler=function(b){this.attachEvent("onOpenEnd",b)};dhtmlXGridObject.prototype.enableTreeCellEdit=function(b){this._edtc=!convertStringToBoolean(b)};
dhtmlXGridObject.prototype.enableCascadeUpdate=function(b){this._h2_cascade_update=convertStringToBoolean(b)};dhtmlXGridObject.prototype.getLevel=function(b){b=this._h2.get[b||0];return!b?-1:b.level};dhtmlXGridObject.prototype._fixHiddenRowsAllTG=function(b,d){for(i in this.rowsAr)this.rowsAr[i]&&this.rowsAr[i].childNodes&&(this.rowsAr[i].childNodes[b].style.display=d)};dhtmlXGridObject._emptyLineImg="blank";
dhtmlXGridObject.prototype._updateLine=function(b,d){if(d=d||this.rowsAr[b.id]){var e=d.imgTag;if(e){if("blank"==b.state)return e.src=this.imgURL+"blank.gif";var f=1,f=0==b.index?0==b.level?b.parent.childs.length-1>b.index?3:1:b.parent.childs.length-1>b.index?3:2:b.parent.childs.length-1>b.index?3:2;e.src=this.imgURL+b.state+f+".gif"}}};
dhtmlXGridObject.prototype._updateParentLine=function(b,d){if(d=d||this.rowsAr[b.id]){var e=d.imgTag;if(e)for(var f=b.level;0<f&&0!=b.id;f--)e=e.previousSibling,b=b.parent,e.src=b.parent.childs.length-1>b.index?this.imgURL+"line1.gif":this.imgURL+"blank.gif"}};dhtmlXGridObject.prototype._renderSortA=dhtmlXGridObject.prototype._renderSort;dhtmlXGridObject.prototype._renderSort=function(){this._renderSortA.apply(this,arguments);this._redrawLines(0)};
dhtmlXGridObject.prototype._redrawLines=function(b){this._tgle&&this._h2.forEachChild(b||0,function(b){this._updateLine(b);this._updateParentLine(b)},this)};
dhtmlXGridObject.prototype.enableTreeGridLines=function(){dhtmlXGridObject._emptyLineImg="line";this._updateTGRState=function(b,d){!d&&(b.update&&0!=b.id)&&(this._tgle&&this._updateLine(b,this.rowsAr[b.id]),b.update=!1)};this._tgle=!0;this.attachEvent("onXLE",function(b,d,e){this._redrawLines(e)});this.attachEvent("onOpenEnd",function(b){this._redrawLines(b)});this.attachEvent("onRowAdded",function(b){b=this._h2.get[b];this._updateLine(b);this._updateParentLine(b);b.index<b.parent.childs.length-1?
(b=b.parent.childs[b.index+1],this._updateLine(b),this._updateParentLine(b)):0!=b.index&&(b=b.parent.childs[b.index-1],this._updateLine(b),this._updateParentLine(b),b.childs.length&&this._h2.forEachChild(b.id,function(b){this._updateParentLine(b)},this))});this.attachEvent("onOpen",function(b,d){if(d)for(var e=this._h2.get[b],f=0;f<e.childs.length;f++)this._updateParentLine(e.childs[f]);return!0});this.attachEvent("onBeforeRowDeleted",function(b){var d=this,e=this._h2.get[b],f=null;0!=e.index&&(f=
e.parent.childs[e.index-1]);e=e.parent;window.setTimeout(function(){if(e=d._h2.get[e.id])d._updateLine(e),d._updateParentLine(e),f&&(d._updateLine(f),"minus"==f.state&&d._h2.forEachChild(f.id,function(b){d._updateParentLine(b)},d))},1);return!0})};dhtmlXGridObject.prototype.setFiltrationLevel=function(b,d,e){this._tr_strfltr=b;this._tr_fltr_c=d;this._tr_fltr_d=e;this.refreshFilters()};
dhtmlXGridObject.prototype.filterTreeBy=function(b,d,e){var f=this._h2;"undefined"==typeof this._tr_strfltr&&(this._tr_strfltr=-1);if(this._f_rowsBuffer){if(!e&&(this._h2=this._f_rowsBuffer,this._fake))this._fake._h2=this._h2}else this._f_rowsBuffer=this._h2;this.dma(!0);this._fbf={};if("object"==typeof b)for(e=0;e<d.length;e++)-3==this._tr_strfltr?this._filterTreeB(b[e],d[e]):this._filterTreeA(b[e],d[e]);else-3==this._tr_strfltr?this._filterTreeB(b,d):this._filterTreeA(b,d);this._fbf=null;this.dma(!1);
this._fix_filtered_images(this._h2,f);this._renderSort();this.callEvent("onGridReconstructed",[])};
dhtmlXGridObject.prototype._filterTreeB=function(b,d){if(""!=d){var e=!0,f=new dhtmlxHierarchy,g=function(b,d){if(d.get[b.parent.id])d.get[b.parent.id].childs.push(b);else{var e={id:b.parent.id,childs:[],level:b.parent.level,parent:b.parent.parent,index:b.parent.childs.length,image:b.parent.image,state:b.parent.state,buff:b.parent.buff,has_kids:b.parent.has_kids,_xml_await:b.parent._xml_await};d.get[b.parent.id]=e;e.childs=[];e.childs.push(b);b.parent.parent&&g(e,d)}},h=function(b,d){for(var e=0;e<
b.length;e++)d.get[b[e].id]||(d.get[b[e].id]=b[e],b[e].childs&&h(b[e].childs,d))};"function"==typeof d?e=!1:d=(d||"").toString().toLowerCase();this.temp=function(l){if(0!=l.id){var m="link"==this.cellType[b]?"getContent":-1<this.cellType[b].indexOf("co")?"getText":null,m=this._get_cell_value(l.buff,b,m).toString().toLowerCase();if(e?-1==m.indexOf(d):!d(m,l.id)){if(l.childs)for(m=0;m<l.childs.length;m++)this.temp(l.childs[m])}else f.get[l.id]=l,l.childs&&h(l.childs,f),l.parent&&g(l,f)}else for(m=0;m<
l.childs.length;m++)this.temp(l.childs[m])};this.temp(this._h2.get[0]);this._h2=f;this._fake&&(this._fake._h2=this._h2)}};
dhtmlXGridObject.prototype._filterTreeA=function(b,d){if(""!=d){var e=!0;"function"==typeof d?e=!1:d=(d||"").toString().toLowerCase();var f=function(b,d,e){var g=e.get[b.parent.id];g||(g=f(b.parent,d,e));(d=e.get[b.id])||(d={id:b.id,childs:[],level:b.level,parent:g,index:g.childs.length,image:b.image,state:b.state,buff:b.buff,has_kids:b.has_kids,_xml_await:b._xml_await},g.childs.push(d),e.get[d.id]=d);return d},g=this._fbf,h=new dhtmlxHierarchy,l,m=this._tr_strfltr,k=this,n=function(b){for(var d=
!1,e=0;e<b.childs.length;e++)k.temp(b.childs[e])&&(d=!0);return d};switch(m.toString()){case "-2":l=function(b){if(g[b.id])return!1;n(b);return!0};break;case "-1":l=function(b){return!b.childs.length};break;default:l=function(b){return m==b.level}}this.temp=function(k){var u="link"==this.cellType[b]?"getContent":-1<this.cellType[b].indexOf("co")?"getText":null;if(0!=k.id&&l(k))return u=this._get_cell_value(k.buff,b,u).toString().toLowerCase(),(e?-1==u.indexOf(d):!d(u,k.id))?(g[k.id]=!0,this._tr_fltr_c&&
k.parent.parent&&f(k.parent,this._h2,h),!1):(f(k,this._h2,h),k.childs&&-2!=m&&this._h2.forEachChild(k.id,function(b){f(b,this._h2,h)},this),!0);if(this._tr_fltr_e)u=this._get_cell_value(k.buff,b,u).toString().toLowerCase(),v=!(e?-1==u.indexOf(d):!d(u,k.id)),this._h2.forEachChild(k.id,function(b){h.get[b]=this._h2.get[b]},this);else{this._tr_fltr_d&&this._tr_strfltr>k.level&&0!=k.id&&f(k,this._h2,h);var v=n(k);!v&&(0!=k.id&&this._tr_fltr_c&&this._tr_fltr_d)&&(u=this._get_cell_value(k.buff,b,u).toString().toLowerCase(),
v=!(e?-1==u.indexOf(d):!d(u,k.id)),!v&&h.remove(k.id))}return v};this.temp(this._h2.get[0]);this._h2=h;this._fake&&(this._fake._h2=this._h2)}};
dhtmlXGridObject.prototype._fix_filtered_images=function(b,d){b.forEachChild(0,function(b){if(!b.childs.length&&!b.has_kids)b.state!=dhtmlXGridObject._emptyLineImg&&(b.state=dhtmlXGridObject._emptyLineImg,b.update=!0,this._updateTGRState(b));else if("TR"==b.buff.tagName){var f=d.get[b.id];f&&"blank"!=f.state&&(b.state=f.state);b.update=!0;this._updateTGRState(b)}},this)};
dhtmlXGridObject.prototype.collectTreeValues=function(b){"undefined"==typeof this._tr_strfltr&&(this._tr_strfltr=-1);this.dma(!0);this._build_m_order();b=this._m_order?this._m_order[b]:b;var d={},e=[];(this._f_rowsBuffer||this._h2).forEachChild(0,function(e){-2==this._tr_strfltr||-1==this._tr_strfltr&&!e.childs.length||this._tr_strfltr==e.level?(e=this._get_cell_value(e.buff,b))&&(d[e]=!0):-3==this._tr_strfltr&&0!=e.id&&(e=this._get_cell_value(e.buff,b))&&(d[e]=!0)},this);this.dma(!1);var f=this.combos[b];
for(b in d)!0===d[b]&&e.push(f?f.get(b)||b:b);return e.sort()};dhtmlXGridObject.prototype._in_header_stat_tree_total=function(b,d,e){this._stat_in_header(b,function(){var b=0;this._h2.forEachChild(0,function(e){e=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],d));b+=isNaN(e)?0:e},this);return this._maskArr[d]?this._aplNF(b,d):Math.round(100*b)/100},d,e,e)};
dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf=function(b,d,e){this._stat_in_header(b,function(){var b=0;this._h2.forEachChild(0,function(e){e.childs.length||(e=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],d)),b+=isNaN(e)?0:e)},this);return this._maskArr[d]?this._aplNF(b,d):Math.round(100*b)/100},d,e,e)};
dhtmlXGridObject.prototype._in_header_stat_tree_multi_total=function(b,d,e){var f=e[1].split(":");e[1]="";this._stat_in_header(b,function(){var b=0;this._h2.forEachChild(0,function(d){d=parseFloat(this._get_cell_value(d.buff||this.rowsAr[d.id],f[0]))*parseFloat(this._get_cell_value(d.buff||this.rowsAr[d.id],f[1]));b+=isNaN(d)?0:d},this);return this._maskArr[d]?this._aplNF(b,d):Math.round(100*b)/100},d,e,e)};
dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf=function(b,d,e){var f=e[1].split(":");e[1]="";this._stat_in_header(b,function(){var b=0;this._h2.forEachChild(0,function(d){d.childs.length||(d=parseFloat(this._get_cell_value(d.buff||this.rowsAr[d.id],f[0]))*parseFloat(this._get_cell_value(d.buff||this.rowsAr[d.id],f[1])),b+=isNaN(d)?0:d)},this);return this._maskArr[d]?this._aplNF(b,d):Math.round(100*b)/100},d,e,e)};
dhtmlXGridObject.prototype._in_header_stat_tree_max=function(b,d,e){this._stat_in_header(b,function(){var b=-999999999;if(0==this.getRowsNum())return"";this._h2.forEachChild(0,function(e){e=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],d));isNaN(e)||(b=Math.max(b,e))},this);return this._maskArr[d]?this._aplNF(b,d):b},d,e)};
dhtmlXGridObject.prototype._in_header_stat_tree_min=function(b,d,e){this._stat_in_header(b,function(){var b=999999999;if(0==this.getRowsNum())return"";this._h2.forEachChild(0,function(e){e=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],d));isNaN(e)||(b=Math.min(b,e))},this);return this._maskArr[d]?this._aplNF(b,d):b},d,e)};
dhtmlXGridObject.prototype._in_header_stat_tree_average=function(b,d,e){this._stat_in_header(b,function(){var b=0,e=0;this._h2.forEachChild(0,function(h){h=parseFloat(this._get_cell_value(h.buff||this.rowsAr[h.id],d));b+=isNaN(h)?0:h;e++},this);return this._maskArr[d]?this._aplNF(b,d):Math.round(100*(b/e))/100},d,e)};
dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf=function(b,d,e){this._stat_in_header(b,function(){var b=-999999999;if(0==this.getRowsNum())return"";this._h2.forEachChild(0,function(e){e.childs.length||(e=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],d)),isNaN(e)||(b=Math.max(b,e)))},this);return this._maskArr[d]?this._aplNF(b,d):b},d,e)};
dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf=function(b,d,e){this._stat_in_header(b,function(){var b=999999999;if(0==this.getRowsNum())return"";this._h2.forEachChild(0,function(e){e.childs.length||(e=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],d)),isNaN(e)||(b=Math.min(b,e)))},this);return this._maskArr[d]?this._aplNF(b,d):b},d,e)};
dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf=function(b,d,e){this._stat_in_header(b,function(){var b=0,e=0;this._h2.forEachChild(0,function(h){h.childs.length||(h=parseFloat(this._get_cell_value(h.buff||this.rowsAr[h.id],d)),b+=isNaN(h)?0:h,e++)},this);return this._maskArr[d]?this._aplNF(b,d):Math.round(100*(b/e))/100},d,e)};
dhtmlXGridObject.prototype._in_header_stat_tree_count=function(b,d,e){this._stat_in_header(b,function(){var b=0;this._h2.forEachChild(0,function(){b++},this);return b},d,e)};dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf=function(b,d,e){this._stat_in_header(b,function(){var b=0;this._h2.forEachChild(0,function(d){d.childs.length||b++},this);return b},d,e)};
dhtmlXGridObject.prototype._stat_in_header=function(b,d,e,f){var g=function(){this.dma(!0);b.innerHTML=(f[0]?f[0]:"")+d.call(this)+(f[1]?f[1]:"");this.dma(!1);this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var b=0;b<this._stat_events.length;b++)for(var d=0;4>d;d++)this.detachEvent(this._stat_events[b][d]);this._stat_events=[]}}));this._stat_events.push([this.attachEvent("onGridReconstructed",g),this.attachEvent("onXLE",
g),this.attachEvent("onFilterEnd",g),this.attachEvent("onEditCell",function(b,d,f){2==b&&f==e&&g.call(this);return!0})]);b.innerHTML=""};dhtmlXGridObject.prototype.cascadingCheck=function(b,d,e){for(var f=this.getAllSubItems(b),f=""!=f?f.split(this.delim):[],g=e?"1":"0",h=0;h<f.length;h++){var l=this.cells(f[h],d);l.isDisabled()||(l.setValue(g),l.cell.wasChanged=l.cell.originalVal!=g,this.callEvent("onEditCell",[1,f[h],d]))}this._cascadingParent(b,d,e);return!0};
dhtmlXGridObject.prototype._cascadingParent=function(b,d,e){b=this.getParentId(b);if(0!=b)if(e)e=this.cells(b,d),e.isDisabled()||(e.setValue("1"),e.cell.wasChanged="1"!=e.cell.originalVal,this.callEvent("onEditCell",[1,b,d]),this._cascadingParent(b,d,!0));else{e=this.getSubItems(b);e=""!=e?e.split(this.delim):[];for(var f=0;f<e.length;f++)if("1"==this.cells(e[f],d).getValue())return;e=this.cells(b,d);e.isDisabled()||(e.setValue("0"),e.cell.wasChanged="0"!=e.cell.originalVal,this.callEvent("onEditCell",
[1,b,d]),this._cascadingParent(b,d,!1))}};
function eXcell_ch_tree(b){b&&(this.cell=b,this.grid=this.cell.parentNode.grid);this.grid.checkEvent("onTreeCheckbox")||this.grid.attachEvent("onTreeCheckbox",this.grid.cascadingCheck);this.disabledF=function(b){this.cell.innerHTML=!0==b||1==b?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")};this.changeState=function(b){!0===b&&!this.grid.isActive&&(null!=
window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0));this.grid.isEditable&&(!this.cell.parentNode._locked&&!this.isDisabled())&&(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=this.cell.originalVal!=this.getValue(),this.grid.callEvent("onEditCell",
[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onTreeCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"};this.isCheckbox=function(){return!0};this.isChecked=function(){return"1"==this.getValue()?!0:!1};this.setChecked=function(b){this.setValue(b.toString())};
this.detach=function(){return this.val!=this.getValue()};this.edit=null}eXcell_ch_tree.prototype=new eXcell_ch;
eXcell_ch_tree.prototype.setValue=function(b){this.cell.style.verticalAlign="middle";if(b&&(b=b.toString()._dhx_trim(),"false"==b||"0"==b))b="";b?(b="1",this.cell.chstate="1"):(b="0",this.cell.chstate="0");this.cell.originalVal=null==this.cell.originalVal?b:this.cell.originalVal;this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+b+".gif' onclick='new eXcell_ch_tree(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)};
function dhtmlXLayoutPanel(){}
function dhtmlXLayoutObject(b,d,e){if(window.dhtmlXContainer){var f=this;this._autodetectSkin=function(){var b=document.createElement("DIV");b.className="dhxlayout_skin_detect";0<document.body.childNodes.length?document.body.insertBefore(b,document.body.childNodes[0]):document.body.appendChild(b);var d=b.offsetWidth;document.body.removeChild(b);return 199==d?"dhx_skyblue":299==d?"dhx_blue":399==d?"dhx_black":499==d?"dhx_web":"dhx_skyblue"};this.skin=null!=e?e:this._autodetectSkin();this.setSkin=function(b){if(this.skinParams[b]){this.skin=
b;this._CPanelHeight=this.skinParams[this.skin].cpanel_height;this._collapsedW=this.skinParams[this.skin].cpanel_collapsed_width;this._collapsedH=this.skinParams[this.skin].cpanel_collapsed_height;this.tpl.className="dhtmlxLayoutPolyContainer_"+this.skin+(this._r?" dhxlayout_rtl":"");this.sizer.className="dhxLayout_Sizer_"+this.skin;this.dhxWins&&this.dhxWins.setSkin(this.skin);for(var d in this.polyObj)this.polyObj[d].skin=this.skin;this.base.skin=this.skin;this.cont.obj.skin=this.skin;this._fixIcons();
this.setSizes()}};this._isIPad=0<=navigator.userAgent.search(/iPad/gi);this._dblClickTM=200;this._mBottom=this._mTop=0;"string"==typeof b&&(b=document.getElementById(b));if((!0==b._isWindow||b._isCell)&&!this.base){if(b._isCell&&b.attachLayout||b.isWindow)return b.attachLayout(d,e);this.base=b}b==document.body&&!this.base&&(document.body.style.overflow="hidden");if(("object"==typeof b||b==document.body)&&!this.base){e=document.createElement("DIV");e.className="dhxcont_global_layout_area";b.appendChild(e);
b._isLayout=!0;this.cont=new dhtmlXContainer(b);this.cont.setContent(e);this.cont.obj.skin=this.skin;if(b==document.body){if("dhx_skyblue"==this.skin||"dhx_blue"==this.skin)this.cont.obj._offsetTop=2,this.cont.obj._offsetLeft=2,this.cont.obj._offsetHeight=-4,this.cont.obj._offsetWidth=-4;"dhx_web"==this.skin&&(this.cont.obj._offsetTop=9,this.cont.obj._offsetLeft=9,this.cont.obj._offsetHeight=-18,this.cont.obj._offsetWidth=-18);document.body.className+=" dhxlayout_fullscreened"}b.adjustContent(b,this._mTop,
null,null,this._mBottom);this.base=document.createElement("DIV");this.base.style.overflow="hidden";this.base.style.position="absolute";this.base.style.left="0px";this.base.style.top="0px";this.base.style.width=e.childNodes[0].style.width;this.base.style.height=e.childNodes[0].style.height;e.childNodes[0].appendChild(this.base);b==document.body&&(this._lw=this._tmTime=null,this._doOnResizeStart=function(){window.clearTimeout(this._tmTime);this._tmTime=window.setTimeout(function(){f._doOnResizeEnd()},
200)},this._doOnResizeEnd=function(){this.setSizes(!1)},"undefined"!=typeof window.addEventListener?window.addEventListener("resize",f._doOnResizeStart,!1):window.attachEvent("onresize",f._doOnResizeStart))}this.items=[];this.cells=function(b){return null!=this.polyObj[b]?this.polyObj[b]:null};this.getIdByIndex=function(b){return 0>b?null:b>=this.items.length?null:this.items[b]._idd};this.getIndexById=function(b){return null!=this.cells(b)?this.cells(b).getIndex():null};this.imagePath=dhtmlx.image_path||
"codebase/imgs/";this.setImagePath=function(b){this.imagePath=b};this.polyObj={};this.sepHor=[];this.sepVer=[];this._layoutView=null!=d?String(d).toUpperCase():"3E";this._minHeight=this._minWidth=40;this._CPanelBtnsWidth=32;this.skinParams={dhx_black:{hor_sep_height:5,ver_sep_width:5,cpanel_height:34,cpanel_collapsed_width:18,cpanel_collapsed_height:18},dhx_blue:{hor_sep_height:5,ver_sep_width:5,cpanel_height:34,cpanel_collapsed_width:18,cpanel_collapsed_height:18},dhx_skyblue:{hor_sep_height:5,ver_sep_width:5,
cpanel_height:26,cpanel_collapsed_width:18,cpanel_collapsed_height:18},dhx_web:{hor_sep_height:9,ver_sep_width:9,cpanel_height:27,cpanel_collapsed_width:18,cpanel_collapsed_height:18,cell_pading_max:1,cell_pading_min:0}};this._CPanelHeight=this.skinParams[this.skin].cpanel_height;this._collapsedW=this.skinParams[this.skin].cpanel_collapsed_width;this._collapsedH=this.skinParams[this.skin].cpanel_collapsed_height;this.tpl=document.createElement("TABLE");this.tpl.dir="ltr";this.tpl.className="dhtmlxLayoutPolyContainer_"+
this.skin;this.tpl.cellSpacing=0;this.tpl.cellPadding=0;b=document.createElement("TBODY");this.tpl.appendChild(b);this.tpl.border=0;this.tplSizes={};this._effects={collapse:!1,resize:!1,highlight:!0};this.sizer=document.createElement("DIV");this.sizer.className="dhxLayout_Sizer_"+this.skin;this.sizer.style.display="none";document.body.appendChild(this.sizer);this._attachSizer=function(b){f.sizer.style.left=getAbsoluteLeft(b)+"px";f.sizer.style.top=getAbsoluteTop(b)+"px";f.sizer.style.width=b.offsetWidth+
"px";f.sizer.style.height=b.offsetHeight+"px";null!=f._sizerML&&(f.sizer.style.marginLeft=f._sizerML+"px");null!=f._sizerMT&&(f.sizer.style.marginTop=f._sizerMT+"px");f.sizer.style.display="";f.sizer.className="dhxLayout_Sizer_"+f.skin;null!=b._dir&&(f.sizer.className+=" "+("hor"==b._dir?"dhxCursorNResize":"dhxCursorWResize"))};this.listViews=function(){var b=[],d;for(d in this.tplData)b[b.length]=d;return b};this._init=function(){this.obj=document.createElement("DIV");this.obj.className="dhtmlxLayoutObject";
this.base.appendChild(this.obj);this.obj.appendChild(this.tpl);this.w=this.obj.offsetWidth;this.h=this.obj.offsetHeight;this._xmlLoader.loadXMLString(null!=this.tplData[this._layoutView]?this.tplData[this._layoutView]:this.tplData["3E"]);this._initWindows()};this._autoHor=[];this._autoVer=[];this._dimension=[320,200];this._colsRatio=this._rowsRatio=100;this._xmlParser=function(){for(var b=[],d=[],e={},m=this.getXMLTopNode("layout"),k=0;k<m.childNodes.length;k++){if("row"==m.childNodes[k].tagName){var n=
m.childNodes[k],s=document.createElement("TR");f.tpl.childNodes[0].appendChild(s);for(var u=0;u<n.childNodes.length;u++)if("cell"==n.childNodes[u].tagName){var v=n.childNodes[u],w=document.createElement("TD");w._dir="null";if(null!=v.getAttribute("obj")){for(var x=v.getAttribute("obj"),A=String(v.getAttribute("wh")).split(","),D=isNaN(A[0]),E=isNaN(A[0])?parseInt(f.polyObj[A[0]].style.width):0,y=0;y<b.length;y++)for(var C=0;C<b[y].length;C++)if(b[y][C]==x){if(!D){for(var D=!0,F=f.base.offsetWidth-
e[x][0]*f.skinParams[f.skin].ver_sep_width,E=0;E<b[y].length;E++)isNaN(b[y][E])||(F-=b[y][E],A[0]-=1);E=Math.ceil(F/A[0])}b[y][C]=E}!isNaN(E)&&0<=E&&(w.style.width=E+"px");D=isNaN(A[1]);E=isNaN(A[1])?parseInt(f.polyObj[A[1]].style.height):0;for(y=0;y<d.length;y++)for(C=0;C<d[y].length;C++)if(d[y][C]==x){if(!D){D=!0;F=f.base.offsetHeight-e[x][1]*f.skinParams[f.skin].hor_sep_height;for(E=0;E<d.length;E++)isNaN(d[E][C])||(F-=d[E][C],A[1]-=1);E=Math.ceil(F/A[1])}d[y][C]=E}!isNaN(E)&&0<=E&&(w.style.height=
E+"px");w.className="dhtmlxLayoutSinglePoly";w.innerHTML="";w._minW=null!=v.getAttribute("minWidth")?Number(v.getAttribute("minWidth")):f._minWidth;w._minH=null!=v.getAttribute("minHeight")?Number(v.getAttribute("minHeight")):f._minHeight;w._initCPanel=null!=v.getAttribute("cpanel")?"false"==v.getAttribute("cpanel")?!1:!0:!0;w._resize=v.getAttribute("resize");D=String(v.getAttribute("neighbors")).split(";");for(y=0;y<D.length;y++)C=String(D[y]).split(","),1<C.length&&(D[y]=C);w._rowData=D;f.polyObj[x]=
w}if(null!=v.getAttribute("sep")){if("hor"==v.getAttribute("sep")){w.className="dhtmlxLayoutPolySplitterHor";w._dir="hor";x=v.getAttribute("top").split(";");for(y=0;y<x.length;y++)C=String(x[y]).split(","),1<C.length&&(x[y]=C);w._top=x;x=v.getAttribute("bottom").split(";");for(y=0;y<x.length;y++)C=String(x[y]).split(","),1<C.length&&(x[y]=C);w._bottom=x;f.sepHor[f.sepHor.length]=w}else{w.className="dhtmlxLayoutPolySplitterVer";w._dir="ver";x=v.getAttribute("left").split(";");for(y=0;y<x.length;y++)C=
String(x[y]).split(","),1<C.length&&(x[y]=C);w._left=x;x=v.getAttribute("right").split(";");for(y=0;y<x.length;y++)C=String(x[y]).split(","),1<C.length&&(x[y]=C);w._right=x;f.sepVer[f.sepVer.length]=w}w._dblClick=v.getAttribute("dblclick");w._isSep=!0;w.innerHTML='<div style="width:5px;height:2px;overflow:hidden;">&nbsp;</div>'}null!=v.getAttribute("colspan")&&(w.colSpan=v.getAttribute("colspan"));null!=v.getAttribute("rowspan")&&(w.rowSpan=v.getAttribute("rowspan"));s.appendChild(w)}}"autosize"==m.childNodes[k].tagName&&
(f._autoHor=m.childNodes[k].getAttribute("hor").split(";"),f._autoVer=m.childNodes[k].getAttribute("ver").split(";"),f._totalCols=m.childNodes[k].getAttribute("cols"),f._totalRows=m.childNodes[k].getAttribute("rows"),f._dimension[0]=f._totalCols*f._colsRatio,f._dimension[1]=f._totalRows*f._rowsRatio);if("table"==m.childNodes[k].tagName){n=m.childNodes[k].getAttribute("data");E=String(n).split(";");for(y=0;y<E.length;y++){b[y]=[];d[y]=[];n=String(E[y]).split(",");for(C=0;C<n.length;C++)b[y][C]=n[C],
d[y][C]=n[C],null==e[n[C]]&&(e[n[C]]=[0,0])}for(var I in e){D=!1;for(y=0;y<b.length;y++)for(C=0;C<b[y].length;C++)if(b[y][C]==I&&!D){D=!0;for(n=0;n<b[y].length;n++)b[y][n]!=I&&e[I][0]++;for(n=0;n<b.length;n++)b[n][C]!=I&&e[I][1]++}}}}f._buildSurface();this.destructor()};this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this.listAutoSizes=function(){var b=this._availAutoSize[this._layoutView+"_hor"],d=this._availAutoSize[this._layoutView+"_ver"],e=this._autoHor.join(";"),f=this._autoVer.join(";");
return[e,f,b,d]};this.setAutoSize=function(b,d){if(null!=b){for(var e=!1,f=this._availAutoSize[this._layoutView+"_hor"],k=0;k<f.length;k++)e=e||f[k]==b;!0==e&&(this._autoHor=b.split(";"))}if(null!=d){e=!1;f=this._availAutoSize[this._layoutView+"_ver"];for(k=0;k<f.length;k++)e=e||f[k]==d;!0==e&&(this._autoVer=d.split(";"))}};this._buildSurface=function(){for(var b=0;b<this.tpl.childNodes[0].childNodes.length;b++)for(var d=this.tpl.childNodes[0].childNodes[b],e=0;e<d.childNodes.length;e++){var f=d.childNodes[e],
k=this;f._isSep||(f._isCell=!0,f.skin=this.skin,f.getId=function(){return this._idd},f.getIndex=function(){return this._ind},f.showHeader=function(){k.showPanel(this._idd)},f.hideHeader=function(){k.hidePanel(this._idd)},f.isHeaderVisible=function(){return k.isPanelVisible(this._idd)},f.setText=function(b){k.setText(this._idd,b)},f.getText=function(){return k.getText(this._idd)},f.expand=function(){k._isCollapsed(this._idd)&&k._expand(this._idd,"hide")},f.collapse=function(){k._isCollapsed(this._idd)||
k._collapse(this._idd,"hide")},f.isCollapsed=function(){return k._isCollapsed(this._idd)},f.dock=function(){k._isCollapsed(this._idd)&&(k._expand(this._idd,"dock"),k.dockWindow(this._idd))},f.undock=function(){k._isCollapsed(this._idd)||(k.unDockWindow(this._idd),k._collapse(this._idd,"dock"))},f.setWidth=function(b){Number(b)&&k._setWidth(this._idd,b)},f.getWidth=function(){return parseInt(this.style.width)},f.setHeight=function(b){Number(b)&&k._setHeight(this._idd,b)},f.getHeight=function(){return parseInt(this.style.height)},
f.fixSize=function(b,d){k._fixSize(this._idd,b,d)},f.progressOn=function(){k._progressControl(this._idd,!0)},f.progressOff=function(){k._progressControl(this._idd,!1)},f._doOnAttachMenu=function(){this.adjustContent(this.childNodes[0],this._noHeader?0:k.skinParams[k.skin].cpanel_height);this.updateNestedObjects()},f._doOnAttachToolbar=function(){this.adjustContent(this.childNodes[0],this._noHeader?0:k.skinParams[k.skin].cpanel_height);this.updateNestedObjects()},f._doOnAttachStatusBar=function(){this.adjustContent(this.childNodes[0],
this._noHeader?0:k.skinParams[k.skin].cpanel_height);this.updateNestedObjects()},f._doOnFrameContentLoaded=function(){k.callEvent("onContentLoaded",[this._idd])},f._doOnResize=function(){this.adjustContent(this.childNodes[0],this._noHeader?0:k.skinParams[k.skin].cpanel_height);this.updateNestedObjects()},f._redraw=function(){},f.showArrow=function(){this.childNodes[0].childNodes[0].childNodes[4].style.display=""},f.hideArrow=function(){this.childNodes[0].childNodes[0].childNodes[4].style.display=
"none"},f.isArrowVisible=function(){return"none"!=this.childNodes[0].childNodes[0].childNodes[4].style.display});"ver"==f._dir&&(f.onselectstart=function(b){b=b||event;b.returnValue=!1},f[this._isIPad?"ontouchstart":"onmousedown"]=function(b){b=b||event;if(this._lastClick){var d=this._lastClick;this._lastClick=(new Date).getTime();if(d+k._dblClickTM>=this._lastClick&&!0===k._doOnDoubleClick(this))return}else this._lastClick=(new Date).getTime();d=k._findDockCellsVer(this);k._resAreaData=[];if(null!=
d[0]&&null!=d[1]){-1==String(document.body.className).search("dhxCursorWResize")&&(document.body.className+=" dhxCursorWResize");k._resObj=this;k._anyExpL=d[0];k._anyExpR=d[1];k._collectResAreaData(d);k._resX=k._isIPad?b.touches[0].clientX:b.clientX;if(!1==k._effects.resize){k._attachSizer(this);k.sizer._leftXStart=parseInt(k.sizer.style.left);d=k.polyObj[k._anyExpL[0]];k._resXMaxWidthLeft=parseInt(d.style.width)-k._minWidth;var e=k.polyObj[k._anyExpR[0]];k._resXMaxWidthRight=parseInt(e.style.width)-
k._minWidth;if(0<k._alterSizes.length)for(var f=0;f<k._alterSizes.length;f++){for(var g=0;g<k._anyExpL.length;g++)if(k._alterSizes[f][0]==k._anyExpL[g]){var h=k._resXMaxWidthLeft=parseInt(d.style.width)-k._alterSizes[f][1];h<k._resXMaxWidthLeft&&(k._resXMaxWidthLeft=h)}for(g=0;g<k._anyExpR.length;g++)if(k._alterSizes[f][0]==k._anyExpR[g]&&(h=parseInt(e.style.width)-k._alterSizes[f][1],h<k._resXMaxWidthRight))k._resXMaxWidthRight=h}k._resXStart=k._resX}k._resFunc=k._resizeVer;k._showCovers();k._isIPad&&
b.preventDefault()}},f.onmouseup=function(){!0==k._effects.resize&&(k._resizeStop(),k._anyExpL=null,k._anyExpR=null)});"hor"==f._dir&&(f.onselectstart=function(b){b=b||event;b.returnValue=!1},f[this._isIPad?"ontouchstart":"onmousedown"]=function(b){b=b||event;if(this._lastClick){var d=this._lastClick;this._lastClick=(new Date).getTime();if(d+k._dblClickTM>=this._lastClick&&!0===k._doOnDoubleClick(this))return}else this._lastClick=(new Date).getTime();d=k._findDockCellsHor(this);k._resAreaData=[];
if(null!=d[0]&&null!=d[1]){-1==String(document.body.className).search("dhxCursorNResize")&&(document.body.className+=" dhxCursorNResize");k._resObj=this;k._anyExpT=d[0];k._anyExpB=d[1];k._collectResAreaData(d);k._resY=k._isIPad?b.touches[0].clientY:b.clientY;if(!1==k._effects.resize){k._attachSizer(this);k.sizer._topYStart=parseInt(k.sizer.style.top);d=k.polyObj[k._anyExpT[0]];k._resYMaxHeightTop=parseInt(d.style.height)-k._minHeight;var e=k.polyObj[k._anyExpB[0]];k._resYMaxHeightBottom=parseInt(e.style.height)-
k._minHeight;if(0<k._alterSizes.length)for(var f=0;f<k._alterSizes.length;f++){for(var g=0;g<k._anyExpT.length;g++)if(k._alterSizes[f][0]==k._anyExpT[g]){var h=parseInt(d.style.height)-k._alterSizes[f][2]-("none"!=d.childNodes[0].style.display?k.skinParams[k.skin].cpanel_height:0);h<k._resYMaxHeightTop&&(k._resYMaxHeightTop=h)}for(g=0;g<k._anyExpB.length;g++)if(k._alterSizes[f][0]==k._anyExpB[g]&&(h=parseInt(e.style.height)-k._alterSizes[f][2]-("none"!=e.childNodes[0].style.display?k.skinParams[k.skin].cpanel_height:
0),h<k._resYMaxHeightBottom))k._resYMaxHeightBottom=h}k._resYStart=k._resY}k._resFunc=k._resizeHor;k._showCovers();k._isIPad&&b.preventDefault()}},f.onmouseup=function(){!0==k._effects.resize&&(k._resizeStop(),k._anyExpT=null,k._anyExpB=null)})}for(var n in this.polyObj){this.polyObj[n]._layout=this;this.polyObj[n]._collapsed=!1;this.polyObj[n]._idd=n;this.polyObj[n]._ind=this.items.length;this.items[this.items.length]=this.polyObj[n];b=document.createElement("DIV");b.style.position="relative";b.style.left=
"0px";b.style.top="0px";b.style.width=this.polyObj[n].style.width;b.style.height=this.polyObj[n].style.height;b.style.overflow="hidden";this.polyObj[n].appendChild(b);d=document.createElement("DIV");d._dockCell=n;d._resize=this.polyObj[n]._resize;d.className="dhtmlxPolyInfoBar";d.innerHTML="<div class='dhtmlxInfoBarLabel'></div><div class='dhtmlxInfoBarButtonsFake'><div class='dhtmlxInfoBarButtonsFake2'></div></div><div class='dhtmlxInfoButtonDock' title='"+this.i18n.dock+"'></div><div class='dhtmlxInfoButtonUnDock' style='display: none;' title='"+
this.i18n.undock+"'></div><div class='dhtmlxInfoButtonShowHide_"+d._resize+"' title='"+this.i18n.collapse+"'></div><div class='dhtmlxLineL'></div><div class='dhtmlxLineR'></div>";!0==this.polyObj[n]._initCPanel?(d._h=this._CPanelHeight,d.style.display=""):(d._h=0,d.style.display="none");this.polyObj[n].childNodes[0].appendChild(d);d.ondblclick=function(){k.callEvent("onDblClick",[this._dockCell])};d.childNodes[4].onclick=function(){var b=this.parentNode._dockCell;k._isCollapsed(b)?k._expand(b,"hide"):
k._collapse(b,"hide")};for(b=0;b<d.childNodes.length;b++)d.childNodes[b].onselectstart=function(b){b=b||event;b.returnValue=!1};b=document.createElement("DIV");b.className="dhxcont_global_content_area";this.polyObj[n].childNodes[0].appendChild(b);(new dhtmlXContainer(this.polyObj[n])).setContent(b);"dhx_web"==this.skin&&this.polyObj[n]._setPadding(this.skinParams[this.skin].cell_pading_max,"dhxcont_layout_dhx_web");this.polyObj[n].adjustContent(this.polyObj[n].childNodes[0],this.skinParams[this.skin].cpanel_height)}this._fixIcons()};
this._anyExpB=this._anyExpT=this._anyExpR=this._anyExpL=this._resFunc=this._resObj=this._resY=this._resX=null;this._expand=function(b,d){this._doExpand(this.polyObj[b]._resize,b,this.polyObj[b]._rowData,d)};this._collapse=function(b,d){this._isCollapsed(b)||(this.polyObj[b]._savedW=parseInt(this.polyObj[b].style.width),this.polyObj[b]._savedH=parseInt(this.polyObj[b].style.height),this._doCollapse(this.polyObj[b]._resize,b,this.polyObj[b]._rowData,d))};this._isCollapsed=function(b){return this.polyObj[b]._collapsed};
this._checkAlterMinSize=function(b){this._alterSizes=[];for(var d=0;d<b.length;d++)for(var e=0;e<b[d].length;e++)if(null!=this.polyObj[b[d][e]].vs[this.polyObj[b[d][e]].av].layout){var f=this.polyObj[b[d][e]].vs[this.polyObj[b[d][e]].av].layout._defineWindowMinDimension(this.polyObj[b[d][e]],!0);f[0]=b[d][e];this._alterSizes[this._alterSizes.length]=f}};this._findDockCellsVer=function(b){var d=[null,null];if(null==b)return d;for(var e=null,f=b._left.length-1;0<=f;f--)if(null==e)if("object"==typeof b._left[f]){for(var k=
!1,n=0;n<b._left[f].length;n++)k=k||this.polyObj[b._left[f][n]]._isBlockedWidth||!1;k||(e=b._left[f])}else!1==this.polyObj[b._left[f]]._collapsed&&(this.polyObj[b._left[f]]._isBlockedWidth||(e=b._left[f]));for(var s=null,f=0;f<b._right.length;f++)if(null==s)if("object"==typeof b._right[f]){k=!1;for(n=0;n<b._right[f].length;n++)k=k||this.polyObj[b._right[f][n]]._isBlockedWidth||!1;k||(s=b._right[f])}else!1==this.polyObj[b._right[f]]._collapsed&&(this.polyObj[b._right[f]]._isBlockedWidth||(s=b._right[f]));
if(null==e||null==s)return d;"string"==typeof e&&(e=Array(e));"string"==typeof s&&(s=Array(s));d[0]=e;d[1]=s;this._checkAlterMinSize(d);this._minWRAlter=this._minWLAlter=0;if(0<this._alterSizes.length&&!0==this._effects.resize){b=[];k=[];for(f=0;f<e.length;f++)b[f]=this.polyObj[e[f]];for(f=0;f<s.length;f++)k[f]=this.polyObj[s[f]];for(f=0;f<b.length;f++)for(n=0;n<this._alterSizes.length;n++)this._alterSizes[n][0]==b[f]._idd&&this._minWLAlter<this._alterSizes[n][1]&&(this._minWLAlter=this._alterSizes[n][1]);
for(f=0;f<k.length;f++)for(n=0;n<this._alterSizes.length;n++)this._alterSizes[n][0]==k[f]._idd&&this._maxWRAlter<this._alterSizes[n][1]&&(this._minWRAlter=this._alterSizes[n][1])}return d};this._findDockCellsHor=function(b){var d=[null,null];if(null==b)return d;for(var e=null,f=b._top.length-1;0<=f;f--)if(null==e)if("object"==typeof b._top[f]){for(var k=!1,n=0;n<b._top[f].length;n++)k=k||this.polyObj[b._top[f][n]]._isBlockedHeight||!1;k||(e=b._top[f])}else!1==this.polyObj[b._top[f]]._collapsed&&(this.polyObj[b._top[f]]._isBlockedHeight||
(e=b._top[f]));for(var s=null,f=0;f<b._bottom.length;f++)if(null==s)if("object"==typeof b._bottom[f]){k=!1;for(n=0;n<b._bottom[f].length;n++)k=k||this.polyObj[b._bottom[f][n]]._isBlockedHeight||!1;k||(s=b._bottom[f])}else!1==this.polyObj[b._bottom[f]]._collapsed&&(this.polyObj[b._bottom[f]]._isBlockedHeight||(s=b._bottom[f]));if(null==e||null==s)return d;"string"==typeof e&&(e=Array(e));"string"==typeof s&&(s=Array(s));d[0]=e;d[1]=s;this._checkAlterMinSize(d);this._minHBAlter=this._minHTAlter=0;if(0<
this._alterSizes.length&&!0==this._effects.resize){b=[];k=[];for(f=0;f<e.length;f++)b[f]=this.polyObj[e[f]];for(f=0;f<s.length;f++)k[f]=this.polyObj[s[f]];for(f=0;f<b.length;f++)for(n=0;n<this._alterSizes.length;n++)this._alterSizes[n][0]==b[f]._idd&&this._minHTAlter<this._alterSizes[n][2]&&(this._minHTAlter=this._alterSizes[n][2]);for(f=0;f<k.length;f++)for(n=0;n<this._alterSizes.length;n++)this._alterSizes[n][0]==k[f]._idd&&this._minHBAlter<this._alterSizes[n][2]&&(this._minHBAlter=this._alterSizes[n][2])}return d};
this._resizeVer=function(b){this._isIPad&&b.preventDefault();if(!(null==this._resObj||null==this._anyExpL||null==this._anyExpR))if(b=this._isIPad?b.touches[0].clientX:b.clientX,!1==this._effects.resize){this._resX=b;var d=b-this._resXStart;-d>this._resXMaxWidthLeft&&0>d&&(d=-this._resXMaxWidthLeft,this._resX=d+this._resXStart);d>this._resXMaxWidthRight&&0<d&&(d=this._resXMaxWidthRight,this._resX=d+this._resXStart);this.sizer.style.left=this.sizer._leftXStart+d+"px"}else{for(var e=this._anyExpL,m=
this._anyExpR,d=b-f._resX,k=[],n=[],s=0;s<e.length;s++)k[s]=this.polyObj[e[s]];for(s=0;s<m.length;s++)n[s]=this.polyObj[m[s]];s=parseInt(k[0].style.width);e=parseInt(n[0].style.width);if(0>d){if(d=s+d,d>k[0]._minW&&d>this._minWLAlter){for(var u=e+s-d,s=0;s<k.length;s++)this._setW(k[s],d);for(s=0;s<n.length;s++)this._setW(n[s],u);this._resX=b}}else if(0<d&&(u=e-d,u>n[0]._minW&&u>this._minWRAlter)){d=s+e-u;for(s=0;s<k.length;s++)this._setW(k[s],d);for(s=0;s<n.length;s++)this._setW(n[s],u);this._resX=
b}}};this._resizeHor=function(b){if(!(null==this._resObj||null==this._anyExpT||null==this._anyExpB))if(b=this._isIPad?b.touches[0].clientY:b.clientY,!1==this._effects.resize){this._resY=b;var d=b-this._resYStart;-d>this._resYMaxHeightTop&&0>d&&(d=-this._resYMaxHeightTop,this._resY=d+this._resYStart);d>this._resYMaxHeightBottom&&0<d&&(d=this._resYMaxHeightBottom,this._resY=d+this._resYStart);this.sizer.style.top=this.sizer._topYStart+d+"px"}else{for(var e=this._anyExpT,m=this._anyExpB,d=b-f._resY,
k=[],n=[],s=0;s<e.length;s++)k[s]=this.polyObj[e[s]];for(s=0;s<m.length;s++)n[s]=this.polyObj[m[s]];s=parseInt(k[0].style.height);e=parseInt(n[0].style.height);if(0>d){if(d=s+d,d>k[0]._minH+this._minHTAlter){for(var u=e+s-d,s=0;s<k.length;s++)this._setH(k[s],d);for(s=0;s<n.length;s++)this._setH(n[s],u);this._resY=b}}else if(0<d&&(u=e-d,u>n[0]._minH+this._minHBAlter)){d=s+e-u;for(s=0;s<k.length;s++)this._setH(k[s],d);for(s=0;s<n.length;s++)this._setH(n[s],u);this._resY=b}}};this._resizeStop=function(){var b=
document.body.className;if(-1!==b.search("dhxCursorWResize")||-1!==b.search("dhxCursorNResize"))document.body.className=String(document.body.className).replace(/dhxCursorWResize/g,"").replace(/dhxCursorNResize/g,"");if(null!=this._resObj)if(!1==this._effects.resize){this.sizer.style.display="none";if("hor"==this._resObj._dir){var b="object"==typeof this._anyExpT[0]?this._anyExpT[0][0]:this._anyExpT[0],d=this._resY-this._resYStart,d=parseInt(this.polyObj[b].style.height)+d;this._setHeight(b,d)}else b=
"object"==typeof this._anyExpL[0]?this._anyExpL[0][0]:this._anyExpL[0],d=this._resX-this._resXStart,d=parseInt(this.polyObj[b].style.width)+d,this._setWidth(b,d);var e={},f=function(b){for(var d in b)"object"==typeof b[d]&&f(b[d]),e[b[d]]=!0};f(this._anyExpT);f(this._anyExpB);f(this._anyExpL);f(this._anyExpR);var b=[],k;for(k in e)b[b.length]=k;"object"==typeof this._anyExpT&&null!=this._anyExpT&&(this.updateNestedObjectsArray(this._anyExpT),this._anyExpT=null);"object"==typeof this._anyExpB&&null!=
this._anyExpB&&(this.updateNestedObjectsArray(this._anyExpB),this._anyExpB=null);"object"==typeof this._anyExpL&&null!=this._anyExpL&&(this.updateNestedObjectsArray(this._anyExpL),this._anyExpL=null);"object"==typeof this._anyExpR&&null!=this._anyExpR&&(this.updateNestedObjectsArray(this._anyExpR),this._anyExpR=null);this._resFunc=this._resObj=null;this._hideCovers();this._fixToolbars();this._fixCollapsedText();this.callEvent("onPanelResizeFinish",[b])}else{k=[];if(null!=this._resObj._left)for(b=
0;b<this._resObj._left.length;b++)k[k.length]=this._resObj._left[b];if(null!=this._resObj._right)for(b=0;b<this._resObj._right.length;b++)k[k.length]=this._resObj._right[b];if(null!=this._resObj._top)for(b=0;b<this._resObj._top.length;b++)k[k.length]=this._resObj._top[b];if(null!=this._resObj._bottom)for(b=0;b<this._resObj._bottom.length;b++)k[k.length]=this._resObj._bottom[b];this._resObj=this._resFunc=null;this._hideCovers();d=[];for(b=0;b<k.length;b++)if("object"==typeof k[b])for(var n=0;n<k[b].length;n++)d[d.length]=
this.polyObj[k[b][n]];else d[d.length]=this.polyObj[k[b]];for(b=0;b<d.length;b++)d[b].updateNestedObjects();this.callEvent("onPanelResizeFinish",[])}};this._showCovers=function(){for(var b in this.polyObj)this._effects.highlight&&this._isResizable(b)&&this.polyObj[b].showCoverBlocker()};this._hideCovers=function(){for(var b in this.polyObj)this.polyObj[b].hideCoverBlocker()};this._isResizable=function(b){for(var d=!1,e=0;e<this._resAreaData.length;e++)d=d||this._resAreaData[e]==b;return d};this._collectResAreaData=
function(b){for(var d=0;d<b.length;d++)"string"==typeof b[d]?this._resAreaData[this._resAreaData.length]=b[d]:"object"==typeof b[d]&&this._collectResAreaData(b[d])};this._doOnDoubleClick=function(b){if(null!=b._dblClick&&null!=this.polyObj[b._dblClick]&&!this.polyObj[b._dblClick]._noHeader){var d=this.polyObj[b._dblClick];if("none"!=d.childNodes[0].style.display)return!0==d._collapsed?this._doExpand(d._resize,b._dblClick,d._rowData,"hide"):(d._savedW=parseInt(d.style.width),d._savedH=parseInt(d.style.height),
this._doCollapse(d._resize,b._dblClick,d._rowData,"hide")),!0}};this._doOnSelectStart=function(b){b=b||event;null!=f._resObj&&(b.returnValue=!1)};this._doOnMouseMove=function(b){b=b||event;null!=f._resObj&&null!=f._resFunc&&f._resFunc(b)};this._doOnMouseUp=function(){f._resizeStop&&f._resizeStop()};this._isIPad?(document.addEventListener("touchmove",f._doOnMouseMove,!1),document.addEventListener("touchend",f._doOnMouseUp,!1)):"undefined"!=typeof window.addEventListener?(document.body.addEventListener("mousemove",
f._doOnMouseMove,!1),document.body.addEventListener("mouseup",f._doOnMouseUp,!1)):(document.body.attachEvent("onselectstart",f._doOnSelectStart),document.body.attachEvent("onmousemove",f._doOnMouseMove),document.body.attachEvent("onmouseup",f._doOnMouseUp));this._doExpand=function(b,d,e,f){if(!(1>=e.length)){for(var k=-1,n=0;n<e.length;n++)e[n]==d&&(k=n);if(-1!=k){for(var s=null,n=k+1;n<e.length;n++)null==s&&("string"==typeof e[n]?!1==this.polyObj[e[n]]._collapsed&&(s=e[n]):s=e[n]);if(null==s)for(n=
k-1;0<=n;n--)null==s&&("string"==typeof e[n]?!1==this.polyObj[e[n]]._collapsed&&(s=e[n]):s=e[n]);if(null!=s){"object"!=typeof s&&(s=Array(s));if("hor"==b){e=65536;for(n=0;n<s.length;n++)k=null!=this.polyObj[s[n]].vs[this.polyObj[s[n]].av].layout?this.polyObj[s[n]].vs[this.polyObj[s[n]].av].layout._defineWindowMinDimension(this.polyObj[s[n]],!0):[0,0],k=parseInt(this.polyObj[s[n]].style.width)-this._minWidth-k[1],k<e&&(e=k);k=this.polyObj[d]._savedW;k>e&&(k=e);if(k<this._minWidth)return}else{e=65536;
for(n=0;n<s.length;n++)k=null!=this.polyObj[s[n]].vs[this.polyObj[s[n]].av].layout?this.polyObj[s[n]].vs[this.polyObj[s[n]].av].layout._defineWindowMinDimension(this.polyObj[s[n]],!0):[0,0,0],k=parseInt(this.polyObj[s[n]].style.height)-this._minHeight-k[2],k<e&&(e=k);k=this.polyObj[d]._savedH;k>e&&(k=e);if(k<this._minHeight)return}e=Math.round(k/3);this.polyObj[d].childNodes[0].childNodes[1].style.display="";this.polyObj[d].childNodes[0].childNodes[0].className="dhtmlxPolyInfoBar";this.polyObj[d].childNodes[0].childNodes[0].childNodes[1].style.display=
"";this.polyObj[d].childNodes[0].childNodes[0].childNodes[2].style.display="";this.polyObj[d].childNodes[0].childNodes[0].childNodes[4].style.display="";for(var u=[],n=0;n<s.length;n++)u[n]=this.polyObj[s[n]];"dhtmlxLayoutSinglePolyTabbarCollapsed"==this.polyObj[d].className&&(this.polyObj[d].className="dhtmlxLayoutSinglePolyTabbar");this._expandEffect(this.polyObj[d],u,k,f,!0==this._effects.collapse?e:1E6,b)}}}};this._doCollapse=function(b,d,e,f){if(!(1>=e.length)){for(var k=-1,n=0;n<e.length;n++)e[n]==
d&&(k=n);if(-1!=k){for(var s=null,n=k+1;n<e.length;n++)null==s&&("string"==typeof e[n]?!1==this.polyObj[e[n]]._collapsed&&(s=e[n]):s=e[n]);if(null==s)for(n=k-1;0<=n;n--)null==s&&("string"==typeof e[n]?!1==this.polyObj[e[n]]._collapsed&&(s=e[n]):s=e[n]);null==s&&null!=e[k+1]&&(s=e[k+1]);null==s&&0<=k-1&&null!=e[k-1]&&(s=e[k-1]);if(null!=s){"object"!=typeof s&&(!0==this.polyObj[s]._collapsed&&(this.polyObj[s].childNodes[0].childNodes[1].style.display="",this.polyObj[s]._collapsed=!1,this.polyObj[s].childNodes[0].childNodes[0].className=
"dhtmlxPolyInfoBar",this.polyObj[s].childNodes[0].childNodes[0].childNodes[1].style.display="",this.polyObj[s].childNodes[0].childNodes[0].childNodes[4].title=this.i18n.collapse,this.polyObj[s].childNodes[0].childNodes[0].childNodes[2].style.display="",this.polyObj[s].childNodes[0].childNodes[0].childNodes[3].style.display="none",this.polyObj[s].childNodes[0].childNodes[0].childNodes[4].style.display="",!0===this.polyObj[s]._isUnDocked&&this.dockWindow(s),"dhtmlxLayoutSinglePolyTabbarCollapsed"==
this.polyObj[s].className&&(this.polyObj[s].className="dhtmlxLayoutSinglePolyTabbar"),this._fixSplitters(),this._fixIcons(),this.polyObj[s].removeAttribute("title"),this._fixToolbars(),this._fixCollapsedText(),this.callEvent("onExpand",[s])),s=Array(s));e=[];for(n=0;n<s.length;n++)e[n]=this.polyObj[s[n]];n="hor"==b?Math.round(Math.max(this.polyObj[d].offsetWidth,this.polyObj[s[0]].offsetWidth)/3):Math.round(Math.max(this.polyObj[d].offsetHeight,this.polyObj[s[0]].offsetHeight)/3);this.polyObj[d].childNodes[0].childNodes[1].style.display=
"none";this._collapseEffect(this.polyObj[d],e,f,!0==this._effects.collapse?n:1E6,b)}}}};this.setEffect=function(b,d){null!=this._effects[b]&&"boolean"==typeof d&&(this._effects[b]=d)};this.getEffect=function(b){return null!=this._effects[b]?this._effects[b]:null};this._expandEffect=function(b,d,e,m,k,n){if("hor"==n)var s=parseInt(b.style.width),u=parseInt(d[0].style.width);else s=parseInt(b.style.height),u=parseInt(d[0].style.height);var v=s+k;v>e&&(v=e);"hor"==n?(b.style.width=v+"px",b.childNodes[0].style.width=
b.style.width):(b.style.height=v+"px",b.childNodes[0].style.height=b.style.height);b.adjustContent(b.childNodes[0],b._noHeader?0:this.skinParams[this.skin].cpanel_height);for(var w=0;w<d.length;w++)"hor"==n?(d[w].style.width=u+s-v+"px",d[w].childNodes[0].style.width=d[w].style.width):(d[w].style.height=u+s-v+"px",d[w].childNodes[0].style.height=d[w].style.height),d[w].adjustContent(d[w].childNodes[0],d[w]._noHeader?0:this.skinParams[this.skin].cpanel_height);if(v!=e)window.setTimeout(function(){f._expandEffect(b,
d,e,m,k,n)},4);else{b._collapsed=!1;for(w=0;w<d.length;w++)d[w].updateNestedObjects();this.polyObj[b._idd].updateNestedObjects();this.polyObj[b._idd].childNodes[0].childNodes[0].childNodes[4].title=this.i18n.collapse;this._fixSplitters();this._fixIcons();b.removeAttribute("title");this._fixToolbars();this._fixCollapsedText();this.callEvent("onExpand",[b._idd])}};this._collapseEffect=function(b,d,e,m,k){if("hor"==k)var n=parseInt(b.style.width),s=parseInt(d[0].style.width);else n=parseInt(b.style.height),
s=parseInt(d[0].style.height);var u=n-m;"hor"==k?(u<this._collapsedW&&(u=this._collapsedW),b.style.width=u+"px",b.childNodes[0].style.width=b.style.width):(u<this._collapsedH&&(u=this._collapsedH),b.style.height=u+"px",b.childNodes[0].style.height=b.style.height);for(var v=0;v<d.length;v++)"hor"==k?(d[v].style.width=s+(n-u)+"px",d[v].childNodes[0].style.width=d[v].style.width):(d[v].style.height=s+(n-u)+"px",d[v].childNodes[0].style.height=d[v].style.height),d[v].adjustContent(d[v].childNodes[0],
d[v]._noHeader?0:this.skinParams[this.skin].cpanel_height);if(u>this._collapsedW&&"hor"==k||u>this._collapsedH&&"ver"==k)window.setTimeout(function(){f._collapseEffect(b,d,e,m,k)},4);else{for(v=0;v<d.length;v++)"hor"==k?(d[v].style.width=s+(n-u)+"px",d[v].childNodes[0].style.width=d[v].style.width):(d[v].style.height=s+(n-u)+"px",d[v].childNodes[0].style.height=d[v].style.height),d[v].adjustContent(d[v].childNodes[0],d[v]._noHeader?0:this.skinParams[this.skin].cpanel_height);b._collapsed=!0;b.childNodes[0].childNodes[0].className=
"hor"==k?"dhtmlxPolyInfoBarCollapsedVer":"dhtmlxPolyInfoBarCollapsedHor";for(v=0;v<d.length;v++)d[v].updateNestedObjects();"hide"==e?(b.childNodes[0].childNodes[0].style.display="",b.childNodes[0].childNodes[0].childNodes[1].style.display="",b.childNodes[0].childNodes[0].childNodes[2].style.display="none",b.childNodes[0].childNodes[0].childNodes[3].style.display="none",b.childNodes[0].childNodes[0].childNodes[4].style.display=""):(b.childNodes[0].childNodes[0].childNodes[1].style.display="",b.childNodes[0].childNodes[0].childNodes[2].style.display=
"",b.childNodes[0].childNodes[0].childNodes[3].style.display="none",b.childNodes[0].childNodes[0].childNodes[4].style.display="none");"dhtmlxLayoutSinglePolyTabbar"==b.className&&(b.className="dhtmlxLayoutSinglePolyTabbarCollapsed");this.polyObj[b._idd].childNodes[0].childNodes[0].childNodes[4].title=this.i18n.expand;this._fixSplitters();this._fixIcons();b.title=this.getTextTooltip(b._idd);this._fixToolbars();this._fixCollapsedText();this.callEvent("onCollapse",[b._idd])}};this._setW=function(b,d){!isNaN(d)&&
0<=d&&(b.style.width=d+"px");b.childNodes[0].style.width=b.style.width;b.adjustContent(b.childNodes[0],b._noHeader?0:this.skinParams[this.skin].cpanel_height)};this._setH=function(b,d){!isNaN(d)&&0<=d&&(b.style.height=d+"px");b.childNodes[0].style.height=b.style.height;b.adjustContent(b.childNodes[0],b._noHeader?0:this.skinParams[this.skin].cpanel_height)};this._setWidth=function(b,d){if(null!=this.polyObj[b]&&Number(d)){for(var e=null,f=0;f<this.sepVer.length;f++){var k=this.sepVer[f]._left;if(k[k.length-
1]==b)e=[this.sepVer[f],"left"];else if("object"==typeof k[k.length-1])for(var k=k[k.length-1],n=0;n<k.length;n++)k[n]==b&&(e=[this.sepVer[f],"left"]);k=this.sepVer[f]._right;if(k[0]==b)e=[this.sepVer[f],"right"];else if("object"==typeof k[0]){k=k[0];for(n=0;n<k.length;n++)k[n]==b&&(e=[this.sepVer[f],"right"])}}if(null!=e&&(f=this._findDockCellsVer(e[0]),k=f[0],n=f[1],!(null==k||null==n))){f=parseInt(this.polyObj[k[0]].style.width)+parseInt(this.polyObj[n[0]].style.width);d<this._minWidth?d=this._minWidth:
d>f-this._minWidth&&(d=f-this._minWidth);for(var s=f-d,f=0;f<k.length;f++)this._setW(this.polyObj[k[f]],"left"==e[1]?d:s),this.polyObj[k[f]].updateNestedObjects();for(f=0;f<n.length;f++)this._setW(this.polyObj[n[f]],"right"==e[1]?d:s),this.polyObj[n[f]].updateNestedObjects()}}};this._setHeight=function(b,d){if(null!=this.polyObj[b]&&Number(d)){for(var e=null,f=0;f<this.sepHor.length;f++){var k=this.sepHor[f]._top;if(k[k.length-1]==b)e=[this.sepHor[f],"top"];else if("object"==typeof k[k.length-1])for(var k=
k[k.length-1],n=0;n<k.length;n++)k[n]==b&&(e=[this.sepHor[f],"top"]);k=this.sepHor[f]._bottom;if(k[0]==b)e=[this.sepHor[f],"bottom"];else if("object"==typeof k[0]){k=k[0];for(n=0;n<k.length;n++)k[n]==b&&(e=[this.sepHor[f],"bottom"])}}if(null!=e&&(f=this._findDockCellsHor(e[0]),k=f[0],n=f[1],!(null==k||null==n))){f=parseInt(this.polyObj[k[0]].style.height)+parseInt(this.polyObj[n[0]].style.height);d<this._minHeight?d=this._minHeight:d>f-this._minHeight&&(d=f-this._minHeight);for(var s=f-d,f=0;f<k.length;f++)this._setH(this.polyObj[k[f]],
"top"==e[1]?d:s),this.polyObj[k[f]].updateNestedObjects();for(f=0;f<n.length;f++)this._setH(this.polyObj[n[f]],"bottom"==e[1]?d:s),this.polyObj[n[f]].updateNestedObjects()}}};this.updateNestedObjectsArray=function(b){for(var d=0;d<b.length;d++)"object"==typeof b[d]?this.updateNestedObjectsArray(b[d]):this.polyObj[b[d]].updateNestedObjects()};this.dockWindow=function(b){this.dhxWins&&this.dhxWins.window(this.dhxWinsIdPrefix+b)&&(this.dhxWins.window(this.dhxWinsIdPrefix+b).close(),this.dhxWins.window(this.dhxWinsIdPrefix+
b).moveContentTo(this.polyObj[b]),this.polyObj[b]._isUnDocked=!1,this.callEvent("onDock",[b]))};this.unDockWindow=function(b){this._initWindows(b);this.polyObj[b].moveContentTo(this.dhxWins.window(this.dhxWinsIdPrefix+b));this.polyObj[b]._isUnDocked=!0;this.callEvent("onUnDock",[b])};this._initWindows=function(b){if(window.dhtmlXWindows&&(this.dhxWins||!(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.skin),this.dhxWins.setImagePath(this.imagePath),this.dhxWinsIdPrefix="",!b))){var d=this.dhxWinsIdPrefix+
b;if(this.dhxWins.window(d))this.dhxWins.window(d).show();else{var e=this,d=this.dhxWins.createWindow(d,20,20,320,200);d.setText(this.polyObj[b].getText());d.button("close").hide();d.attachEvent("onClose",function(b){b.hide()});d.button("dock").show();d.button("dock").attachEvent("onClick",function(){e.polyObj[b].dock()});d.dockedCell=this.polyObj[b]}}};this.isPanelVisible=function(b){return!this.polyObj[b]._noHeader};this.showPanel=function(b){null!=this.polyObj[b]&&!0!=this.polyObj[b]._collapsed&&
(this.polyObj[b].childNodes[0].childNodes[0].style.display="",this.polyObj[b]._noHeader=!1,"dhx_web"==this.skin&&this.polyObj[b]._setPadding(this.skinParams[this.skin].cell_pading_max,"dhxcont_layout_dhx_web"),this.polyObj[b].adjustContent(this.polyObj[b].childNodes[0],this.skinParams[this.skin].cpanel_height),this.polyObj[b].updateNestedObjects())};this.hidePanel=function(b){null!=this.polyObj[b]&&!0!=this.polyObj[b]._collapsed&&(this.polyObj[b].childNodes[0].childNodes[0].style.display="none",this.polyObj[b]._noHeader=
!0,"dhx_web"==this.skin&&this.polyObj[b]._setPadding(this.skinParams[this.skin].cell_pading_min,""),this.polyObj[b].adjustContent(this.polyObj[b].childNodes[0],0),this.polyObj[b].updateNestedObjects())};this.setText=function(b,d){this._changeCPanelText(b,d)};this.getText=function(b){return this.polyObj[b].childNodes[0].childNodes[0].childNodes[0].innerHTML};this.getTextTooltip=function(b){b=this.polyObj[b].childNodes[0].childNodes[0].childNodes[0];return b.innerText||b.textContent};this._changeCPanelText=
function(b,d){null!=f.polyObj[b]&&(f.polyObj[b].childNodes[0].childNodes[0].childNodes[0].innerHTML=d,null!=f.dhxWins&&null!=f.dhxWins.window(f.dhxWinsIdPrefix+b)&&f.dhxWins.window(f.dhxWinsIdPrefix+b).setText(d))};this.forEachItem=function(b){for(var d=0;d<this.items.length;d++)b(this.items[d])};this._fixPositionInWin=function(b,d){this.base.style.width=b+"px";this.base.style.height=d+"px"};this.attachMenu=function(){this.base._isWindow?this.menu=this.base._window.attachMenu():(this.cont.obj.skin=
this.skin,this.menu=this.cont.obj.attachMenu(),this.cont.obj.adjustContent(this.cont.obj,0),this.setSizes());return this.menu};this.detachMenu=function(){this.menu&&(this.cont.obj.detachMenu(),this.setSizes(),this.menu=null)};this.showMenu=function(){this.menu&&(this.cont.obj.showMenu(),this.setSizes())};this.hideMenu=function(){this.menu&&(this.cont.obj.hideMenu(),this.setSizes())};this.attachToolbar=function(){this.base._isWindow?this.toolbar=this.base._window.attachToolbar():(this.cont.obj.skin=
this.skin,this.toolbar=this.cont.obj.attachToolbar(),this.cont.obj.adjustContent(this.cont.obj,0),this.setSizes());return this.toolbar};this.detachToolbar=function(){this.toolbar&&(this.cont.obj.detachToolbar(),this.setSizes(),this.toolbar=null)};this.showToolbar=function(){this.toolbar&&(this.cont.obj.showToolbar(),this.setSizes())};this.hideToolbar=function(){this.toolbar&&(this.cont.obj.hideToolbar(),this.setSizes())};this.attachStatusBar=function(){this.base._isWindow?this.statusbar=this.base._window.attachStatusBar():
(this.statusbar=this.cont.obj.attachStatusBar(),this.cont.obj.adjustContent(this.cont.obj,0),this.setSizes());return this.statusbar};this.detachStatusBar=function(){this.statusbar&&(this.cont.obj.detachStatusBar(),this.setSizes(),this.statusbar=null)};this.showStatusBar=function(){this.statusbar&&(this.cont.obj.showStatusBar(),this.setSizes())};this.hideStatusBar=function(){this.statusbar&&(this.cont.obj.hideStatusBar(),this.setSizes())};this.progressOn=function(){this._progressControlGlobal(!0)};
this.progressOff=function(){this._progressControlGlobal(!1)};this.progressUpdate=function(b){var d=this._progressCover[1].style.backgroundImage;0>d.indexOf("clean")&&(this._progressCover[1].style.backgroundImage=d.replace("dhxlayout_progress_global","dhxlayout_progress_global_clean"));this._progressCover[1].childNodes[0].rows[0].cells[0].innerHTML=b};this._progressControl=function(b,d){if(null!=this.polyObj[b]){if(null==this.polyObj[b]._progressCover){var e=document.createElement("DIV");e.className=
"dhtmlxLayoutPolyProgress";this.polyObj[b].childNodes[0].appendChild(e);var f=document.createElement("DIV");f.className="dhtmlxLayoutPolyProgressBGIMG";this.polyObj[b].childNodes[0].appendChild(f);this.polyObj[b]._progressCover=[e,f]}this.polyObj[b]._progressCover[0].style.display=!0==d?"":"none";this.polyObj[b]._progressCover[1].style.display=this.polyObj[b]._progressCover[0].style.display}};this._progressControlGlobal=function(b){if(null==this._progressCover){var d=document.createElement("DIV");
d.className="dhtmlxLayoutPolyProgressGlobal_"+this.skin;d.style.zIndex=99;this.obj.appendChild(d);var e=document.createElement("DIV");e.className="dhtmlxLayoutPolyProgressBGIMGGlobal_"+this.skin;e.style.zIndex=99;this.obj.appendChild(e);var f=document.createElement("TABLE");e.appendChild(f);var k=f.insertRow().insertCell();k.style.textAlign="center";k.style.verticalAlign="middle";k.style.paddingTop="25px";k.innerHTML="&nbsp;";f.style.height="100%";f.style.fontSize="10px";f.style.width="100%";f.style.color=
"rgb(0,68,108)";this._progressCover=[d,e]}this._progressCover[0].style.display=!0==b?"":"none";this._progressCover[1].style.display=this._progressCover[0].style.display};this._fixSize=function(b,d,e){null!=this.polyObj[b]&&(this.polyObj[b]._isBlockedWidth=d,this.polyObj[b]._isBlockedHeight=e,this._fixSplitters())};this._fixSplitters=function(){for(var b=0;b<this.sepVer.length;b++){var d=this._findDockCellsVer(this.sepVer[b]);null==d[0]||null==d[1]?"dhtmlxLayoutPolySplitterVerInactive"!=this.sepVer[b].className&&
(this.sepVer[b].className="dhtmlxLayoutPolySplitterVerInactive"):"dhtmlxLayoutPolySplitterVer"!=this.sepVer[b].className&&(this.sepVer[b].className="dhtmlxLayoutPolySplitterVer")}for(b=0;b<this.sepHor.length;b++)(d=this._findDockCellsHor(this.sepHor[b]),null==d[0]||null==d[1])?"dhtmlxLayoutPolySplitterHorInactive"!=this.sepHor[b].className&&(this.sepHor[b].className="dhtmlxLayoutPolySplitterHorInactive"):"dhtmlxLayoutPolySplitterHor"!=this.sepHor[b].className&&(this.sepHor[b].className="dhtmlxLayoutPolySplitterHor")};
this._fixIcons=function(){for(var b in this.polyObj){for(var d=this.polyObj[b]._rowData,e=this.polyObj[b]._collapsed,f=-1,k=0;k<d.length;k++)"object"!=typeof d[k]&&d[k]==b&&(f=k);var n=null;if(-1!=f){for(k=f+1;k<d.length;k++)"object"==typeof d[k]?n="ver"==this.polyObj[b]._resize?e?"b":"t":e?"r":"l":!1==this.polyObj[d[k]]._collapsed&&(n="ver"==this.polyObj[b]._resize?e?"b":"t":e?"r":"l");if(null==n&&1<=f)for(k=f-1;0<=k;k--)"object"==typeof d[k]?n="ver"==this.polyObj[b]._resize?e?"t":"b":e?"l":"r":
!1==this.polyObj[d[k]]._collapsed&&(n="ver"==this.polyObj[b]._resize?e?"t":"b":e?"l":"r")}null!=n&&(d=this.polyObj[b]._resize,this.polyObj[b].childNodes[0].childNodes[0].childNodes[4].className="dhtmlxInfoButtonShowHide_"+d+" dhxLayoutButton_"+this.skin+"_"+d+(this.polyObj[b]._collapsed?"2":"1")+n)}};this._defineWindowMinDimension=function(b,d){if(!0==d){var e=[];e[0]=parseInt(b.style.width);e[1]=parseInt(b.style.height)}else e=b.getDimension(),"100%"==e[0]&&(e[0]=b.offsetWidth),"100%"==e[1]&&(e[1]=
b.offsetHeight);var m=f._getNearestParents("hor"),k=f._getNearestParents("ver");if(!d){var n=[],s=[],u;for(u in m)n[n.length]=u;for(u in k)s[s.length]=u;f._checkAlterMinSize([n,s]);for(var n={},s={},v=0;v<f._alterSizes.length;v++){u=f._alterSizes[v][0];var w=f._alterSizes[v][1],x=f._alterSizes[v][2];null==n[u]?n[u]=w:w>n[u]&&(n[u]=w);null==s[u]?s[u]=x:x>s[u]&&(s[u]=x)}for(u in m)null!=n[u]&&(m[u]=m[u]-n[u]+f._minWidth);for(u in k)null!=s[u]&&(k[u]=k[u]-s[u]+f._minHeight-("none"!=f.polyObj[u].childNodes[0].style.display?
f.skinParams[f.skin].cpanel_height:0))}n=65536;for(u in m)m[u]<n&&(n=m[u]);n-=f._minWidth;n=e[0]-n;n<f._dimension[0]&&!d&&(n=f._dimension[0]);m=65536;for(u in k)k[u]<m&&(m=k[u]);m-=f._minHeight;m=e[1]-m;m<f._dimension[1]&&!d&&(m=f._dimension[1]);if(!0==d)return["",n,m];b.setMinDimension(n,m)};this._getNearestParents=function(b){for(var d="hor"==b?this._autoHor:this._autoVer,e={},f=0;f<d.length;f++){var k=d[f];if(!0==this.polyObj[k]._collapsed&&this.polyObj[k]._resize==b){for(var n=this.polyObj[k]._rowData,
s=-1,u=0;u<n.length;u++)"object"==typeof n[u]?s=u:n[u]==k&&(s=u);var v=s,k=null;if(0<s)for(u=s-1;0<=u;u--)"object"==typeof n[u]?k=n[u]:!1==this.polyObj[n[u]]._collapsed&&null==k&&(k=n[u]);if(null==k)for(u=v;u<n.length;u++)"object"==typeof n[u]?k=n[u]:!1==this.polyObj[n[u]]._collapsed&&null==k&&(k=n[u])}if(null!=k){"string"==typeof k&&(k=Array(k));for(u=0;u<k.length;u++)e[k[u]]=parseInt("hor"==b?this.polyObj[k[u]].style.width:this.polyObj[k[u]].style.height)}}return e};this.setSizes=function(b){var d=
this._defineWindowMinDimension(this.base,!0);this.cont.obj.setMinContentSize(d[1],d[2]);this.cont.obj.adjustContent(this.cont.obj,0);if(this.base.offsetParent){this.cont&&!1!==b&&this.cont.obj.adjustContent(this.cont.obj,this._mTop,null,null,this._mBottom);b=this.base.offsetParent.offsetWidth-this.base.offsetWidth+(null!=this._baseWFix?this._baseWFix:0);d=this.base.offsetParent.offsetHeight-this.base.offsetHeight+(null!=this._baseHFix?this._baseHFix:0);this.base.style.width=parseInt(this.base.style.width)+
b+"px";this.base.style.height=parseInt(this.base.style.height)+d+"px";var e={},f;for(f in this._getNearestParents("hor"))this.polyObj[f].style.width=Math.max(0,parseInt(this.polyObj[f].style.width)+b)+"px",this.polyObj[f].childNodes[0].style.width=this.polyObj[f].style.width,e[f]=1;for(f in this._getNearestParents("ver"))this.polyObj[f].style.height=Math.max(0,parseInt(this.polyObj[f].style.height)+d)+"px",this.polyObj[f].childNodes[0].style.height=this.polyObj[f].style.height,e[f]=1;for(f in e)this.polyObj[f].adjustContent(this.polyObj[f].childNodes[0],
this.polyObj[f]._noHeader?0:this.skinParams[this.skin].cpanel_height),this.polyObj[f].updateNestedObjects();this.callEvent("onResizeFinish",[])}};dhtmlxEventable(this);this._init()}else alert(this.i18n.dhxcontalert)}
dhtmlXLayoutObject.prototype.unload=function(){this._isIPad?(document.removeEventListener("touchmove",this._doOnMouseMove,!1),document.removeEventListener("touchend",this._doOnMouseUp,!1)):(dhtmlx._detachEvent(document.body,"onselectstart",this._doOnSelectStart),dhtmlx._detachEvent(document.body,"onmousemove",this._doOnMouseUp));this._doOnMouseUp=this._doOnMouseMove=this._doOnSelectStart=null;for(var b in this.polyObj){var d=this.polyObj[b];d._isCell=null;d.skin=null;d.getId=null;d.getIndex=null;
d.showHeader=null;d.hideHeader=null;d.isHeaderVisible=null;d.setText=null;d.getText=null;d.expand=null;d.collapse=null;d.isCollapsed=null;d.dock=null;d.undock=null;d.setWidth=null;d.getWidth=null;d.setHeight=null;d.getHeight=null;d.fixSize=null;d.progressOn=null;d.progressOff=null;d._doOnAttachMenu=null;d._doOnAttachToolbar=null;d._doOnAttachStatusBar=null;d._collapsed=null;d._idd=null;d._ind=null;d._rowData=null;d._dir=null;d._initCPanel=null;d._minW=null;d._minH=null;d._resize=null;d._savedH=null;
d._savedW=null;d.ondblclick=null;var e=d.childNodes[0].childNodes[0];e.className="";e._dockCell=null;e._resize=null;e._h=null;e.ondblclick=null;e.childNodes[4].onclick=null;for(var f=0;f<e.childNodes.length;f++)e.childNodes[f].onselectstart=null;for(;0<e.childNodes.length;)e.removeChild(e.childNodes[0]);e.parentNode.removeChild(e);d._dhxContDestruct();d._dhxContDestruct=null;d.removeChild(d.childNodes[0]);d.parentNode.removeChild(d)}for(b in this.polyObj)this.polyObj[b]=null;for(f=0;f<this.items.length;f++)this.items[f]=
null;this.items=this.polyObj=null;for(d=this.tpl.childNodes[0];0<d.childNodes.length;){for(;0<d.childNodes[0].childNodes.length;){f=d.childNodes[0].childNodes[0];f._top=null;f._bottom=null;f._left=null;f._right=null;f._dblClick=null;f._isSep=null;f._dir=null;f._lastClick=null;f.ondblclick=null;f.onmousedown=null;f.onmouseup=null;for(f.onselectstart=null;0<f.childNodes.length;)f.removeChild(f.childNodes[0]);f.parentNode.removeChild(f)}d.removeChild(d.childNodes[0])}d.parentNode.removeChild(d);this.tpl.parentNode.removeChild(this.tpl);
this.tpl=null;for(b in this.sepHor)this.sepHor[b]=null;for(b in this.sepVer)this.sepVer[b]=null;this.sepVer=this.sepHor=null;if(this._ha){this.detachEvent(this._haEv);for(this._haEv=null;0<this._ha.childNodes.length;)this._ha.removeChild(this._ha.childNodes[0]);this._ha.parentNode.removeChild(this._ha);this._ha=null}if(this._fa){this.detachEvent(this._faEv);for(this._faEv=null;0<this._fa.childNodes.length;)this._fa.removeChild(this._fa.childNodes[0]);this._fa.parentNode.removeChild(this._fa);this._fa=
null}this._CPanelHeight=this._CPanelBtnsWidth=this.tplSizes=this.tplData=this.skinParams=this.skin=this.imagePath=this.h=this.w=this._xmlLoader=this._totalRows=this._totalCols=this._rowsRatio=this._colsRatio=this._resY=this._resX=this._resObj=this._resFunc=this._minHeight=this._minWidth=this._mTop=this._mBottom=this._layoutView=this._effects=this._dimension=this._availAutoSize=this._autoVer=this._autoHor=this.attachFooter=this.attachHeader=null;this.sizer.parentNode&&this.sizer.parentNode.removeChild(this.sizer);
this._resYMaxHeightBottom=this._resYMaxHeightTop=this._resXMaxWidthRight=this._resXMaxWidthLeft=this._resYStart=this._resXStart=this._minHTAlter=this._minHBAlter=this._minWRAlter=this._minWLAlter=this._collapsedW=this._collapsedH=this._dblClickTM=this._doOnDoubleClick=this._autodetectSkin=this.dhx_SeverCatcherPath=this._effect=this._autosize=this._cells=this.hideStatusBar=this.hideToolbar=this.hideMenu=this.showStatusBar=this.showToolbar=this.showMenu=this.detachStatusBar=this.detachToolbar=this.detachMenu=
this.attachStatusBar=this.attachToolbar=this.attachMenu=this.setCollapsedText=this.updateNestedObjectsArray=this.unload=this.unDockWindow=this.showPanel=this.setText=this.setSkin=this.setSizes=this.setImagePath=this.setEffect=this.setAutoSize=this.progressOn=this.progressOff=this.listViews=this.listAutoSizes=this.isPanelVisible=this.hidePanel=this.getText=this.getIndexById=this.getIdByIndex=this.getEffect=this.forEachItem=this.eventCatcher=this.dockWindow=this.detachEvent=this.checkEvent=this.cells=
this.callEvent=this.attachToolbar=this.attachStatusBar=this.attachMenu=this.attachEvent=this._xmlParser=this._showCovers=this._setWidth=this._setW=this._setHeight=this._setH=this._resAreaData=this._resizeVer=this._resizeStop=this._resizeHor=this._progressControlGlobal=this._progressControl=this._isResizable=this._isCollapsed=this._initWindows=this._init=this._hideCovers=this._getNearestParents=this._fixSplitters=this._fixSize=this._fixPositionInWin=this._fixIcons=this._findDockCellsVer=this._findDockCellsHor=
this._expandEffect=this._expand=this._doExpand=this._doCollapse=this._defineWindowMinDimension=this._collectResAreaData=this._collapseEffect=this._collapse=this._checkAlterMinSize=this._changeCPanelText=this._buildSurface=this._attachSizer=this._alterSizes=this.sizer=null;this.obj&&(this.obj.parentNode.removeChild(this.obj),this.obj=null);this.base&&this.base!=document.body&&(this.base.parentNode.removeChild(this.base),this.base=null);this.dhxWins&&(this.dhxWins.unload(),this.dhxWinsIdPrefix=this.dhxWins=
null);this._doOnResizeStart&&(_isIE?window.detachEvent("onresize",this._doOnResizeStart):window.removeEventListener("resize",this._doOnResizeStart,!1),this._tmTime=this._doOnResizeEnd=this._doOnResizeStart=null);this.detachAllEvents();this.detachAllEvents=null};
dhtmlXLayoutObject.prototype.tplData={"1C":'<layout><autosize hor="a" ver="a" rows="1" cols="1"/><table data="a"/><row><cell obj="a" wh="1,1" resize="ver" neighbors="a"/></row></layout>',"2E":'<layout><autosize hor="a;b" ver="b" rows="2" cols="1"/><table data="a;b"/><row><cell obj="a" wh="1,2" resize="ver" neighbors="a;b"/></row><row sep="true"><cell sep="hor" top="a" bottom="b" dblclick="a"/></row><row><cell obj="b" wh="1,2" resize="ver" neighbors="a;b"/></row></layout>',"2U":'<layout><autosize hor="b" ver="a;b" rows="1" cols="2"/><table data="a,b"/><row><cell obj="a" wh="2,1" resize="hor" neighbors="a;b"/><cell sep="ver" left="a" right="b"/><cell obj="b" wh="2,1" resize="hor" neighbors="a;b"/></row></layout>',
"3E":'<layout><autosize hor="a;b;c" ver="c" rows="3" cols="1"/><table data="a;b;c"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b;c"/></row><row sep="yes"><cell sep="hor" top="a" bottom="b;c" dblclick="a"/></row><row><cell obj="b" wh="1,3" resize="ver" neighbors="a;b;c"/></row><row sep="yes"><cell sep="hor" top="a;b" bottom="c" dblclick="b"/></row><row><cell obj="c" wh="1,3" resize="ver" neighbors="a;b;c"/></row></layout>',"3W":'<layout><autosize hor="c" ver="a;b;c" rows="1" cols="3"/><table data="a,b,c"/><row><cell obj="a" wh="3,1" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a" right="b;c" dblclick="a"/><cell obj="b" wh="3,1" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a;b" right="c" dblclick="b"/><cell obj="c" wh="3,1" resize="hor" neighbors="a;b;c"/></row></layout>',
"3J":'<layout><autosize hor="b" ver="b;c" rows="2" cols="2"/><table data="a,b;c,b"/><row><cell obj="a" wh="2,2" resize="ver" neighbors="a;c"/><cell sep="ver" left="a,c" right="b" dblclick="b" rowspan="3"/><cell obj="b" wh="2,1" resize="hor" neighbors="a,c;b" rowspan="3"/></row><row sep="yes"><cell sep="hor" top="a" bottom="c" dblclick="a"/></row><row><cell obj="c" wh="2,2" resize="ver" neighbors="a;c"/></row></layout>',"3T":'<layout><autosize hor="a;c" ver="b;c" rows="2" cols="2"/><table data="a,a;b,c"/><row><cell obj="a" wh="1,2" resize="ver" neighbors="a;b,c" colspan="3"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c" dblclick="a" colspan="3"/></row><row><cell obj="b" wh="2,2" resize="hor" neighbors="b;c"/><cell sep="ver" left="b" right="c" dblclick="b"/><cell obj="c" wh="2,2" resize="hor" neighbors="b;c"/></row></layout>',
"3L":'<layout><autosize hor="b;c" ver="a;c" rows="2" cols="2"/><table data="a,b;a,c"/><row><cell obj="a" wh="2,1" resize="hor" neighbors="a;b,c" rowspan="3"/><cell sep="ver" left="a" right="b,c" dblclick="a" rowspan="3"/><cell obj="b" wh="2,2" resize="ver" neighbors="b;c"/></row><row sep="true"><cell sep="hor" top="b" dblclick="b" bottom="c"/></row><row><cell obj="c" wh="b,2" resize="ver" neighbors="b;c"/></row></layout>',"3U":'<layout><autosize hor="b;c" ver="c" rows="2" cols="2"/><table data="a,b;c,c"/><row><cell obj="a" wh="2,2" resize="hor" neighbors="a;b"/><cell sep="ver" left="a" right="b" dblclick="a"/><cell obj="b" wh="2,2" resize="hor" neighbors="a;b"/></row><row sep="true"><cell sep="hor" top="a,b" bottom="c" dblclick="c" colspan="3"/></row><row><cell obj="c" wh="1,2" resize="ver" neighbors="a,b;c" colspan="3"/></row></layout>',
"4H":'<layout><autosize hor="d" ver="a;c;d" rows="2" cols="3"/><table data="a,b,d;a,c,d"/><row><cell obj="a" wh="3,1" resize="hor" neighbors="a;b,c;d" rowspan="3"/><cell sep="ver" left="a" right="b,c;d" dblclick="a" rowspan="3"/><cell obj="b" wh="3,2" resize="ver" neighbors="b;c"/><cell sep="ver" left="a;b,c" right="d" dblclick="d" rowspan="3"/><cell obj="d" wh="3,1" resize="hor" neighbors="a;b,c;d" rowspan="3"/></row><row sep="true"><cell sep="hor" top="b" dblclick="b" bottom="c"/></row><row><cell obj="c" wh="3,2" resize="ver" neighbors="b;c"/></row></layout>',
"4I":'<layout><autosize hor="a;c;d" ver="d" rows="3" cols="2"/><table data="a,a;b,c;d,d"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b,c;d" colspan="3"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c;d" dblclick="a" colspan="3"/></row><row><cell obj="b" wh="2,3" resize="hor" neighbors="b;c"/><cell sep="ver" left="b" dblclick="b" right="c"/><cell obj="c" wh="2,3" resize="hor" neighbors="b;c"/></row><row sep="true"><cell sep="hor" top="a;b,c" bottom="d" dblclick="d" colspan="3"/></row><row><cell obj="d" wh="1,3" resize="ver" neighbors="a;b,c;d" colspan="3"/></row></layout>',
"4T":'<layout><autosize hor="a;d" ver="b;c;d" rows="2" cols="3"/><table data="a,a,a;b,c,d"/><row><cell obj="a" wh="1,2" resize="ver" neighbors="a;b,c,d" colspan="5"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c,d" dblclick="a" colspan="5"/></row><row><cell obj="b" wh="3,2" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b" right="c;d" dblclick="b"/><cell obj="c" wh="3,2" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b;c" right="d" dblclick="c"/><cell obj="d" wh="3,2" resize="hor" neighbors="b;c;d"/></row></layout>',
"4U":'<layout><autosize hor="c;d" ver="d" rows="2" cols="3"/><table data="a,b,c;d,d,d"/><row><cell obj="a" wh="3,2" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a" right="b;c" dblclick="a"/><cell obj="b" wh="3,2" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a;b" right="c" dblclick="b"/><cell obj="c" wh="3,2" resize="hor" neighbors="a;b;c"/></row><row sep="true"><cell sep="hor" top="a,b,c" bottom="d" dblclick="d" colspan="5"/></row><row><cell obj="d" wh="1,2" resize="ver" neighbors="a,b,c;d" colspan="5"/></row></layout>',
"5H":'<layout><autosize hor="b;c;d" ver="a;c;e" rows="3" cols="3"/><table data="a,b,e;a,c,e;a,d,e"/><row><cell obj="a" wh="3,1" resize="hor" neighbors="a;b,c,d" rowspan="5"/><cell sep="ver" left="a" right="b,c,d;e" dblclick="a" rowspan="5"/><cell obj="b" wh="3,3" resize="ver" neighbors="b;c;d"/><cell sep="ver" left="a;b,c,d" right="e" dblclick="e" rowspan="5"/><cell obj="e" wh="3,1" resize="hor" neighbors="b,c,d;e" rowspan="5"/></row><row sep="true"><cell sep="hor" top="b" dblclick="b" bottom="c;d"/></row><row><cell obj="c" wh="3,3" resize="ver" neighbors="b;c;d"/></row><row sep="true"><cell sep="hor" top="b;c" dblclick="c" bottom="d"/></row><row><cell obj="d" wh="3,3" resize="ver" neighbors="b;c;d"/></row></layout>',
"5I":'<layout><autosize hor="a;d;e" ver="e" rows="3" cols="3"/><table data="a,a,a;b,c,d;e,e,e"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b,c,d;e" colspan="5"/></row><row sep="match"><cell sep="hor" top="a" bottom="b,c,d;e" dblclick="a" colspan="5"/></row><row><cell obj="b" wh="3,3" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b" right="c;d" dblclick="b"/><cell obj="c" wh="3,3" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b;c" right="d" dblclick="c"/><cell obj="d" wh="3,3" resize="hor" neighbors="b;c;d"/></row><row sep="match"><cell sep="hor" top="a;b,c,d" bottom="e" dblclick="e" colspan="5"/></row><row><cell obj="e" wh="1,3" resize="ver" neighbors="a;b,c,d;e" colspan="5"/></row></layout>',
"6I":'<layout><autosize hor="a;e;f" ver="f" rows="3" cols="4"/><table data="a,a,a,a;b,c,d,e;f,f,f,f"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b,c,d,e;f" colspan="7"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c,d,e;f" dblclick="a" colspan="7"/></row><row><cell obj="b" wh="4,3" resize="hor" neighbors="b;c;d;e"/><cell sep="ver" left="b" right="c;d;e" dblclick="b"/><cell obj="c" wh="4,3" resize="hor" neighbors="b;c;d;e"/><cell sep="ver" left="b;c" right="d;e" dblclick="c"/><cell obj="d" wh="4,3" resize="hor" neighbors="b;c;d;e"/><cell sep="ver" left="b;c;d" right="e" dblclick="d"/><cell obj="e" wh="4,3" resize="hor" neighbors="b;c;d;e"/></row><row sep="true"><cell sep="hor" top="a;b,c,d,e" bottom="f" dblclick="f" colspan="7"/></row><row><cell obj="f" wh="1,3" resize="ver" neighbors="a;b,c,d,e;f" colspan="7"/></row></layout>'};
dhtmlXLayoutObject.prototype._availAutoSize={"1C_hor":["a"],"1C_ver":["a"],"2E_hor":["a;b"],"2E_ver":["a","b"],"2U_hor":["a","b"],"2U_ver":["a;b"],"3E_hor":["a;b;c"],"3E_ver":["a","b","c"],"3W_hor":["a","b","c"],"3W_ver":["a;b;c"],"3J_hor":["a;c","b"],"3J_ver":["a;b","c;b"],"3T_hor":["a;b","a;c"],"3T_ver":["a","b;c"],"3L_hor":["a","b;c"],"3L_ver":["a;b","a;c"],"3U_hor":["a;c","b;c"],"3U_ver":["a;b","c"],"4H_hor":["a","b;c","d"],"4H_ver":["a;b;d","a;c;d"],"4I_hor":["a;b;d","a;c;d"],"4I_ver":["a","b;c",
"d"],"4T_hor":["a;b","a;c","a;d"],"4T_ver":["a","b;c;d"],"4U_hor":["a;d","b;d","c;d"],"4U_ver":["a;b;c","d"],"5H_hor":["a","b;c;d","e"],"5H_ver":["a;b;e","a;c;e","a;d;e"],"5I_hor":["a;b;e","a;c;e","a;d;e"],"5I_ver":["a","b;c;d","e"],"6I_hor":["a;b;f","a;c;f","a;d;f","a;e;f"],"6I_ver":["a","b;c;d;e","f"]};
dhtmlXLayoutObject.prototype.setCollapsedText=function(b,d){if(this.polyObj[b]){var e=this.polyObj[b].childNodes[0].childNodes[0];if(!0===e.childNodes[e.childNodes.length-1]._ct)var f=e.childNodes[e.childNodes.length-1];else f=document.createElement("DIV"),f._ct=!0,f.className="dhtmlxInfoBarLabel_collapsed_"+this.polyObj[b]._resize,e.appendChild(f);f.innerHTML=d}};
dhtmlXLayoutObject.prototype.i18n={dhxcontalert:"dhtmlxcontainer.js is missed on the page",collapse:"Collapse",expand:"Expand",dock:"Dock",undock:"UnDock"};
(function(){dhtmlx.extend_api("dhtmlXLayoutObject",{_init:function(b){return[b.parent,b.pattern,b.skin]},image_path:"setImagePath",effect:"_effect",cells:"_cells",autosize:"_autosize"},{_cells:function(b){for(var d=0;d<b.length;d++){var e=b[d],f=this.cells(e.id);f&&(e.height&&f.setHeight(e.height),e.width&&f.setWidth(e.width),e.text&&f.setText(e.text),e.collapse&&f.collapse(),e.fix_size&&f.fixSize(e.fix_size[0],e.fix_size[1]),!1===e.header&&f.hideHeader())}},_autosize:function(b){this.setAutoSize(b[0],
b[1])},_effect:function(b){b.collapse&&this.setEffect("collapse",b.collapse);b.resize&&this.setEffect("resize",b.resize);b.highlight&&this.setEffect("highlight",b.highlight)}})})();
dhtmlXLayoutObject.prototype.attachHeader=function(b){if(!this._ha){"object"!=typeof b&&(b=document.getElementById(b));var d=b.offsetHeight+("dhx_web"==this.skin?9:2)+2;this.cont.obj._offsetTop=d;this.cont.obj._offsetHeight=-d;this.setSizes();this._ha=document.createElement("DIV");this._ha.style.position="absolute";this._ha.style.top="2px";this._ha.style.left=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.left;this._ha.style.width=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width;this._ha.style.height=
b.offsetHeight+"px";document.body.appendChild(this._ha);this._ha.appendChild(b);this._haEv=this.attachEvent("onResizeFinish",function(){this._ha.style.width=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width})}};
dhtmlXLayoutObject.prototype.attachFooter=function(b){this._fa||("object"!=typeof b&&(b=document.getElementById(b)),this.cont.obj._offsetHeight-=b.offsetHeight+("dhx_web"==this.skin?9:2)-2,this.setSizes(),this._fa=document.createElement("DIV"),this._fa.style.position="absolute",this._fa.style.bottom="2px",this._fa.style.left=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.left,this._fa.style.width=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width,this._fa.style.height=b.offsetHeight+"px",document.body.appendChild(this._fa),
this._fa.appendChild(b),this._faEv=this.attachEvent("onResizeFinish",function(){this._fa.style.width=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width}))};dhtmlXLayoutObject.prototype._fixToolbars=function(){if(_isIE)for(var b in this.polyObj)null!=this.polyObj[b].vs[this.polyObj[b].av].toolbar&&this.polyObj[b].vs[this.polyObj[b].av].toolbar._fixSpacer()};
dhtmlXLayoutObject.prototype._fixCollapsedText=function(){for(var b in this.polyObj)if("hor"==this.polyObj[b]._resize){var d=this.polyObj[b].childNodes[0].childNodes[0];if(!0===d.childNodes[d.childNodes.length-1]._ct&&(d.childNodes[d.childNodes.length-1].style.width=Math.max(0,d.offsetHeight-d.childNodes[4].offsetTop-d.childNodes[4].offsetHeight-12)+"px",_isFF||_isOpera||_isChrome||0<=navigator.userAgent.indexOf("MSIE 10.0")))d.childNodes[d.childNodes.length-1].style.bottom="-12px"}};
function dhtmlXMenuObject(b,d){var e=this;this.addBaseIdAsContextZone=null;this.isDhtmlxMenuObject=!0;this.skin=null!=d?d:"dhx_skyblue";this.imagePath="";this._isIE6=!1;_isIE&&(this._isIE6=null==window.XMLHttpRequest?!0:!1);if(null==b)this.base=document.body;else{var f="string"==typeof b?document.getElementById(b):b;if(null!=f){this.base=f;this.base.id||(this.base.id=(new Date).valueOf());for(;0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);this.base.className+=" dhtmlxMenu_"+
this.skin+"_Middle dir_left";this.base._autoSkinUpdate=!0;this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu);this.addBaseIdAsContextZone=this.base.id;this.base.onselectstart=function(b){b=b||event;return b.returnValue=!1};this.base.oncontextmenu=function(b){b=b||event;return b.returnValue=!1}}else this.base=document.body}this.topId="dhxWebMenuTopId";if(!this.extendedModule){for(var f=function(){alert(this.i18n.dhxmenuextalert)},g="setItemEnabled setItemDisabled isItemEnabled _changeItemState getItemText setItemText loadFromHTML hideItem showItem isItemHidden _changeItemVisible setUserData getUserData setOpenMode setWebModeTimeout aK _updateLoaderIcon getItemImage setItemImage clearItemImage setAutoShowMode setAutoHideMode setContextMenuHideAllMode getContextMenuHideAllMode setVisibleArea setTooltip getTooltip setHotKey getHotKey setItemSelected setTopText setRTL setAlign setHref clearHref getCircuit _clearAllSelectedSubItemsInPolygon _checkArrowsState _addUpArrow _addDownArrow _removeUpArrow _removeDownArrow _isArrowExists _doScrollUp _doScrollDown _countPolygonItems setOverflowHeight _getRadioImgObj _setRadioState _radioOnClickHandler getRadioChecked setRadioChecked addRadioButton _getCheckboxState _setCheckboxState _readLevel _updateCheckboxImage _checkboxOnClickHandler setCheckboxState getCheckboxState addCheckbox serialize".split(" "),
h=0;h<g.length;h++)this[g[h]]||(this[g[h]]=f);g=null}this.fixedPosition=!1;this.menuLastClicked=this.menuSelected=-1;this.idPrefix="";this.itemTagName="item";this.itemTextTagName="itemtext";this.userDataTagName="userdata";this.itemTipTagName="tooltip";this.itemHotKeyTagName="hotkey";this.itemHrefTagName="href";this.dirTopLevel="bottom";this.dirSubLevel="right";this.menuY2=this.menuY1=this.menuX2=this.menuX1=null;this.menuMode="web";this.menuTimeoutMsec=400;this.menuTimeoutHandler=null;this.idPull=
{};this.itemPull={};this.userData={};this.radio={};this._rtl=!1;this._align="left";this.menuTouched=!1;this.zInd=this.zIndInit=1200;this.zIndStep=50;this.menuModeTopLevelTimeout=!0;this.menuModeTopLevelTimeoutTime=200;this._topLevelBottomMargin=1;this._topLevelRightMargin=0;this._topLevelOffsetLeft=1;this._arrowFFFix=_isIE?"BackCompat"==document.compatMode?0:-4:-4;this.setSkin=function(b){var d=this.skin;this.skin=b;switch(this.skin){case "dhx_black":case "dhx_blue":case "dhx_skyblue":case "dhx_web":this._topLevelBottomMargin=
2;this._topLevelOffsetLeft=this._topLevelRightMargin=1;this._arrowFFFix=_isIE?"BackCompat"==document.compatMode?0:-4:-4;break;case "dhx_web":this._arrowFFFix=0}this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+d+"_Middle","")+" dhtmlxMenu_"+this.skin+"_Middle");for(var e in this.idPull)this.idPull[e].className=String(this.idPull[e].className).replace(d,this.skin)};this.setSkin(this.skin);this.dLoad=!1;this.dLoadUrl="";this.dLoadSign="?";this.loaderIcon=!1;this.limit=
0;this._scrollUpTM=null;this._scrollUpTMTime=20;this._scrollUpTMStep=3;this._scrollDownTM=null;this._scrollDownTMTime=20;this._scrollDownTMStep=3;this.context=!1;this.contextZones={};this.contextMenuZoneId=!1;this.contextHideAllMode=this.contextAutoHide=this.contextAutoShow=!0;this.sxDacProc=null;this.dacSpeed=10;this.dacCycles=[];for(h=0;10>h;h++)this.dacCycles[h]=h;this.dacSpeedIE=10;this.dacCyclesIE=[];for(h=0;10>h;h++)this.dacCyclesIE[h]=h;this._enableDacSupport=function(b){this.sxDacProc=b};
this._selectedSubItems=[];this._openedPolygons=[];this._addSubItemToSelected=function(b,d){for(var e=!0,f=0;f<this._selectedSubItems.length;f++)this._selectedSubItems[f][0]==b&&this._selectedSubItems[f][1]==d&&(e=!1);!0==e&&this._selectedSubItems.push([b,d]);return e};this._removeSubItemFromSelected=function(b,d){for(var e=[],f=!1,g=0;g<this._selectedSubItems.length;g++)this._selectedSubItems[g][0]==b&&this._selectedSubItems[g][1]==d?f=!0:e[e.length]=this._selectedSubItems[g];!0==f&&(this._selectedSubItems=
e);return f};this._getSubItemToDeselectByPolygon=function(b){for(var d=[],e=0;e<this._selectedSubItems.length;e++)if(this._selectedSubItems[e][1]==b){d[d.length]=this._selectedSubItems[e][0];for(var d=d.concat(this._getSubItemToDeselectByPolygon(this._selectedSubItems[e][0])),f=!0,g=0;g<this._openedPolygons.length;g++)this._openedPolygons[g]==this._selectedSubItems[e][0]&&(f=!1);!0==f&&(this._openedPolygons[this._openedPolygons.length]=this._selectedSubItems[e][0]);this._selectedSubItems[e][0]=-1;
this._selectedSubItems[e][1]=-1}return d};this._hidePolygon=function(b){null!=this.idPull["polygon_"+b]&&(null!=this.sxDacProc&&null!=this.idPull["sxDac_"+b]?this.idPull["sxDac_"+b]._hide():"none"!=this.idPull["polygon_"+b].style.display&&(this.idPull["polygon_"+b].style.display="none",null!=this.idPull["arrowup_"+b]&&(this.idPull["arrowup_"+b].style.display="none"),null!=this.idPull["arrowdown_"+b]&&(this.idPull["arrowdown_"+b].style.display="none"),this._updateItemComplexState(b,!0,!1),this._isIE6&&
null!=this.idPull["polygon_"+b+"_ie6cover"]&&(this.idPull["polygon_"+b+"_ie6cover"].style.display="none"),b=String(b).replace(this.idPrefix,""),b==this.topId&&(b=null),this.callEvent("onHide",[b])))};this._showPolygon=function(b,d){var e=this._countVisiblePolygonItems(b);if(0!=e){var f="polygon_"+b;if(null!=this.idPull[f]&&null!=this.idPull[b]&&(!this.menuModeTopLevelTimeout||"web"!=this.menuMode||this.context||this.idPull[b]._mouseOver||d!=this.dirTopLevel)){this.fixedPosition||this._autoDetectVisibleArea();
var g=0,h=0,v=null,w=null;0<this.limit&&this.limit<e&&(null==this.idPull["arrowup_"+b]&&this._addUpArrow(String(b).replace(this.idPrefix,"")),null==this.idPull["arrowdown_"+b]&&this._addDownArrow(String(b).replace(this.idPrefix,"")),v=this.idPull["arrowup_"+b],v.style.visibility="hidden",v.style.display="",v.style.zIndex=this.zInd,g=v.offsetHeight,w=this.idPull["arrowdown_"+b],w.style.visibility="hidden",w.style.display="",w.style.zIndex=this.zInd,h=w.offsetHeight);this.idPull[f].style.visibility=
"hidden";this.idPull[f].style.left="0px";this.idPull[f].style.top="0px";this.idPull[f].style.display="";this.idPull[f].style.zIndex=this.zInd;0<this.limit&&(this.limit<e?(this.idPull[f].style.height=24*this.limit+"px",this.idPull[f].scrollTop=0):this.idPull[f].style.height="");this.zInd+=this.zIndStep;var x=null!=this.idPull[b].tagName?getAbsoluteLeft(this.idPull[b]):this.idPull[b][0],A=null!=this.idPull[b].tagName?getAbsoluteTop(this.idPull[b]):this.idPull[b][1],D=null!=this.idPull[b].tagName?this.idPull[b].offsetWidth:
0,E=null!=this.idPull[b].tagName?this.idPull[b].offsetHeight+g+h:0,y=0,C=0,F=this.idPull[f].offsetWidth,I=this.idPull[f].offsetHeight;"bottom"==d&&(y=this._rtl?x+(null!=D?D:0)-F:"right"==this._align?x+D-F:x-1+(d==this.dirTopLevel?this._topLevelRightMargin:0),C=A-1+E-g-h+this._topLevelBottomMargin);"right"==d&&(y=x+D-1,C=A+2);"left"==d&&(y=x-this.idPull[f].offsetWidth+2,C=A+2);"top"==d&&(y=x-1,C=A-I+2);if(this.fixedPosition)var M=65536,h=65536;else if(M=null!=this.menuX2?this.menuX2:0,h=null!=this.menuY2?
this.menuY2:0,0==M)window.innerWidth?(M=window.innerWidth,h=window.innerHeight):(M=document.body.offsetWidth,h=document.body.scrollHeight);y+F>M&&!this._rtl&&(y=x-F+2);y<this.menuX1&&this._rtl&&(y=x+D-2);0>y&&(y=0);C+I>h&&null!=this.menuY2&&(C=Math.max(A+E-I+2,2),null!=this.itemPull[b]&&!this.context&&this.itemPull[b].parent==this.idPrefix+this.topId&&(C-=this.base.offsetHeight));this.idPull[f].style.left=y+"px";this.idPull[f].style.top=C+g+"px";null!=this.sxDacProc&&null!=this.idPull["sxDac_"+b]?
this.idPull["sxDac_"+b]._show():(this.idPull[f].style.visibility="",0<this.limit&&this.limit<e&&(v.style.left=y+"px",v.style.top=C+"px",v.style.width=F+this._arrowFFFix+"px",v.style.visibility="",w.style.left=y+"px",w.style.top=C+g+I+"px",w.style.width=F+this._arrowFFFix+"px",w.style.visibility="",this._checkArrowsState(b)),this._isIE6&&(e=f+"_ie6cover",null==this.idPull[e]&&(g=document.createElement("IFRAME"),g.className="dhtmlxMenu_IE6CoverFix_"+this.skin,g.frameBorder=0,g.setAttribute("src","javascript:false;"),
document.body.insertBefore(g,document.body.firstChild),this.idPull[e]=g),this.idPull[e].style.left=this.idPull[f].style.left,this.idPull[e].style.top=this.idPull[f].style.top,this.idPull[e].style.width=this.idPull[f].offsetWidth+"px",this.idPull[e].style.height=this.idPull[f].offsetHeight+"px",this.idPull[e].style.zIndex=this.idPull[f].style.zIndex-1,this.idPull[e].style.display=""),b=String(b).replace(this.idPrefix,""),b==this.topId&&(b=null),this.callEvent("onShow",[b]))}}};this._redistribSubLevelSelection=
function(b,d){for(;0<this._openedPolygons.length;)this._openedPolygons.pop();var e=this._getSubItemToDeselectByPolygon(d);this._removeSubItemFromSelected(-1,-1);for(var f=0;f<e.length;f++)null!=this.idPull[e[f]]&&(e[f]!=b&&"enabled"==this.itemPull[e[f]].state)&&(this.idPull[e[f]].className="sub_item");for(f=0;f<this._openedPolygons.length;f++)this._openedPolygons[f]!=d&&this._hidePolygon(this._openedPolygons[f]);if("enabled"==this.itemPull[b].state){this.idPull[b].className="sub_item_selected";this.itemPull[b].complex&&
(this.dLoad&&"no"==this.itemPull[b].loaded)&&(!0==this.loaderIcon&&this._updateLoaderIcon(b,!0),e=new dtmlXMLLoaderObject(this._xmlParser,window),this.itemPull[b].loaded="get",this.callEvent("onXLS",[]),e.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&parentId="+b.replace(this.idPrefix,"")+"&etc="+(new Date).getTime()));if((this.itemPull[b].complex||this.dLoad&&"yes"==this.itemPull[b].loaded)&&this.itemPull[b].complex&&null!=this.idPull["polygon_"+b])this._updateItemComplexState(b,!0,!0),this._showPolygon(b,
this.dirSubLevel);this._addSubItemToSelected(b,d);this.menuSelected=b}};this._doOnClick=function(b,d,e){this.menuLastClicked=b;if(null!=this.itemPull[this.idPrefix+b].href_link&&"enabled"==this.itemPull[this.idPrefix+b].state){d=document.createElement("FORM");e=String(this.itemPull[this.idPrefix+b].href_link).split("?");d.action=e[0];if(null!=e[1]){e=String(e[1]).split("&");for(var f=0;f<e.length;f++){var g=String(e[f]).split("="),h=document.createElement("INPUT");h.type="hidden";h.name=g[0]||"";
h.value=g[1]||"";d.appendChild(h)}}null!=this.itemPull[this.idPrefix+b].href_target&&(d.target=this.itemPull[this.idPrefix+b].href_target);d.style.display="none";document.body.appendChild(d);d.submit();null!=d&&document.body.removeChild(d)}else"c"!=d.charAt(0)&&"d"!=d.charAt(1)&&"s"!=d.charAt(2)&&(this.checkEvent("onClick")?(this._clearAndHide(),this._isContextMenuVisible()&&this.contextAutoHide&&this._hideContextMenu(),this.callEvent("onClick",[b,this.contextMenuZoneId,e])):"d"==d.charAt(1)||"win"==
this.menuMode&&"t"==d.charAt(2)||(this._clearAndHide(),this._isContextMenuVisible()&&this.contextAutoHide&&this._hideContextMenu()))};this._doOnTouchMenu=function(b){!1==this.menuTouched&&(this.menuTouched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[b]))};this._searchMenuNode=function(b,d){for(var e=[],f=0;f<d.length;f++)if("object"==typeof d[f]){5==d[f].length&&"object"!=typeof d[f][0]&&d[f][0].replace(this.idPrefix,"")==b&&0==f&&(e=d);var g=this._searchMenuNode(b,d[f]);0<g.length&&
(e=g)}return e};this._getMenuNodes=function(b){var d=[],e;for(e in this.itemPull)this.itemPull[e].parent==b&&(d[d.length]=e);return d};this._genStr=function(b){for(var d="",e=0;e<b;e++)d+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(61*Math.random()));return d};this.getItemType=function(b){b=this.idPrefix+b;return null==this.itemPull[b]?null:this.itemPull[b].type};this.forEachItem=function(b){for(var d in this.itemPull)b(String(d).replace(this.idPrefix,""))};
this._clearAndHide=function(){e.menuSelected=-1;for(e.menuLastClicked=-1;0<e._openedPolygons.length;)e._openedPolygons.pop();for(var b=0;b<e._selectedSubItems.length;b++){var d=e._selectedSubItems[b][0];null!=e.idPull[d]&&"enabled"==e.itemPull[d].state&&("sub_item_selected"==e.idPull[d].className&&(e.idPull[d].className="sub_item"),e.idPull[d].className=="dhtmlxMenu_"+e.skin+"_TopLevel_Item_Selected"&&(e.idPull[d].className=null!=e.itemPull[d].cssNormal?e.itemPull[d].cssNormal:"dhtmlxMenu_"+e.skin+
"_TopLevel_Item_Normal"));e._hidePolygon(d)}e.menuTouched=!1;e.context&&(e.contextHideAllMode?(e._hidePolygon(e.idPrefix+e.topId),e.zInd=e.zIndInit):e.zInd=e.zIndInit+e.zIndStep)};this._doOnLoad=function(){};this.loadXML=function(b,d){d&&(this._doOnLoad=function(){d()});this.callEvent("onXLS",[]);this._xmlLoader.loadXML(b)};this.loadXMLString=function(b,d){d&&(this._doOnLoad=function(){d()});this._xmlLoader.loadXMLString(b)};this._buildMenu=function(b,d){for(var e=0,f=0;f<b.childNodes.length;f++)if(b.childNodes[f].tagName==
this.itemTagName){var g=b.childNodes[f],h={};h.id=this.idPrefix+(g.getAttribute("id")||this._genStr(24));h.title=g.getAttribute("text")||"";h.imgen=g.getAttribute("img")||"";h.imgdis=g.getAttribute("imgdis")||"";h.tip="";h.hotkey="";null!=g.getAttribute("cssNormal")&&(h.cssNormal=g.getAttribute("cssNormal"));h.type=g.getAttribute("type")||"item";"checkbox"==h.type&&(h.checked=null!=g.getAttribute("checked"),h.imgen="chbx_"+(h.checked?"1":"0"),h.imgdis=h.imgen);"radio"==h.type&&(h.checked=null!=g.getAttribute("checked"),
h.imgen="rdbt_"+(h.checked?"1":"0"),h.imgdis=h.imgen,h.group=g.getAttribute("group")||this._genStr(24),null==this.radio[h.group]&&(this.radio[h.group]=[]),this.radio[h.group][this.radio[h.group].length]=h.id);h.state=null!=g.getAttribute("enabled")||null!=g.getAttribute("disabled")?"false"==g.getAttribute("enabled")||"true"==g.getAttribute("disabled")?"disabled":"enabled":"enabled";h.parent=null!=d?d:this.idPrefix+this.topId;h.complex=this.dLoad?null!=g.getAttribute("complex")?!0:!1:0<this._buildMenu(g,
h.id);this.dLoad&&h.complex&&(h.loaded="no");this.itemPull[h.id]=h;for(var v=0;v<g.childNodes.length;v++){var w=g.childNodes[v].tagName;null!=w&&(w=w.toLowerCase());if(w==this.userDataTagName){var x=g.childNodes[v];null!=x.getAttribute("name")&&(this.userData[h.id+"_"+x.getAttribute("name")]=null!=x.firstChild.nodeValue?x.firstChild.nodeValue:"")}w==this.itemTextTagName&&(h.title=g.childNodes[v].firstChild.nodeValue);w==this.itemTipTagName&&(h.tip=g.childNodes[v].firstChild.nodeValue);w==this.itemHotKeyTagName&&
(h.hotkey=g.childNodes[v].firstChild.nodeValue);w==this.itemHrefTagName&&"item"==h.type&&(h.href_link=g.childNodes[v].firstChild.nodeValue,null!=g.childNodes[v].getAttribute("target")&&(h.href_target=g.childNodes[v].getAttribute("target")))}e++}return e};this._xmlParser=function(){if(e.dLoad){var b=this.getXMLTopNode("menu");parentId=null!=b.getAttribute("parentId")?b.getAttribute("parentId"):null;if(null==parentId)e._buildMenu(b,null),e._initTopLevelMenu();else{e._buildMenu(b,e.idPrefix+parentId);
e._addSubMenuPolygon(e.idPrefix+parentId,e.idPrefix+parentId);if(e.menuSelected==e.idPrefix+parentId){var d=e.idPrefix+parentId,f=e.itemPull[e.idPrefix+parentId].parent==e.idPrefix+e.topId,g=f&&!e.context?e.dirTopLevel:e.dirSubLevel,b=!1;if(f&&(e.menuModeTopLevelTimeout&&"web"==e.menuMode&&!e.context)&&(f=e.idPull[e.idPrefix+parentId],!0==f._mouseOver)){var h=e.menuModeTopLevelTimeoutTime-((new Date).getTime()-f._dynLoadTM);1<h&&(f._menuOpenTM=window.setTimeout(function(){e._showPolygon(d,g)},h),
b=!0)}b||e._showPolygon(d,g)}e.itemPull[e.idPrefix+parentId].loaded="yes";!0==e.loaderIcon&&e._updateLoaderIcon(e.idPrefix+parentId,!1)}this.destructor();e.callEvent("onXLE",[])}else b=this.getXMLTopNode("menu"),e._buildMenu(b,null),e.init(),e.callEvent("onXLE",[]),e._doOnLoad()};this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this._showSubLevelItem=function(b,d){null!=document.getElementById("arrow_"+this.idPrefix+b)&&(document.getElementById("arrow_"+this.idPrefix+b).style.display=
d?"none":"");null!=document.getElementById("image_"+this.idPrefix+b)&&(document.getElementById("image_"+this.idPrefix+b).style.display=d?"none":"");null!=document.getElementById(this.idPrefix+b)&&(document.getElementById(this.idPrefix+b).style.display=d?"":"none")};this._hideSubLevelItem=function(b){this._showSubLevelItem(b,!0)};this.idPrefix=this._genStr(12);this._bodyClick=function(b){b=b||event;2==b.button||_isOpera&&!0==b.ctrlKey||(e.context?e.contextAutoHide&&(!_isOpera||e._isContextMenuVisible()&&
_isOpera)&&e._hideContextMenu():e._clearAndHide())};this._bodyContext=function(b){b=b||event;var d=(b.srcElement||b.target).className;-1!=d.search("dhtmlxMenu")&&-1!=d.search("SubLevelArea")||(d=!0,b=b.target||b.srcElement,null!=b.id&&e.isContextZone(b.id)&&(d=!1),b==document.body&&(d=!1),d&&e.hideContextMenu())};"undefined"!=typeof window.addEventListener?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",
this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext));this._UID=this._genStr(32);dhtmlxMenuObjectLiveInstances[this._UID]=this;dhtmlxEventable(this);return this}dhtmlXMenuObject.prototype.init=function(){!0!=this._isInited&&(this.dLoad?(this.callEvent("onXLS",[]),this._xmlLoader.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&etc="+(new Date).getTime())):(this._initTopLevelMenu(),this._isInited=!0))};
dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(b){var d=0,e;for(e in this.itemPull){var f=this.itemPull[e].parent,g=this.itemPull[e].type;null!=this.idPull[e]&&f==b&&("item"==g||"radio"==g||"checkbox"==g)&&"none"!=this.idPull[e].style.display&&d++}return d};
dhtmlXMenuObject.prototype._redefineComplexState=function(b){if(this.idPrefix+this.topId!=b&&null!=this.idPull["polygon_"+b]&&null!=this.idPull[b]){var d=this._countVisiblePolygonItems(b);0<d&&!this.itemPull[b].complex&&this._updateItemComplexState(b,!0,!1);0==d&&this.itemPull[b].complex&&this._updateItemComplexState(b,!1,!1)}};
dhtmlXMenuObject.prototype._updateItemComplexState=function(b,d){if(!this.context&&"TopLevel"==this._getItemLevelType(b.replace(this.idPrefix,"")))this.itemPull[b].complex=d;else if(!(null==this.idPull[b]||null==this.itemPull[b]))if(this.itemPull[b].complex=d,b!=this.idPrefix+this.topId){var e=null,f=this.idPull[b].childNodes[this._rtl?0:2];f.childNodes[0]&&0===String(f.childNodes[0].className).search("complex_arrow")&&(e=f.childNodes[0]);if(this.itemPull[b].complex){if(null==e){e=document.createElement("DIV");
e.className="complex_arrow";for(e.id="arrow_"+b;0<f.childNodes.length;)f.removeChild(f.childNodes[0]);f.appendChild(e)}this.dLoad&&"get"==this.itemPull[b].loaded&&this.loaderIcon?"complex_arrow_loading"!=e.className&&(e.className="complex_arrow_loading"):e.className="complex_arrow"}else!this.itemPull[b].complex&&null!=e&&(f.removeChild(e),null!=this.itemPull[b].hotkey_backup&&this.setHotKey&&this.setHotKey(b.replace(this.idPrefix,""),this.itemPull[b].hotkey_backup))}};
dhtmlXMenuObject.prototype._getItemLevelType=function(b){return this.itemPull[this.idPrefix+b].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"};
dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(b){var d=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var e=0;e<d.length;e++)if(d[e]!=b&&this._hidePolygon(d[e]),null!=this.idPull[d[e]]&&d[e]!=b)this.idPull[d[e]].className=this.idPull[d[e]].className.replace(/Selected/g,"Normal");"enabled"==this.itemPull[this.idPrefix+b].state&&(this.idPull[this.idPrefix+b].className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+
b,"parent"),this.menuSelected="win"==this.menuMode?-1!=this.menuSelected?b:this.menuSelected:b,this.itemPull[this.idPrefix+b].complex&&-1!=this.menuSelected&&this._showPolygon(this.idPrefix+b,this.dirTopLevel))};
dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.dirTopLevel="bottom";this.dirSubLevel=this._rtl?"left":"right";if(this.context)this.idPull[this.idPrefix+this.topId]=[0,0],this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var b=this._getMenuNodes(this.idPrefix+this.topId),d=0;d<b.length;d++)"item"==this.itemPull[b[d]].type&&this._renderToplevelItem(b[d],null),"separator"==this.itemPull[b[d]].type&&this._renderSeparator(b[d],null)};
dhtmlXMenuObject.prototype._renderToplevelItem=function(b,d){var e=this,f=document.createElement("DIV");f.id=b;f.className="enabled"==this.itemPull[b].state&&null!=this.itemPull[b].cssNormal?this.itemPull[b].cssNormal:"dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[b].state?"Normal":"Disabled");if(""!=this.itemPull[b].title){var g=document.createElement("DIV");g.className="top_level_text";g.innerHTML=this.itemPull[b].title;f.appendChild(g)}0<this.itemPull[b].tip.length&&(f.title=
this.itemPull[b].tip);if(""!=this.itemPull[b].imgen||""!=this.itemPull[b].imgdis)if(g=this.itemPull[b]["enabled"==this.itemPull[b].state?"imgen":"imgdis"]){var h=document.createElement("IMG");h.border="0";h.id="image_"+b;h.src=this.imagePath+g;h.className="dhtmlxMenu_TopLevel_Item_Icon";0<f.childNodes.length&&!this._rtl?f.insertBefore(h,f.childNodes[0]):f.appendChild(h)}f.onselectstart=function(b){b=b||event;return b.returnValue=!1};f.oncontextmenu=function(b){b=b||event;return b.returnValue=!1};
this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className="right"==this._align?"align_right":"align_left",this.base.appendChild(this.cont));null!=d&&(d++,0>d&&(d=0),d>this.cont.childNodes.length-1&&(d=null));null!=d?this.cont.insertBefore(f,this.cont.childNodes[d]):this.cont.appendChild(f);this.idPull[f.id]=f;this.itemPull[b].complex&&!this.dLoad&&this._addSubMenuPolygon(this.itemPull[b].id,this.itemPull[b].id);f.onmouseover=function(){"web"==e.menuMode&&window.clearTimeout(e.menuTimeoutHandler);
var b=e._getSubItemToDeselectByPolygon("parent");e._removeSubItemFromSelected(-1,-1);for(var d=0;d<b.length;d++)if(b[d]!=this.id&&e._hidePolygon(b[d]),null!=e.idPull[b[d]]&&b[d]!=this.id)null!=e.itemPull[b[d]].cssNormal?e.idPull[b[d]].className=e.itemPull[b[d]].cssNormal:("sub_item_selected"==e.idPull[b[d]].className&&(e.idPull[b[d]].className="sub_item"),e.idPull[b[d]].className=e.idPull[b[d]].className.replace(/Selected/g,"Normal"));if("enabled"==e.itemPull[this.id].state&&(this.className="dhtmlxMenu_"+
e.skin+"_TopLevel_Item_Selected",e._addSubItemToSelected(this.id,"parent"),e.menuSelected="win"==e.menuMode?-1!=e.menuSelected?this.id:e.menuSelected:this.id,e.dLoad&&"no"==e.itemPull[this.id].loaded&&(e.menuModeTopLevelTimeout&&("web"==e.menuMode&&!e.context)&&(this._mouseOver=!0,this._dynLoadTM=(new Date).getTime()),b=new dtmlXMLLoaderObject(e._xmlParser,window),e.itemPull[this.id].loaded="get",e.callEvent("onXLS",[]),b.loadXML(e.dLoadUrl+e.dLoadSign+"action=loadMenu&parentId="+this.id.replace(e.idPrefix,
"")+"&etc="+(new Date).getTime())),(!e.dLoad||e.dLoad&&(!e.itemPull[this.id].loaded||"yes"==e.itemPull[this.id].loaded))&&e.itemPull[this.id].complex&&-1!=e.menuSelected))if(e.menuModeTopLevelTimeout&&"web"==e.menuMode&&!e.context){this._mouseOver=!0;var f=this.id;this._menuOpenTM=window.setTimeout(function(){e._showPolygon(f,e.dirTopLevel)},e.menuModeTopLevelTimeoutTime)}else e._showPolygon(this.id,e.dirTopLevel);e._doOnTouchMenu(this.id.replace(e.idPrefix,""))};f.onmouseout=function(){!(e.itemPull[this.id].complex&&
-1!=e.menuSelected)&&"enabled"==e.itemPull[this.id].state&&(f.className=null!=e.itemPull[this.id].cssNormal?e.itemPull[this.id].cssNormal:"dhtmlxMenu_"+e.skin+"_TopLevel_Item_Normal");"web"==e.menuMode&&(window.clearTimeout(e.menuTimeoutHandler),e.menuTimeoutHandler=window.setTimeout(function(){e._clearAndHide()},e.menuTimeoutMsec,"JavaScript"));e.menuModeTopLevelTimeout&&("web"==e.menuMode&&!e.context)&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))};f.onclick=function(b){"web"==e.menuMode&&
window.clearTimeout(e.menuTimeoutHandler);if(!("web"!=e.menuMode&&"disabled"==e.itemPull[this.id].state)){b=b||event;b.cancelBubble=!0;b.returnValue=!1;if("win"==e.menuMode&&e.itemPull[this.id].complex){if(e.menuSelected==this.id){e.menuSelected=-1;var d=!1}else e.menuSelected=this.id,d=!0;d?e._showPolygon(this.id,e.dirTopLevel):e._hidePolygon(this.id)}var d=e.itemPull[this.id].complex?"c":"-",f="enabled"!=e.itemPull[this.id].state?"d":"-";b={ctrl:b.ctrlKey,alt:b.altKey,shift:b.shiftKey};e._doOnClick(this.id.replace(e.idPrefix,
""),d+f+"t",b);return!1}}};dhtmlXMenuObject.prototype.setImagePath=function(){};dhtmlXMenuObject.prototype.setIconsPath=function(b){this.imagePath=b};dhtmlXMenuObject.prototype.setIconPath=dhtmlXMenuObject.prototype.setIconsPath;
dhtmlXMenuObject.prototype._updateItemImage=function(b){b=this.idPrefix+b;var d=this.itemPull[b].parent==this.idPrefix+this.topId&&!this.context,e=null;if(d)for(var f=0;f<this.idPull[b].childNodes.length;f++)try{"dhtmlxMenu_TopLevel_Item_Icon"==this.idPull[b].childNodes[f].className&&(e=this.idPull[b].childNodes[f])}catch(g){}else try{e=this.idPull[b].childNodes[this._rtl?2:0].childNodes[0]}catch(h){}f=this.itemPull[b]["enabled"==this.itemPull[b].state?"imgen":"imgdis"];if(0<f.length)if(null!=e)e.src=
this.imagePath+f;else if(d)e=document.createElement("IMG"),e.className="dhtmlxMenu_TopLevel_Item_Icon",e.src=this.imagePath+f,e.border="0",e.id="image_"+b,!this._rtl&&0<this.idPull[b].childNodes.length?this.idPull[b].insertBefore(e,this.idPull[b].childNodes[0]):this.idPull[b].appendChild(e);else{e=document.createElement("IMG");e.className="sub_icon";e.src=this.imagePath+f;e.border="0";e.id="image_"+b;for(b=this.idPull[b].childNodes[this._rtl?2:0];0<b.childNodes.length;)b.removeChild(b.childNodes[0]);
b.appendChild(e)}else null!=e&&e.parentNode.removeChild(e)};
dhtmlXMenuObject.prototype.removeItem=function(b,d,e){d||(b=this.idPrefix+b);d=null;if(b!=this.idPrefix+this.topId){if(null==this.itemPull[b])return;if("separator"==this.itemPull[b].type){var f=this.idPull["separator_"+b];this.itemPull[b].parent==this.idPrefix+this.topId?(f.onclick=null,f.onselectstart=null,f.id=null):(f.childNodes[0].childNodes[0].onclick=null,f.childNodes[0].childNodes[0].onselectstart=null,f.childNodes[0].childNodes[0].id=null,f.childNodes[0].removeChild(f.childNodes[0].childNodes[0]),
f.removeChild(f.childNodes[0]));f.parentNode.removeChild(f);this.idPull["separator_"+b]=null;this.itemPull[b]=null;delete this.idPull["separator_"+b]}else{d=this.itemPull[b].parent;f=this.idPull[b];f.onclick=null;f.oncontextmenu=null;f.onmouseover=null;f.onmouseout=null;f.onselectstart=null;for(f.id=null;0<f.childNodes.length;)f.removeChild(f.childNodes[0]);f.parentNode.removeChild(f);this.idPull[b]=null;this.itemPull[b]=null;delete this.idPull[b]}delete this.itemPull[b]}for(var g in this.itemPull)this.itemPull[g].parent==
b&&this.removeItem(g,!0,!0);g=Array(b);null!=d&&!e&&null!=this.idPull["polygon_"+d]&&0==this.idPull["polygon_"+d].tbd.childNodes.length&&(g.push(d),this._updateItemComplexState(d,!1,!1));for(e=0;e<g.length;e++)this.idPull["polygon_"+g[e]]&&(d=this.idPull["polygon_"+g[e]],d.onclick=null,d.oncontextmenu=null,d.tbl.removeChild(d.tbd),d.tbd=null,d.removeChild(d.tbl),d.tbl=null,d.id=null,d.parentNode.removeChild(d),this._isIE6&&(d="polygon_"+g[e]+"_ie6cover",null!=this.idPull[d]&&(document.body.removeChild(this.idPull[d]),
delete this.idPull[d])),null!=this.idPull["arrowup_"+b]&&this._removeArrow&&this._removeArrow("arrowup_"+b),null!=this.idPull["arrowdown_"+b]&&this._removeArrow&&this._removeArrow("arrowdown_"+b),this.idPull["polygon_"+g[e]]=null,delete this.idPull["polygon_"+g[e]])};
dhtmlXMenuObject.prototype._getAllParents=function(b){var d=[],e;for(e in this.itemPull)if(this.itemPull[e].parent==b&&(d[d.length]=this.itemPull[e].id,this.itemPull[e].complex))for(var f=this._getAllParents(this.itemPull[e].id),g=0;g<f.length;g++)d[d.length]=f[g];return d};
dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.context=!0;!0==this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.skin+"_Middle",""),this.base._autoSkinUpdate=!1);null!=this.addBaseIdAsContextZone&&this.addContextZone(this.addBaseIdAsContextZone)};
dhtmlXMenuObject.prototype.addContextZone=function(b){if(b==document.body){b="document.body."+this.idPrefix;var d=document.body}else d="string"==typeof b?document.getElementById(b):b;var e=!1,f;for(f in this.contextZones)e=e||f==b||this.contextZones[f]==d;if(!0==e)return!1;this.contextZones[b]=d;var g=this;_isOpera?(this.operaContext=function(b){g._doOnContextMenuOpera(b,g)},d.addEventListener("mouseup",this.operaContext,!1)):(null!=d.oncontextmenu&&!d._oldContextMenuHandler&&(d._oldContextMenuHandler=
d.oncontextmenu),d.oncontextmenu=function(b){for(var d in dhtmlxMenuObjectLiveInstances)d!=g._UID&&dhtmlxMenuObjectLiveInstances[d].context&&dhtmlxMenuObjectLiveInstances[d]._hideContextMenu();b=b||event;b.cancelBubble=!0;b.returnValue=!1;g._doOnContextBeforeCall(b,this);return!1})};
dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(b,d){for(var e in dhtmlxMenuObjectLiveInstances)e!=d._UID&&dhtmlxMenuObjectLiveInstances[e].context&&dhtmlxMenuObjectLiveInstances[e]._hideContextMenu();b.cancelBubble=!0;b.returnValue=!1;0==b.button&&!0==b.ctrlKey&&d._doOnContextBeforeCall(b,this);return!1};
dhtmlXMenuObject.prototype.removeContextZone=function(b){if(!this.isContextZone(b))return!1;b==document.body&&(b="document.body."+this.idPrefix);var d=this.contextZones[b];_isOpera?d.removeEventListener("mouseup",this.operaContext,!1):(d.oncontextmenu=null!=d._oldContextMenuHandler?d._oldContextMenuHandler:null,d._oldContextMenuHandler=null);try{this.contextZones[b]=null,delete this.contextZones[b]}catch(e){}return!0};
dhtmlXMenuObject.prototype.isContextZone=function(b){if(b==document.body&&null!=this.contextZones["document.body."+this.idPrefix])return!0;var d=!1;null!=this.contextZones[b]&&this.contextZones[b]==document.getElementById(b)&&(d=!0);return d};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:""==this.idPull["polygon_"+this.idPrefix+this.topId].style.display};
dhtmlXMenuObject.prototype._showContextMenu=function(b,d,e){this._clearAndHide();if(null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;window.clearTimeout(this.menuTimeoutHandler);this.idPull[this.idPrefix+this.topId]=[b,d];this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[e])};
dhtmlXMenuObject.prototype._hideContextMenu=function(){if(null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId);this.zInd=this.zIndInit};
dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(b,d){this.contextMenuZoneId=d.id;this._clearAndHide();this._hideContextMenu();var e=b.srcElement||b.target,f=_isIE||_isOpera||_KHTMLrv?b.offsetX:b.layerX,g=_isIE||_isOpera||_KHTMLrv?b.offsetY:b.layerY,f=getAbsoluteLeft(e)+f,e=getAbsoluteTop(e)+g;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[d.id,b])&&this.contextAutoShow&&(this._showContextMenu(f,e),this.callEvent("onAfterContextMenu",[d.id,b])):this.contextAutoShow&&
(this._showContextMenu(f,e),this.callEvent("onAfterContextMenu",[d.id]))};dhtmlXMenuObject.prototype.showContextMenu=function(b,d){this._showContextMenu(b,d,!1)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};
dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){this._isVisibleArea||(this.menuX1=document.body.scrollLeft,this.menuX2=this.menuX1+(window.innerWidth||document.body.clientWidth),this.menuY1=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),this.menuY2=this.menuY1+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight))};
dhtmlXMenuObject.prototype.getItemPosition=function(b){b=this.idPrefix+b;var d=-1;if(null==this.itemPull[b])return d;for(var e=this.itemPull[b].parent,e=null!=this.idPull["polygon_"+e]?this.idPull["polygon_"+e].tbd:this.cont,f=0;f<e.childNodes.length;f++)if(e.childNodes[f]==this.idPull["separator_"+b]||e.childNodes[f]==this.idPull[b])d=f;return d};
dhtmlXMenuObject.prototype.setItemPosition=function(b,d){b=this.idPrefix+b;if(null!=this.idPull[b]){var e=this.itemPull[b].parent==this.idPrefix+this.topId,f=this.idPull[b],g=this.getItemPosition(b.replace(this.idPrefix,"")),h=this.itemPull[b].parent,h=null!=this.idPull["polygon_"+h]?this.idPull["polygon_"+h].tbd:this.cont;h.removeChild(h.childNodes[g]);0>d&&(d=0);e&&1>d&&(d=1);d<h.childNodes.length?h.insertBefore(f,h.childNodes[d]):h.appendChild(f)}};
dhtmlXMenuObject.prototype.getParentId=function(b){b=this.idPrefix+b;return null==this.itemPull[b]?null:(null!=this.itemPull[b].parent?this.itemPull[b].parent:this.topId).replace(this.idPrefix,"")};
dhtmlXMenuObject.prototype.addNewSibling=function(b,d,e,f,g,h){d=this.idPrefix+(null!=d?d:this._genStr(24));var l=this.idPrefix+(null!=b?this.getParentId(b):this.topId);this._addItemIntoGlobalStrorage(d,l,e,"item",f,g,h);l==this.idPrefix+this.topId&&!this.context?this._renderToplevelItem(d,this.getItemPosition(b)):this._renderSublevelItem(d,this.getItemPosition(b))};
dhtmlXMenuObject.prototype.addNewChild=function(b,d,e,f,g,h,l){if(null==b)if(this.context)b=this.topId;else{this.addNewSibling(b,e,f,g,h,l);null!=d&&this.setItemPosition(e,d);return}e=this.idPrefix+(null!=e?e:this._genStr(24));this.setHotKey&&this.setHotKey(b,"");b=this.idPrefix+b;this._addItemIntoGlobalStrorage(e,b,f,"item",g,h,l);null==this.idPull["polygon_"+b]&&this._renderSublevelPolygon(b,b);this._renderSublevelItem(e,d-1);this._redefineComplexState(b)};
dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(b,d,e,f,g,h,l){b={id:b,title:e,imgen:null!=h?h:"",imgdis:null!=l?l:"",type:f,state:!0==g?"disabled":"enabled",parent:d,complex:!1,hotkey:"",tip:""};this.itemPull[b.id]=b};
dhtmlXMenuObject.prototype._addSubMenuPolygon=function(b,d){this._renderSublevelPolygon(b,d);for(var e=this._getMenuNodes(d),f=0;f<e.length;f++)"separator"==this.itemPull[e[f]].type?this._renderSeparator(e[f],null):this._renderSublevelItem(e[f],null);for(f=0;f<e.length;f++)this.itemPull[e[f]].complex&&this._addSubMenuPolygon(b,this.itemPull[e[f]].id)};
dhtmlXMenuObject.prototype._renderSublevelPolygon=function(b,d){var e=document.createElement("DIV");e.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Polygon "+(this._rtl?"dir_right":"");e.dir="ltr";e.oncontextmenu=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return!1};e.id="polygon_"+d;e.onclick=function(b){b=b||event;b.cancelBubble=!0};e.style.display="none";document.body.insertBefore(e,document.body.firstChild);var f=document.createElement("TABLE");f.className="dhtmlxMebu_SubLevelArea_Tbl";
f.cellSpacing=0;f.cellPadding=0;f.border=0;var g=document.createElement("TBODY");f.appendChild(g);e.appendChild(f);e.tbl=f;e.tbd=g;this.idPull[e.id]=e;null!=this.sxDacProc&&(this.idPull["sxDac_"+d]=new this.sxDacProc(e,e.className),_isIE?(this.idPull["sxDac_"+d]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+d]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+d]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+d]._setCustomCycle(this.dacCycles)));return e};
dhtmlXMenuObject.prototype._renderSublevelItem=function(b,d){var e=this,f=document.createElement("TR");f.className="enabled"==this.itemPull[b].state?"sub_item":"sub_item_dis";var g=document.createElement("TD");g.className="sub_item_icon";var h=this.itemPull[b]["enabled"==this.itemPull[b].state?"imgen":"imgdis"];if(""!=h){var l=this.itemPull[b].type;if("checkbox"==l||"radio"==l){var m=document.createElement("DIV");m.id="image_"+this.itemPull[b].id;m.className="sub_icon "+h;g.appendChild(m)}"checkbox"==
l||"radio"==l||(m=document.createElement("IMG"),m.id="image_"+this.itemPull[b].id,m.className="sub_icon",m.src=this.imagePath+h,g.appendChild(m))}h=document.createElement("TD");h.className="sub_item_text";""!=this.itemPull[b].title?(l=document.createElement("DIV"),l.className="sub_item_text",l.innerHTML=this.itemPull[b].title,h.appendChild(l)):h.innerHTML="&nbsp;";l=document.createElement("TD");l.className="sub_item_hk";this.itemPull[b].complex?(m=document.createElement("DIV"),m.className="complex_arrow",
m.id="arrow_"+this.itemPull[b].id,l.appendChild(m)):0<this.itemPull[b].hotkey.length&&!this.itemPull[b].complex?(m=document.createElement("DIV"),m.className="sub_item_hk",m.innerHTML=this.itemPull[b].hotkey,l.appendChild(m)):l.innerHTML="&nbsp;";f.appendChild(this._rtl?l:g);f.appendChild(h);f.appendChild(this._rtl?g:l);f.id=this.itemPull[b].id;f.parent=this.itemPull[b].parent;0<this.itemPull[b].tip.length&&(f.title=this.itemPull[b].tip);f.onselectstart=function(b){b=b||event;return b.returnValue=
!1};f.onmouseover=function(){"web"==e.menuMode&&window.clearTimeout(e.menuTimeoutHandler);e._redistribSubLevelSelection(this.id,this.parent)};"web"==e.menuMode&&(f.onmouseout=function(){window.clearTimeout(e.menuTimeoutHandler);e.menuTimeoutHandler=window.setTimeout(function(){e._clearAndHide()},e.menuTimeoutMsec,"JavaScript")});f.onclick=function(b){if(e.checkEvent("onClick")||!e.itemPull[this.id].complex){b=b||event;b.cancelBubble=!0;b.returnValue=!1;tc=e.itemPull[this.id].complex?"c":"-";td="enabled"==
e.itemPull[this.id].state?"-":"d";b={ctrl:b.ctrlKey,alt:b.altKey,shift:b.shiftKey};switch(e.itemPull[this.id].type){case "checkbox":e._checkboxOnClickHandler(this.id.replace(e.idPrefix,""),tc+td+"n",b);break;case "radio":e._radioOnClickHandler(this.id.replace(e.idPrefix,""),tc+td+"n",b);break;case "item":e._doOnClick(this.id.replace(e.idPrefix,""),tc+td+"n",b)}return!1}};g=this.idPull["polygon_"+this.itemPull[b].parent];null!=d&&(d++,0>d&&(d=0),d>g.tbd.childNodes.length-1&&(d=null));null!=d&&null!=
g.tbd.childNodes[d]?g.tbd.insertBefore(f,g.tbd.childNodes[d]):g.tbd.appendChild(f);this.idPull[f.id]=f};
dhtmlXMenuObject.prototype._renderSeparator=function(b,d){var e=this.context?"SubLevelArea":this.itemPull[b].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if(!("TopLevel"==e&&this.context)){var f=this;if("TopLevel"!=e){var g=document.createElement("TR");g.className="sub_sep";var h=document.createElement("TD");h.colSpan="3";g.appendChild(h)}var l=document.createElement("DIV");l.id="separator_"+b;l.className="TopLevel"==e?"top_sep":"sub_sep";l.onselectstart=function(b){b=b||event;b.returnValue=
!1};l.onclick=function(b){b=b||event;b.cancelBubble=!0;b={ctrl:b.ctrlKey,alt:b.altKey,shift:b.shiftKey};f._doOnClick(this.id.replace("separator_"+f.idPrefix,""),"--s",b)};"TopLevel"==e?(null!=d?(d++,0>d&&(d=0),null!=this.cont.childNodes[d]?this.cont.insertBefore(l,this.cont.childNodes[d]):this.cont.appendChild(l)):(g=this.cont.childNodes[this.cont.childNodes.length-1],-1==String(g).search("TopLevel_Text")?this.cont.appendChild(l):this.cont.insertBefore(l,g)),this.idPull[l.id]=l):(e=this.idPull["polygon_"+
this.itemPull[b].parent],null!=d&&(d++,0>d&&(d=0),d>e.tbd.childNodes.length-1&&(d=null)),null!=d&&null!=e.tbd.childNodes[d]?e.tbd.insertBefore(g,e.tbd.childNodes[d]):e.tbd.appendChild(g),h.appendChild(l),this.idPull[l.id]=g)}};dhtmlXMenuObject.prototype.addNewSeparator=function(b,d){d=this.idPrefix+(null!=d?d:this._genStr(24));var e=this.idPrefix+this.getParentId(b);this._addItemIntoGlobalStrorage(d,e,"","separator",!1,"","");this._renderSeparator(d,this.getItemPosition(b))};
dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0);this._isInited=!1;this.idPrefix=this._genStr(12)};
dhtmlXMenuObject.prototype.unload=function(){_isIE?(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)):(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1));this._bodyContext=this._bodyClick=null;this.removeItem(this.idPrefix+this.topId,!0);this.idPull=this.itemPull=null;if(this.context)for(var b in this.contextZones)this.removeContextZone(b);null!=this.cont&&(this.cont.className=
"",this.cont.parentNode.removeChild(this.cont),this.cont=null);null!=this.base&&(this.base.className="",this.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base=this.base.onselectstart=null);this.setSkin=null;this.detachAllEvents();this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null);this.extendedModule=this.serialize=this.addCheckbox=this.getCheckboxState=this.setCheckboxState=this.addRadioButton=this.setRadioChecked=this.getRadioChecked=this.userData=
this.setOverflowHeight=this.contextZones=this.getCircuit=this.clearHref=this.setHref=this.setAlign=this.setRTL=this.setTopText=this.setItemSelected=this.getHotKey=this.setHotKey=this.getTooltip=this.setTooltip=this.setVisibleArea=this.getContextMenuHideAllMode=this.setContextMenuHideAllMode=this.setAutoHideMode=this.setAutoShowMode=this.clearItemImage=this.setItemImage=this.getItemImage=this.aK=this.setWebModeTimeout=this.setOpenMode=this.getUserData=this.setUserData=this.isItemHidden=this.showItem=
this.hideItem=this.loadFromHTML=this.setItemText=this.getItemText=this.isItemEnabled=this.setItemDisabled=this.setItemEnabled=this._removeArrow=this._checkboxOnClickHandler=this._updateCheckboxImage=this._readLevel=this._setCheckboxState=this._getCheckboxState=this._radioOnClickHandler=this._setRadioState=this._getRadioImgObj=this._countPolygonItems=this._doScrollDown=this._doScrollUp=this._isArrowExists=this._removeDownArrow=this._removeUpArrow=this._addDownArrow=this._addUpArrow=this._checkArrowsState=
this._clearAllSelectedSubItemsInPolygon=this._updateLoaderIcon=this._changeItemVisible=this._changeItemState=this.hideContextMenu=this.showContextMenu=this.hide=this.detachAllEvents=this.radio=this.items=this.unload=this.dhx_Event=this.detachEvent=this.eventCatcher=this.checkEvent=this.callEvent=this.attachEvent=this.addNewSeparator=this.addNewChild=this.addNewSibling=this.getParentId=this.setItemPosition=this.getItemPosition=this.clearAll=this._hideContextMenu=this._renderSeparator=this._renderSublevelItem=
this._renderSublevelPolygon=this._addSubMenuPolygon=this._addItemIntoGlobalStrorage=this._autoDetectVisibleArea=this._doOnContextBeforeCall=this._showContextMenu=this._isContextMenuVisible=this.isContextZone=this.removeContextZone=this.addContextZone=this.renderAsContextMenu=this._getAllParents=this.removeItem=this._updateItemImage=this.setIconPath=this.setIconsPath=this.setImagePath=this._renderToplevelItem=this._initTopLevelMenu=this._redistribTopLevelSelection=this._getItemLevelType=this._updateItemComplexState=
this._redefineComplexState=this._countVisiblePolygonItems=this._hideSubLevelItem=this._showSubLevelItem=this._xmlParser=this._buildMenu=this.loadXMLString=this.loadXML=this.init=this.forEachItem=this.getItemType=this._doOnLoad=this._clearAndHide=this._genStr=this._getMenuNodes=this._searchMenuNode=this._doOnTouchMenu=this._doOnClick=this._redistribSubLevelSelection=this._showPolygon=this._hidePolygon=this._getSubItemToDeselectByPolygon=this._removeSubItemFromSelected=this._addSubItemToSelected=this._openedPolygons=
this._selectedSubItems=this._enableDacSupport=this.zIndStep=this.zIndInit=this.zInd=this.dacSpeedIE=this.dacSpeed=this.dacCyclesIE=this.dacCycles=this.topId=this.skin=this.userDataTagName=this.itemTipTagName=this.itemTextTagName=this.itemTagName=this.itemHrefTagName=this.itemHotKeyTagName=this.isDhtmlxMenuObject=this.menuTouched=this.menuTimeoutMsec=this.menuTimeoutHandler=this.menuModeTopLevelTimeoutTime=this.menuModeTopLevelTimeout=this.menuMode=this.imagePath=this.idPrefix=this.menuLastClicked=
this.menuSelected=this.limit=this.dirTopLevel=this.dirSubLevel=this.fixedPosition=this.loaderIcon=this.dLoadUrl=this.dLoadSign=this.dLoad=this.contextMenuZoneId=this.contextHideAllMode=this.contextAutoShow=this.contextAutoHide=this.context=this.addBaseIdAsContextZone=this._topLevelRightMargin=this._topLevelBottomMargin=this._topLevelOffsetLeft=this._topLevelBottomMargin=this._scrollUpTMTime=this._scrollUpTMStep=this._scrollDownTMTime=this._scrollDownTMStep=this._rtl=this._isInited=this._isIE6=this._arrowFFFix=
this._align=null;dhtmlxMenuObjectLiveInstances[this._UID]=null;try{delete dhtmlxMenuObjectLiveInstances[this._UID]}catch(d){}this._UID=null};var dhtmlxMenuObjectLiveInstances={};dhtmlXMenuObject.prototype.i18n={dhxmenuextalert:"dhtmlxmenu_ext.js required"};
(function(){dhtmlx.extend_api("dhtmlXMenuObject",{_init:function(b){return[b.parent,b.skin]},align:"setAlign",top_text:"setTopText",context:"renderAsContextMenu",icon_path:"setIconsPath",open_mode:"setOpenMode",rtl:"setRTL",skin:"setSkin",dynamic:"aK",xml:"loadXML",items:"items",overflow:"setOverflowHeight"},{items:function(b,d){for(var e=null,f=0;f<b.length;f++){var g=b[f];"separator"==g.type?(this.addNewSeparator(e,1E5,g.id),e=g.id):(this.addNewChild(d,1E5,g.id,g.text,g.disabled,g.img,g.img_disabled),
e=g.id,g.items&&this.items(g.items,g.id))}}})})();dhtmlXMenuObject.prototype.extendedModule="DHXMENUEXT";dhtmlXMenuObject.prototype.setItemEnabled=function(b){null!=this.idPull[this.idPrefix+b]&&this._changeItemState(b,"enabled",this._getItemLevelType(b))};dhtmlXMenuObject.prototype.setItemDisabled=function(b){null!=this.idPull[this.idPrefix+b]&&this._changeItemState(b,"disabled",this._getItemLevelType(b))};
dhtmlXMenuObject.prototype.isItemEnabled=function(b){return null!=this.itemPull[this.idPrefix+b]?"enabled"==this.itemPull[this.idPrefix+b].state:!1};
dhtmlXMenuObject.prototype._changeItemState=function(b,d,e){var f=this.idPrefix+b;null!=this.itemPull[f]&&(null!=this.idPull[f]&&this.itemPull[f].state!=d)&&(this.itemPull[f].state=d,this.idPull[f].className=this.itemPull[f].parent==this.idPrefix+this.topId&&!this.context?"dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[f].state?"Normal":"Disabled"):"sub_item"+("enabled"==this.itemPull[f].state?"":"_dis"),this._updateItemComplexState(this.idPrefix+b,this.itemPull[this.idPrefix+
b].complex,!1),this._updateItemImage(b,e),this.idPrefix+this.menuLastClicked==f&&"TopLevel"!=e&&this._redistribSubLevelSelection(f,this.itemPull[f].parent));return!1};dhtmlXMenuObject.prototype.getItemText=function(b){return null!=this.itemPull[this.idPrefix+b]?this.itemPull[this.idPrefix+b].title:""};
dhtmlXMenuObject.prototype.setItemText=function(b,d){b=this.idPrefix+b;if(null!=this.itemPull[b]&&null!=this.idPull[b])if(this._clearAndHide(),this.itemPull[b].title=d,this.itemPull[b].parent==this.idPrefix+this.topId&&!this.context){for(var e=null,f=0;f<this.idPull[b].childNodes.length;f++)try{"top_level_text"==this.idPull[b].childNodes[f].className&&(e=this.idPull[b].childNodes[f])}catch(g){}""==String(this.itemPull[b].title).length||null==this.itemPull[b].title?null!=e&&e.parentNode.removeChild(e):
(e||(e=document.createElement("DIV"),e.className="top_level_text",this._rtl&&0<this.idPull[b].childNodes.length?this.idPull[b].insertBefore(e,this.idPull[b].childNodes[0]):this.idPull[b].appendChild(e)),e.innerHTML=this.itemPull[b].title)}else{e=null;for(f=0;f<this.idPull[b].childNodes[1].childNodes.length;f++)if("sub_item_text"==String(this.idPull[b].childNodes[1].childNodes[f].className||""))e=this.idPull[b].childNodes[1].childNodes[f];""==String(this.itemPull[b].title).length||null==this.itemPull[b].title?
e&&(e.parentNode.removeChild(e),this.idPull[b].childNodes[1].innerHTML="&nbsp;"):(e||(e=document.createElement("DIV"),e.className="sub_item_text",this.idPull[b].childNodes[1].innerHTML="",this.idPull[b].childNodes[1].appendChild(e)),e.innerHTML=this.itemPull[b].title)}};dhtmlXMenuObject.prototype.loadFromHTML=function(b,d,e){this.itemTagName="DIV";"string"==typeof b&&(b=document.getElementById(b));this._buildMenu(b,null);this.init();d&&b.parentNode.removeChild(b);null!=e&&e()};
dhtmlXMenuObject.prototype.hideItem=function(b){this._changeItemVisible(b,!1)};dhtmlXMenuObject.prototype.showItem=function(b){this._changeItemVisible(b,!0)};dhtmlXMenuObject.prototype.isItemHidden=function(b){var d=null;null!=this.idPull[this.idPrefix+b]&&(d="none"==this.idPull[this.idPrefix+b].style.display);return d};
dhtmlXMenuObject.prototype._changeItemVisible=function(b,d){var e=this.idPrefix+b;if(null!=this.itemPull[e]&&("separator"==this.itemPull[e].type&&(e="separator_"+e),null!=this.idPull[e]))this.idPull[e].style.display=d?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+b].parent)};dhtmlXMenuObject.prototype.setUserData=function(b,d,e){this.userData[this.idPrefix+b+"_"+d]=e};
dhtmlXMenuObject.prototype.getUserData=function(b,d){return null!=this.userData[this.idPrefix+b+"_"+d]?this.userData[this.idPrefix+b+"_"+d]:null};dhtmlXMenuObject.prototype.setOpenMode=function(b){if("win"==b||"web"==b)this.menuMode=b};dhtmlXMenuObject.prototype.setWebModeTimeout=function(b){this.menuTimeoutMsec=!isNaN(b)?b:400};dhtmlXMenuObject.prototype.aK=function(b,d){this.dLoad=!0;this.dLoadUrl=b;this.dLoadSign=-1==String(this.dLoadUrl).search(/\?/)?"?":"&";this.loaderIcon=d;this.init()};
dhtmlXMenuObject.prototype._updateLoaderIcon=function(b,d){if(null!=this.idPull[b]&&!(0<=String(this.idPull[b].className).search("TopLevel_Item"))){var e=this._rtl?0:2;this.idPull[b].childNodes[e]&&this.idPull[b].childNodes[e].childNodes[0]&&(e=this.idPull[b].childNodes[e].childNodes[0],0===String(e.className).search("complex_arrow")&&(e.className="complex_arrow"+(d?"_loading":"")))}};
dhtmlXMenuObject.prototype.getItemImage=function(b){var d=[null,null];b=this.idPrefix+b;"item"==this.itemPull[b].type&&(d[0]=this.itemPull[b].imgen,d[1]=this.itemPull[b].imgdis);return d};dhtmlXMenuObject.prototype.setItemImage=function(b,d,e){"item"==this.itemPull[this.idPrefix+b].type&&(this.itemPull[this.idPrefix+b].imgen=d,this.itemPull[this.idPrefix+b].imgdis=e,this._updateItemImage(b,this._getItemLevelType(b)))};dhtmlXMenuObject.prototype.clearItemImage=function(b){this.setItemImage(b,"","")};
dhtmlXMenuObject.prototype.setAutoShowMode=function(b){this.contextAutoShow=!0==b?!0:!1};dhtmlXMenuObject.prototype.setAutoHideMode=function(b){this.contextAutoHide=!0==b?!0:!1};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(b){this.contextHideAllMode=!0==b?!0:!1};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.contextHideAllMode};
dhtmlXMenuObject.prototype.setVisibleArea=function(b,d,e,f){this._isVisibleArea=!0;this.menuX1=b;this.menuX2=d;this.menuY1=e;this.menuY2=f};dhtmlXMenuObject.prototype.setTooltip=function(b,d){b=this.idPrefix+b;null!=this.itemPull[b]&&null!=this.idPull[b]&&(this.idPull[b].title=0<d.length?d:null,this.itemPull[b].tip=d)};dhtmlXMenuObject.prototype.getTooltip=function(b){return null==this.itemPull[this.idPrefix+b]?null:this.itemPull[this.idPrefix+b].tip};
dhtmlXMenuObject.prototype.setHotKey=function(b,d){b=this.idPrefix+b;if(null!=this.itemPull[b]&&null!=this.idPull[b]&&(this.itemPull[b].parent!=this.idPrefix+this.topId||this.context)&&!this.itemPull[b].complex){var e=this.itemPull[b].type;if("item"==e||"checkbox"==e||"radio"==e){e=null;try{if("sub_item_hk"==this.idPull[b].childNodes[this._rtl?0:2].childNodes[0].className)e=this.idPull[b].childNodes[this._rtl?0:2].childNodes[0]}catch(f){}if(0==d.length)this.itemPull[b].hotkey_backup=this.itemPull[b].hotkey,
this.itemPull[b].hotkey="",null!=e&&e.parentNode.removeChild(e);else{this.itemPull[b].hotkey=d;this.itemPull[b].hotkey_backup=null;if(null==e){e=document.createElement("DIV");e.className="sub_item_hk";for(var g=this.idPull[b].childNodes[this._rtl?0:2];0<g.childNodes.length;)g.removeChild(g.childNodes[0]);g.appendChild(e)}e.innerHTML=d}}}};dhtmlXMenuObject.prototype.getHotKey=function(b){return null==this.itemPull[this.idPrefix+b]?null:this.itemPull[this.idPrefix+b].hotkey};
dhtmlXMenuObject.prototype.setItemSelected=function(b){if(null==this.itemPull[this.idPrefix+b])return null};dhtmlXMenuObject.prototype.setTopText=function(b){this.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._rtl?"left":"left"==this._align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=b)};
dhtmlXMenuObject.prototype.setAlign=function(b){if(this._align!=b&&("left"==b||"right"==b))this._align=b,this.cont&&(this.cont.className="right"==this._align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this._align?"right":"left"))};dhtmlXMenuObject.prototype.setHref=function(b,d,e){null!=this.itemPull[this.idPrefix+b]&&(this.itemPull[this.idPrefix+b].href_link=d,null!=e&&(this.itemPull[this.idPrefix+b].href_target=e))};
dhtmlXMenuObject.prototype.clearHref=function(b){null!=this.itemPull[this.idPrefix+b]&&(delete this.itemPull[this.idPrefix+b].href_link,delete this.itemPull[this.idPrefix+b].href_target)};dhtmlXMenuObject.prototype.getCircuit=function(b){for(var d=Array(b);this.getParentId(b)!=this.topId;)b=this.getParentId(b),d[d.length]=b;return d.reverse()};
dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(b){for(var d=this._getSubItemToDeselectByPolygon(b),e=0;e<this._openedPolygons.length;e++)this._openedPolygons[e]!=b&&this._hidePolygon(this._openedPolygons[e]);for(e=0;e<d.length;e++)null!=this.idPull[d[e]]&&"enabled"==this.itemPull[d[e]].state&&(this.idPull[d[e]].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Normal")};
dhtmlXMenuObject.prototype._checkArrowsState=function(b){var d=this.idPull["polygon_"+b],e=this.idPull["arrowup_"+b];b=this.idPull["arrowdown_"+b];e.className=0==d.scrollTop?"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp_Disabled":"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp"+(e.over?"_Over":"");b.className=d.scrollTop+d.offsetHeight<d.scrollHeight?"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown"+(b.over?"_Over":""):"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown_Disabled"};
dhtmlXMenuObject.prototype._addUpArrow=function(b){var d=this,e=document.createElement("DIV");e.pId=this.idPrefix+b;e.id="arrowup_"+this.idPrefix+b;e.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp";e.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";e.style.display="none";e.over=!1;e.onselectstart=function(b){b=b||event;return b.returnValue=!1};e.oncontextmenu=function(b){b=b||event;return b.returnValue=!1};
e.onmouseover=function(){"web"==d.menuMode&&window.clearTimeout(d.menuTimeoutHandler);d._clearAllSelectedSubItemsInPolygon(this.pId);this.className!="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,d._canScrollUp=!0,d._doScrollUp(this.pId,!0))};e.onmouseout=function(){"web"==d.menuMode&&(window.clearTimeout(d.menuTimeoutHandler),d.menuTimeoutHandler=window.setTimeout(function(){d._clearAndHide()},d.menuTimeoutMsec,
"JavaScript"));this.over=!1;d._canScrollUp=!1;this.className!="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(d._scrollUpTM))};e.onclick=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return!1};document.body.insertBefore(e,document.body.firstChild);this.idPull[e.id]=e};
dhtmlXMenuObject.prototype._addDownArrow=function(b){var d=this,e=document.createElement("DIV");e.pId=this.idPrefix+b;e.id="arrowdown_"+this.idPrefix+b;e.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown";e.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";e.style.display="none";e.over=!1;e.onselectstart=function(b){b=b||event;return b.returnValue=!1};e.oncontextmenu=function(b){b=b||event;return b.returnValue=
!1};e.onmouseover=function(){"web"==d.menuMode&&window.clearTimeout(d.menuTimeoutHandler);d._clearAllSelectedSubItemsInPolygon(this.pId);this.className!="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,d._canScrollDown=!0,d._doScrollDown(this.pId,!0))};e.onmouseout=function(){"web"==d.menuMode&&(window.clearTimeout(d.menuTimeoutHandler),d.menuTimeoutHandler=window.setTimeout(function(){d._clearAndHide()},d.menuTimeoutMsec,
"JavaScript"));this.over=!1;d._canScrollDown=!1;this.className!="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(d._scrollDownTM))};e.onclick=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return!1};document.body.insertBefore(e,document.body.firstChild);this.idPull[e.id]=e};dhtmlXMenuObject.prototype._removeUpArrow=function(b){this._removeArrow("arrowup_"+this.idPrefix+b)};
dhtmlXMenuObject.prototype._removeDownArrow=function(b){this._removeArrow("arrowdown_"+this.idPrefix+b)};dhtmlXMenuObject.prototype._removeArrow=function(b){var d=this.idPull[b];d.onselectstart=null;d.oncontextmenu=null;d.onmouseover=null;d.onmouseout=null;d.onclick=null;d.parentNode&&d.parentNode.removeChild(d);this.idPull[b]=null;try{delete this.idPull[b]}catch(e){}};
dhtmlXMenuObject.prototype._isArrowExists=function(b){return null!=this.idPull["arrowup_"+b]&&null!=this.idPull["arrowdown_"+b]?!0:!1};dhtmlXMenuObject.prototype._doScrollUp=function(b,d){var e=this.idPull["polygon_"+b];if(this._canScrollUp&&0<e.scrollTop){var f=!1,g=e.scrollTop-this._scrollUpTMStep;0>g&&(f=!0,g=0);e.scrollTop=g;if(!f){var h=this;this._scrollUpTM=window.setTimeout(function(){h._doScrollUp(b,!1)},this._scrollUpTMTime)}}else this._canScrollUp=!1,this._checkArrowsState(b);d&&this._checkArrowsState(b)};
dhtmlXMenuObject.prototype._doScrollDown=function(b,d){var e=this.idPull["polygon_"+b];if(this._canScrollDown&&e.scrollTop+e.offsetHeight<=e.scrollHeight){var f=!1,g=e.scrollTop+this._scrollDownTMStep;g+e.offsetHeight>e.scollHeight&&(f=!0,g=e.scollHeight-e.offsetHeight);e.scrollTop=g;if(!f){var h=this;this._scrollDownTM=window.setTimeout(function(){h._doScrollDown(b,!1)},this._scrollDownTMTime)}}else this._checkArrowsState(b);d&&this._checkArrowsState(b)};
dhtmlXMenuObject.prototype._countPolygonItems=function(b){var d=0,e;for(e in this.itemPull){var f=this.itemPull[e].type;this.itemPull[e].parent==this.idPrefix+b&&("item"==f||"radio"==f||"checkbox"==f)&&d++}return d};
dhtmlXMenuObject.prototype.setOverflowHeight=function(b){if(!(0==this.limit&&0>=b))if(this._clearAndHide(),0<=this.limit&&0<b)this.limit=b;else if(0<this.limit&&0>=b){for(var d in this.itemPull)this._isArrowExists(d)&&(b=String(d).replace(this.idPrefix,""),this._removeUpArrow(b),this._removeDownArrow(b),this.idPull["polygon_"+d].style.height="");this.limit=0}};
dhtmlXMenuObject.prototype._getRadioImgObj=function(b){try{var d=this.idPull[this.idPrefix+b].childNodes[this._rtl?2:0].childNodes[0]}catch(e){d=null}return d};dhtmlXMenuObject.prototype._setRadioState=function(b,d){var e=this._getRadioImgObj(b);if(null!=e){var f=this.itemPull[this.idPrefix+b];f.checked=d;f.imgen="rdbt_"+(f.checked?"1":"0");f.imgdis=f.imgen;e.className="sub_icon "+f.imgen}};
dhtmlXMenuObject.prototype._radioOnClickHandler=function(b,d,e){"d"==d.charAt(1)||null==this.itemPull[this.idPrefix+b].group||(d=this.itemPull[this.idPrefix+b].group,this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[d,this.getRadioChecked(d),b,this.contextMenuZoneId,e])&&this.setRadioChecked(d,b):this.setRadioChecked(d,b),this.checkEvent("onClick")&&this.callEvent("onClick",[b]))};
dhtmlXMenuObject.prototype.getRadioChecked=function(b){for(var d=null,e=0;e<this.radio[b].length;e++){var f=this.radio[b][e].replace(this.idPrefix,""),g=this._getRadioImgObj(f);null!=g&&null!=g.className.match(/rdbt_1$/gi)&&(d=f)}return d};dhtmlXMenuObject.prototype.setRadioChecked=function(b,d){if(null!=this.radio[b])for(var e=0;e<this.radio[b].length;e++){var f=this.radio[b][e].replace(this.idPrefix,"");this._setRadioState(f,f==d)}};
dhtmlXMenuObject.prototype.addRadioButton=function(b,d,e,f,g,h,l,m){if(this.context&&d==this.topId||!(null==this.itemPull[this.idPrefix+d]||"child"==b&&"item"!=this.itemPull[this.idPrefix+d].type)){f=this.idPrefix+(null!=f?f:this._genStr(24));var k="rdbt_"+(l?"1":"0");"sibling"==b?(b=this.idPrefix+this.getParentId(d),this._addItemIntoGlobalStrorage(f,b,g,"radio",m,k,k),this._renderSublevelItem(f,this.getItemPosition(d))):(b=this.idPrefix+d,this._addItemIntoGlobalStrorage(f,b,g,"radio",m,k,k),null==
this.idPull["polygon_"+b]&&this._renderSublevelPolygon(b,b),this._renderSublevelItem(f,e-1),this._redefineComplexState(b));d=null!=h?h:this._genStr(24);this.itemPull[f].group=d;null==this.radio[d]&&(this.radio[d]=[]);this.radio[d][this.radio[d].length]=f;!0==l&&this.setRadioChecked(d,String(f).replace(this.idPrefix,""))}};dhtmlXMenuObject.prototype._getCheckboxState=function(b){return null==this.itemPull[this.idPrefix+b]?null:this.itemPull[this.idPrefix+b].checked};
dhtmlXMenuObject.prototype._setCheckboxState=function(b,d){null!=this.itemPull[this.idPrefix+b]&&(this.itemPull[this.idPrefix+b].checked=d)};
dhtmlXMenuObject.prototype._updateCheckboxImage=function(b){if(null!=this.idPull[this.idPrefix+b]){this.itemPull[this.idPrefix+b].imgen="chbx_"+(this._getCheckboxState(b)?"1":"0");this.itemPull[this.idPrefix+b].imgdis=this.itemPull[this.idPrefix+b].imgen;try{this.idPull[this.idPrefix+b].childNodes[this._rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+b].imgen}catch(d){}}};
dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(b,d,e){"d"!=d.charAt(1)&&null!=this.itemPull[this.idPrefix+b]&&(d=this._getCheckboxState(b),this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[b,d,this.contextMenuZoneId,e])&&this.setCheckboxState(b,!d):this.setCheckboxState(b,!d),this.checkEvent("onClick")&&this.callEvent("onClick",[b]))};dhtmlXMenuObject.prototype.setCheckboxState=function(b,d){this._setCheckboxState(b,d);this._updateCheckboxImage(b)};
dhtmlXMenuObject.prototype.getCheckboxState=function(b){return this._getCheckboxState(b)};
dhtmlXMenuObject.prototype.addCheckbox=function(b,d,e,f,g,h,l){if(this.context&&d==this.topId||!(null==this.itemPull[this.idPrefix+d]||"child"==b&&"item"!=this.itemPull[this.idPrefix+d].type)){var m="chbx_"+(h?"1":"0");"sibling"==b?(b=this.idPrefix+(null!=f?f:this._genStr(24)),f=this.idPrefix+this.getParentId(d),this._addItemIntoGlobalStrorage(b,f,g,"checkbox",l,m,m),this.itemPull[b].checked=h,this._renderSublevelItem(b,this.getItemPosition(d))):(b=this.idPrefix+(null!=f?f:this._genStr(24)),f=this.idPrefix+
d,this._addItemIntoGlobalStrorage(b,f,g,"checkbox",l,m,m),this.itemPull[b].checked=h,null==this.idPull["polygon_"+f]&&this._renderSublevelPolygon(f,f),this._renderSublevelItem(b,e-1),this._redefineComplexState(f))}};
dhtmlXMenuObject.prototype._readLevel=function(b){var d="",e;for(e in this.itemPull)if(this.itemPull[e].parent==b){var f="",g="",h="",l=String(this.itemPull[e].id).replace(this.idPrefix,""),m="",k=""!=this.itemPull[e].title?' text="'+this.itemPull[e].title+'"':"",n="";"item"==this.itemPull[e].type&&(""!=this.itemPull[e].imgen&&(f=' img="'+this.itemPull[e].imgen+'"'),""!=this.itemPull[e].imgdis&&(g=' imgdis="'+this.itemPull[e].imgdis+'"'),""!=this.itemPull[e].hotkey&&(h="<hotkey>"+this.itemPull[e].hotkey+
"</hotkey>"));"separator"==this.itemPull[e].type?m=' type="separator"':"disabled"==this.itemPull[e].state&&(n=' enabled="false"');"checkbox"==this.itemPull[e].type&&(m=' type="checkbox"'+(this.itemPull[e].checked?' checked="true"':""));"radio"==this.itemPull[e].type&&(m=' type="radio" group="'+this.itemPull[e].group+'" '+(this.itemPull[e].checked?' checked="true"':""));d+="<item id='"+l+"'"+k+m+f+g+n+">";d+=h;this.itemPull[e].complex&&(d+=this._readLevel(e));d+="</item>"}return d};
dhtmlXMenuObject.prototype.serialize=function(){return"<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>"};
function dhtmlXToolbarObject(b,d){var e=this;for(this.cont="object"!=typeof b?document.getElementById(b):b;0<this.cont.childNodes.length;)this.cont.removeChild(this.cont.childNodes[0]);this.cont.dir="ltr";this.cont.innerHTML+="<div class='dhxtoolbar_hdrline_ll'></div><div class='dhxtoolbar_hdrline_rr'></div><div class='dhxtoolbar_hdrline_l'></div><div class='dhxtoolbar_hdrline_r'></div>";this.base=document.createElement("DIV");this.base.className="float_left";this.cont.appendChild(this.base);this.align=
"left";this.setAlign=function(b){"center"!=this.align&&"center"==b?(this.base.className="",this._onAlignAdd=this.attachEvent("onAddItem",this.alignCenter),this.alignCenter(),_isIE&&5==document.documentMode?this.win&&(this.win.attachEvent&&(this.win.attachEvent("onMaximize",this.alignCenter,this),this.win.attachEvent("onMinimize",this.alignCenter,this),this.win.attachEvent("onResizeFinish",this.alignCenter,this)),this.win._layout&&this.win._layout.attachEvent("onPanelResizeFinish",this.alignCenter,
this)):this.base.style.margin="0 auto"):"center"!=b&&dhtmlx._detachEvent(this,this._onAlignAdd,this.alignCenter);this.align="right"==b?"right":"center"==b?"center":"left";"center"!=this.align&&(this.base.className="right"==b?"float_right":"float_left");this._spacer?this._spacer.className="dhxtoolbar_spacer "+("right"==b?" float_left":" float_right"):this._spacer&&(this._spacer.className="dhxtoolbar_spacer")};this.alignCenter=function(){if(_isIE&&5==document.documentMode){var b=0,d;for(d in this.objPull)b+=
this.objPull[d].obj.clientWidth;b=this.cont.clientWidth-b;b=Math.round(b/2);b=_isIE?b-10:b;this.base.style.paddingLeft=b+"px"}else{var e=b=0;for(d in this.objPull)b+=this.objPull[d].obj.clientWidth,e++;this.base.style.width=b+e+15+"px"}};this._isIE6=!1;_isIE&&(this._isIE6=null==window.XMLHttpRequest?!0:!1);if(this._isIPad=0<=navigator.userAgent.search(/iPad/gi))this.cont.ontouchstart=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return!1};this.selectPolygonOffsetLeft=this.selectPolygonOffsetTop=
0;this.setSkin=function(b){this.skin=b;"dhx_skyblue"==this.skin&&(this.selectPolygonOffsetTop=2);"dhx_web"==this.skin&&(this.selectPolygonOffsetLeft=this.selectPolygonOffsetTop=1);this.cont.className="dhx_toolbar_base_"+this.skin+(this.rtl?" rtl":"");for(var d in this.objPull)b=this.objPull[d],"slider"==b.type&&(b.pen._detectLimits(),b.pen._definePos(),b.label.className="dhx_toolbar_slider_label_"+this.skin+(this.rtl?" rtl":"")),"buttonSelect"==b.type&&(b.polygon.className="dhx_toolbar_poly_"+this.skin+
(this.rtl?" rtl":""))};this.setSkin(null==d?"dhx_skyblue":d);this.objPull={};this.anyUsed="none";this.imagePath="";this.setIconPath=this.setIconsPath=function(b){this.imagePath=b};this._doOnLoad=function(){};this.loadXML=function(b,d){null!=d&&(this._doOnLoad=function(){d()});this.callEvent("onXLS",[]);this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this._xmlLoader.loadXML(b)};this.loadXMLString=function(b,d){null!=d&&(this._doOnLoad=function(){d()});this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,
window);this._xmlLoader.loadXMLString(b)};this._xmlParser=function(){for(var b,d=this.getXMLTopNode("toolbar"),h="id type hidden title text enabled img imgdis action openAll renderSelect maxOpen width value selected length textMin textMax toolTip valueMin valueMax valueNow".split(" "),l="id type enabled disabled action selected img text".split(" "),m=0;m<d.childNodes.length;m++){var k=d.childNodes[m];if("item"==k.tagName){for(var n={},s=0;s<h.length;s++)n[h[s]]=k.getAttribute(h[s]);this.add_xml_attrs(n,
k);n.items=[];n.userdata=[];n.itemdata=[];for(var u=0;u<k.childNodes.length;u++){var v=k.childNodes[u];if("item"==v.tagName&&"buttonSelect"==n.type){for(var w={},s=0;s<l.length;s++)w[l[s]]=v.getAttribute(l[s]);this.add_xml_attrs(w,v);try{w.itemText=v.getElementsByTagName("itemText")[0].firstChild.nodeValue}catch(x){}for(var A=v.getElementsByTagName("userdata"),s=0;s<A.length;s++){w.userdata||(w.userdata={});var D,E;try{D=A[s].getAttribute("name")}catch(y){D=""}try{E=A[s].firstChild.nodeValue}catch(C){E=
""}""!=D&&(w.userdata[D]=E)}n.items[n.items.length]=w}else"item"==v.tagName&&"combo"==n.type&&(n.itemdata[n.itemdata.length]=[v.getAttribute("name"),v.getAttribute("label")]);if("userdata"==v.tagName){w={};try{w.name=v.getAttribute("name")}catch(F){w.name=""}try{w.value=v.firstChild.nodeValue}catch(I){w.value=""}n.userdata[n.userdata.length]=w}}e._addItemToStorage(n)}else"command"==k.tagName&&(b=k)}b&&this._launchCommands(this.xmlLoader.doXPath("./beforeInit/call",b));e.callEvent("onXLE",[]);e._doOnLoad();
this.destructor()};this._launchCommands=function(b){for(var d=0;d<b.length;d++){for(var e=[],l=0;l<b[d].childNodes.length;l++)1==b[d].childNodes[l].nodeType&&(e[e.length]=b[d].childNodes[l].firstChild.data);this[b[d].getAttribute("command")].apply(this,e)}};this._addItemToStorage=function(b,d){var e=b.id||this._genStr(24),l=b.type||"";""!=l&&null!=this["_"+l+"Object"]&&(this.objPull[this.idPrefix+e]=new this["_"+l+"Object"](this,e,b),this.objPull[this.idPrefix+e].type=l,this.setPosition(e,d));if(b.userdata)for(l=
0;l<b.userdata.length;l++)this.setUserData(e,b.userdata[l].name,b.userdata[l].value);this.callEvent("onAddItem",[])};this._genStr=function(b){for(var d="",e=0;e<b;e++)d+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(61*Math.random()));return d};this.rootTypes="button buttonSelect buttonTwoState separator label slider text buttonInput".split(" ");this.idPrefix=this._genStr(12);dhtmlxEventable(this);this._getObj=function(b,d){for(var e=null,l=0;l<b.childNodes.length;l++)null!=
b.childNodes[l].tagName&&String(b.childNodes[l].tagName).toLowerCase()==String(d).toLowerCase()&&(e=b.childNodes[l]);return e};this._addImgObj=function(b){var d=document.createElement("IMG");0<b.childNodes.length?b.insertBefore(d,b.childNodes[0]):b.appendChild(d);return d};this._setItemImage=function(b,d,e){!0==e?b.imgEn=d:b.imgDis=d;!b.state&&!0==e||b.state&&!1==e||(e=this._getObj(b.obj,"img"),null==e&&(e=this._addImgObj(b.obj)),e.src=this.imagePath+d)};this._clearItemImage=function(b,d){!0==d?b.imgEn=
"":b.imgDis="";if(!(!b.state&&!0==d||b.state&&!1==d)){var e=this._getObj(b.obj,"img");null!=e&&e.parentNode.removeChild(e)}};this._setItemText=function(b,d){var e=this._getObj(b.obj,"div");null==d||0==d.length?null!=e&&e.parentNode.removeChild(e):(null==e&&(e=document.createElement("DIV"),b.obj.appendChild(e)),e.innerHTML=d)};this._getItemText=function(b){b=this._getObj(b.obj,"div");return null!=b?b.innerHTML:""};this._enableItem=function(b){if(!b.state){b.state=!0;"buttonTwoState"==this.objPull[b.id].type&&
!0==this.objPull[b.id].obj.pressed?(b.obj.className="dhx_toolbar_btn pres",b.obj.renderAs="dhx_toolbar_btn over"):(b.obj.className="dhx_toolbar_btn def",b.obj.renderAs=b.obj.className);b.arw&&(b.arw.className=String(b.obj.className).replace("btn","arw"));var d=this._getObj(b.obj,"img");""!=b.imgEn?(null==d&&(d=this._addImgObj(b.obj)),d.src=this.imagePath+b.imgEn):null!=d&&d.parentNode.removeChild(d)}};this._disableItem=function(b){if(b.state){b.state=!1;b.obj.className="dhx_toolbar_btn dis";b.obj.renderAs=
"dhx_toolbar_btn def";b.arw&&(b.arw.className=String(b.obj.className).replace("btn","arw"));var d=this._getObj(b.obj,"img");""!=b.imgDis?(null==d&&(d=this._addImgObj(b.obj)),d.src=this.imagePath+b.imgDis):null!=d&&d.parentNode.removeChild(d);if(null!=b.polygon&&"none"!=b.polygon.style.display&&(b.polygon.style.display="none",b.polygon._ie6cover))b.polygon._ie6cover.style.display="none";this.anyUsed="none"}};this.clearAll=function(){for(var b in this.objPull)this._removeItem(String(b).replace(this.idPrefix,
""))};this._isWebToolbar=!0;this._doOnClick=function(){e.cont&&e.forEachItem(function(b){if("buttonSelect"==e.objPull[e.idPrefix+b].type&&(b=e.objPull[e.idPrefix+b],"none"!=b.polygon.style.display&&(b.obj.renderAs="dhx_toolbar_btn def",b.obj.className=b.obj.renderAs,b.arw.className=String(b.obj.renderAs).replace("btn","arw"),e.anyUsed="none",b.polygon.style.display="none",b.polygon._ie6cover)))b.polygon._ie6cover.style.display="none"})};this._isIPad?document.addEventListener("touchstart",this._doOnClick,
!1):"undefined"!=typeof window.addEventListener?window.addEventListener("click",this._doOnClick,!1):document.body.attachEvent("onclick",this._doOnClick);return this}
dhtmlXToolbarObject.prototype.addSpacer=function(b){var d=this.idPrefix+b;if(null!=this._spacer){if(this._spacer.idd!=b)if(this._spacer==this.objPull[d].obj.parentNode){for(var e=!0;e;){var f=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(f==b||0==this._spacer.childNodes.length)null!=this.objPull[d].arw&&this.base.appendChild(this.objPull[d].arw),e=!1}this._spacer.idd=b}else if(this.base==this.objPull[d].obj.parentNode){for(var e=!0,g=null!=this.objPull[d].arw;e;)f=
this.base.childNodes.length-1,!0==g&&this.base.childNodes[f]==this.objPull[d].arw&&(e=!1),this.base.childNodes[f].idd==b&&(e=!1),e&&(0<this._spacer.childNodes.length?this._spacer.insertBefore(this.base.childNodes[f],this._spacer.childNodes[0]):this._spacer.appendChild(this.base.childNodes[f]));this._spacer.idd=b}}else{d=null;for(f=0;f<this.base.childNodes.length;f++)this.base.childNodes[f]==this.objPull[this.idPrefix+b].obj&&(d=f,null!=this.objPull[this.idPrefix+b].arw&&(d=f+1));if(null!=d){this._spacer=
document.createElement("DIV");this._spacer.className="dhxtoolbar_spacer "+("right"==this.align?" float_left":" float_right");this._spacer.dir="ltr";for(this._spacer.idd=b;this.base.childNodes.length>d+1;)this._spacer.appendChild(this.base.childNodes[d+1]);this.cont.appendChild(this._spacer)}}};
dhtmlXToolbarObject.prototype.removeSpacer=function(){if(this._spacer){for(;0<this._spacer.childNodes.length;)this.base.appendChild(this._spacer.childNodes[0]);this._spacer.parentNode.removeChild(this._spacer);this._spacer=null}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(_isIE&&null!=this._spacer){this._spacer.style.borderLeft="1px solid #a4bed4";var b=this._spacer;window.setTimeout(function(){b.style.borderLeft="0px solid #a4bed4";b=null},1)}};
dhtmlXToolbarObject.prototype.getType=function(b){var d=this.getParentId(b);if(null!=d){var e=null;b=this.objPull[this.idPrefix+d]._listOptions[b];null!=b&&(e=null!=b.sep?"buttonSelectSeparator":"buttonSelectButton");return e}return null==this.objPull[this.idPrefix+b]?null:this.objPull[this.idPrefix+b].type};dhtmlXToolbarObject.prototype.getTypeExt=function(b){b=this.getType(b);return"buttonSelectButton"==b||"buttonSelectSeparator"==b?"buttonSelectButton"==b?"button":"separator":null};
dhtmlXToolbarObject.prototype.inArray=function(b,d){for(var e=0;e<b.length;e++)if(b[e]==d)return!0;return!1};dhtmlXToolbarObject.prototype.getParentId=function(b){var d=null,e;for(e in this.objPull)if(this.objPull[e]._listOptions)for(var f in this.objPull[e]._listOptions)f==b&&(d=String(e).replace(this.idPrefix,""));return d};dhtmlXToolbarObject.prototype._addItem=function(b,d){this._addItemToStorage(b,d)};
dhtmlXToolbarObject.prototype.addCombo=function(b,d,e,f,g){this._addItem({id:b,type:"combo",xml:e,src:f,optionType:g},d)};dhtmlXToolbarObject.prototype.addTree=function(b,d,e,f,g){this._addItem({id:b,type:"tree",xml:e,imagePath:f,tid:5==arguments.length?g:0},d)};dhtmlXToolbarObject.prototype.addButton=function(b,d,e,f,g){this._addItem({id:b,type:"button",text:e,img:f,imgdis:g},d)};dhtmlXToolbarObject.prototype.addText=function(b,d,e){this._addItem({id:b,type:"text",text:e},d)};
dhtmlXToolbarObject.prototype.addButtonSelect=function(b,d,e,f,g,h,l,m,k){for(var n=[],s=0;s<f.length;s++){var u={};f[s].id&&f[s].type?(u.id=f[s].id,u.type="obj"==f[s].type?"button":"separator",u.text=f[s].text,u.img=f[s].img):(u.id=f[s][0],u.type="obj"==f[s][1]?"button":"separator",u.text=f[s][2]||null,u.img=f[s][3]||null);n[n.length]=u}this._addItem({id:b,type:"buttonSelect",text:e,img:g,imgdis:h,renderSelect:l,openAll:m,items:n,maxOpen:k},d)};
dhtmlXToolbarObject.prototype.addButtonTwoState=function(b,d,e,f,g){this._addItem({id:b,type:"buttonTwoState",img:f,imgdis:g,text:e},d)};dhtmlXToolbarObject.prototype.addSeparator=function(b,d){this._addItem({id:b,type:"separator"},d)};dhtmlXToolbarObject.prototype.addSlider=function(b,d,e,f,g,h,l,m,k){this._addItem({id:b,type:"slider",length:e,valueMin:f,valueMax:g,valueNow:h,textMin:l,textMax:m,toolTip:k},d)};
dhtmlXToolbarObject.prototype.addInput=function(b,d,e,f,g){this._addItem({id:b,type:"buttonInput",value:e,width:f,prompt:g},d)};dhtmlXToolbarObject.prototype.forEachItem=function(b){for(var d in this.objPull)this.inArray(this.rootTypes,this.objPull[d].type)&&b(this.objPull[d].id.replace(this.idPrefix,""))};
(function(){for(var b="getInput getTree getCombo showItem hideItem isVisible ag disableItem isEnabled setItemText getItemText setItemToolTip getItemToolTip setItemPopup getItemPopup setItemImage setItemImageDis clearItemImage clearItemImageDis setItemState getItemState setItemToolTipTemplate getItemToolTipTemplate setValue getValue setMinValue getMinValue setMaxValue getMaxValue setWidth getWidth setMaxOpen".split(" "),d=["","","","",!1,"","",!1,"","","","","","","","","",!1,"","","",null,"",[null,
null],"",[null,null],"",null],e=function(b,d){return function(e,f,g){e=this.idPrefix+e;return this.objPull[e]&&null!=this.objPull[e][b]?this.objPull[e][b].call(this.objPull[e],f,g):d}},f=0;f<b.length;f++){var g=b[f];dhtmlXToolbarObject.prototype[g]=e(g,d[f])}})();dhtmlXToolbarObject.prototype.getPosition=function(b){return this._getPosition(b)};
dhtmlXToolbarObject.prototype._getPosition=function(b){if(null==this.objPull[this.idPrefix+b])return null;for(var d=null,e=0,f=0;f<this.base.childNodes.length;f++)null!=this.base.childNodes[f].idd&&(this.base.childNodes[f].idd==b&&(d=e),e++);if(!d&&null!=this._spacer)for(f=0;f<this._spacer.childNodes.length;f++)null!=this._spacer.childNodes[f].idd&&(this._spacer.childNodes[f].idd==b&&(d=e),e++);return d};dhtmlXToolbarObject.prototype.setPosition=function(b,d){this._setPosition(b,d)};
dhtmlXToolbarObject.prototype._setPosition=function(b,d){if(null!=this.objPull[this.idPrefix+b]){isNaN(d)&&(d=this.base.childNodes.length);0>d&&(d=0);var e=null;this._spacer&&(e=this._spacer.idd,this.removeSpacer());var f=this.objPull[this.idPrefix+b];this.base.removeChild(f.obj);f.arw&&this.base.removeChild(f.arw);var g=this._getIdByPosition(d,!0);null==g[0]?(this.base.appendChild(f.obj),f.arw&&this.base.appendChild(f.arw)):(this.base.insertBefore(f.obj,this.base.childNodes[g[1]]),f.arw&&this.base.insertBefore(f.arw,
this.base.childNodes[g[1]+1]));null!=e&&this.addSpacer(e)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(b,d){for(var e=null,f=0,g=0,h=0;h<this.base.childNodes.length;h++)null!=this.base.childNodes[h].idd&&null==e&&f++==b&&(e=this.base.childNodes[h].idd),null==e&&g++;return!0==d?[e,null==e?null:g]:e};dhtmlXToolbarObject.prototype.blurItem=function(b){this._blurItem(b)};
dhtmlXToolbarObject.prototype._blurItem=function(b){this.getType(b);b=this.idPrefix+b;b=this.objPull[b];b.obj&&b.obj.blur&&(b.obj.blur(),b.obj.childNodes[0]&&b.obj.childNodes[0].blur&&b.obj.childNodes[0].blur())};dhtmlXToolbarObject.prototype.removeItem=function(b){this._removeItem(b)};
dhtmlXToolbarObject.prototype._removeItem=function(b){var d=this.getType(b);b=this.idPrefix+b;var e=this.objPull[b];"button"==d&&(e.obj._doOnMouseOver=null,e.obj._doOnMouseOut=null,e.obj._doOnMouseUp=null,e.obj._doOnMouseUpOnceAnywhere=null,e.obj.onclick=null,e.obj.onmouseover=null,e.obj.onmouseout=null,e.obj.onmouseup=null,e.obj.onmousedown=null,e.obj.onselectstart=null,e.obj.renderAs=null,e.obj.idd=null,e.obj.parentNode.removeChild(e.obj),e.obj=null,e.id=null,e.state=null,e.img=null,e.imgEn=null,
e.imgDis=null,e.type=null,e.ag=null,e.disableItem=null,e.isEnabled=null,e.showItem=null,e.hideItem=null,e.isVisible=null,e.setItemText=null,e.getItemText=null,e.setItemImage=null,e.clearItemImage=null,e.setItemImageDis=null,e.clearItemImageDis=null,e.setItemToolTip=null,e.getItemToolTip=null);"buttonTwoState"==d&&(e.obj._doOnMouseOver=null,e.obj._doOnMouseOut=null,e.obj.onmouseover=null,e.obj.onmouseout=null,e.obj.onmousedown=null,e.obj.onselectstart=null,e.obj.renderAs=null,e.obj.idd=null,e.obj.parentNode.removeChild(e.obj),
e.obj=null,e.id=null,e.state=null,e.img=null,e.imgEn=null,e.imgDis=null,e.type=null,e.ag=null,e.disableItem=null,e.isEnabled=null,e.showItem=null,e.hideItem=null,e.isVisible=null,e.setItemText=null,e.getItemText=null,e.setItemImage=null,e.clearItemImage=null,e.setItemImageDis=null,e.clearItemImageDis=null,e.setItemToolTip=null,e.getItemToolTip=null,e.setItemState=null,e.getItemState=null);if("buttonSelect"==d){for(var f in e._listOptions)this.removeListOption(b,f);e._listOptions=null;e.polygon._ie6cover&&
(document.body.removeChild(e.polygon._ie6cover),e.polygon._ie6cover=null);e.p_tbl.removeChild(e.p_tbody);e.polygon.removeChild(e.p_tbl);e.polygon.onselectstart=null;document.body.removeChild(e.polygon);e.p_tbody=null;e.p_tbl=null;e.polygon=null;e.obj.onclick=null;e.obj.onmouseover=null;e.obj.onmouseout=null;e.obj.onmouseup=null;e.obj.onmousedown=null;e.obj.onselectstart=null;e.obj.idd=null;e.obj.iddPrefix=null;e.obj.parentNode.removeChild(e.obj);e.obj=null;e.arw.onclick=null;e.arw.onmouseover=null;
e.arw.onmouseout=null;e.arw.onmouseup=null;e.arw.onmousedown=null;e.arw.onselectstart=null;e.arw.parentNode.removeChild(e.arw);e.arw=null;e.renderSelect=null;e.state=null;e.type=null;e.id=null;e.img=null;e.imgEn=null;e.imgDis=null;e.openAll=null;e._isListButton=null;e._separatorButtonSelectObject=null;e._buttonButtonSelectObject=null;e.setWidth=null;e.ag=null;e.disableItem=null;e.isEnabled=null;e.showItem=null;e.hideItem=null;e.isVisible=null;e.setItemText=null;e.getItemText=null;e.setItemImage=null;
e.clearItemImage=null;e.setItemImageDis=null;e.clearItemImageDis=null;e.setItemToolTip=null;e.getItemToolTip=null;e.addListOption=null;e.removeListOption=null;e.showListOption=null;e.hideListOption=null;e.isListOptionVisible=null;e.bh=null;e.disableListOption=null;e.isListOptionEnabled=null;e.setListOptionPosition=null;e.getListOptionPosition=null;e.setListOptionImage=null;e.getListOptionImage=null;e.clearListOptionImage=null;e.setListOptionText=null;e.getListOptionText=null;e.setListOptionToolTip=
null;e.getListOptionToolTip=null;e.forEachListOption=null;e.getAllListOptions=null;e.setListOptionSelected=null;e.getListOptionSelected=null}"buttonInput"==d&&(e.obj.childNodes[0].calendar&&e.obj.childNodes[0].calendar.unload(),e.obj.childNodes[0].onkeydown=null,e.obj.removeChild(e.obj.childNodes[0]),e.obj.w=null,e.obj.idd=null,e.obj.parentNode.removeChild(e.obj),e.obj=null,e.id=null,e.type=null,e.ag=null,e.disableItem=null,e.isEnabled=null,e.showItem=null,e.hideItem=null,e.isVisible=null,e.setItemToolTip=
null,e.getItemToolTip=null,e.setWidth=null,e.getWidth=null,e.setValue=null,e.getValue=null,e.setItemText=null,e.getItemText=null);if("slider"==d){this._isIPad?(document.removeEventListener("touchmove",pen._doOnMouseMoveStart,!1),document.removeEventListener("touchend",pen._doOnMouseMoveEnd,!1)):_isIE?(dhtmlx._detachEvent(document.body,"onmousemove",e.pen._doOnMouseMoveStart),dhtmlx._detachEvent(document.body,"onmouseup",e.pen._doOnMouseMoveEnd)):(window.removeEventListener("mousemove",e.pen._doOnMouseMoveStart,
!1),window.removeEventListener("mouseup",e.pen._doOnMouseMoveEnd,!1));e.pen.allowMove=null;e.pen.initXY=null;e.pen.maxX=null;e.pen.minX=null;e.pen.nowX=null;e.pen.newNowX=null;e.pen.valueMax=null;e.pen.valueMin=null;e.pen.valueNow=null;e.pen._definePos=null;e.pen._detectLimits=null;e.pen._doOnMouseMoveStart=null;e.pen._doOnMouseMoveEnd=null;e.pen.onmousedown=null;e.obj.removeChild(e.pen);e.pen=null;e.label.tip=null;document.body.removeChild(e.label);e.label=null;e.obj.onselectstart=null;for(e.obj.idd=
null;0<e.obj.childNodes.length;)e.obj.removeChild(e.obj.childNodes[0]);e.obj.parentNode.removeChild(e.obj);e.obj=null;e.id=null;e.type=null;e.state=null;e.ag=null;e.disableItem=null;e.isEnabled=null;e.setItemToolTipTemplate=null;e.getItemToolTipTemplate=null;e.setMaxValue=null;e.setMinValue=null;e.getMaxValue=null;e.getMinValue=null;e.setValue=null;e.getValue=null;e.showItem=null;e.hideItem=null;e.isVisible=null}"separator"==d&&(e.obj.onselectstart=null,e.obj.idd=null,e.obj.parentNode.removeChild(e.obj),
e.obj=null,e.id=null,e.type=null,e.showItem=null,e.hideItem=null,e.isVisible=null);"text"==d&&((f=e.obj.childNodes[0])&&f.form&&f.form.unload(),e.obj.onselectstart=null,e.obj.idd=null,e.obj.parentNode.removeChild(e.obj),e.obj=null,e.id=null,e.type=null,e.showItem=null,e.hideItem=null,e.isVisible=null,e.setWidth=null,e.setItemText=null,e.getItemText=null);"combo"==d&&(f=e.obj.childNodes[0],f.onkeydown=null);if("tree"==d){try{e.obj.win.close(),e.obj.tree.destructor()}catch(g){}f=e.obj.childNodes[0];
f.onkeydown=null;f.onclick=null;f.onblur=null}this.objPull[this.idPrefix+b]=null;delete this.objPull[this.idPrefix+b]};
(function(){for(var b="addListOption removeListOption showListOption hideListOption isListOptionVisible bh disableListOption isListOptionEnabled setListOptionPosition getListOptionPosition setListOptionText getListOptionText setListOptionToolTip getListOptionToolTip setListOptionImage getListOptionImage clearListOptionImage forEachListOption getAllListOptions setListOptionSelected getListOptionSelected".split(" "),d=function(b){return function(d,e,f,k,n,s){d=this.idPrefix+d;if(null!=this.objPull[d])return"buttonSelect"!=
this.objPull[d].type?void 0:this.objPull[d][b].call(this.objPull[d],e,f,k,n,s)}},e=0;e<b.length;e++){var f=b[e];dhtmlXToolbarObject.prototype[f]=d(f)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(b,d){return b+d};
dhtmlXToolbarObject.prototype._separatorObject=function(b,d,e){this.id=b.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=null!=e.hidden?"none":"";this.obj.idd=String(d);this.obj.title=e.title||"";this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};b._isIPad&&(this.obj.ontouchstart=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return!1});b.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=
""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};return this};
dhtmlXToolbarObject.prototype._textObject=function(b,d,e){this.id=b.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=null!=e.hidden?"none":"";this.obj.idd=String(d);this.obj.title=e.title||"";this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};b._isIPad&&(this.obj.ontouchstart=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return!1});this.obj.innerHTML=e.text||"";b.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=
""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(b){this.obj.innerHTML=b};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(b){this.obj.style.width=b+"px"};this.setItemToolTip=function(b){this.obj.title=b};this.getItemToolTip=function(){return this.obj.title};return this};
dhtmlXToolbarObject.prototype._buttonObject=function(b,d,e){this.id=b.idPrefix+d;this.state=null!=e.enabled?!1:!0;this.imgEn=e.img||"";this.imgDis=e.imgdis||"";this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"";this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn "+(this.state?"def":"dis");this.obj.style.display=null!=e.hidden?"none":"";this.obj.allowClick=!1;this.obj.extAction=e.action||null;this.obj.renderAs=this.obj.className;this.obj.idd=String(d);
this.obj.title=e.title||"";this.obj.pressed=!1;this.obj.innerHTML=b._rtlParseBtn(""!=this.img?"<img src='"+b.imagePath+this.img+"'>":"",null!=e.text?"<div>"+e.text+"</div>":"");var f=this;this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){this.allowClick=!0;!1!=f.state&&"none"==b.anyUsed&&(this.renderAs=this.className="dhx_toolbar_btn over");this.popup&&
"onmouseover"==this.ac&&this.popup.show(d)};this.obj._doOnMouseOut=function(){this.allowClick=!1;!1!=f.state&&"none"==b.anyUsed&&(this.className="dhx_toolbar_btn def",this.renderAs=this.renderAs);this.popup&&"onmouseover"==this.ac&&this.popup.hide()};this.obj.onclick=function(d){if(!1!=f.state&&!1!=this.allowClick){d=this.idd.replace(b.idPrefix,"");if(this.extAction)try{window[this.extAction](d)}catch(e){}b&&b.callEvent&&b.callEvent("onClick",[d])}};this.obj[b._isIPad?"ontouchstart":"onmousedown"]=
function(d){if(!1==f.state)return d=d||event,d.returnValue=!1,d.cancelBubble=!0,!1;if("none"==b.anyUsed)return b.anyUsed=this.idd,this.className="dhx_toolbar_btn pres",this.pressed=!0,this.onmouseover=function(){this._doOnMouseOver()},this.onmouseout=function(){b.anyUsed="none";this._doOnMouseOut()},!1};this.obj[b._isIPad?"ontouchend":"onmouseup"]=function(){if(!1!=f.state&&!("none"!=b.anyUsed&&b.anyUsed!=this.idd)){var d=b.anyUsed;this._doOnMouseUp();b._isIPad&&"none"!=d&&b.callEvent("onClick",[this.idd.replace(b.idPrefix,
"")])}};b._isIPad&&(this.obj.ontouchmove=function(){this._doOnMouseUp()});this.obj._doOnMouseUp=function(){b.anyUsed="none";this.className=this.renderAs;this.pressed=!1};this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp();this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){this._doOnMouseOut()}};b.base.appendChild(this.obj);this.ag=function(){b._enableItem(this)};this.disableItem=function(){b._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=
function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(d){b._setItemText(this,d)};this.getItemText=function(){return b._getItemText(this)};this.setItemImage=function(d){b._setItemImage(this,d,!0)};this.clearItemImage=function(){b._clearItemImage(this,!0)};this.setItemImageDis=function(d){b._setItemImage(this,d,!1)};this.clearItemImageDis=function(){b._clearItemImage(this,!1)};
this.setItemToolTip=function(b){this.obj.title=b;this.obj.popup&&"onmouseover"==this.obj.ac&&(this.obj.popup.attachHTML(b),this.obj.poptip=b,this.obj.title=null)};this.getItemToolTip=function(){return this.obj.popup&&"onmouseover"==this.obj.ac?this.obj.poptip:this.obj.title};this.setItemPopup=function(e,f){e.conf.toolbar=b;e.conf.id=e.conf.id?e.conf.id.concat([d]):[d];this.obj.popup=e;this.obj.ac=f?f:"onmouseover";"onmouseover"!=this.obj.ac&&!e.conf.toolbarEvent&&(e.conf.toolbarEvent=b.attachEvent("onClick",
function(b){for(var d=0;d<e.conf.id.length;d++)b==e.conf.id[d]&&b!=e._lastId&&(e.show(b),e._clearClick=!0)}))};this.getItemPopup=function(b){return this.obj.popup};return this};
dhtmlXToolbarObject.prototype._buttonSelectObject=function(b,d,e){this.id=b.idPrefix+d;this.state=null!=e.enabled?"true"==e.enabled?!0:!1:!0;this.imgEn=e.img||"";this.imgDis=e.imgdis||"";this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"";this.openAll=null!=e.openAll;this.maxOpen=!isNaN(e.maxOpen?e.maxOpen:"")?e.maxOpen:null;this._maxOpenTest=function(){if(!isNaN(this.maxOpen)&&!b._sbw){var d=document.createElement("DIV");d.className="dhxtoolbar_maxopen_test";document.body.appendChild(d);
var e=document.createElement("DIV");e.className="dhxtoolbar_maxopen_test2";d.appendChild(e);b._sbw=d.offsetWidth-e.offsetWidth;d.removeChild(e);document.body.removeChild(d)}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=!1;this.obj.extAction=e.action||null;this.obj.className="dhx_toolbar_btn def";this.obj.style.display=null!=e.hidden?"none":"";this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};this.obj.idd=String(d);
this.obj.title=e.title||"";this.callEvent=this.obj.pressed=!1;this.renderSelect=null!=e.renderSelect?"false"==e.renderSelect||"disabled"==e.renderSelect?!1:!0:!0;this.obj.innerHTML=b._rtlParseBtn(""!=this.img?"<img src='"+b.imagePath+this.img+"'>":"",null!=e.text?"<div>"+e.text+"</div>":"");b.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw def";this.arw.style.display=this.obj.style.display;this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>";
this.arw.title=this.obj.title;this.arw.onselectstart=function(b){b=b||event;b.returnValue=!1};b.base.appendChild(this.arw);var f=this;this.obj.onmouseover=function(d){"none"==b.anyUsed&&f.state&&(f.obj.renderAs="dhx_toolbar_btn over",f.obj.className=f.obj.renderAs,f.arw.className=String(f.obj.renderAs).replace("btn","arw"))};this.obj.onmouseout=function(){f.obj.allowClick=!1;"none"==b.anyUsed&&f.state&&(f.obj.renderAs="dhx_toolbar_btn def",f.obj.className=f.obj.renderAs,f.arw.className=String(f.obj.renderAs).replace("btn",
"arw"),f.callEvent=!1)};this.arw.onmouseover=this.obj.onmouseover;this.arw.onmouseout=this.obj.onmouseout;!0!=this.openAll&&(this.obj.onclick=function(d){if(f.obj.allowClick&&f.state&&"none"==b.anyUsed){d=f.obj.idd.replace(b.idPrefix,"");if(f.obj.extAction)try{window[f.obj.extAction](d)}catch(e){}b.callEvent("onClick",[d])}},this.obj[b._isIPad?"ontouchstart":"onmousedown"]=function(d){"none"==b.anyUsed&&f.state&&(f.obj.allowClick=!0,f.obj.className="dhx_toolbar_btn pres",f.arw.className="dhx_toolbar_arw pres",
f.callEvent=!0)},this.obj[b._isIPad?"ontouchend":"onmouseup"]=function(d){d=d||event;d.cancelBubble=!0;if("none"==b.anyUsed&&f.state&&(f.obj.className=f.obj.renderAs,f.arw.className=String(f.obj.renderAs).replace("btn","arw"),b._isIPad&&f.callEvent))d=f.obj.idd.replace(b.idPrefix,""),b.callEvent("onClick",[d])});b._isIPad&&(this.obj.ontouchmove=this.obj.onmouseout);this.arw[b._isIPad?"ontouchstart":"onmousedown"]=function(d){if(f.state){if(b.anyUsed==f.obj.idd){if(f.obj.className=f.obj.renderAs,f.arw.className=
String(f.obj.renderAs).replace("btn","arw"),b.anyUsed="none",f.polygon.style.display="none",f.polygon._ie6cover)f.polygon._ie6cover.style.display="none"}else{if("none"!=b.anyUsed&&"buttonSelect"==b.objPull[b.idPrefix+b.anyUsed].type&&(d=b.objPull[b.idPrefix+b.anyUsed],"none"!=d.polygon.style.display&&(d.obj.renderAs="dhx_toolbar_btn def",d.obj.className=d.obj.renderAs,d.arw.className=String(f.obj.renderAs).replace("btn","arw"),d.polygon.style.display="none",d.polygon._ie6cover)))d.polygon._ie6cover.style.display=
"none";f.obj.className="dhx_toolbar_btn over";f.arw.className="dhx_toolbar_arw pres";b.anyUsed=f.obj.idd;f.polygon.style.top="0px";f.polygon.style.visibility="hidden";f.polygon.style.display="";f._fixMaxOpenHeight(f.maxOpen||null);b._autoDetectVisibleArea();d=getAbsoluteTop(f.obj)+f.obj.offsetHeight+b.selectPolygonOffsetTop;var e=f.polygon.offsetHeight;f.polygon.style.top=(d+e>b.tY2?getAbsoluteTop(f.obj)-e:d)+"px";f.polygon.style.left=b.rtl?getAbsoluteLeft(f.obj)+f.obj.offsetWidth-f.polygon.offsetWidth+
b.selectPolygonOffsetLeft+"px":getAbsoluteLeft(f.obj)+b.selectPolygonOffsetLeft+"px";f.polygon.style.visibility="visible";f.polygon._ie6cover&&(f.polygon._ie6cover.style.left=f.polygon.style.left,f.polygon._ie6cover.style.top=f.polygon.style.top,f.polygon._ie6cover.style.width=f.polygon.offsetWidth+"px",f.polygon._ie6cover.style.height=f.polygon.offsetHeight+"px",f.polygon._ie6cover.style.display="")}return!1}};this.arw.onclick=function(b){b=b||event;b.cancelBubble=!0};this.arw[b._isIPad?"ontouchend":
"onmouseup"]=function(b){b=b||event;b.cancelBubble=!0};if(!0===this.openAll&&(this.obj.onclick=this.arw.onclick,this.obj.onmousedown=this.arw.onmousedown,this.obj.onmouseup=this.arw.onmouseup,b._isIPad))this.obj.ontouchstart=this.arw.ontouchstart,this.obj.ontouchend=this.arw.ontouchend;this.obj.iddPrefix=b.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(d){var e="auto",g=!1;if(null!==d){var k=0,n;for(n in this._listOptions)k++;k>d?(this._ph=22*d,e=this._ph+"px"):g=!0}this.polygon.style.width=
"auto";this.polygon.style.height="auto";_isIE&&(this.polygon.style.width=this.p_tbl.rows[0].cells[0].offsetWidth+this.p_tbl.rows[0].cells[1].offsetWidth+"px");!g&&(null!=f.maxOpen&&"0px"!=e)&&(this.polygon.style.width=this.p_tbl.offsetWidth+b._sbw+"px",this.polygon.style.height=e)};this._separatorButtonSelectObject=function(b,d,e){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(b){b=b||event;return b.returnValue=!1};this.obj.td=
document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(b){b=b||event;return b.returnValue=!1};isNaN(e)?e=f.p_tbody.childNodes.length+1:1>e&&(e=1);e>f.p_tbody.childNodes.length?f.p_tbody.appendChild(this.obj.tr):f.p_tbody.insertBefore(this.obj.tr,f.p_tbody.childNodes[e-1]);this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(b){b=b||event;
return b.returnValue=!1};this.obj.td.appendChild(this.obj.sep);f._listOptions[b]=this.obj;return this};this._buttonButtonSelectObject=function(d,e,g){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en="false"==e.enabled?!1:"true"==e.disabled?!1:!0;this.obj.tr.extAction=e.action||null;this.obj.tr._selected=null!=e.selected;this.obj.tr.className="tr_btn"+(this.obj.tr.en?this.obj.tr._selected&&f.renderSelect?" tr_btn_selected":"":" tr_btn_disabled");this.obj.tr.onselectstart=function(b){b=
b||event;return b.returnValue=!1};this.obj.tr.idd=String(d);e.userdata&&(this.obj.userData=e.userdata);isNaN(g)?g=f.p_tbody.childNodes.length+1:1>g&&(g=1);g>f.p_tbody.childNodes.length?f.p_tbody.appendChild(this.obj.tr):f.p_tbody.insertBefore(this.obj.tr,f.p_tbody.childNodes[g-1]);this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(b){b=b||event;return b.returnValue=!1};this.obj.td_b=document.createElement("TD");this.obj.td_b.className=
"td_btn_txt";this.obj.td_b.onselectstart=function(b){b=b||event;return b.returnValue=!1};b.rtl?(this.obj.tr.appendChild(this.obj.td_b),this.obj.tr.appendChild(this.obj.td_a)):(this.obj.tr.appendChild(this.obj.td_a),this.obj.tr.appendChild(this.obj.td_b));null!=e.img&&(this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+b.imagePath+e.img+"' border='0'>");this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+(null!=e.text?e.text:e.itemText||"")+"</div>";this.obj.tr[b._isIPad?"ontouchstart":"onmouseover"]=
function(){if(this.en&&(!this._selected||!f.renderSelect))this.className="tr_btn tr_btn_over"};this.obj.tr.onmouseout=function(){this.en&&(this._selected&&f.renderSelect?-1==String(this.className).search("tr_btn_selected")&&(this.className="tr_btn tr_btn_selected"):this.className="tr_btn")};this.obj.tr[b._isIPad?"ontouchend":"onclick"]=function(d){d=d||event;d.cancelBubble=!0;if(this.en){f.setListOptionSelected(this.idd.replace(b.idPrefix,""));f.obj.renderAs="dhx_toolbar_btn def";f.obj.className=
f.obj.renderAs;f.arw.className=String(f.obj.renderAs).replace("btn","arw");f.polygon.style.display="none";f.polygon._ie6cover&&(f.polygon._ie6cover.style.display="none");b.anyUsed="none";d=this.idd.replace(b.idPrefix,"");if(this.extAction)try{window[this.extAction](d)}catch(e){}b.callEvent("onClick",[d])}};f._listOptions[d]=this.obj;return this};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.style.zIndex=101;this.polygon.className=
"dhx_toolbar_poly_"+b.skin+(b.rtl?" rtl":"");this.polygon.onselectstart=function(b){b=b||event;b.returnValue=!1};this.polygon.style.overflowY="auto";b._isIPad&&(this.polygon.ontouchstart=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return!1});this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);
if(e.items)for(d=0;d<e.items.length;d++){var g="_"+(e.items[d].type||"")+"ButtonSelectObject";"function"==typeof this[g]&&new this[g](e.items[d].id||b._genStr(24),e.items[d])}document.body.appendChild(this.polygon);b._isIE6&&(this.polygon._ie6cover=document.createElement("IFRAME"),this.polygon._ie6cover.frameBorder=0,this.polygon._ie6cover.style.position="absolute",this.polygon._ie6cover.style.border="none",this.polygon._ie6cover.style.backgroundColor="#000000",this.polygon._ie6cover.style.filter=
"alpha(opacity=100)",this.polygon._ie6cover.style.display="none",this.polygon._ie6cover.setAttribute("src","javascript:false;"),document.body.appendChild(this.polygon._ie6cover));this.setWidth=function(b){this.obj.style.width=0>b-this.arw.offsetWidth?b:b-this.arw.offsetWidth+"px";0<this.obj.offsetWidth+this.arw.offsetWidth-2&&(this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px");this.p_tbl.style.width=this.polygon.style.width};this.ag=function(){b._enableItem(this)};this.disableItem=
function(){b._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display="";this.arw.style.display=""};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"};this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(d){b._setItemText(this,d)};this.getItemText=function(){return b._getItemText(this)};this.setItemImage=function(d){b._setItemImage(this,d,!0)};this.clearItemImage=function(){b._clearItemImage(this,
!0)};this.setItemImageDis=function(d){b._setItemImage(this,d,!1)};this.clearItemImageDis=function(){b._clearItemImage(this,!1)};this.setItemToolTip=function(b){this.obj.title=b;this.arw.title=b};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(b,d,e,f,g){("button"==e||"separator"==e)&&new this["_"+e+"ButtonSelectObject"](b,{id:b,type:e,text:f,img:g},d)};this.removeListOption=function(b){if(this._isListButton(b,!0)){var d=this._listOptions[b];if(null!=d.td_a&&null!=
d.td_b){d.td_a.onselectstart=null;for(d.td_b.onselectstart=null;0<d.td_a.childNodes.length;)d.td_a.removeChild(d.td_a.childNodes[0]);for(;0<d.td_b.childNodes.length;)d.td_b.removeChild(d.td_b.childNodes[0]);d.tr.onselectstart=null;d.tr.onmouseover=null;d.tr.onmouseout=null;for(d.tr.onclick=null;0<d.tr.childNodes.length;)d.tr.removeChild(d.tr.childNodes[0]);d.tr.parentNode.removeChild(d.tr);d.td_a=null;d.td_b=null}else{d.sep.onselectstart=null;d.td.onselectstart=null;for(d.tr.onselectstart=null;0<
d.td.childNodes.length;)d.td.removeChild(d.td.childNodes[0]);for(;0<d.tr.childNodes.length;)d.tr.removeChild(d.tr.childNodes[0]);d.tr.parentNode.removeChild(d.tr);d.sep=null;d.td=null}d.tr=null;this._listOptions[b]=null;try{delete this._listOptions[b]}catch(e){}}};this.showListOption=function(b){this._isListButton(b,!0)&&(this._listOptions[b].tr.style.display="")};this.hideListOption=function(b){this._isListButton(b,!0)&&(this._listOptions[b].tr.style.display="none")};this.isListOptionVisible=function(b){return!this._isListButton(b,
!0)?void 0:"none"!=this._listOptions[b].tr.style.display};this.bh=function(d){this._isListButton(d)&&(this._listOptions[d].tr.en=!0,this._listOptions[d].tr.className="tr_btn"+(this._listOptions[d].tr._selected&&b.renderSelect?" tr_btn_selected":""))};this.disableListOption=function(b){this._isListButton(b)&&(this._listOptions[b].tr.en=!1,this._listOptions[b].tr.className="tr_btn tr_btn_disabled")};this.isListOptionEnabled=function(b){return!this._isListButton(b)?void 0:this._listOptions[b].tr.en};
this.setListOptionPosition=function(b,d){if(this._listOptions[b]&&!(this.getListOptionPosition(b)==d||isNaN(d))){1>d&&(d=1);var e=this._listOptions[b].tr;this.p_tbody.removeChild(e);d>this.p_tbody.childNodes.length?this.p_tbody.appendChild(e):this.p_tbody.insertBefore(e,this.p_tbody.childNodes[d-1])}};this.getListOptionPosition=function(b){var d=-1;if(!this._listOptions[b])return d;for(var e=0;e<this.p_tbody.childNodes.length;e++)this.p_tbody.childNodes[e]==this._listOptions[b].tr&&(d=e+1);return d};
this.setListOptionImage=function(d,e){if(this._isListButton(d)){var f=this._listOptions[d].tr.childNodes[b.rtl?1:0];if(0<f.childNodes.length)f.childNodes[0].src=b.imagePath+e;else{var g=document.createElement("IMG");g.className="btn_sel_img";g.src=b.imagePath+e;f.appendChild(g)}}};this.getListOptionImage=function(d){if(this._isListButton(d)){d=this._listOptions[d].tr.childNodes[b.rtl?1:0];var e=null;0<d.childNodes.length&&(e=d.childNodes[0].src);return e}};this.clearListOptionImage=function(d){if(this._isListButton(d))for(d=
this._listOptions[d].tr.childNodes[b.rtl?1:0];0<d.childNodes.length;)d.removeChild(d.childNodes[0])};this.setListOptionText=function(d,e){this._isListButton(d)&&(this._listOptions[d].tr.childNodes[b.rtl?0:1].childNodes[0].innerHTML=e)};this.getListOptionText=function(d){return!this._isListButton(d)?void 0:this._listOptions[d].tr.childNodes[b.rtl?0:1].childNodes[0].innerHTML};this.setListOptionToolTip=function(b,d){this._isListButton(b)&&(this._listOptions[b].tr.title=d)};this.getListOptionToolTip=
function(b){return!this._isListButton(b)?void 0:this._listOptions[b].tr.title};this.forEachListOption=function(b){for(var d in this._listOptions)b(d)};this.getAllListOptions=function(){var b=[],d;for(d in this._listOptions)b[b.length]=d;return b};this.setListOptionSelected=function(b){for(var d in this._listOptions){var e=this._listOptions[d];null!=e.td_a&&(null!=e.td_b&&e.tr.en)&&(d==b?(e.tr._selected=!0,e.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":"")):(e.tr._selected=!1,e.tr.className=
"tr_btn"))}};this.getListOptionSelected=function(){var b=null,d;for(d in this._listOptions)!0==this._listOptions[d].tr._selected&&(b=d);return b};this._isListButton=function(b,d){return null==this._listOptions[b]?!1:!d&&"tr_sep"==this._listOptions[b].tr.className?!1:!0};this.setMaxOpen=function(b){this._ph=null;"number"==typeof b?(this.maxOpen=b,this._maxOpenTest()):this.maxOpen=null};return this};
dhtmlXToolbarObject.prototype._comboObject=function(b,d,e){this.id=b.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_combo def";this.obj.style.display=null!=e.hidden?"none":"";this.obj.idd=String(d);this.obj.w=null!=e.width?e.width:120;this.obj.title=null!=e.title?e.title:"";this.obj.innerHTML="<div class='inp' type='text' style='-moz-user-select:text;width:"+this.obj.w+"px;'>";"undefined"!=typeof dhtmlXCombo&&(this.obj.combo=new dhtmlXCombo({parent:this.obj.childNodes[0],
width:e.width?e.width:120,readonly:null!=e.readonly?e.readonly:e.optionType&&-1<e.optionType.indexOf("checkbox")?!0:!1,type:e.optionType?e.optionType:"default",height:e.height?e.height:null}));var f=this;if(this.obj.combo){if(null!=e.xml)this.obj.combo.loadXML(e.xml,function(){b.callEvent("onItemXLE",[d])});else if(e.src){var g=eval(e.src);g&&g.length&&this.obj.combo.addOption(g)}else e.itemdata&&e.itemdata.length&&this.obj.combo.addOption(e.itemdata);null!=e.enabled&&!convertStringToBoolean(e.enabled)&&
this.obj.combo.disable(!0);for(var h in e)"function"==typeof this.obj.combo[h]&&this.obj.combo[h].apply(this.obj.combo,e[h].split(","))}this.obj.combo.attachEvent("onKeyPressed",function(d){13==d&&b.callEvent("onEnter",[f.obj.idd,f.obj.combo.getActualValue()])});b.base.appendChild(this.obj);this.getCombo=function(){return this.obj.combo};this.ag=function(){this.obj.childNodes[0].disabled=!1;this.obj.combo.disable(!1)};this.disableItem=function(){this.obj.childNodes[0].disabled=!0;this.obj.combo.disable(!0)};
this.isEnabled=function(){return!this.obj.childNodes[0].disabled};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return"none"!=this.obj.style.display};this.setValue=function(d){this.obj.combo.selectOption(d);b.callEvent("onValueChange",[this.obj.idd.replace(b.idPrefix,""),d])};this.getValue=function(b){return b?this.obj.combo.getSelectedText():this.obj.combo.getSelectedValue()};this.setWidth=function(b){this.obj.w=
b;this.obj.childNodes[0].style.width=b+"px";this.obj.combo.setSize(b)};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(b){this.obj.title=b};this.getItemToolTip=function(){return this.obj.title};return this};
dhtmlXToolbarObject.prototype._treeObject=function(b,d,e){this.id=b.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_tree def";this.obj.style.display=null!=e.hidden?"none":"";this.obj.idd=String(d);this.obj.w=null!=e.width?e.width:120;this.obj.title=null!=e.title?e.title:"";var f=e.prompt?e.prompt:"\u8bf7\u9009\u62e9",g=e.value?e.value:f,h="undefined"!=typeof e.readonly||"undefined"!=typeof e.readOnly?convertStringToBoolean(e.readOnly):!1,l;l="<input class='inp' type='text' style='-moz-user-select:text;width:"+
(this.obj.w+"px;' value='");l=l+g+"'";l+=h?" readonly":"";l+=">";this.obj.innerHTML=l;_isIE&&(this.obj.style.marginTop=5==document.documentMode?"2px":"3px");b.base.appendChild(this.obj);h=null!=e.treeWidth?e.treeWidth:230;l=null!=e.treeHeight?e.treeHeight:260;var m=new dhtmlXWindows;m.enableAutoViewport(!1);m.attachViewportTo(document.body);var k=dhx_fixPosition(this.obj.childNodes[0],h,l),n=m.createWindow("w1",k[0],k[1],h,l);n.hideHeader();dhtmlx.treeWin=dhtmlx.treeWin?dhtmlx.treeWin:{};dhtmlx.treeIpt=
dhtmlx.treeIpt?dhtmlx.treeIpt:{};h=dhtmlx.simpleRandomId();dhtmlx.treeWin[h]=n;dhtmlx.treeIpt[h]=this.obj.childNodes[0];this.obj.win=n;this.obj.tree=n.attachTree(e.tid);e.imagePath&&this.obj.tree.setImagePath(e.imagePath);this.obj.tree.setSkin(dhtmlx.skin?dhtmlx.skin:"dhx_skyblue");n.hide();var s=this;this.obj.tree.attachEvent("onClick",function(b,d){s.obj.win.hide();s.setValue(this.getSelectedItemText(),this.getSelectedItemId());s.obj.childNodes[0].sid=this.getSelectedItemId();return!1});null!=e.xml&&
this.obj.tree.loadXML(e.xml,function(){b.callEvent("onItemXLE",[d])});this.obj.childNodes[0]._oldColor=this.obj.childNodes[0].style.color;this.obj.childNodes[0].prompt=f;g==f&&(this.obj.childNodes[0].style.color="#CCC");null!=e.disabled&&!convertStringToBoolean(e.disabled)&&(this.obj.childNodes[0].disabled=!0);for(var u in e)"function"==typeof this.obj.tree[u]&&this.obj.tree[u].apply(this.obj.tree,e[u].split(","));this.obj.childNodes[0].onblur=function(){if(""==this.value)this.value=this.prompt,this.style.color=
"#CCC",s.setValue("","",!0);else{var b=s.obj.tree.findItemQuiet(this.value,!1,!0);b&&this.sid!=b?s.setValue(this.value,b):(this.sid="",s.obj.tree.clearSelection())}setTimeout(function(){n._justClicked||n.hide()},100)};this.obj.childNodes[0].onkeydown=function(b){b=b||event;var d=b.target||b.srcElement,e=s.obj.tree;if(38==b.keyCode||40==b.keyCode)return d._key=d._key?d._key:d.value,""!=d._key&&((b=e.findItemQuiet(d._key,40!=b.keyCode,!d.found))?(d.found=!0,d.value=e.getItemText(b)):d.found=!1),!1;
if(13==b.keyCode){if(s.obj.win.isHidden())return s.obj.win.show(),!0;if(d.found){if(b=e.getSelectedItemText(),b==d.value)return d._key=d.value,s.setValue(b,e.getSelectedItemId()),s.obj.win.hide(),!0}else{if(""==d.value)return e.clearSelection(),!0;d._key=d.value;(b=e.findItemQuiet(d.value,!1,!0))?(d.found=!0,d.value=e.getItemText(b),item.text=d.value):(e.clearSelection(),d.found=!1)}}else{if(37==b.keyCode||39==b.keyCode)event.cancelBubble=!0;else if(27==b.keyCode)return s.obj.win.hide(),!0;d.found=
!1}};this.obj.childNodes[0].onclick=function(){if(s.obj.win.isHidden()){var b=1*s.obj.win.style.width.replace("px",""),d=1*s.obj.win.style.height.replace("px",""),b=dhx_fixPosition(this,b,d);s.obj.win.setPosition(b[0],b[1]);s.obj.win.show();this._key=""}this.value==f&&(this.sid=this.value="");this.sid&&s.obj.tree.selectItem(this.sid,!1)};n.onclick=function(b){b=b||event;b.cancelBubble=!0};n.attachEvent("_onBeforeTryResize",function(){removeDhtmlxEvent(document.body,dhtmlx._hideTreeWin)});n.attachEvent("onResizeFinish",
function(){window.setTimeout(function(){dhtmlxEvent(document.body,"click",dhtmlx._hideTreeWin)},100)});dhtmlx.attachHideTreeWin||(dhtmlxEvent(document.body,"click",dhtmlx._hideTreeWin),dhtmlx.attachHideTreeWin=!0);this.getTree=function(){return this.obj.tree};this.ag=function(){this.obj.childNodes[0].disabled=!1};this.disableItem=function(){this.obj.childNodes[0].disabled=!0};this.isEnabled=function(){return!this.obj.childNodes[0].disabled};this.showItem=function(){this.obj.style.display=""};this.hideItem=
function(){this.obj.style.display="none"};this.isVisible=function(){return"none"!=this.obj.style.display};this.setValue=function(d,f,g){var h=this.obj.childNodes[0];h.sid=f;h.value=d;d!=h.prompt?h.style.color=h._oldColor:(h.value=""==d?h.prompt:d,h.style.color="#ccc");g||b.callEvent("onValueChange",[this.obj.idd.replace(b.idPrefix,""),e])};this.getValue=function(b){var d=this.obj.childNodes[0].value==this.obj.childNodes[0].prompt?"":this.obj.childNodes[0];return b?d?this.obj.childNodes[0].sid:null:
d?this.obj.childNodes[0].value:d};this.setWidth=function(b){this.obj.w=b;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(b){this.obj.title=b};this.getItemToolTip=function(){return this.obj.title};return this};
dhtmlXToolbarObject.prototype._buttonInputObject=function(b,d,e){this.id=b.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn def";this.obj.style.display=null!=e.hidden?"none":"";this.obj.idd=String(d);this.obj.w=null!=e.width?e.width:100;this.obj.title=null!=e.title?e.title:"";this.obj.innerHTML="<input class='inp' type='text' style='-moz-user-select:text;width:"+this.obj.w+"px;'"+(null!=e.value?"' value='"+e.value+"'":"")+">";e.prompt&&(this.obj.childNodes[0].prompt=
e.prompt,""==this.obj.childNodes[0].value&&(this.obj.childNodes[0].value=e.prompt,this.obj.childNodes[0].style.color="#CCC"),this.obj.childNodes[0].onfocus=function(){this.value==e.prompt&&(this.value="",this.style.color="black")},this.obj.childNodes[0].onblur=function(){""==this.value&&(this.value=e.prompt,this.style.color="#CCC")});var f=this;this.obj.childNodes[0].onkeydown=function(d){d=d||event;13==d.keyCode&&b.callEvent("onEnter",[f.obj.idd,this.value])};b.base.appendChild(this.obj);this.ag=
function(){this.obj.childNodes[0].disabled=!1};this.disableItem=function(){this.obj.childNodes[0].disabled=!0};this.isEnabled=function(){return!this.obj.childNodes[0].disabled};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return"none"!=this.obj.style.display};this.setValue=function(d){this.obj.childNodes[0].value=d;"#CCC"==this.obj.childNodes[0].style.color&&(this.obj.childNodes[0].style.color="black");b.callEvent("onValueChange",
[this.obj.idd.replace(b.idPrefix,""),d,this.obj.childNodes[0].value])};this.getValue=function(){return this.obj.childNodes[0].value==this.obj.childNodes[0].prompt?"":this.obj.childNodes[0].value};this.setWidth=function(b){this.obj.w=b;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(b){this.obj.title=b;this.obj.popup&&"mouseover"==this.obj.ac&&(this.obj.popup.attachHTML(b),this.obj.poptip=b,this.obj.title=null)};this.getItemToolTip=
function(){return this.obj.popup&&"mouseover"==this.obj.ac?this.obj.poptip:this.obj.title};this.setItemPopup=function(e,f){e.conf.toolbar=b;e.conf.id=e.conf.id?e.conf.id.concat([d]):[d];this.obj.popup=e;this.obj.ac=f?f.toLowerCase():"onmouseover";this.obj[this.obj.ac]=function(){this.popup&&(this.popup.show(d),this.popup._clearClick=!0)};this.obj.childNodes[0]["onmouseover"==this.obj.ac?"onmouseout":"onblur"]=function(){this.parentNode.popup&&this.parentNode.popup.hide()}};this.getItemPopup=function(b){return this.obj.popup};
this.getInput=function(){return this.obj.firstChild};return this};
dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(b,d,e){this.id=b.idPrefix+d;this.state=null!=e.enabled?!1:!0;this.imgEn=null!=e.img?e.img:"";this.imgDis=null!=e.imgdis?e.imgdis:"";this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"";this.obj=document.createElement("DIV");this.obj.pressed=null!=e.selected;this.obj.extAction=e.action||null;this.obj.className="dhx_toolbar_btn "+(this.obj.pressed?this.state?"pres":"dis":this.state?"def":"dis");this.obj.style.display=
null!=e.hidden?"none":"";this.obj.renderAs=this.obj.className;this.obj.idd=String(d);this.obj.title=e.title||"";this.obj.pressed&&(this.obj.renderAs="dhx_toolbar_btn over");this.obj.innerHTML=b._rtlParseBtn(""!=this.img?"<img src='"+b.imagePath+this.img+"'>":"",null!=e.text?"<div>"+e.text+"</div>":"");b.base.appendChild(this.obj);var f=this;this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};
this.obj._doOnMouseOver=function(){!1!=f.state&&("none"==b.anyUsed&&!this.pressed)&&(this.renderAs=this.className="dhx_toolbar_btn over")};this.obj._doOnMouseOut=function(){!1!=f.state&&("none"==b.anyUsed&&!this.pressed)&&(this.renderAs=this.className="dhx_toolbar_btn def")};this.obj[b._isIPad?"ontouchstart":"onmousedown"]=function(){if((!b.checkEvent("onBeforeStateChange")||b.callEvent("onBeforeStateChange",[this.idd.replace(b.idPrefix,""),this.pressed]))&&!1!=f.state&&"none"==b.anyUsed){this.className=
(this.pressed=!this.pressed)?"dhx_toolbar_btn pres":this.renderAs;var d=this.idd.replace(b.idPrefix,"");if(this.extAction)try{window[this.extAction](d,this.pressed)}catch(e){}b.callEvent("onStateChange",[d,this.pressed]);this._doOnMouseOut();return!1}};this.setItemState=function(d,e){if(this.obj.pressed!=d&&(!0==d?(this.obj.pressed=!0,this.obj.className="dhx_toolbar_btn pres",this.obj.renderAs="dhx_toolbar_btn over"):(this.obj.pressed=!1,this.obj.className="dhx_toolbar_btn def",this.obj.renderAs=
this.obj.className),!0==e)){var f=this.obj.idd.replace(b.idPrefix,"");if(this.obj.extAction)try{window[this.obj.extAction](f,this.obj.pressed)}catch(m){}b.callEvent("onStateChange",[f,this.obj.pressed])}};this.getItemState=function(){return this.obj.pressed};this.ag=function(){b._enableItem(this)};this.disableItem=function(){b._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};
this.isVisible=function(){return""==this.obj.style.display};this.setItemText=function(d){b._setItemText(this,d)};this.getItemText=function(){return b._getItemText(this)};this.setItemImage=function(d){b._setItemImage(this,d,!0)};this.clearItemImage=function(){b._clearItemImage(this,!0)};this.setItemImageDis=function(d){b._setItemImage(this,d,!1)};this.clearItemImageDis=function(){b._clearItemImage(this,!1)};this.setItemToolTip=function(b){this.obj.title=b};this.getItemToolTip=function(){return this.obj.title};
return this};
dhtmlXToolbarObject.prototype._sliderObject=function(b,d,e){this.id=b.idPrefix+d;this.state=null!=e.enabled?"true"==e.enabled?!0:!1:!0;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn "+(this.state?"def":"dis");this.obj.style.display=null!=e.hidden?"none":"";this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};this.obj.idd=String(d);this.obj.len=null!=e.length?Number(e.length):50;this.obj.innerHTML="<div>"+(e.textMin||"")+"</div><div class='sl_bg_l'></div><div class='sl_bg_m' style='width:"+this.obj.len+
"px;'></div><div class='sl_bg_r'></div><div>"+(e.textMax||"")+"</div>";b.base.appendChild(this.obj);var f=this;this.pen=document.createElement("DIV");this.pen.className="sl_pen";this.obj.appendChild(this.pen);var g=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+b.skin+(b.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=e.toolTip||"%v";document.body.appendChild(this.label);var h=this.label;this.pen.valueMin=null!=
e.valueMin?Number(e.valueMin):0;this.pen.valueMax=null!=e.valueMax?Number(e.valueMax):100;this.pen.valueMin>this.pen.valueMax&&(this.pen.valueMin=this.pen.valueMax);this.pen.valueNow=null!=e.valueNow?Number(e.valueNow):this.pen.valueMax;this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax);this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin);this.pen._detectLimits=function(){this.minX=f.obj.childNodes[1].offsetLeft-4;this.maxX=f.obj.childNodes[3].offsetLeft-
this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=!1;this.pen[b._isIPad?"ontouchstart":"onmousedown"]=function(d){if(!1!=f.state&&(d=d||event,this.initXY=b._isIPad?d.touches[0].clientX:d.clientX,this.newValueNow=this.valueNow,this.allowMove=!0,this.className=
"sl_pen over",""!=h.tip))h.style.visibility="hidden",h.style.display="",h.innerHTML=h.tip.replace("%v",this.valueNow),h.style.left=Math.round(getAbsoluteLeft(this)+this.offsetWidth/2-h.offsetWidth/2)+"px",h.style.top=getAbsoluteTop(this)-h.offsetHeight-3+"px",h.style.visibility=""};this.pen._doOnMouseMoveStart=function(d){d=d||event;if(g.allowMove){var e=b._isIPad?d.touches[0].clientX:d.clientX,f=e-g.initXY;if(!(e<getAbsoluteLeft(g)+Math.round(g.offsetWidth/2)&&g.nowX==g.minX)&&!(e>getAbsoluteLeft(g)+
Math.round(g.offsetWidth/2)&&g.nowX==g.maxX))return g.newNowX=g.nowX+f,g.newNowX<g.minX&&(g.newNowX=g.minX),g.newNowX>g.maxX&&(g.newNowX=g.maxX),g.nowX=g.newNowX,g.style.left=g.nowX+"px",g.initXY=e,g.newValueNow=Math.round((g.valueMax-g.valueMin)*(g.newNowX-g.minX)/(g.maxX-g.minX)+g.valueMin),""!=h.tip&&(h.innerHTML=h.tip.replace(/%v/gi,g.newValueNow),h.style.left=Math.round(getAbsoluteLeft(g)+g.offsetWidth/2-h.offsetWidth/2)+"px",h.style.top=getAbsoluteTop(g)-h.offsetHeight-3+"px"),d.cancelBubble=
!0,d.returnValue=!1}};this.pen._doOnMouseMoveEnd=function(){g.allowMove&&(g.className="sl_pen",g.allowMove=!1,g.nowX=g.newNowX,g.valueNow=g.newValueNow,""!=h.tip&&(h.style.display="none"),b.callEvent("onValueChange",[f.obj.idd.replace(b.idPrefix,""),g.valueNow]))};b._isIPad?(document.addEventListener("touchmove",g._doOnMouseMoveStart,!1),document.addEventListener("touchend",g._doOnMouseMoveEnd,!1)):"undefined"!=typeof window.addEventListener?(window.addEventListener("mousemove",g._doOnMouseMoveStart,
!1),window.addEventListener("mouseup",g._doOnMouseMoveEnd,!1)):(document.body.attachEvent("onmousemove",g._doOnMouseMoveStart),document.body.attachEvent("onmouseup",g._doOnMouseMoveEnd));this.ag=function(){this.state||(this.state=!0,this.obj.className="dhx_toolbar_btn def")};this.disableItem=function(){this.state&&(this.state=!1,this.obj.className="dhx_toolbar_btn dis")};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display=
"none"};this.isVisible=function(){return""==this.obj.style.display};this.setValue=function(d,e){d=Number(d);d<this.pen.valueMin&&(d=this.pen.valueMin);d>this.pen.valueMax&&(d=this.pen.valueMax);this.pen.valueNow=d;this.pen._definePos();!0==e&&b.callEvent("onValueChange",[this.obj.idd.replace(b.idPrefix,""),this.pen.valueNow])};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(b,d){b=Number(b);b>this.pen.valueMax||(this.obj.childNodes[0].innerHTML=d,this.obj.childNodes[0].style.display=
0<d.length?"":"none",this.pen.valueMin=b,this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits(),this.pen._definePos())};this.setMaxValue=function(b,d){b=Number(b);b<this.pen.valueMin||(this.obj.childNodes[4].innerHTML=d,this.obj.childNodes[4].style.display=0<d.length?"":"none",this.pen.valueMax=b,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen._detectLimits(),this.pen._definePos())};this.getMinValue=function(){return[this.pen.valueMin,
this.obj.childNodes[0].innerHTML]};this.getMaxValue=function(){return[this.pen.valueMax,this.obj.childNodes[4].innerHTML]};this.setItemToolTipTemplate=function(b){this.label.tip=b};this.getItemToolTipTemplate=function(){return this.label.tip};return this};
dhtmlXToolbarObject.prototype.unload=function(){this._isIPad?document.removeEventListener("touchstart",this._doOnClick,!1):_isIE?dhtmlx._detachEvent(document.body,"onmousedown",this._doOnClick):dhtmlx._detachEvent(window,"onmousedown",this._doOnClick);this._doOnClick=null;this.clearAll();this.objPull=null;this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null);for(;0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);this.cont.removeChild(this.base);for(this.base=
null;0<this.cont.childNodes.length;)this.cont.removeChild(this.cont.childNodes[0]);this.cont.className="";this.cont=null;this.detachAllEvents();this.items=this.setMaxOpen=this.getUserData=this.setUserData=this.unload=this.getListOptionSelected=this.setListOptionSelected=this.getAllListOptions=this.forEachListOption=this.clearListOptionImage=this.getListOptionImage=this.setListOptionImage=this.getListOptionToolTip=this.setListOptionToolTip=this.getListOptionText=this.setListOptionText=this.getListOptionPosition=
this.setListOptionPosition=this.isListOptionEnabled=this.disableListOption=this.bh=this.isListOptionVisible=this.hideListOption=this.showListOption=this.removeListOption=this.addListOption=this.removeItem=this.blurItem=this.setPosition=this.getPosition=this.getWidth=this.setWidth=this.getMaxValue=this.setMaxValue=this.getMinValue=this.setMinValue=this.getValue=this.setValue=this.getItemToolTipTemplate=this.setItemToolTipTemplate=this.getItemState=this.setItemState=this.clearItemImageDis=this.clearItemImage=
this.setItemImageDis=this.setItemImage=this.getItemToolTip=this.setItemToolTip=this.getItemText=this.setItemText=this.isEnabled=this.disableItem=this.ag=this.isVisible=this.hideItem=this.showItem=this.forEachItem=this.addInput=this.addSlider=this.addSeparator=this.addButtonTwoState=this.addButtonSelect=this.addText=this.addButton=this.getParentId=this.inArray=this.getTypeExt=this.getType=this.removeSpacer=this.addSpacer=this.clearAll=this.detachAllEvents=this.detachEvent=this.eventCatcher=this.checkEvent=
this.callEvent=this.attachEvent=this.loadXMLString=this.loadXML=this.setIconPath=this.setIconsPath=this.setSkin=this.setAlign=this._removeItem=this._blurItem=this._autoDetectVisibleArea=this._sliderObject=this._buttonTwoStateObject=this._buttonInputObject=this._buttonSelectObject=this._buttonObject=this._textObject=this._separatorObject=this._getIdByPosition=this._setPosition=this._getPosition=this._addItem=this._genStr=this._addItemToStorage=this._doOnLoad=this._xmlParser=this._disableItem=this._enableItem=
this._getItemText=this._setItemText=this._clearItemImage=this._setItemImage=this._addImgObj=this._getObj=this._sbw=this.setRTL=this._rtlParseBtn=this._rtl=this.skin=this.selectPolygonOffsetTop=this.selectPolygonOffsetLeft=this.rootTypes=this.imagePath=this.idPrefix=this.anyUsed=this.align=this._isWebToolbar=this._isIE6=this.tY2=this.tY1=this.tX2=this.tX1=this.win=null};
dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){this.tX1=document.body.scrollLeft;this.tX2=this.tX1+(window.innerWidth||document.body.clientWidth);this.tY1=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);this.tY2=this.tY1+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight)};
dhtmlXToolbarObject.prototype.setUserData=function(b,d,e){null!=this.objPull[this.idPrefix+b]&&(b=this.objPull[this.idPrefix+b],null==b.userData&&(b.userData={}),b.userData[d]=e)};dhtmlXToolbarObject.prototype.getUserData=function(b,d){return null==this.objPull[this.idPrefix+b]?null:null==this.objPull[this.idPrefix+b].userData?null:null==this.objPull[this.idPrefix+b].userData[d]?null:this.objPull[this.idPrefix+b].userData[d]};
dhtmlXToolbarObject.prototype._isListOptionExists=function(b,d){if(null==this.objPull[this.idPrefix+b])return!1;var e=this.objPull[this.idPrefix+b];return"buttonSelect"!=e.type?!1:null==e._listOptions[d]?!1:!0};dhtmlXToolbarObject.prototype.setListOptionUserData=function(b,d,e,f){this._isListOptionExists(b,d)&&(b=this.objPull[this.idPrefix+b]._listOptions[d],null==b.userData&&(b.userData={}),b.userData[e]=f)};
dhtmlXToolbarObject.prototype.getListOptionUserData=function(b,d,e){if(!this._isListOptionExists(b,d))return null;b=this.objPull[this.idPrefix+b]._listOptions[d];return!b.userData?null:b.userData[e]?b.userData[e]:null};dhtmlXToolbarObject.prototype.getItemById=function(b){return this.objPull[this.idPrefix+b]};dhtmlXToolbarObject.prototype.getItemDomRefById=function(b){return this.objPull[this.idPrefix+b].obj};
dhtmlXToolbarObject.prototype.getItemDim=function(b){b=this.objPull[this.idPrefix+b];return{left:getAbsoluteLeft(b.obj),top:getAbsoluteTop(b.obj),width:b.obj.offsetWidth+(b.arw?b.arw.offsetWidth:0),height:b.obj.offsetHeight}};
(function(){dhtmlx.extend_api("dhtmlXToolbarObject",{_init:function(b){return[b.parent,b.skin]},icon_path:"setIconsPath",xml:"loadXML",items:"items",align:"setAlign",rtl:"setRTL",skin:"setSkin"},{items:function(b){for(var d=0;d<b.length;d++){var e=b[d];"button"==e.type&&this.addButton(e.id,null,e.text,e.img,e.img_disabled);"separator"==e.type&&this.addSeparator(e.id,null);"text"==e.type&&this.addText(e.id,null,e.text);"buttonSelect"==e.type&&this.addButtonSelect(e.id,null,e.text,e.options,e.img,e.img_disabled);
"buttonTwoState"==e.type&&this.addButtonTwoState(e.id,null,e.text,e.img,e.img_disabled);"buttonInput"==e.type&&this.addInput(e.id,null,e.text);"slider"==e.type&&this.addSlider(e.id,null,e.length,e.value_min,e.value_max,e.value_now,e.text_min,e.text_max,e.tip_template);e.width&&this.setWidth(e.id,e.width);e.disabled&&this.disableItem(e.id);e.tooltip&&this.setItemToolTip(e.id,e.tooltip);!0===e.pressed&&this.setItemState(e.id,!0)}}})})();function dhtmlXWindowsSngl(){}function dhtmlXWindowsBtn(){}
function dhtmlXWindows(){if(window.dhtmlXContainer){this.engine="dhx";var b="_"+this.engine+"_Engine";if(this[b]){this[b]();this._isIPad=0<=navigator.userAgent.search(/iPad/gi);var d=this;this.pathPrefix="dhxwins_";this.imagePath=dhtmlx.image_path||"codebase/imgs/";this.setImagePath=function(b){this.imagePath=b};this.skin="dhx_skyblue";this.skinParams={dhx_black:{header_height:21,border_left_width:2,border_right_width:2,border_bottom_height:2},dhx_blue:{header_height:21,border_left_width:2,border_right_width:2,
border_bottom_height:2},dhx_skyblue:{header_height:21,border_left_width:2,border_right_width:2,border_bottom_height:2}};this.setSkin=function(b){this.skin=""==b?"dhx_skyblue":b;this._engineRedrawSkin()};this.isWindow=function(b){return null!=this.wins[b]};this.findByText=function(b){var d=[],e;for(e in this.wins)0<=this.wins[e].getText().search(b,"gi")&&(d[d.length]=this.wins[e]);return d};this.window=function(b){var d=null;null!=this.wins[b]&&(d=this.wins[b]);return d};this.forEachWindow=function(b){for(var d in this.wins)b(this.wins[d])};
this.getBottommostWindow=function(){var b=this.getTopmostWindow(),d;for(d in this.wins)this.wins[d].zi<b.zi&&(b=this.wins[d]);return 0!=b.zi?b:null};this.getTopmostWindow=function(b){var d={zi:0},e;for(e in this.wins)this.wins[e].zi>d.zi&&(!0==b&&!this._isWindowHidden(this.wins[e])&&(d=this.wins[e]),!0!=b&&(d=this.wins[e]));return 0!=d.zi?d:null};this.wins={};for(var e in this.wins)delete this.wins[e];this.autoViewport=!0;this._createViewport=function(){this.vp=document.body;this.vp._css=0<String(this.vp.className).length?
this.vp.className:"";this.vp.className+=" dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");this.modalCoverI=document.createElement("IFRAME");this.modalCoverI.frameBorder="0";this.modalCoverI.className="dhx_modal_cover_ifr";this.modalCoverI.setAttribute("src","javascript:''");this.modalCoverI.style.display="none";this.modalCoverI.style.zIndex=0;this.vp.appendChild(this.modalCoverI);this.modalCoverD=document.createElement("DIV");this.modalCoverD.className="dhx_modal_cover_dv";this.modalCoverD.style.display=
"none";this.modalCoverD.style.zIndex=0;this.vp.appendChild(this.modalCoverD);this._vpcover=document.createElement("DIV");this._vpcover.className="dhx_content_vp_cover";this._vpcover.style.display="none";this.vp.appendChild(this._vpcover);this._carcass=document.createElement("DIV");this._carcass.className="dhx_carcass_resmove";this._carcass.style.display="none";_isIE&&(this._carcass.innerHTML="<iframe border=0 frameborder=0 style='filter: alpha(opacity=0); width: 100%; height:100%; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;'></iframe><div style='position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;'></div>",
this._carcass.childNodes[0].setAttribute("src","javascript:''"));this._carcass.onselectstart=function(b){b=b||event;b.returnValue=!1};this.vp.appendChild(this._carcass)};this._autoResizeViewport=function(){for(var b in this.wins)this.wins[b]._isFullScreened&&(this.wins[b]._content.style.width=document.body.offsetWidth-(_isIE?4:0)+"px",this.wins[b]._content.style.height=0==document.body.offsetHeight?window.innerHeight?window.innerHeight+"px":document.body.scrollHeight+"px":document.body.offsetHeight-
(_isIE?4:0)+"px",null!=this.wins[b].layout&&_isOpera&&this.wins[b].layout._fixCellsContentOpera950(),this.wins[b].updateNestedObjects()),this.wins[b]._isMaximized&&"none"!=this.wins[b].style.display&&(this._restoreWindow(this.wins[b]),this._maximizeWindow(this.wins[b]));if(this.vp!=document.body&&!1!=this.autoViewport)for(b in this.vp.style.width=(_isIE?document.body.offsetWidth-4:window.innerWidth)+"px",this.vp.style.height=(_isIE?document.body.offsetHeight-4:window.innerHeight)+"px",this.wins){var d=
this.wins[b],e=!1,l=!1;d.x>this.vp.offsetWidth-10&&(d.x=this.vp.offsetWidth-10,e=!0);var m=null!=d._skinParams?d._skinParams:this.skinParams[this.skin];d.y+m.header_height>this.vp.offsetHeight&&(d.y=this.vp.offsetHeight-m.header_height,l=!0);(e||l)&&this._engineRedrawWindowPos(d)}};this.enableAutoViewport=this.ae=function(b){if(this.vp==document.body&&(this.autoViewport=b,!1==b))document.body.className=this.vp._css,this.vp=document.createElement("DIV"),this.vp.autocreated=!0,this.vp.className="dhtmlx_winviewport dhtmlx_skin_"+
this.skin+(this._r?" dhx_wins_rtl":""),this.vp.style.left="0px",this.vp.style.top="0px",document.body.appendChild(this.vp),this.vp.ax=0,this.vp.ay=0,this._autoResizeViewport(),this.vp.appendChild(this.modalCoverI),this.vp.appendChild(this.modalCoverD),this.vp.appendChild(this._carcass)};this.attachViewportTo=function(b){!1==this.autoViewport&&(this.vp!=document.body&&this.vp.parentNode.removeChild(this.vp),this.vp="string"==typeof b?document.getElementById(b):b,this.vp.autocreated=!1,this.vp.className+=
" dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":""),this.vp.style.position="relative",this.vp.style.overflow="hidden",this.vp.ax=0,this.vp.ay=0,this.vp.appendChild(this.modalCoverI),this.vp.appendChild(this.modalCoverD),this.vp.appendChild(this._carcass))};this.setViewport=function(b,d,e,l,m){!1==this.autoViewport&&(this.vp.style.left=b+"px",this.vp.style.top=d+"px",this.vp.style.width=e+"px",this.vp.style.height=l+"px",null!=m&&m.appendChild(this.vp),this.vp.ax=getAbsoluteLeft(this.vp),this.vp.ay=
getAbsoluteTop(this.vp))};this._effects={move:!1,resize:!1};this.setEffect=function(b,d){null!=this._effects[b]&&"boolean"==typeof d&&(this._effects[b]=d)};this.getEffect=function(b){return this._effects[b]};this.createWindow=function(b,e,h,l,m){var k=document.createElement("DIV");k.className="dhtmlx_window_inactive";k.dir="ltr";for(var n in this.wins)this.wins[n].zi+=this.zIndexStep,this.wins[n].style.zIndex=this.wins[n].zi;k.zi=this.zIndexStep;k.style.zIndex=k.zi;k.active=!1;k._isWindow=!0;k.isWindow=
!0;k.w=Number(l);k.h=Number(m);k.x=e;k.y=h;this._engineFixWindowPosInViewport(k);k._isModal=!1;k._allowResize=!0;k.maxW="auto";k.maxH="auto";k.minW=200;k.minH=140;k.iconsPresent=!0;k.icons=[this.imagePath+this.pathPrefix+this.skin+"/active/icon_normal.gif",this.imagePath+this.pathPrefix+this.skin+"/inactive/icon_normal.gif"];k._allowMove=!0;k._allowMoveGlobal=!0;k._allowResizeGlobal=!0;k._keepInViewport=!1;k.idd=b;this.vp.appendChild(k);this._engineSetWindowBody(k);this._engineRedrawWindowPos(k);
this._engineRedrawWindowSize(k);this._engineUpdateWindowIcon(k,k.icons[0]);this._engineDiableOnSelectInWindow(k,!0);this.wins[b]=k;dhtmlxEventable(k);this._engineGetWindowHeader(k)[this._isIPad?"ontouchstart":"onmousedown"]=function(b){b=b||event;var e=d.wins[this.idd];e.isOnTop()||e.bringToTop();if(!d._engineGetWindowHeaderState(e)&&d._engineCheckHeaderMouseDown(e,b)&&e._allowMove&&e._allowMoveGlobal)return this._wasMoved=!1,e.moveOffsetX=e.x-(d._isIPad?b.touches[0].clientX:b.clientX),e.moveOffsetY=
e.y-(d._isIPad?b.touches[0].clientY:b.clientY),d.movingWin=e,!1==d._effects.move&&(d._carcass.x=d.movingWin.x,d._carcass.y=d.movingWin.y,d._carcass.w=parseInt(d.movingWin.style.width)+(_isIE?0:-2),d._carcass.h=parseInt(d.movingWin.style.height)+(_isIE?0:-2),d._carcass.style.left=d._carcass.x+"px",d._carcass.style.top=d._carcass.y+"px",d._carcass.style.width=d._carcass.w+"px",d._carcass.style.height=d._carcass.h+"px",d._carcass.style.zIndex=d._getTopZIndex(!0)+1,d._carcass._keepInViewport=k._keepInViewport),
d._blockSwitcher(!0),d._vpcover.style.zIndex=d.movingWin.style.zIndex-1,d._vpcover.style.display="",b.returnValue=!1,b.cancelBubble=!0,!1};this._engineGetWindowHeader(k).ondblclick=function(b){var e=d.wins[this.idd];if(d._engineCheckHeaderMouseDown(e,b||event))e._allowResizeGlobal&&!e._isParked&&(!0==e._isMaximized?d._restoreWindow(e):d._maximizeWindow(e))};k.setText=function(b){d._engineGetWindowLabel(this).innerHTML=b};k.getText=function(){return d._engineGetWindowLabel(this).innerHTML};k.getId=
function(){return this.idd};k.show=function(){d._showWindow(this)};k.hide=function(){d._hideWindow(this)};k.minimize=function(){d._restoreWindow(this)};k.maximize=function(){d._maximizeWindow(this)};k.close=function(){d._closeWindow(this)};k.park=function(){this._isParkedAllowed&&d._parkWindow(this)};k.stick=function(){d._stickWindow(this)};k.unstick=function(){d._unstickWindow(this)};k.isSticked=function(){return this._isSticked};k.setIcon=function(b,e){d._setWindowIcon(k,b,e)};k.getIcon=function(){return d._getWindowIcon(this)};
k.clearIcon=function(){d._clearWindowIcons(this)};k.restoreIcon=function(){d._restoreWindowIcons(this)};k.keepInViewport=function(b){this._keepInViewport=b};k.setModal=function(b){!0==b?null!=d.modalWin||d.modalWin==this||d._setWindowModal(this,!0):d.modalWin==this&&d._setWindowModal(this,!1)};k.isModal=function(){return this._isModal};k.isHidden=function(){return d._isWindowHidden(this)};k.isMaximized=function(){return this._isMaximized};k.isParked=function(){return this._isParked};k.allowPark=function(){d._allowParking(this)};
k.denyPark=function(){d._denyParking(this)};k.isParkable=function(){return this._isParkedAllowed};k.allowResize=function(){d._allowReszieGlob(this)};k.denyResize=function(){d._denyResize(this)};k.isResizable=function(){return this._allowResizeGlobal};k.allowMove=function(){this._isMaximized||(this._allowMove=!0);this._allowMoveGlobal=!0};k.denyMove=function(){this._allowMoveGlobal=!1};k.isMovable=function(){return this._allowMoveGlobal};k.bringToTop=function(){d._bringOnTop(this);d._makeActive(this)};
k.bringToBottom=function(){d._bringOnBottom(this)};k.isOnTop=function(){return d._isWindowOnTop(this)};k.isOnBottom=function(){return d._isWindowOnBottom(this)};k.setPosition=function(b,e){this.x=b;this.y=e;d._engineFixWindowPosInViewport(this);d._engineRedrawWindowPos(this)};k.getPosition=function(){return[this.x,this.y]};k.setDimension=function(b,e){null!=b&&("auto"!=this.maxW&&b>this.maxW&&(b=this.maxW),b<this.minW&&(b=this.minW),this.w=b);null!=e&&("auto"!=this.maxH&&e>this.maxH&&(e=this.maxH),
e<this.minH&&(e=this.minH),this.h=e);d._fixWindowDimensionInViewport(this);d._engineFixWindowPosInViewport(this);d._engineRedrawWindowSize(this);this.updateNestedObjects()};k.getDimension=function(){return[this.w,this.h]};k.setMaxDimension=function(b,e){this.maxW=isNaN(b)?"auto":b;this.maxH=isNaN(e)?"auto":e;d._engineRedrawWindowSize(this)};k.getMaxDimension=function(){return[this.maxW,this.maxH]};k.setMinDimension=function(b,e){null!=b&&(this.minW=b);null!=e&&(this.minH=e);d._fixWindowDimensionInViewport(this);
d._engineRedrawWindowPos(this)};k.getMinDimension=function(){return[this.minW,this.minH]};k._adjustToContent=function(b,e){d._engineAdjustWindowToContent(this,b,e)};k._doOnAttachMenu=function(){d._engineRedrawWindowSize(this);this.updateNestedObjects()};k._doOnAttachToolbar=function(){d._engineRedrawWindowSize(this);this.updateNestedObjects()};k._doOnAttachStatusBar=function(){d._engineRedrawWindowSize(this);this.updateNestedObjects()};k._doOnFrameMouseDown=function(){this.bringToTop()};k._doOnFrameContentLoaded=
function(){d.callEvent("onContentLoaded",[this])};k.addUserButton=function(b,e,f,g){return d._addUserButton(this,b,e,f,g)};k.removeUserButton=function(b){"minmax1"==b||"minmax2"==b||"park"==b||"close"==b||"stick"==b||"unstick"==b||"help"==b||null!=btn&&d._removeUserButton(this,b)};k.progressOn=function(){d._engineSwitchWindowProgress(this,!0)};k.progressOff=function(){d._engineSwitchWindowProgress(this,!1)};k.setToFullScreen=function(b){d._setWindowToFullScreen(this,b)};k.showHeader=function(){d._engineSwitchWindowHeader(this,
!0)};k.hideHeader=function(){d._engineSwitchWindowHeader(this,!1)};k._resizeWinToNoborder=function(){var b=this.vs.def.dhxcont;b.style.left="-2px";b.style.top="-2px";b.style.width=1*b.style.width.replace("px","")+13+"px";b.childNodes[0].style.backgroundColor="white";b.childNodes[0].style.border="none";b.childNodes[0].style.width=b.style.width;b.style.height=1*b.style.height.replace("px","")+13+"px";b.childNodes[0].style.height=b.style.height};k.progressOff();k.canStartResize=!1;k.onmousemove=function(b){if(_isIE&&
this._isMaximized)return!0;b=b||event;var e=b.target||b.srcElement;if(e&&"input"==e.tagName)return b.returnValue=!0;0>String(e.className).search("dhtmlx_wins_resizer")&&(e=null);if(!this._allowResize||!1==this._allowResizeGlobal||!e)return e&&"default"!=e.style.cursor&&(e.style.cursor="default"),"default"!=this.style.cursor&&(this.style.cursor="default"),this.canStartResize=!1,!0;if(null==d.resizingWin&&null==d.movingWin&&!this._isParked){if(d._isIPad)var f=b.touches[0].clientX,g=b.touches[0].clientY;
else f=_isIE||_isOpera?b.offsetX:b.layerX,g=_isIE||_isOpera?b.offsetY:b.layerY;f=d._engineAllowWindowResize(k,e,f,g);if(null==f)this.canStartResize=!1,"default"!=e.style.cursor&&(e.style.cursor="default"),"default"!=this.style.cursor&&(this.style.cursor="default");else{d.resizingDirs=f;f=b.clientX;g=b.clientY;switch(d.resizingDirs){case "border_left":e.style.cursor="w-resize";this.resizeOffsetX=this.x-f;break;case "border_right":e.style.cursor="e-resize";this.resizeOffsetXW=this.x+this.w-f;break;
case "border_top":e.style.cursor="n-resize";this.resizeOffsetY=this.y-g;break;case "border_bottom":e.style.cursor="n-resize";this.resizeOffsetYH=this.y+this.h-g;break;case "corner_left":e.style.cursor="sw-resize";this.resizeOffsetX=this.x-b.clientX;this.resizeOffsetYH=this.y+this.h-g;break;case "corner_up_left":e.style.cursor="nw-resize";this.resizeOffsetY=this.y-g;this.resizeOffsetX=this.x-f;break;case "corner_right":e.style.cursor="nw-resize";this.resizeOffsetXW=this.x+this.w-f;this.resizeOffsetYH=
this.y+this.h-g;break;case "corner_up_right":e.style.cursor="sw-resize",this.resizeOffsetY=this.y-g,this.resizeOffsetXW=this.x+this.w-f}this.canStartResize=!0;this.style.cursor=e.style.cursor;b.cancelBubble=!0;return b.returnValue=!1}}};k.onmousedown=function(b){this._justClicked=!0;var e=this;setTimeout(function(){e._justClicked=!1},300);d._getActive()!=this&&(d._makeActive(this),d._bringOnTop(this));this.canStartResize&&(d._blockSwitcher(!0),d.resizingWin=this,d._effects.resize||(d._carcass.x=d.resizingWin.x,
d._carcass.y=d.resizingWin.y,d._carcass.w=Number(d.resizingWin.w)+(_isIE?0:-2),d._carcass.h=Number(d.resizingWin.h)+(_isIE?0:-2),d._carcass.style.left=d._carcass.x+"px",d._carcass.style.top=d._carcass.y+"px",d._carcass.style.width=d._carcass.w+"px",d._carcass.style.height=d._carcass.h+"px",d._carcass.style.zIndex=d._getTopZIndex(!0)+1,d._carcass.style.cursor=this.style.cursor,d._carcass._keepInViewport=this._keepInViewport,d._carcass.style.display=""),d._vpcover.style.zIndex=d.resizingWin.style.zIndex-
1,d._vpcover.style.display="",this.callEvent("_onBeforeTryResize",[this]))};this._addDefaultButtons(k);k.button=function(b){var d=null;null!=this.btns[b]&&(d=this.btns[b]);return d};k.center=function(){d._centerWindow(this,!1)};k.centerOnScreen=function(){d._centerWindow(this,!0)};k._attachContent("empty",null);k._redraw=function(){d._engineRedrawWindowSize(this)};k.bringToTop();this._engineRedrawWindowSize(k);return this.wins[b]};this.zIndexStep=50;this._getTopZIndex=function(b){var d=0,e;for(e in this.wins)!0==
b?this.wins[e].zi>d&&(d=this.wins[e].zi):this.wins[e].zi>d&&!this.wins[e]._isSticked&&(d=this.wins[e].zi);return d};this.movingWin=null;this._moveWindow=function(b){if(null!=this.movingWin){if(!this.movingWin._allowMove||!this.movingWin._allowMoveGlobal)return;!0==this._effects.move?("move"!=this._engineGetWindowHeader(this.movingWin).style.cursor&&(this._engineGetWindowHeader(this.movingWin).style.cursor="move"),this._wasMoved=!0,this.movingWin.x=(this._isIPad?b.touches[0].clientX:b.clientX)+this.movingWin.moveOffsetX,
this.movingWin.y=(this._isIPad?b.touches[0].clientY:b.clientY)+this.movingWin.moveOffsetY,this._engineFixWindowPosInViewport(this.movingWin),this._engineRedrawWindowPos(this.movingWin)):(""!=this._carcass.style.display&&(this._carcass.style.display=""),"move"!=this._carcass.style.cursor&&(this._carcass.style.cursor="move"),"move"!=this._engineGetWindowHeader(this.movingWin).style.cursor&&(this._engineGetWindowHeader(this.movingWin).style.cursor="move"),this._carcass.x=(this._isIPad?b.touches[0].clientX:
b.clientX)+this.movingWin.moveOffsetX,this._carcass.y=(this._isIPad?b.touches[0].clientY:b.clientY)+this.movingWin.moveOffsetY,this._engineFixWindowPosInViewport(this._carcass),this._carcass.style.left=this._carcass.x+"px",this._carcass.style.top=this._carcass.y+"px")}if(null!=this.resizingWin&&this.resizingWin._allowResize){var d=b.clientX;b=b.clientY;if("border_left"==this.resizingDirs||"corner_left"==this.resizingDirs||"corner_up_left"==this.resizingDirs)if(this._effects.resize){var e=d+this.resizingWin.resizeOffsetX,
l=e>this.resizingWin.x?-1:1;newW=this.resizingWin.w+Math.abs(e-this.resizingWin.x)*l;newW<this.resizingWin.minW&&0>l?(this.resizingWin.x=this.resizingWin.x+this.resizingWin.w-this.resizingWin.minW,this.resizingWin.w=this.resizingWin.minW):(this.resizingWin.w=newW,this.resizingWin.x=e);this._engineRedrawWindowPos(this.resizingWin);this._engineRedrawWindowSize(this.resizingWin)}else e=d+this.resizingWin.resizeOffsetX,l=e>this._carcass.x?-1:1,newW=this._carcass.w+Math.abs(e-this._carcass.x)*l,newW>this.resizingWin.maxW&&
(newW=this.resizingWin.maxW,e=this._carcass.x+this._carcass.w-this.resizingWin.maxW),newW<this.resizingWin.minW&&0>l?(this._carcass.x=this._carcass.x+this._carcass.w-this.resizingWin.minW,this._carcass.w=this.resizingWin.minW):(this._carcass.w=newW,this._carcass.x=e),this._carcass.style.left=this._carcass.x+"px",this._carcass.style.width=this._carcass.w+"px";if("border_right"==this.resizingDirs||"corner_right"==this.resizingDirs||"corner_up_right"==this.resizingDirs)this._effects.resize?(e=d-(this.resizingWin.x+
this.resizingWin.w)+this.resizingWin.resizeOffsetXW,newW=this.resizingWin.w+e,newW<this.resizingWin.minW&&(newW=this.resizingWin.minW),this.resizingWin.w=newW,this._engineRedrawWindowPos(this.resizingWin),this._engineRedrawWindowSize(this.resizingWin)):(e=d-(this._carcass.x+this._carcass.w)+this.resizingWin.resizeOffsetXW,newW=this._carcass.w+e,newW<this.resizingWin.minW&&(newW=this.resizingWin.minW),"auto"!=this.resizingWin.maxW&&newW>this.resizingWin.maxW&&(newW=this.resizingWin.maxW),this._carcass.w=
newW,this._carcass.style.width=this._carcass.w+"px");if("border_bottom"==this.resizingDirs||"corner_left"==this.resizingDirs||"corner_right"==this.resizingDirs)this._effects.resize?(e=b-(this.resizingWin.y+this.resizingWin.h)+this.resizingWin.resizeOffsetYH,newH=this.resizingWin.h+e,newH<this.resizingWin.minH&&(newH=this.resizingWin.minH),this.resizingWin.h=newH,this._engineRedrawWindowPos(this.resizingWin),this._engineRedrawWindowSize(this.resizingWin)):(e=b-(this._carcass.y+this._carcass.h)+this.resizingWin.resizeOffsetYH,
newH=this._carcass.h+e,newH<this.resizingWin.minH&&(newH=this.resizingWin.minH),newH>this.resizingWin.maxH&&(newH=this.resizingWin.maxH),this._carcass.h=newH,this._carcass.style.height=this._carcass.h+"px");if(("border_top"==this.resizingDirs||"corner_up_right"==this.resizingDirs||"corner_up_left"==this.resizingDirs)&&!this._effects.resize)e=b+this.resizingWin.resizeOffsetY,l=e>this.resizingWin.y?-1:1,newH=this.resizingWin.h+Math.abs(e-this.resizingWin.y)*l,newH>this.resizingWin.maxH&&(newH=this.resizingWin.maxH,
e=this.resizingWin.y+this.resizingWin.h-this.resizingWin.maxH),newH<this.resizingWin.minH&&0>l?(this._carcass.y=this._carcass.y+this._carcass.h-this.resizingWin.minH,this._carcass.h=this.resizingWin.minH):(this._carcass.h=newH+(_isIE?0:-2),this._carcass.y=e),this._carcass.style.top=this._carcass.y+"px",this._carcass.style.height=this._carcass.h+"px"}};this._stopMove=function(){if(null!=this.movingWin){if(this._effects.move){var b=this.movingWin;this.movingWin=null;this._blockSwitcher(!1);this._engineGetWindowHeader(b).style.cursor=
"";_isFF&&(b.h++,d._engineRedrawWindowPos(b),b.h--,d._engineRedrawWindowPos(b))}else this._carcass.style.cursor="",this._carcass.style.display="none",b=this.movingWin,this._engineGetWindowHeader(b).style.cursor="",this.movingWin=null,this._blockSwitcher(!1),b.setPosition(parseInt(this._carcass.style.left),parseInt(this._carcass.style.top));this._vpcover.style.display="none";this._wasMoved&&(b.checkEvent("onMoveFinish")?b.callEvent("onMoveFinish",[b]):this.callEvent("onMoveFinish",[b]));this._wasMoved=
!1}null!=this.resizingWin&&(b=this.resizingWin,this.resizingWin=null,this._blockSwitcher(!1),this._effects.resize?b.updateNestedObjects():(this._carcass.style.display="none",b.setDimension(this._carcass.w+(_isIE?0:2),this._carcass.h+(_isIE?0:2)),b.setPosition(this._carcass.x,this._carcass.y)),b.vs[b.av].layout&&b.vs[b.av].layout.callEvent("onResize",[]),this._vpcover.style.display="none",b.checkEvent("onResizeFinish")?b.callEvent("onResizeFinish",[b]):this.callEvent("onResizeFinish",[b]))};this._fixWindowDimensionInViewport=
function(b){b.w<b.minW&&(b.w=b.minW);!b._isParked&&b.h<b.minH&&(b.h=b.minH)};this._bringOnTop=function(b){var d=b.zi,e=this._getTopZIndex(b._isSticked),l;for(l in this.wins)if(this.wins[l]!=b&&(b._isSticked||!b._isSticked&&!this.wins[l]._isSticked)&&this.wins[l].zi>d)this.wins[l].zi-=this.zIndexStep,this.wins[l].style.zIndex=this.wins[l].zi;b.zi=e;b.style.zIndex=b.zi};this._makeActive=function(b,d){for(var e in this.wins)if(this.wins[e]==b){var l=!1;"dhtmlx_window_active"!=this.wins[e].className&&
!d&&(l=!0);this.wins[e].className="dhtmlx_window_active";this._engineUpdateWindowIcon(this.wins[e],this.wins[e].icons[0]);!0==l&&(b.checkEvent("onFocus")?b.callEvent("onFocus",[b]):this.callEvent("onFocus",[b]))}else this.wins[e].className="dhtmlx_window_inactive",this._engineUpdateWindowIcon(this.wins[e],this.wins[e].icons[1])};this._getActive=function(){var b=null,d;for(d in this.wins)"dhtmlx_window_active"==this.wins[d].className&&(b=this.wins[d]);return b};this._centerWindow=function(b,d){if(!0!=
b._isMaximized){if(!0==d)var e=_isIE?document.body.offsetWidth:window.innerWidth,l=_isIE?document.body.offsetHeight:window.innerHeight;else e=this.vp==document.body?document.body.offsetWidth:Number(parseInt(this.vp.style.width))&&-1==String(this.vp.style.width).search("%")?parseInt(this.vp.style.width):this.vp.offsetWidth,l=this.vp==document.body?document.body.offsetHeight:Number(parseInt(this.vp.style.height))&&-1==String(this.vp.style.height).search("%")?parseInt(this.vp.style.height):this.vp.offsetHeight;
e=Math.round(e/2-b.w/2);l=Math.round(l/2-b.h/2);b.x=e;b.y=l;this._engineFixWindowPosInViewport(b);this._engineRedrawWindowPos(b)}};this._addDefaultButtons=function(b){var e=this._engineGetWindowButton(b,"stick");e.title=this.i18n.stick;e.isVisible=!1;e.style.display="none";e._isEnabled=!0;e.isPressed=!1;e.label="stick";e._doOnClick=function(){this.isPressed=!0;d._stickWindow(b)};var h=this._engineGetWindowButton(b,"sticked");h.title=this.i18n.unstick;h.isVisible=!1;h.style.display="none";h._isEnabled=
!0;h.isPressed=!1;h.label="sticked";h._doOnClick=function(){this.isPressed=!1;d._unstickWindow(b)};var l=this._engineGetWindowButton(b,"help");l.title=this.i18n.help;l.isVisible=!1;l.style.display="none";l._isEnabled=!0;l.isPressed=!1;l.label="help";l._doOnClick=function(){d._needHelp(b)};var m=this._engineGetWindowButton(b,"park");m.titleIfParked=this.i18n.parkdown;m.titleIfNotParked=this.i18n.parkup;m.title=m.titleIfNotParked;m.isVisible=!0;m._isEnabled=!0;m.isPressed=!1;m.label="park";m._doOnClick=
function(){d._parkWindow(b)};var k=this._engineGetWindowButton(b,"minmax1");k.title=this.i18n.maximize;k.isVisible=!0;k._isEnabled=!0;k.isPressed=!1;k.label="minmax1";k._doOnClick=function(){d._maximizeWindow(b)};var n=this._engineGetWindowButton(b,"minmax2");n.title=this.i18n.restore;n.isVisible=!1;n.style.display="none";n._isEnabled=!0;n.isPressed=!1;n.label="minmax2";n._doOnClick=function(){d._restoreWindow(b)};var s=this._engineGetWindowButton(b,"close");s.title=this.i18n.close;s.isVisible=!0;
s._isEnabled=!0;s.isPressed=!1;s.label="close";s._doOnClick=function(){d._closeWindow(b)};var u=this._engineGetWindowButton(b,"dock");u.title=this.i18n.dock;u.style.display="none";u.isVisible=!1;u._isEnabled=!0;u.isPressed=!1;u.label="dock";u._doOnClick=function(){};b._isSticked=!1;b._isParked=!1;b._isParkedAllowed=!0;b._isMaximized=!1;b._isDocked=!1;b.btns={};b.btns.stick=e;b.btns.sticked=h;b.btns.help=l;b.btns.park=m;b.btns.minmax1=k;b.btns.minmax2=n;b.btns.close=s;b.btns.dock=u;for(var v in b.btns)this._attachEventsOnButton(b,
b.btns[v])};this._attachEventsOnButton=function(b,e){this._isIPad?(e.ontouchstart=function(b){b.cancelBubble=!0;return b.returnValue=!1},e.ontouchend=function(d){d.cancelBubble=!0;d.returnValue=!1;if(!this._isEnabled)return!1;this.checkEvent("onClick")?this.callEvent("onClick",[b,this]):this._doOnClick();return!1}):(e.onmouseover=function(){this.className=this._isEnabled?"dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_"+(this.isPressed?"pressed":"default"):"dhtmlx_wins_btns_button dhtmlx_button_"+
this.label+"_disabled"},e.onmouseout=function(){this._isEnabled?(this.isPressed=!1,this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_default"):this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"},e.onmousedown=function(){this._isEnabled?(this.isPressed=!0,this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_pressed"):this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"},e.onmouseup=function(){if(this._isEnabled){var d=
this.isPressed;this.isPressed=!1;this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_default";d&&(this.checkEvent("onClick")?this.callEvent("onClick",[b,this]):this._doOnClick())}else this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"});e.show=function(){d._showButton(b,this.label)};e.hide=function(){d._hideButton(b,this.label)};e.enable=function(){d._enableButton(b,this.label)};e.disable=function(){d._disableButton(b,this.label)};e.isEnabled=function(){return this._isEnabled};
e.isHidden=function(){return!this.isVisible};dhtmlxEventable(e)};this._parkWindow=function(b,d){if(b._isParkedAllowed||d)if(!this.aU||!b.parkBusy)if(b._isParked)this.aU&&!d?(b.parkBusy=!0,this._doParkDown(b)):(b.h=b.lastParkH,this._engineRedrawWindowSize(b),this._engineDoOnWindowParkDown(b),b.updateNestedObjects(),b.btns.park.title=b.btns.park.titleIfNotParked,!0==b._allowResizeGlobal&&(this._enableButton(b,"minmax1"),this._enableButton(b,"minmax2")),b._isParked=!1,d||(b.checkEvent("onParkDown")?
b.callEvent("onParkDown",[b]):this.callEvent("onParkDown",[b])));else if(this.aU&&!d)if(b.lastParkH=-1==String(b.h).search(/\%$/)?b.h:b.offsetHeight,!0==b._allowResizeGlobal&&(this._disableButton(b,"minmax1"),this._disableButton(b,"minmax2")),this.aU)b.parkBusy=!0,this._doParkUp(b);else{var e=null!=b._skinParams?b._skinParams:this.skinParams[this.skin];b.h=e.header_height+e.border_bottom_height;b.btns.park.title=b.btns.park.titleIfParked}else b.lastParkH=-1==String(b.h).search(/\%$/)?b.h:b.offsetHeight,
b.h=this._engineGetWindowParkedHeight(b),this._engineRedrawWindowSize(b),this._engineDoOnWindowParkUp(b),b.btns.park.title=b.btns.park.titleIfParked,b._isParked=!0,d||(b.checkEvent("onParkUp")?b.callEvent("onParkUp",[b]):this.callEvent("onParkUp",[b]))};this._allowParking=function(b){b._isParkedAllowed=!0;this._enableButton(b,"park")};this._denyParking=function(b){b._isParkedAllowed=!1;this._disableButton(b,"park")};this.aU=!1;this.parkSpeed=this.parkStartSpeed=80;this.parkTM=null;this.parkTMTime=
5;this._doParkUp=function(b){-1!=String(b.h).search(/\%$/)&&(b.h=b.offsetHeight);b.h-=this.parkSpeed;var e=this._engineGetWindowParkedHeight(b);b.h<=e?(b.h=e,this._engineGetWindowButton(b,"park").title=this._engineGetWindowButton(b,"park").titleIfParked,b._isParked=!0,b.parkBusy=!1,this._engineRedrawWindowSize(b),this._engineDoOnWindowParkUp(b),b.checkEvent("onParkUp")?b.callEvent("onParkUp",[b]):this.callEvent("onParkUp",[b])):(this._engineRedrawWindowSize(b),this.parkTM=window.setTimeout(function(){d._doParkUp(b)},
this.parkTMTime))};this._doParkDown=function(b){b.h+=this.parkSpeed;b.h>=b.lastParkH?(b.h=b.lastParkH,this._engineGetWindowButton(b,"park").title=this._engineGetWindowButton(b,"park").titleIfNotParked,!0==b._allowResizeGlobal&&(this._enableButton(b,"minmax1"),this._enableButton(b,"minmax2")),b._isParked=!1,b.parkBusy=!1,this._engineRedrawWindowSize(b),b.updateNestedObjects(),this._engineDoOnWindowParkDown(b),b.checkEvent("onParkDown")?b.callEvent("onParkDown",[b]):this.callEvent("onParkDown",[b])):
(this._engineRedrawWindowSize(b),this.parkTM=window.setTimeout(function(){d._doParkDown(b)},this.parkTMTime))};this._enableButton=function(b,d){var e=this._engineGetWindowButton(b,d);e&&(e._isEnabled=!0,e.className="dhtmlx_wins_btns_button dhtmlx_button_"+e.label+"_default")};this._disableButton=function(b,d){var e=this._engineGetWindowButton(b,d);e&&(e._isEnabled=!1,e.className="dhtmlx_wins_btns_button dhtmlx_button_"+b.btns[d].label+"_disabled")};this._allowReszieGlob=function(b){b._allowResizeGlobal=
!0;this._enableButton(b,"minmax1");this._enableButton(b,"minmax2")};this._denyResize=function(b){b._allowResizeGlobal=!1;this._disableButton(b,"minmax1");this._disableButton(b,"minmax2")};this._maximizeWindow=function(b){if(!1!=b._allowResizeGlobal){var d=b._isParked;d&&this._parkWindow(b,!0);b.lastMaximizeX=b.x;b.lastMaximizeY=b.y;b.lastMaximizeW=b.w;b.lastMaximizeH=b.h;"auto"!=b.maxW&&"auto"!=b.maxW?(b.x=Math.round(b.x+(b.w-b.maxW)/2),b.y=Math.round(b.y+(b.h-b.maxH)/2),b._allowMove=!0):(b.x=0,b.y=
0,b._allowMove=!1);b._isMaximized=!0;b._allowResize=!1;b.w="auto"==b.maxW?this.vp==document.body?"100%":""!=this.vp.style.width&&-1==String(this.vp.style.width).search("%")?parseInt(this.vp.style.width):this.vp.offsetWidth:b.maxW;b.h="auto"==b.maxH?this.vp==document.body?"100%":""!=this.vp.style.height&&-1==String(this.vp.style.width).search("%")?parseInt(this.vp.style.height):this.vp.offsetHeight:b.maxH;this._hideButton(b,"minmax1");this._showButton(b,"minmax2");this._engineRedrawWindowPos(b);d?
this._parkWindow(b,!0):(this._engineRedrawWindowSize(b),b.updateNestedObjects());b.checkEvent("onMaximize")?b.callEvent("onMaximize",[b]):this.callEvent("onMaximize",[b])}};this._restoreWindow=function(b){if(!1!=b._allowResizeGlobal){b.layout&&b.layout._defineWindowMinDimension(b);var d=b._isParked;d&&this._parkWindow(b,!0);"auto"!=b.maxW&&"auto"!=b.maxW?(b.x=Math.round(b.x+(b.w-b.lastMaximizeW)/2),b.y=Math.round(b.y+(b.h-b.lastMaximizeH)/2)):(b.x=b.lastMaximizeX,b.y=b.lastMaximizeY);b.w=b.lastMaximizeW;
b.h=b.lastMaximizeH;b._isMaximized=!1;b._allowMove=b._allowMoveGlobal;b._allowResize=!0;this._fixWindowDimensionInViewport(b);this._hideButton(b,"minmax2");this._showButton(b,"minmax1");this._engineRedrawWindowPos(b);d?this._parkWindow(b,!0):(this._engineRedrawWindowSize(b),b.updateNestedObjects());b.checkEvent("onMinimize")?b.callEvent("onMinimize",[b]):this.callEvent("onMinimize",[b])}};this._showButton=function(b,d){var e=this._engineGetWindowButton(b,d);e&&(e.isVisible=!0,e.style.display="",e.style.visibility=
"visible",this._engineRedrawWindowTitle(b))};this._hideButton=function(b,d){var e=this._engineGetWindowButton(b,d);e&&(e.isVisible=!1,e.style.display="none",e.style.visibility="hidden",this._engineRedrawWindowTitle(b))};this._showWindow=function(b){b.style.display="";b.checkEvent("onShow")?b.callEvent("onShow",[b]):this.callEvent("onShow",[b]);var d=this._getActive();null==d?(this._bringOnTop(b),this._makeActive(b)):this._isWindowHidden(d)&&(this._bringOnTop(b),this._makeActive(b))};this._hideWindow=
function(b){b.style.display="none";b.checkEvent("onHide")?b.callEvent("onHide",[b]):this.callEvent("onHide",[b]);b=this.getTopmostWindow(!0);null!=b&&(this._bringOnTop(b),this._makeActive(b))};this._isWindowHidden=function(b){return"none"==b.style.display};this._closeWindow=function(b){this._focusFixIE&&(this._focusFixIE.style.top=(this.vp==document.body?0:getAbsoluteTop(this.vp))+b.y+"px",this._focusFixIE.focus());if(b.checkEvent("onClose")){if(!b.callEvent("onClose",[b]))return}else if(!this.callEvent("onClose",
[b]))return;this._removeWindowGlobal(b);b={zi:0};for(var d in this.wins)this.wins[d].zi>b.zi&&(b=this.wins[d]);null!=b&&this._makeActive(b)};this._needHelp=function(b){b.checkEvent("onHelp")?b.callEvent("onHelp",[b]):this.callEvent("onHelp",[b])};this._setWindowIcon=function(b,d,e){b.iconsPresent=!0;b.icons[0]=this.imagePath+d;b.icons[1]=this.imagePath+e;this._engineUpdateWindowIcon(b,b.icons[b.isOnTop()?0:1])};this._getWindowIcon=function(b){return b.iconsPresent?[b.icons[0],b.icons[1]]:[null,null]};
this._clearWindowIcons=function(b){b.iconsPresent=!1;b.icons[0]=this.imagePath+this.pathPrefix+this.skin+"/active/icon_blank.gif";b.icons[1]=this.imagePath+this.pathPrefix+this.skin+"/inactive/icon_blank.gif";this._engineUpdateWindowIcon(b,b.icons[b.isOnTop()?0:1])};this._restoreWindowIcons=function(b){b.iconsPresent=!0;b.icons[0]=this.imagePath+this.pathPrefix+this.skin+"/active/icon_normal.gif";b.icons[1]=this.imagePath+this.pathPrefix+this.skin+"/inactive/icon_normal.gif";this._engineUpdateWindowIcon(b,
b.icons["dhtmlx_window_active"==b.className?0:1])};this._attachWindowContentTo=function(b,d,e,l){var m=this._engineGetWindowContent(b).parentNode;m.parentNode.removeChild(m);b.hide();m.style.left="0px";m.style.top="0px";m.style.width=(null!=e?e:d.offsetWidth)+"px";m.style.height=(null!=l?l:d.offsetHeight)+"px";m.style.position="relative";d.appendChild(m);this._engineGetWindowContent(b).style.width=m.style.width;this._engineGetWindowContent(b).style.height=m.style.height};this._setWindowToFullScreen=
function(b,d){if(!0==d){var e=b._content;e.parentNode.removeChild(e);b.hide();b._isFullScreened=!0;e.style.left="0px";e.style.top="0px";e.style.width=document.body.offsetWidth-(_isIE?4:0)+"px";e.style.height=0==document.body.offsetHeight?window.innerHeight?window.innerHeight+"px":document.body.scrollHeight+"px":document.body.offsetHeight-(_isIE?4:0)+"px";e.style.position="absolute";document.body.appendChild(e)}else if(!1==d){var e=b.childNodes[0].childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1],
l=b._content;document.body.removeChild(l);e.appendChild(l);b._isFullScreened=!1;b.setDimension(b.w,b.h);b.show();b.bringToTop();b.center()}b.updateNestedObjects()};this._isWindowOnTop=function(b){return this.getTopmostWindow()==b};this._bringOnBottom=function(b){for(var d in this.wins)this.wins[d].zi<b.zi&&(this.wins[d].zi+=this.zIndexStep,this.wins[d].style.zIndex=this.wins[d].zi);b.zi=50;b.style.zIndex=b.zi;this._makeActive(this.getTopmostWindow())};this._isWindowOnBottom=function(b){var d=!0,e;
for(e in this.wins)this.wins[e]!=b&&(d=d&&this.wins[e].zi>b.zi);return d};this._stickWindow=function(b){b._isSticked=!0;this._hideButton(b,"stick");this._showButton(b,"sticked");this._bringOnTop(b)};this._unstickWindow=function(b){b._isSticked=!1;this._hideButton(b,"sticked");this._showButton(b,"stick");this._bringOnTopAnyStickedWindows()};this._addUserButton=function(b,d,e,l){e=this._engineAddUserButton(b,d,e);e.title=l;e.isVisible=!0;e._isEnabled=!0;e.isPressed=!1;e.label=d;b.btns[d]=e;e._doOnClick=
function(){};this._attachEventsOnButton(b,e)};this._removeUserButton=function(b,d){this._removeButtonGlobal(b,d)};this._blockSwitcher=function(b){for(var d in this.wins)!0==b?this.wins[d].showCoverBlocker():this.wins[d].hideCoverBlocker()};this.modalWin=this.resizingWin=null;this.resizingDirs="none";_isIE&&(this._focusFixIE=document.createElement("INPUT"),this._focusFixIE.className="dhx_windows_ieonclosefocusfix",this._focusFixIE.style.position="absolute",this._focusFixIE.style.width="1px",this._focusFixIE.style.height=
"1px",this._focusFixIE.style.border="none",this._focusFixIE.style.background="none",this._focusFixIE.style.left="-10px",this._focusFixIE.style.fontSize="1px",document.body.appendChild(this._focusFixIE));this._createViewport();this._doOnMouseUp=function(b){null!=d&&d._stopMove()};this._doOnMoseMove=function(b){b=b||event;null!=d&&d._moveWindow(b)};this._resizeTM=null;this._resizeTMTime=200;this._lw=null;this._doOnResize=function(){d._lw!=document.documentElement.clientHeight&&(window.clearTimeout(d._resizeTM),
d._resizeTM=window.setTimeout(function(){d._autoResizeViewport()},d._resizeTMTime));d._lw=document.documentElement.clientHeight};this._doOnUnload=function(){d.unload()};this._doOnSelectStart=function(e){e=e||event;if((b=e.target||e.srcElement)&&"INPUT"==b.tagName)return e.returnValue=!0;if(null!=d.movingWin||null!=d.resizingWin)e.returnValue=!1};_isIE&&("undefined"!=typeof window.addEventListener?document.body.addEventListener("selectstart",this._doOnSelectStart,!1):document.body.attachEvent("onselectstart",
this._doOnSelectStart));dhtmlxEvent(window,"resize",this._doOnResize);dhtmlxEvent(document.body,"unload",this._doOnUnload);this._isIPad?(document.addEventListener("touchmove",this._doOnMoseMove,!1),document.addEventListener("touchend",this._doOnMouseUp,!1)):(dhtmlxEvent(document.body,"mouseup",this._doOnMouseUp),dhtmlxEvent(this.vp,"mousemove",this._doOnMoseMove),dhtmlxEvent(this.vp,"mouseup",this._doOnMouseUp));this._setWindowModal=function(b,d){!0==d?(this._makeActive(b),this._bringOnTop(b),this.modalWin=
b,b._isModal=!0,this.modalCoverI.style.zIndex=b.zi-2,this.modalCoverI.style.display="",this.modalCoverD.style.zIndex=b.zi-2,this.modalCoverD.style.display=""):(this.modalWin=null,b._isModal=!1,this.modalCoverI.style.zIndex=0,this.modalCoverI.style.display="none",this.modalCoverD.style.zIndex=0,this.modalCoverD.style.display="none")};this._bringOnTopAnyStickedWindows=function(){var b=[],d;for(d in this.wins)this.wins[d]._isSticked&&(b[b.length]=this.wins[d]);for(var e=0;e<b.length;e++)this._bringOnTop(b[e]);
if(0==b.length)for(d in this.wins)"dhtmlx_window_active"==this.wins[d].className&&this._bringOnTop(this.wins[d])};this.unload=function(){this._clearAll()};this._removeButtonGlobal=function(b,d){if(b.btns[d]){var e=b.btns[d];e.title=null;e.isVisible=null;e._isEnabled=null;e.isPressed=null;e.label=null;e._doOnClick=null;e.attachEvent=null;e.callEvent=null;e.checkEvent=null;e.detachEvent=null;e.disable=null;e.enable=null;e.eventCatcher=null;e.hide=null;e.isEnabled=null;e.isHidden=null;e.show=null;e.onmousedown=
null;e.onmouseout=null;e.onmouseover=null;e.onmouseup=null;e.parentNode&&e.parentNode.removeChild(e);b.btns[d]=null}};this._removeWindowGlobal=function(b){this.modalWin==b&&this._setWindowModal(b,!1);var d=b.idd;b.coverBlocker().onselectstart=null;b._dhxContDestruct();this._engineDiableOnSelectInWindow(b,!1);this._engineGetWindowHeader(b).onmousedown=null;this.resizingWin=this.movingWin=this._engineGetWindowHeader(b).ondblclick=null;for(var e in b.btns)this._removeButtonGlobal(b,e);b.btns=null;b._adjustToContent=
null;b._doOnAttachMenu=null;b._doOnAttachStatusBar=null;b._doOnAttachToolbar=null;b._redraw=null;b.addUserButton=null;b.allowMove=null;b.allowPark=null;b.allowResize=null;b.attachEvent=null;b.bringToBottom=null;b.bringToTop=null;b.callEvent=null;b.center=null;b.centerOnScreen=null;b.checkEvent=null;b.clearIcon=null;b.close=null;b.denyMove=null;b.denyPark=null;b.denyResize=null;b.detachEvent=null;b.eventCatcher=null;b.getDimension=null;b.getIcon=null;b.getId=null;b.getMaxDimension=null;b.getMinDimension=
null;b.getPosition=null;b.getText=null;b.hide=null;b.hideHeader=null;b.isHidden=null;b.isMaximized=null;b.isModal=null;b.isMovable=null;b.isOnBottom=null;b.isOnTop=null;b.isParkable=null;b.isParked=null;b.isResizable=null;b.isSticked=null;b.keepInViewport=null;b.maximize=null;b.minimize=null;b.park=null;b.progressOff=null;b.progressOn=null;b.removeUserButton=null;b.restoreIcon=null;b.setDimension=null;b.setIcon=null;b.setMaxDimension=null;b.setMinDimension=null;b.setModal=null;b.setPosition=null;
b.setText=null;b.setToFullScreen=null;b.show=null;b.showHeader=null;b.stick=null;b.unstick=null;b.onmousemove=null;b.onmousedown=null;b.icons=null;b.button=null;b._dhxContDestruct=null;b.dhxContGlobal.obj=null;b.dhxContGlobal.setContent=null;b.dhxContGlobal.dhxcont=null;b.dhxContGlobal=null;if(b._frame){for(;0<b._frame.childNodes.length;)b._frame.removeChild(b._frame.childNodes[0]);b._frame=null}this._parseNestedForEvents(b);b._content=null;b.innerHTML="";b.parentNode.removeChild(b);this.wins[d]=
null;delete this.wins[d]};this._removeEvents=function(b){b.onmouseover=null;b.onmouseout=null;b.onmousemove=null;b.onclick=null;b.ondblclick=null;b.onmouseenter=null;b.onmouseleave=null;b.onmouseup=null;b.onmousewheel=null;b.onmousedown=null;b.onselectstart=null;b.onfocus=null;b.style.display=""};this._parseNestedForEvents=function(b){this._removeEvents(b);for(var d=0;d<b.childNodes.length;d++)null!=b.childNodes[d].tagName&&this._parseNestedForEvents(b.childNodes[d])};this._clearAll=function(){this._clearDocumentEvents();
for(var b in this.wins)this._removeWindowGlobal(this.wins[b]);this.wins=null;for(this._parseNestedForEvents(this._carcass);0<this._carcass.childNodes.length;)this._carcass.removeChild(this._carcass.childNodes[0]);this._carcass.onselectstart=null;this._carcass.parentNode.removeChild(this._carcass);this._carcass=null;this._parseNestedForEvents(this._vpcover);this._vpcover.parentNode.removeChild(this._vpcover);this._vpcover=null;this._parseNestedForEvents(this.modalCoverD);this.modalCoverD.parentNode.removeChild(this.modalCoverD);
this.modalCoverD=null;this._parseNestedForEvents(this.modalCoverI);this.modalCoverI.parentNode.removeChild(this.modalCoverI);this.modalCoverI=null;!0==this.vp.autocreated&&this.vp.parentNode.removeChild(this.vp);this.vp=null;for(b in this.skinParams)delete this.skinParams[b];d=this.window=this.unload=this.setViewport=this.setSkin=this.setImagePath=this.setEffect=this.isWindow=this.getTopmostWindow=this.getEffect=this.getBottommostWindow=this.forEachWindow=this.findByText=this.eventCatcher=this.ae=
this.detachEvent=this.createWindow=this.checkEvent=this.callEvent=this.attachViewportTo=this.attachEvent=this._unstickWindow=this._stopMove=this._stickWindow=this._showWindow=this._showButton=this._setWindowToFullScreen=this._setWindowModal=this._setWindowIcon=this._restoreWindowIcons=this._restoreWindow=this._removeWindowGlobal=this._removeUserButton=this._removeEvents=this._removeButtonGlobal=this._parseNestedForEvents=this._parkWindow=this._needHelp=this._moveWindow=this._maximizeWindow=this._makeActive=
this._isWindowOnTop=this._isWindowOnBottom=this._isWindowHidden=this._hideWindow=this._hideButton=this._getWindowIcon=this._getTopZIndex=this._getActive=this._genStr=this._fixWindowDimensionInViewport=this._engineUpdateWindowIcon=this._engineSwitchWindowProgress=this._engineSwitchWindowHeader=this._engineSetWindowBody=this._engineRedrawWindowTitle=this._engineRedrawWindowSize=this._engineRedrawWindowPos=this._engineRedrawSkin=this._engineGetWindowParkedHeight=this._engineGetWindowLabel=this._engineGetWindowHeaderState=
this._engineGetWindowHeader=this._engineGetWindowContent=this._engineGetWindowButton=this._engineFixWindowPosInViewport=this._engineDoOnWindowParkUp=this._engineDoOnWindowParkDown=this._engineDiableOnSelectInWindow=this._engineCheckHeaderMouseDown=this._engineAllowWindowResize=this._engineAdjustWindowToContent=this._engineAddUserButton=this._enableButton=this._doParkUp=this._doParkDown=this._doOnUnload=this._doOnSelectStart=this._doOnResize=this._doOnMouseUp=this._doOnMoseMove=this._disableButton=
this._dhx_Engine=this._denyResize=this._denyParking=this._createViewport=this._closeWindow=this._clearWindowIcons=this._clearDocumentEvents=this._clearAll=this._centerWindow=this._bringOnTopAnyStickedWindows=this._bringOnTop=this._bringOnBottom=this._blockSwitcher=this._autoResizeViewport=this._attachWindowContentTo=this._attachEventsOnButton=this._allowReszieGlob=this._allowParking=this._addUserButton=this._addDefaultButtons=this.wins=this._engineSkinParams=this._effects=this.skinParams=null};this._clearDocumentEvents=
function(){dhtmlx._detachEvent(window,"onresize",this._doOnResize);dhtmlx._detachEvent(document.body,"onselectstart",this._doOnSelectStart);dhtmlx._detachEvent(document.body,"onmouseup",this._doOnMouseUp);dhtmlx._detachEvent(document.body,"onunload",this._doOnUnload);dhtmlx._detachEvent(this.vp,"onmousemove",this._doOnMoseMove);dhtmlx._detachEvent(this.vp,"onmouseup",this._doOnMouseUp)};this._genStr=function(b){for(var d="",e=0;e<b;e++)d+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(61*
Math.random()));return d};dhtmlxEventable(this);return this}alert(this.i18n.noenginealert)}else alert(this.i18n.dhx)}
dhtmlXWindows.prototype._dhx_Engine=function(){this._engineEnabled=!0;this._engineName="dhx";this._engineSkinParams={dhx_blue:{hh:21,lbw:2,rbw:2,lch:2,lcw:14,rch:14,rcw:14,bbh:2,mnh:23,tbh:25,sbh:20,noh_t:null,noh_h:null},dhx_black:{hh:21,lbw:2,rbw:2,lch:2,lcw:14,rch:14,rcw:14,bbh:2,mnh:23,tbh:25,sbh:20,noh_t:null,noh_h:null},dhx_skyblue:{hh:29,lbw:2,rbw:2,lch:2,lcw:14,rch:14,rcw:14,bbh:2,mnh:23,tbh:25,sbh:20,noh_t:5,noh_h:-10},dhx_web:{hh:27,lbw:5,rbw:5,lch:5,lcw:14,rch:14,rcw:14,bbh:5,mnh:23,tbh:25,
sbh:20,noh_t:5,noh_h:-10}};this._isIE6=!1;_isIE&&(this._isIE6=null==window.XMLHttpRequest?!0:!1);this._isIE6=!0;this._engineSetWindowBody=function(b){b.innerHTML="<div iswin='1' class='dhtmlx_wins_body_outer' style='position: relative;'>"+(this._isIE6?"<iframe frameborder='0' style='background-color:transparent' class='dhtmlx_wins_ie6_cover_fix' onload='this.contentWindow.document.body.style.overflow=\"hidden\";'></iframe>":"")+"<div class='dhtmlx_wins_icon'></div><div class='dhtmlx_wins_progress'></div><div class='dhtmlx_wins_title'>dhtmlxWindow</div><div class='dhtmlx_wins_btns'><div class='dhtmlx_wins_btns_button dhtmlx_button_sticked_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_stick_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_help_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_park_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_minmax2_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_minmax1_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_close_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_dock_default'></div></div><div class='dhtmlx_wins_body_inner'></div><div winResT='yes' class='dhtmlx_wins_resizer_t' style='display:none;'></div><div winResL='yes' class='dhtmlx_wins_resizer_l'></div><div winResR='yes' class='dhtmlx_wins_resizer_r'></div><div winResB='yes' class='dhtmlx_wins_resizer_b'></div><div class='white_line'></div><div class='white_line2'></div></div>";
b.dhxContGlobal=new dhtmlXContainer(b);"dhx_skyblue"==this.skin&&(b.dhxContGlobal.obj._offsetWidth=-10,b.dhxContGlobal.obj._offsetHeight=-5,b.dhxContGlobal.obj._offsetLeft=5,b.dhxContGlobal.obj._offsetHeightSaved=b.dhxContGlobal.obj._offsetHeight);"dhx_web"==this.skin&&(b.dhxContGlobal.obj._offsetWidth=-10,b.dhxContGlobal.obj._offsetHeight=-5,b.dhxContGlobal.obj._offsetLeft=5,b.dhxContGlobal.obj._offsetHeightSaved=b.dhxContGlobal.obj._offsetHeight);b.skin=this.skin;b.dhxContGlobal.setContent(b.childNodes[0].childNodes[this._isIE6?
5:4]);b.coverBlocker().onselectstart=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0}};this._engineDiableOnSelectInWindow=function(b,d){var e=[];e[0]=b.childNodes[0].childNodes[this._isIE6?1:0];e[1]=b.childNodes[0].childNodes[this._isIE6?2:1];e[2]=b.childNodes[0].childNodes[this._isIE6?3:2];e[3]=b.childNodes[0].childNodes[this._isIE6?4:3];e[4]=b.childNodes[0].childNodes[this._isIE6?6:5];e[5]=b.childNodes[0].childNodes[this._isIE6?7:6];e[6]=b.childNodes[0].childNodes[this._isIE6?8:7];e[7]=
b.childNodes[0].childNodes[this._isIE6?9:8];for(var f=0;f<e.length;f++)e[f].onselectstart=d?function(b){b=b||event;return b.returnValue=!1}:null};this._engineGetWindowHeader=function(b){b.childNodes[0].idd=b.idd;return b.childNodes[0]};this._engineRedrawWindowSize=function(b){b.style.width=-1==String(b.w).search("%")?b.w+"px":b.w;b.style.height=-1==String(b.h).search("%")?b.h+"px":b.h;var d=b.childNodes[0];d.style.width=b.clientWidth+"px";d.style.height=b.clientHeight+"px";d.offsetWidth>b.clientWidth&&
(d.style.width=2*b.clientWidth-d.offsetWidth+"px");if(d.offsetHeight>b.clientHeight){var e=2*b.clientHeight-d.offsetHeight;0>e&&(e=0);d.style.height=e+"px"}e=!0==b._noHeader?b._hdrSize:this._engineSkinParams[this.skin].hh;this._engineRedrawWindowTitle(b);b.adjustContent(d,e)};this._engineRedrawWindowPos=function(b){b._isFullScreened||(b.style.left=b.x+"px",b.style.top=b.y+"px")};this._engineFixWindowPosInViewport=function(b){var d=!0==b._noHeader?b._hdrSize:this._engineSkinParams[this.skin].hh;b._keepInViewport?
(0>b.x&&(b.x=0),b.x+b.w>this.vp.offsetWidth&&(b.x=this.vp.offsetWidth-b.w),b.y+b.h>this.vp.offsetHeight&&(b.y=this.vp.offsetHeight-b.h),0>b.y&&(b.y=0)):(b.y+d>this.vp.offsetHeight&&(b.y=this.vp.offsetHeight-d),0>b.y&&(b.y=0),0>b.x+b.w-10&&(b.x=10-b.w),b.x>this.vp.offsetWidth-10&&(b.x=this.vp.offsetWidth-10))};this._engineCheckHeaderMouseDown=function(b,d){if(this._isIPad){var e=d.touches[0].clientY,f=d.target||d.srcElement;return f==b.childNodes[0]||f==b.childNodes[0].childNodes[0]||f==b.childNodes[0].childNodes[2]||
f==b.childNodes[0].childNodes[3]?!0:!1}e=_isIE||_isOpera?d.offsetY:d.layerY;f=d.target||d.srcElement;return e<=(!0==b._noHeader?b._hdrSize:this._engineSkinParams[this.skin].hh)&&(f==b.childNodes[0]||f==b.childNodes[0].childNodes[this._isIE6?1:0]||f==b.childNodes[0].childNodes[this._isIE6?3:2]||f==b.childNodes[0].childNodes[this._isIE6?4:3])?!0:!1};this._engineGetWindowContent=function(){alert("_engineGetWindowContent")};this._engineGetWindowButton=function(b,d){for(var e=null,f="dhtmlx_button_"+String(d).toLowerCase()+
"_",g=0;g<b.childNodes[0].childNodes[this._isIE6?4:3].childNodes.length;g++){var h=b.childNodes[0].childNodes[this._isIE6?4:3].childNodes[g];-1!=String(h.className).search(f)&&(e=h)}return e};this._engineAddUserButton=function(b,d,e){isNaN(e)&&(e=0);var f=document.createElement("DIV");f.className="dhtmlx_wins_btns_button dhtmlx_button_"+d+"_default";d=b.childNodes[0].childNodes[this._isIE6?4:3];e=d.childNodes.length-e;0>e&&(e=0);e>=d.childNodes.length?d.appendChild(f):d.insertBefore(f,d.childNodes[e]);
this._engineRedrawWindowTitle(b);return f};this._engineGetWindowParkedHeight=function(){return this._engineSkinParams[this.skin].hh+1};this._engineDoOnWindowParkDown=function(b){b.childNodes[0].childNodes[this._isIE6?6:5].style.display=!0==b._noHeader?"":"none";b.childNodes[0].childNodes[this._isIE6?7:6].style.display="";b.childNodes[0].childNodes[this._isIE6?8:7].style.display="";b.childNodes[0].childNodes[this._isIE6?9:8].style.display=""};this._engineDoOnWindowParkUp=function(b){b.childNodes[0].childNodes[this._isIE6?
6:5].style.display="none";b.childNodes[0].childNodes[this._isIE6?7:6].style.display="none";b.childNodes[0].childNodes[this._isIE6?8:7].style.display="none";b.childNodes[0].childNodes[this._isIE6?9:8].style.display="none"};this._engineUpdateWindowIcon=function(b,d){b.childNodes[0].childNodes[this._isIE6?1:0].style.backgroundImage="url('"+d+"')"};this._engineAllowWindowResize=function(b,d,e,f){if(d.getAttribute){var g=this._engineSkinParams[this.skin],h=!0==b._noHeader?b._hdrSize:this._engineSkinParams[this.skin].hh;
return null!=d.getAttribute("winResL")&&"yes"==d.getAttribute("winResL")&&f>=h?f>=b.h-g.lch?"corner_left":f<=g.lch&&!0==b._noHeader?"corner_up_left":"border_left":null!=d.getAttribute("winResR")&&"yes"==d.getAttribute("winResR")&&f>=h?f>=b.h-g.rch?"corner_right":f<=g.rch&&!0==b._noHeader?"corner_up_right":"border_right":null!=d.getAttribute("winResT")&&"yes"==d.getAttribute("winResT")&&!0==b._noHeader?e<=g.lcw?"corner_up_left":e>=b.w-g.rcw?"corner_up_right":"border_top":null!=d.getAttribute("winResB")&&
"yes"==d.getAttribute("winResB")?e<=g.lcw?"corner_left":e>=b.w-g.rcw?"corner_right":"border_bottom":null}};this._engineAdjustWindowToContent=function(b,d,e){b.setDimension(d+b.w-b.vs[b.av].dhxcont.clientWidth,e+b.h-b.vs[b.av].dhxcont.clientHeight)};this._engineRedrawSkin=function(){this.vp.className="dhtmlx_winviewport dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");var b=this._engineSkinParams[this.skin],d;for(d in this.wins)"dhx_skyblue"==this.skin?(this.wins[d].dhxContGlobal.obj._offsetTop=
this.wins[d]._noHeader?b.noh_t:null,this.wins[d].dhxContGlobal.obj._offsetWidth=-10,this.wins[d].dhxContGlobal.obj._offsetHeight=this.wins[d]._noHeader?b.noh_h:-5,this.wins[d].dhxContGlobal.obj._offsetLeft=5,this.wins[d].dhxContGlobal.obj._offsetHeightSaved=-5):(this.wins[d].dhxContGlobal.obj._offsetWidth=null,this.wins[d].dhxContGlobal.obj._offsetHeight=null,this.wins[d].dhxContGlobal.obj._offsetLeft=null,this.wins[d].dhxContGlobal.obj._offsetTop=null,this.wins[d].dhxContGlobal.obj._offsetHeightSaved=
null),this.wins[d].skin=this.skin,this._restoreWindowIcons(this.wins[d]),this._engineRedrawWindowSize(this.wins[d])};this._engineSwitchWindowProgress=function(b,d){!0==d?(b.childNodes[0].childNodes[this._isIE6?1:0].style.display="none",b.childNodes[0].childNodes[this._isIE6?2:1].style.display=""):(b.childNodes[0].childNodes[this._isIE6?2:1].style.display="none",b.childNodes[0].childNodes[this._isIE6?1:0].style.display="")};this._engineSwitchWindowHeader=function(b,d){b._noHeader||(b._noHeader=!1);
if(d==b._noHeader){b._noHeader=!0==d?!1:!0;b._hdrSize=0;b.childNodes[0].childNodes[this._isIE6?5:4].className="dhtmlx_wins_body_inner"+(b._noHeader?" dhtmlx_wins_no_header":"");b.childNodes[0].childNodes[this._isIE6?6:5].style.display=b._noHeader?"":"none";b.childNodes[0].childNodes[this._isIE6?1:0].style.display=b._noHeader?"none":"";b.childNodes[0].childNodes[this._isIE6?3:2].style.display=b._noHeader?"none":"";b.childNodes[0].childNodes[this._isIE6?4:3].style.display=b._noHeader?"none":"";var e=
this._engineSkinParams[this.skin];b._noHeader?(b.dhxContGlobal.obj._offsetHeightSaved=b.dhxContGlobal.obj._offsetHeight,b.dhxContGlobal.obj._offsetHeight=e.noh_h,b.dhxContGlobal.obj._offsetTop=e.noh_t):(b.dhxContGlobal.obj._offsetHeight=b.dhxContGlobal.obj._offsetHeightSaved,b.dhxContGlobal.obj._offsetTop=null);this._engineRedrawWindowSize(b)}};this._engineGetWindowHeaderState=function(b){return b._noHeader?!0:!1};this._engineGetWindowLabel=function(b){return b.childNodes[0].childNodes[this._isIE6?
3:2]};this._engineRedrawWindowTitle=function(b){if(!0!==b._noHeader){var d=b.offsetWidth-b.childNodes[0].childNodes[this._isIE6?1:0].offsetWidth-b.childNodes[0].childNodes[this._isIE6?4:3].offsetWidth-24;0>d?d="100%":d+="px";b.childNodes[0].childNodes[this._isIE6?3:2].style.width=d}}};
dhtmlXWindows.prototype.i18n={dhxcontaler:"dhtmlxcontainer.js is missed on the page",noenginealert:"No dhtmlxWindows engine was found.",stick:"Stick",unstick:"Unstick",help:"Help",parkdown:"Park Down",parkup:"Park Up",maximize:"Maximize",restore:"Restore",close:"Close",dock:"Dock"};
(function(){dhtmlx.extend_api("dhtmlXWindows",{_init:function(){return[]},_patch:function(d){d.old_createWindow=d.createWindow;d.createWindow=function(d){if(1<arguments.length)return this.old_createWindow.apply(this,arguments);var f=this.old_createWindow(d.id,d.x||d.left,d.y||d.top,d.width,d.height);f.allowMoveA=function(b){b?this.allowMove():this.denyMove()};f.allowParkA=function(b){b?this.allowPark():this.denyPark()};f.allowResizeA=function(b){b?this.allowResize():this.denyResize()};for(var g in d)if(b[g])f[b[g]](d[g]);
else 0==g.indexOf("on")&&f.attachEvent(g,d[g]);return f}},animation:"setEffect",image_path:"setImagePath",skin:"setSkin",viewport:"_viewport",wins:"_wins"},{_viewport:function(b){b.object?(this.ae(!1),this.attachViewportTo(b.object)):(this.ae(!1),this.setViewport(b.left,b.top,b.width,b.height,b.parent))},_wins:function(b){for(var e=0;e<b.length;e++){var f=b[e];this.createWindow(f.id,f.left,f.top,f.width,f.height);f.text&&this.window(f.id).setText(f.text);f.keep_in_viewport&&this.window(f.id).keepInViewport(!0);
f.deny_resize&&this.window(f.id).denyResize();f.deny_park&&this.window(f.id).denyPark();f.deny_move&&this.window(f.id).denyMove()}}});var b={move:"allowMoveA",park:"allowParkA",resize:"allowResizeA",center:"center",modal:"setModal",caption:"setText",header:"showHeader"}})();dhtmlx=function(b){for(var d in b)dhtmlx[d]=b[d];return dhtmlx};dhtmlx.defer=function(b,d){setTimeout(function(){b()},d)};
dhtmlx.concat=function(b,d){for(var e=","+b.join(",")+",",f=[],g=0;g<d.length;g++)-1==e.indexOf(","+d[g]+",")&&f.push(d[g]);return b.concat(f)};
dhtmlx.extend_api=function(b,d,e){var f=window[b];f&&(window[b]=function(b){if(b&&"object"==typeof b&&!b.tagName){var e=f.apply(this,d._init?d._init(b):arguments),l;for(l in dhtmlx)if(d[l])this[d[l]](dhtmlx[l]);for(l in b)if(d[l])this[d[l]](b[l]);else 0==l.indexOf("on")&&this.attachEvent(l,b[l])}else e=f.apply(this,arguments);d._patch&&d._patch(this);return e||this},window[b].prototype=f.prototype,e&&dhtmlXHeir(window[b].prototype,e))};
dhtmlx.simpleRandomId=function(){var b=new Date,d=b.getFullYear()+"",d=d+b.getMonth(),d=d+b.getDate(),d=d+b.getHours(),d=d+b.getMinutes(),d=d+b.getSeconds();return d+=b.getMilliseconds()};dhtmlx.progressOn=function(){dhtmlx._progressControlGlobal(!0)};dhtmlx.progressOff=function(){dhtmlx._progressControlGlobal(!1)};
dhtmlx._hideTreeWin=function(b){b=b||event;b=b.target||b.srcElement;if(!b||!("DIV"==b.tagName&&"dhx_carcass_resmove"==b.className))for(var d in dhtmlx.treeWin)dhtmlx.treeIpt[d]&&b!=dhtmlx.treeIpt[d]&&dhtmlx.treeWin[d]&&dhtmlx.treeWin[d].hide&&dhtmlx.treeWin[d].hide()};
dhtmlx._progressControlGlobal=function(b){if(null==dhtmlx._progressCover){var d=document.createElement("DIV");d.className="dhtmlxLayoutPolyProgressGlobal_"+(dhtmlx.skin||"dhx_skyblue");d.style.zIndex=9999;document.body.appendChild(d);var e=document.createElement("DIV");e.className="dhtmlxLayoutPolyProgressBGIMGGlobal_"+(dhtmlx.skin||"dhx_skyblue");e.style.zIndex=9999;document.body.appendChild(e);dhtmlx._progressCover=[d,e]}dhtmlx._progressCover[0].style.display=!0==b?"":"none";dhtmlx._progressCover[1].style.display=
dhtmlx._progressCover[0].style.display};dhtmlx._clearTreeWin=function(b){for(var d in dhtmlx.treeWin)dhtmlx.treeWin[d]=null,dhtmlx.treeIpt[d]=null};
dhtmlx.contains=document.documentElement.contains?function(b,d){var e=9===b.nodeType?b.documentElement:b,f=d&&d.parentNode;return b===f||!(!f||!(1===f.nodeType&&e.contains&&e.contains(f)))}:document.documentElement.compareDocumentPosition?function(b,d){return d&&!!(b.compareDocumentPosition(d)&16)}:function(b,d){for(;d=d.parentNode;)if(d===b)return!0;return!1};dhtmlx.getWindow=function(b){return jQuery.isWindow(b)?b:9===b.nodeType?b.defaultView||b.parentWindow:!1};
dhtmlx.offset=function(b){var d,e,f,g,h={top:0,left:0};if(f=b&&b.ownerDocument){if((e=f.body)===b)return h=b.offsetTop,d=b.offsetLeft,1!==document.getElementsByTagName("body")[0].offsetTop&&(h+=parseFloat(b.style.marginTop.replace("px",""))||0,d+=parseFloat(b.style.marginLeft.replace("px",""))||0),{top:h,left:d};d=f.documentElement;if(!dhtmlx.contains(d,b))return h;"undefined"!==typeof b.getBoundingClientRect&&(h=b.getBoundingClientRect());f=dhtmlx.getWindow(f);b=d.clientTop||e.clientTop||0;e=d.clientLeft||
e.clientLeft||0;g=f.pageYOffset||d.scrollTop;d=f.pageXOffset||d.scrollLeft;return{top:h.top+g-b,left:h.left+d-e}}};dhtmlx.rroot=/^(?:body|html)$/i;dhtmlx.getOffsetLeft=function(b){for(var d=0;null!=b&&b!=document.body;)d+=b.offsetLeft,b=b.offsetParent;return d};dhtmlx.getOffsetTop=function(b){for(var d=0;null!=b&&b!=document.body;)d+=b.offsetTop,b=b.offsetParent;return d};
dhtmlx.position=function(b){if(b){var d=dhtmlx.offsetParent(b),e=dhtmlx.offset(b),f=dhtmlx.rroot.test(d.nodeName)?{top:0,left:0}:dhtmlx.offset(d);e.top-=parseFloat(b.style.marginTop.replace("px",""))||0;e.left-=parseFloat(b.style.marginLeft.replace("px",""))||0;f.top+=parseFloat(dhtmlx.css(d,"borderTopWidth"))||0;f.left+=parseFloat(dhtmlx.css(d,"borderLeftWidth"))||0;return{top:e.top-f.top,left:e.left-f.left}}};
dhtmlx.offsetParent=function(b){for(b=b.offsetParent||document.body;b&&!dhtmlx.rroot.test(b.nodeName)&&"static"===b.style.position;)b=b.offsetParent;return b||document.body};dhtmlx.css=function(b,d){var e;if(window.getComputedStyle)return e=window.getComputedStyle(b,null),e[d]?e[d].replace("px",""):e[d];if(document.documentElement.currentStyle)return(e=b.currentStyle&&b.currentStyle[d])?e.replace("px",""):""};function getAbsoluteLeft(b){return getOffset(b).left}
function getAbsoluteTop(b){return getOffset(b).top}function getOffsetSum(b){for(var d=0,e=0;b;)d+=parseInt(b.offsetTop),e+=parseInt(b.offsetLeft),b=b.offsetParent;return{top:d,left:e}}
function getOffsetRect(b){b=b.getBoundingClientRect();var d=document.body,e=document.documentElement,f=b.left+(window.pageXOffset||e.scrollLeft||d.scrollLeft)-(e.clientLeft||d.clientLeft||0);return{top:Math.round(b.top+(window.pageYOffset||e.scrollTop||d.scrollTop)-(e.clientTop||d.clientTop||0)),left:Math.round(f)}}function getOffset(b){return b.getBoundingClientRect?getOffsetRect(b):getOffsetSum(b)}
function dhx_getPosition(b,d){if(!d){var e=getOffset(b);return[e.left,e.top]}d=d||document.body;for(var e=b,f=0,g=0;e&&e!=d;)f+=e.offsetLeft-e.scrollLeft,g+=e.offsetTop-e.scrollTop,e=e.offsetParent;d==document.body&&(_isIE?(g+=document.body.offsetTop||document.documentElement.offsetTop,f+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(f+=document.body.offsetLeft,g+=document.body.offsetTop));return[f,g]}
function dhx_fixPosition(b,d,e){var f=dhx_getPosition(b,document.body);f[0]+=5==document.documentMode?0:-1;f[1]+=b.clientHeight+(_isIE?5==document.documentMode?1:0:3);var g=isNaN(d)?d.clientWidth:d;d=isNaN(d)?d.clientHeight:e;f[0]+g>document.body.scrollWidth&&(f[0]-=g,f[0]+=b.clientWidth,f[0]=0>f[0]?0:f[0]);f[1]+d>document.body.scrollHeight&&(f[1]-=d,f[1]=0>f[1]?0:f[1]);return f}
dhtmlx._detachEvent=function(b,d,e){if(b&&d&&e){var f=0==d.indexOf("on"),g=f?d.substr(2,d.length):d,f=f?d:"on"+d;b.removeEventListener?b.removeEventListener(g,e,!1):b.detachEvent?b.detachEvent(-1<d.indexOf(":")?d:f,e):b.removeAttribute(f)}};
dhtmlxAjax={get:function(b,d){var e=new dtmlXMLLoaderObject(!0);e.async=3>arguments.length;e.waitCall=d;e.loadXML(b);return e},post:function(b,d,e){var f=new dtmlXMLLoaderObject(!0);f.async=4>arguments.length;f.waitCall=e;f.loadXML(b,!0,d);return f},getSync:function(b){return this.get(b,null,!0)},postSync:function(b,d){return this.post(b,d,null,!0)}};
function dtmlXMLLoaderObject(b,d,e,f){this.xmlDoc="";this.async="undefined"!=typeof e?e:!0;this.onloadAction=b||null;this.mainObject=d||null;this.waitCall=null;this.rSeed=f||!1;return this}
dtmlXMLLoaderObject.prototype.waitLoadFunction=function(b){var d=!0;return this.check=function(){if(b&&null!=b.onloadAction&&(!b.xmlDoc.readyState||4==b.xmlDoc.readyState)&&d){d=!1;if("function"==typeof b.onloadAction)b.onloadAction(b.mainObject,null,null,null,b);b.waitCall&&(b.waitCall.call(this,b),b.waitCall=null)}}};
dtmlXMLLoaderObject.prototype.getXMLTopNode=function(b,d){if(this.xmlDoc.responseXML){var e=this.xmlDoc.responseXML.getElementsByTagName(b);0==e.length&&-1!=b.indexOf(":")&&(e=this.xmlDoc.responseXML.getElementsByTagName(b.split(":")[1]));e=e[0]}else e=this.xmlDoc.documentElement;if(e)return this._retry=!1,e;if(_isIE&&!this._retry)return e=this.xmlDoc.responseText,d=this.xmlDoc,this._retry=!0,this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=!1,this.xmlDoc.loadXML(e),this.getXMLTopNode(b,
d);dhtmlxError.throwError("LoadXML","Incorrect XML",[d||this.xmlDoc,this.mainObject]);return document.createElement("DIV")};
dtmlXMLLoaderObject.prototype.loadXMLString=function(b){_isIE?(this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(b)):this.xmlDoc=(new DOMParser).parseFromString(b,"text/xml");if(this.onloadAction)this.onloadAction(this.mainObject,null,null,null,this);this.waitCall&&(this.waitCall(),this.waitCall=null)};
dtmlXMLLoaderObject.prototype.loadJSON=function(b,d,e,f){this.rSeed&&(b+=(-1!=b.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf());this.filePath=b;this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this));this.xmlDoc.open(d?"POST":"GET",b,this.async);f?_isIE&&this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"):this.xmlDoc.setRequestHeader("Content-type",
"application/json");this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(e);this.async||(new this.waitLoadFunction(this))()};
dtmlXMLLoaderObject.prototype.loadXML=function(b,d,e,f){this.rSeed&&(b+=(-1!=b.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf());this.filePath=b;this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this));this.xmlDoc.open(d?"POST":"GET",b,this.async);f?(_isIE&&this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type",
"text/xml")):d?this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"):this.xmlDoc.setRequestHeader("Content-type","text/xml");this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(e);this.async||(new this.waitLoadFunction(this))()};
dtmlXMLLoaderObject.prototype.destructor=function(){return this.setXSLParamValue=this.getXMLTopNode=this.xmlNodeToJSON=this.doSerialization=this.loadXMLString=this.loadXML=this.doXSLTransToString=this.doXSLTransToObject=this.doXPathOpera=this.doXPath=this.xmlDoc=this.mainObject=this.onloadAction=this.filePath=this.rSeed=this.async=this._retry=this._getAllNamedChilds=this._filterXPath=null};
dtmlXMLLoaderObject.prototype.add_xml_attrs=function(b,d){var e=this._xml_attrs(d),f;for(f in e)"undefined"==typeof b[f]&&(b[f]=e[f])};dtmlXMLLoaderObject.prototype._xml_attrs=function(b){var d={};if(b.attributes.length)for(var e=0;e<b.attributes.length;e++)d[b.attributes[e].name]=b.attributes[e].value;return d};
dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(b){for(var d={},e=0;e<b.attributes.length;e++)d[b.attributes[e].name]=b.attributes[e].value;d._tagvalue=b.firstChild?b.firstChild.nodeValue:"";for(e=0;e<b.childNodes.length;e++){var f=b.childNodes[e].tagName;f&&(d[f]||(d[f]=[]),d[f].push(this.xmlNodeToJSON(b.childNodes[e])))}return d};function callerFunction(b,d){return this.handler=function(e){e||(e=window.event);b(e,d);return!0}}
function convertStringToBoolean(b){"string"==typeof b&&(b=b.toLowerCase());switch(b){case "1":case "true":case "yes":case "y":case 1:case !0:return!0;default:return!1}}function getUrlSymbol(b){return-1!=b.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop)return window.dhtmlDragAndDrop;this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0;this.tempDOMM=this.tempDOMU=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}
dhtmlDragAndDropObject.prototype.removeDraggableItem=function(b){b.onmousedown=null;b.dragStarter=null;b.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(b,d){b.onmousedown=this.preCreateDragCopy;b.dragStarter=d;this.addDragLanding(b,d)};dhtmlDragAndDropObject.prototype.addDragLanding=function(b,d){b.dragLanding=d};
dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(b){if(!((b||window.event)&&2==(b||event).button)){if(window.dhtmlDragAndDrop.waitDrag)return window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1;window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(b);window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=
document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=(new Date).valueOf();b&&b.preventDefault&&b.preventDefault();return!1}};
dhtmlDragAndDropObject.prototype.callDrag=function(b){b||(b=window.event);dragger=window.dhtmlDragAndDrop;if(!(100>(new Date).valueOf()-dragger.downtime)){if(!dragger.dragNode)if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,b);if(!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=
0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else return dragger.stopDrag(b,!0);if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var d=dragger.gldragNode;dragger.gldragNode.old&&(d=dragger.gldragNode.old);d.parentNode.removeChild(d);var e=dragger.dragNode.pWindow;d.pWindow&&d.pWindow.dhtmlDragAndDrop.lastLanding&&d.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(d.pWindow.dhtmlDragAndDrop.lastLanding);_isIE?(d=document.createElement("Div"),d.innerHTML=
dragger.dragNode.outerHTML,dragger.dragNode=d.childNodes[0]):dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);e.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=b.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=b.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||
document.documentElement.scrollTop)+"px";dragger.checkLanding(b.srcElement?b.srcElement:b.target,b)}};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(b){if(window.name){for(var d=parent.frames[window.name].frameElement.offsetParent,e=0,f=0;d;)e+=d.offsetLeft,f+=d.offsetTop,d=d.offsetParent;parent.dhtmlDragAndDrop&&(d=parent.dhtmlDragAndDrop.calculateFramePosition(1),e+=1*d.split("_")[0],f+=1*d.split("_")[1]);if(b)return e+"_"+f;this.fx=e;this.fy=f}return"0_0"};
dhtmlDragAndDropObject.prototype.checkLanding=function(b,d){b&&b.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=b,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,d.clientX,d.clientY,d),this.lastLanding_scr=_isIE?d.srcElement:d.target):b&&"BODY"!=b.tagName?this.checkLanding(b.parentNode,d):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,d.clientX,d.clientY,d),this.lastLanding=
0,this._onNotFound&&this._onNotFound())};
dhtmlDragAndDropObject.prototype.stopDrag=function(b,d){dragger=window.dhtmlDragAndDrop;if(!d){dragger.stopFrameRoute();var e=dragger.lastLanding;dragger.lastLanding=null;e&&e.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,e,_isIE?event.srcElement:b.target)}dragger.lastLanding=null;dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=
0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};
dhtmlDragAndDropObject.prototype.stopFrameRoute=function(b){b&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var d=0;d<window.frames.length;d++)try{window.frames[d]!=b&&window.frames[d].dhtmlDragAndDrop&&window.frames[d].dhtmlDragAndDrop.stopFrameRoute(window)}catch(e){}try{parent.dhtmlDragAndDrop&&(parent!=window&&parent!=b)&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(f){}};
dhtmlDragAndDropObject.prototype.initFrameRoute=function(b,d){b&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=b.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=b.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=b.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=b.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&d&&(!_isFF||1.8>_FFrv)&&window.dhtmlDragAndDrop.calculateFramePosition());
try{parent.dhtmlDragAndDrop&&(parent!=window&&parent!=b)&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(e){}for(var f=0;f<window.frames.length;f++)try{window.frames[f]!=b&&window.frames[f].dhtmlDragAndDrop&&window.frames[f].dhtmlDragAndDrop.initFrameRoute(window,!b||d?1:0)}catch(g){}};_OperaRv=_KHTMLrv=_FFrv=_isChrome=_isMacOS=_isKHTML=_isOpera=_IE10=_isIE=_isFF=!1;-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0);
-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&(_isChrome=!0);
if(-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror"))_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),525<_KHTMLrv?(_isFF=!0,_FFrv=1.9):_isKHTML=!0;else if(-1!=navigator.userAgent.indexOf("Opera"))_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3));else if(-1!=navigator.appName.indexOf("Microsoft")){if(_isIE=!0,-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=
document.compatMode&&(_isIE=8),-1!=navigator.appVersion.indexOf("MSIE 9.0")&&"BackCompat"!=document.compatMode&&(_isIE=8),(-1!=navigator.appVersion.indexOf("MSIE 10.0")||-1!=navigator.appVersion.indexOf("MSIE 11.0"))&&"BackCompat"!=document.compatMode)_IE10=!0,_isIE=8}else"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=11:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1]));
dtmlXMLLoaderObject.prototype.doXPath=function(b,d,e,f){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(b,d);if(_isIE)return d||(d=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),d||dhtmlxError.throwError("LoadXML","Incorrect XML",[d||this.xmlDoc,this.mainObject]),null!=e&&d.setProperty("SelectionNamespaces","xmlns:xsl='"+e+"'"),"single"==f?d.selectSingleNode(b):d.selectNodes(b)||[];var g=d;d||(d=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML);d||dhtmlxError.throwError("LoadXML",
"Incorrect XML",[d||this.xmlDoc,this.mainObject]);d.nodeName&&-1!=d.nodeName.indexOf("document")?g=d:(g=d,d=d.ownerDocument);var h=XPathResult.ANY_TYPE;"single"==f&&(h=XPathResult.FIRST_ORDERED_NODE_TYPE);f=[];b=d.evaluate(b,g,function(b){return e},h,null);if(h==XPathResult.FIRST_ORDERED_NODE_TYPE)return b.singleNodeValue;for(h=b.iterateNext();h;)f[f.length]=h,h=b.iterateNext();return f};function _dhtmlxError(b,d,e){this.catches||(this.catches=[]);return this}
_dhtmlxError.prototype.catchError=function(b,d){this.catches[b]=d};_dhtmlxError.prototype.throwError=function(b,d,e){if(this.catches[b])return this.catches[b](b,d,e);if(this.catches.ALL)return this.catches.ALL(b,d,e);alert("Error type: "+b+"\nDescription: "+d);return null};window.dhtmlxError=new _dhtmlxError;
dtmlXMLLoaderObject.prototype.doXPathOpera=function(b,d){var e=b.replace(/[\/]+/gi,"/").split("/"),f=null,g=1;if(!e.length)return[];if("."==e[0])f=[d];else if(""==e[0])f=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(e[g].replace(/\[[^\]]*\]/g,"")),g++;else return[];for(g;g<e.length;g++)f=this._getAllNamedChilds(f,e[g]);-1!=e[g-1].indexOf("[")&&(f=this._filterXPath(f,e[g-1]));return f};
dtmlXMLLoaderObject.prototype._filterXPath=function(b,d){var e=[];d=d.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,"");for(var f=0;f<b.length;f++)b[f].getAttribute(d)&&(e[e.length]=b[f]);return e};
dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(b,d){var e=[];_isKHTML&&(d=d.toUpperCase());for(var f=0;f<b.length;f++)for(var g=0;g<b[f].childNodes.length;g++)_isKHTML?b[f].childNodes[g].tagName&&b[f].childNodes[g].tagName.toUpperCase()==d&&(e[e.length]=b[f].childNodes[g]):b[f].childNodes[g].tagName==d&&(e[e.length]=b[f].childNodes[g]);return e};function dhtmlXHeir(b,d){for(var e in d)"function"==typeof d[e]&&(b[e]=d[e]);return b}
function dhtmlxEvent(b,d,e){b.addEventListener?b.addEventListener(d,e,!1):b.attachEvent&&b.attachEvent("on"+d,e)}function removeDhtmlxEvent(b,d){b.detachEvent&&b.detachEvent("onclick",d);b.removeEventListener&&b.removeEventListener("click",d,!1)}dtmlXMLLoaderObject.prototype.xslDoc=null;
dtmlXMLLoaderObject.prototype.setXSLParamValue=function(b,d,e){e||(e=this.xslDoc);e.responseXML&&(e=e.responseXML);b=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+b+"']",e,"http://www.w3.org/1999/XSL/Transform","single");null!=b&&(b.firstChild.nodeValue=d)};
dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(b,d){b||(b=this.xslDoc);b.responseXML&&(b=b.responseXML);d||(d=this.xmlDoc);d.responseXML&&(d=d.responseXML);if(_isIE){f=new ActiveXObject("Msxml2.DOMDocument.3.0");try{d.transformNodeToObject(b,f)}catch(e){f=d.transformNode(b)}}else{this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(b));var f=this.XSLProcessor.transformToDocument(d)}return f};
dtmlXMLLoaderObject.prototype.doXSLTransToString=function(b,d){var e=this.doXSLTransToObject(b,d);return"string"==typeof e?e:this.doSerialization(e)};dtmlXMLLoaderObject.prototype.doSerialization=function(b){b||(b=this.xmlDoc);b.responseXML&&(b=b.responseXML);return _isIE?b.xml:(new XMLSerializer).serializeToString(b)};
dhtmlxEventable=function(b){b.attachEvent=function(b,e,f){b="ev_"+b.toLowerCase();this[b]||(this[b]=new this.eventCatcher(f||this));return b+":"+this[b].addEvent(e)};b.callEvent=function(b,e){b="ev_"+b.toLowerCase();return this[b]?this[b].apply(this,e):!0};b.checkEvent=function(b){return!!this["ev_"+b.toLowerCase()]};b.eventCatcher=function(b){var e=[],f=function(){for(var f=!0,h=0;h<e.length;h++)if(null!=e[h]){var l=e[h].apply(b,arguments);l==(l==window.undefined||null==l)?!1:l;f=f&&l}return f};
f.addEvent=function(b){"function"!=typeof b&&(b=eval(b));return b?e.push(b)-1:!1};f.removeEvent=function(b){e[b]=null};return f};b.detachEvent=function(b){!1!=b&&(b.indexOf&&0<b.indexOf(":"))&&(b=b.split(":"),this[b[0]].removeEvent(b[1]))};b.detachAllEvents=function(){for(var b in this)0==b.indexOf("ev_")&&delete this[b]}};
(function(){var b=dhtmlx.message=dhtmlx.msg=function(d,e,f,g){b.area||(b.area=document.createElement("DIV"),b.area.style.cssText="position:absolute;right:5px;width:250px;z-index:100;",b.area.className="dhtmlx_message_area",b.area.style[b.defPosition]="5px",document.body.appendChild(b.area));"object"!=typeof d&&(d={text:d,type:e,lifetime:f,id:g});d.type=d.type||"info";d.id=d.id||b.uid();d.lifetime=d.lifetime||b.defTimeout;b.hide(d.id);e=document.createElement("DIV");e.style.cssText="border-radius:4px; padding:4px 4px 4px 20px;background-color:#FFFFCC;font-size:12px;font-family:Tahoma;color:navy;z-index: 10000;margin:5px;border:1px solid lightgrey;";
e.innerHTML=d.text;e.className=d.type;"bottom"==b.defPosition&&b.area.firstChild?b.area.insertBefore(e,b.area.firstChild):b.area.appendChild(e);b.timers[d.id]=window.setTimeout(function(){b.hide(d.id)},d.lifetime);b.pull[d.id]=e;return d.id};b.defTimeout=4E3;b.defPosition="top";b.pull={};b.timers={};b.seed=(new Date).valueOf();b.uid=function(){return b.seed++};b.hideAll=function(){for(var d in b.pull)b.hide(d)};b.hide=function(d){var e=b.pull[d];e&&e.parentNode&&(e.parentNode.removeChild(e),window.clearTimeout(b.timers[d]),
delete b.pull[d])}})();
function dhtmlXContainer(b){var d=this;this.obj=b;this.dhxcont=null;this.st=document.createElement("DIV");this.st.style.position="absolute";this.st.style.left="-200px";this.st.style.top="0px";this.st.style.width="100px";this.st.style.height="1px";this.st.style.visibility="hidden";this.st.style.overflow="hidden";document.body.insertBefore(this.st,document.body.childNodes[0]);this.obj._getSt=function(){return d.st};this.obj.dv="def";this.obj.av=this.obj.dv;this.obj.cv=this.obj.av;this.obj.vs={};this.obj.vs[this.obj.av]=
{};this.obj.view=function(b){if(!this.vs[b]){this.vs[b]={};this.vs[b].dhxcont=this.vs[this.dv].dhxcont;var e=document.createElement("DIV");e.style.position="relative";e.style.left="0px";e.style.width="200px";e.style.height="200px";e.style.overflow="hidden";e.style.visibility="";d.st.appendChild(e);this.vs[b].dhxcont.mainCont[b]=e}this.avt=this.av;this.av=b;return this};this.obj.setActive=function(){this.vs[this.av]&&(this.cv=this.av,this.vs[this.avt].dhxcont==this.vs[this.avt].dhxcont.mainCont[this.avt].parentNode&&
(d.st.appendChild(this.vs[this.avt].dhxcont.mainCont[this.avt]),this.vs[this.avt].menu&&d.st.appendChild(document.getElementById(this.vs[this.avt].menuId)),this.vs[this.avt].toolbar&&d.st.appendChild(document.getElementById(this.vs[this.avt].toolbarId)),this.vs[this.avt].sb&&d.st.appendChild(document.getElementById(this.vs[this.avt].sbId))),this.vs[this.av].dhxcont!=this.vs[this.av].dhxcont.mainCont[this.av].parentNode&&(this.vs[this.av].dhxcont.insertBefore(this.vs[this.av].dhxcont.mainCont[this.av],
this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1]),this.vs[this.av].menu&&this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].menuId),this.vs[this.av].dhxcont.childNodes[0]),this.vs[this.av].toolbar&&this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].toolbarId),this.vs[this.av].dhxcont.childNodes[this.vs[this.av].menu?1:0]),this.vs[this.av].sb&&this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].sbId),
this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1])),this._doOnResize&&this._doOnResize(),this.avt=null)};this.obj._viewRestore=function(){var b=this.av;this.avt&&(this.av=this.avt,this.avt=null);return b};this.setContent=function(b){this.obj.vs[this.obj.av].dhxcont=b;this.obj._init()};this.obj._init=function(){this.vs[this.av].dhxcont.innerHTML="<div ida='dhxMainCont' style='position: relative; left: 0px; top: 0px; overflow: hidden;'></div><div ida='dhxContBlocker' class='dhxcont_content_blocker' style='display: none;'></div>";
this.vs[this.av].dhxcont.mainCont={};this.vs[this.av].dhxcont.mainCont[this.av]=this.vs[this.av].dhxcont.childNodes[0]};this.obj._genStr=function(b){for(var d="",e=0;e<b;e++)d+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(61*Math.random()));return d};this.obj.setMinContentSize=function(b,d){this.vs[this.av]._minDataSizeW=b;this.vs[this.av]._minDataSizeH=d};this.obj._setPadding=function(b,d){"object"==typeof b?(this._offsetTop=b[0],this._offsetLeft=b[1],this._offsetWidth=
b[2],this._offsetHeight=b[3]):(this._offsetLeft=this._offsetTop=b,this._offsetWidth=2*-b,this._offsetHeight=2*-b);this.vs[this.av].dhxcont.className="dhxcont_global_content_area "+(d||"")};this.obj.moveContentTo=function(b){for(var d in this.vs){b.view(d).setActive();var e=null;this.vs[d].grid&&(e="grid");this.vs[d].tree&&(e="tree");this.vs[d].tabbar&&(e="tabbar");this.vs[d].folders&&(e="folders");this.vs[d].layout&&(e="layout");null!=e&&(b.view(d).attachObject(this.vs[d][e+"Id"]),b.vs[d][e]=this.vs[d][e],
b.vs[d][e+"Id"]=this.vs[d][e+"Id"],b.vs[d][e+"Obj"]=this.vs[d][e+"Obj"],this.vs[d][e]=null,this.vs[d][e+"Id"]=null,this.vs[d][e+"Obj"]=null);this.vs[d]._frame&&(b.vs[d]._frame=this.vs[d]._frame,this.vs[d]._frame=null);null!=this.vs[d].menu&&(b.cv==b.av?b.vs[b.av].dhxcont.insertBefore(document.getElementById(this.vs[d].menuId),b.vs[b.av].dhxcont.childNodes[0]):b._getSt().appendChild(document.getElementById(this.vs[d].menuId)),b.vs[d].menu=this.vs[d].menu,b.vs[d].menuId=this.vs[d].menuId,b.vs[d].menuHeight=
this.vs[d].menuHeight,this.vs[d].menu=null,this.vs[d].menuId=null,this.vs[d].menuHeight=null,this.cv==this.av&&this._doOnAttachMenu&&this._doOnAttachMenu("unload"),b.cv==b.av&&b._doOnAttachMenu&&b._doOnAttachMenu("move"));null!=this.vs[d].toolbar&&(b.cv==b.av?b.vs[b.av].dhxcont.insertBefore(document.getElementById(this.vs[d].toolbarId),b.vs[b.av].dhxcont.childNodes[null!=b.vs[b.av].menu?1:0]):b._getSt().appendChild(document.getElementById(this.vs[d].toolbarId)),b.vs[d].toolbar=this.vs[d].toolbar,
b.vs[d].toolbarId=this.vs[d].toolbarId,b.vs[d].toolbarHeight=this.vs[d].toolbarHeight,this.vs[d].toolbar=null,this.vs[d].toolbarId=null,this.vs[d].toolbarHeight=null,this.cv==this.av&&this._doOnAttachToolbar&&this._doOnAttachToolbar("unload"),b.cv==b.av&&b._doOnAttachToolbar&&b._doOnAttachToolbar("move"));null!=this.vs[d].sb&&(b.cv==b.av?b.vs[b.av].dhxcont.insertBefore(document.getElementById(this.vs[d].sbId),b.vs[b.av].dhxcont.childNodes[b.vs[b.av].dhxcont.childNodes.length-1]):b._getSt().appendChild(document.getElementById(this.vs[d].sbId)),
b.vs[d].sb=this.vs[d].sb,b.vs[d].sbId=this.vs[d].sbId,b.vs[d].sbHeight=this.vs[d].sbHeight,this.vs[d].sb=null,this.vs[d].sbId=null,this.vs[d].sbHeight=null,this.cv==this.av&&this._doOnAttachStatusBar&&this._doOnAttachStatusBar("unload"),b.cv==b.av&&b._doOnAttachStatusBar&&b._doOnAttachStatusBar("move"));for(var e=this.vs[d].dhxcont.mainCont[d],l=b.vs[d].dhxcont.mainCont[d];0<e.childNodes.length;)l.appendChild(e.childNodes[0])}b.view(this.av).setActive()};this.obj.adjustContent=function(b,d,e,l,m){this.vs[this.av].dhxcont.style.left=
(this._offsetLeft||0)+"px";this.vs[this.av].dhxcont.style.top=(this._offsetTop||0)+d+"px";var k=b.clientWidth+(this._offsetWidth||0);!0!==l&&(this.vs[this.av].dhxcont.style.width=Math.max(0,k)+"px");!0!==l&&this.vs[this.av].dhxcont.offsetWidth>k&&(this.vs[this.av].dhxcont.style.width=Math.max(0,2*k-this.vs[this.av].dhxcont.offsetWidth)+"px");b=b.clientHeight+(this._offsetHeight||0);this.vs[this.av].dhxcont.style.height=Math.max(0,b-d)+(null!=e?e:0)+"px";this.vs[this.av].dhxcont.offsetHeight>b-d&&
(this.vs[this.av].dhxcont.style.height=Math.max(0,2*(b-d)-this.vs[this.av].dhxcont.offsetHeight)+"px");m&&!isNaN(m)&&(this.vs[this.av].dhxcont.style.height=Math.max(0,parseInt(this.vs[this.av].dhxcont.style.height)-m)+"px");null!=this.vs[this.av]._minDataSizeH&&parseInt(this.vs[this.av].dhxcont.style.height)<this.vs[this.av]._minDataSizeH&&(this.vs[this.av].dhxcont.style.height=this.vs[this.av]._minDataSizeH+"px");null!=this.vs[this.av]._minDataSizeW&&parseInt(this.vs[this.av].dhxcont.style.width)<
this.vs[this.av]._minDataSizeW&&(this.vs[this.av].dhxcont.style.width=this.vs[this.av]._minDataSizeW+"px");if(!0!==l&&(this.vs[this.av].dhxcont.mainCont[this.av].style.width=this.vs[this.av].dhxcont.clientWidth+"px",this.vs[this.av].dhxcont.mainCont[this.av].offsetWidth>this.vs[this.av].dhxcont.clientWidth))this.vs[this.av].dhxcont.mainCont[this.av].style.width=Math.max(0,2*this.vs[this.av].dhxcont.clientWidth-this.vs[this.av].dhxcont.mainCont[this.av].offsetWidth)+"px";d=null!=this.vs[this.av].menu?
!this.vs[this.av].menuHidden?this.vs[this.av].menuHeight:0:0;e=null!=this.vs[this.av].toolbar?!this.vs[this.av].toolbarHidden?this.vs[this.av].toolbarHeight:0:0;l=null!=this.vs[this.av].sb?!this.vs[this.av].sbHidden?this.vs[this.av].sbHeight:0:0;this.vs[this.av].dhxcont.mainCont[this.av].style.height=this.vs[this.av].dhxcont.clientHeight+"px";this.vs[this.av].dhxcont.mainCont[this.av].offsetHeight>this.vs[this.av].dhxcont.clientHeight&&(this.vs[this.av].dhxcont.mainCont[this.av].style.height=Math.max(0,
2*this.vs[this.av].dhxcont.clientHeight-this.vs[this.av].dhxcont.mainCont[this.av].offsetHeight)+"px");this.vs[this.av].dhxcont.mainCont[this.av].style.height=Math.max(0,parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-d-e-l)+"px"};this.obj.coverBlocker=function(){return this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1]};this.obj.showCoverBlocker=function(){this.coverBlocker().style.display=""};this.obj.hideCoverBlocker=function(){this.coverBlocker().style.display=
"none"};this.obj.updateNestedObjects=function(){this.vs[this.av].grid&&this.vs[this.av].grid.setSizes();this.vs[this.av].sched&&this.vs[this.av].sched.setSizes();this.vs[this.av].tabbar&&this.vs[this.av].tabbar.adjustOuterSize();this.vs[this.av].folders&&this.vs[this.av].folders.setSizes();this.vs[this.av].editor&&(_isIE||this.vs[this.av].editor._prepareContent(!0),this.vs[this.av].editor.setSizes());this.vs[this.av].layout&&((this.vs[this.av].dhxcont._isAcc||this.vs[this.av].dhxcont._isTabbarCell)&&
"dhx_skyblue"==this.vs[this.av].dhxcont.skin?(this.vs[this.av].layoutObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px",this.vs[this.av].layoutObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px"):(this.vs[this.av].layoutObj.style.width=this.vs[this.av].dhxcont.mainCont[this.av].style.width,this.vs[this.av].layoutObj.style.height=this.vs[this.av].dhxcont.mainCont[this.av].style.height),this.vs[this.av].layout.setSizes());null!=
this.vs[this.av].accordion&&("dhx_web"==this.skin?(this.vs[this.av].accordionObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+"px",this.vs[this.av].accordionObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+"px"):(this.vs[this.av].accordionObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px",this.vs[this.av].accordionObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+
2+"px"),this.vs[this.av].accordion.setSizes());this.vs[this.av].dockedCell&&this.vs[this.av].dockedCell.updateNestedObjects();this.vs[this.av].form&&this.vs[this.av].form.setSizes()};this.obj.attachStatusBar=function(){if(!this.vs[this.av].sb){var b=document.createElement("DIV");b.className=this._isCell?"dhxcont_sb_container_layoutcell":"dhxcont_sb_container";b.id="sbobj_"+this._genStr(12);b.innerHTML="<div class='dhxcont_statusbar'></div>";this.cv==this.av?this.vs[this.av].dhxcont.insertBefore(b,
this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1]):d.st.appendChild(b);b.setText=function(b){this.childNodes[0].innerHTML=b};b.getText=function(){return this.childNodes[0].innerHTML};b.onselectstart=function(b){b=b||event;return b.returnValue=!1};this.vs[this.av].sb=b;this.vs[this.av].sbHeight="dhx_web"==this.skin?41:"dhx_skyblue"==this.skin?23:b.offsetHeight;this.vs[this.av].sbId=b.id;this._doOnAttachStatusBar&&this._doOnAttachStatusBar("init");this.adjust();return this.vs[this._viewRestore()].sb}};
this.obj.detachStatusBar=function(){this.vs[this.av].sb&&(this.vs[this.av].sb.setText=null,this.vs[this.av].sb.getText=null,this.vs[this.av].sb.onselectstart=null,this.vs[this.av].sb.parentNode.removeChild(this.vs[this.av].sb),this.vs[this.av].sb=null,this.vs[this.av].sbHeight=null,this.vs[this.av].sbId=null,this._viewRestore(),this._doOnAttachStatusBar&&this._doOnAttachStatusBar("unload"))};this.obj.getFrame=function(){return this.getView()._frame};this.obj.getView=function(b){return this.vs[b||
this.av]};this.obj.attachMenu=function(b){if(!this.vs[this.av].menu){var e=document.createElement("DIV");e.style.position="relative";e.style.overflow="hidden";e.id="dhxmenu_"+this._genStr(12);this.cv==this.av?this.vs[this.av].dhxcont.insertBefore(e,this.vs[this.av].dhxcont.childNodes[0]):d.st.appendChild(e);"object"!=typeof b?this.vs[this.av].menu=new dhtmlXMenuObject(e.id,b||this.skin):(b.parent=e.id,this.vs[this.av].menu=new dhtmlXMenuObject(b));this.vs[this.av].menuHeight="dhx_web"==this.skin?
29:e.offsetHeight;this.vs[this.av].menuId=e.id;this._doOnAttachMenu&&this._doOnAttachMenu("init");this.adjust();return this.vs[this._viewRestore()].menu}};this.obj.detachMenu=function(){if(this.vs[this.av].menu){var b=document.getElementById(this.vs[this.av].menuId);this.vs[this.av].menu.unload();this.vs[this.av].menu=null;this.vs[this.av].menuId=null;this.vs[this.av].menuHeight=null;b&&b.parentNode.removeChild(b);this._viewRestore();this._doOnAttachMenu&&this._doOnAttachMenu("unload")}};this.obj.detachForm=
function(b){this.vs[this.av].form&&(this.vs[this.av].form.unload(),this.vs[this.av].form=null,this.vs[this.av].formObj=null,this.vs[this.av].attachForm=null)};this.obj.attachToolbar=function(b,e){if(!this.vs[this.av].toolbar){var h=document.createElement("DIV");h.style.position="relative";h.style.overflow=_isIE?"":"hidden";h.id="dhxtoolbar_"+this._genStr(12);this.cv==this.av?"bottom"==e?this.vs[this.av].dhxcont.insertBefore(h,this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-
1]):this.vs[this.av].dhxcont.insertBefore(h,this.vs[this.av].dhxcont.childNodes[null!=this.vs[this.av].menu?1:0]):d.st.appendChild(h);"object"!=typeof b?this.vs[this.av].toolbar=new dhtmlXToolbarObject(h.id,b||this.skin):(b.parent=h.id,this.vs[this.av].toolbar=new dhtmlXToolbarObject(b));this.vs[this.av].toolbarHeight="dhx_web"==this.skin?41:h.offsetHeight+(this._isLayout&&"dhx_skyblue"==this.skin?2:0);this.vs[this.av].toolbarId=h.id;this._doOnAttachToolbar&&this._doOnAttachToolbar("init");this.adjust();
h=this.vs[this._viewRestore()].toolbar;h.win=this;return h}};this.obj.detachToolbar=function(){if(this.vs[this.av].toolbar){var b=document.getElementById(this.vs[this.av].toolbarId);this.vs[this.av].toolbar.unload();this.vs[this.av].toolbar=null;this.vs[this.av].toolbarId=null;this.vs[this.av].toolbarHeight=null;b&&b.parentNode.removeChild(b);this._viewRestore();this._doOnAttachToolbar&&this._doOnAttachToolbar("unload")}};this.obj.attachGrid=function(){this._isWindow&&"dhx_skyblue"==this.skin&&(this.vs[this.av].dhxcont.mainCont[this.av].style.border=
"#a4bed4 1px solid",this._redraw());var b=document.createElement("DIV");b.id="dhxGridObj_"+this._genStr(12);b.style.width="100%";b.style.height="100%";b.cmp="grid";document.body.appendChild(b);this.attachObject(b.id,!1,!0);this.vs[this.av].grid=new dhtmlXGridObject(b.id);this.vs[this.av].grid.setSkin(this.skin);"dhx_web"!=this.skin&&(this.vs[this.av].grid.entBox.style.border="0px solid white",this.vs[this.av].grid._sizeFix=0);this.vs[this.av].gridId=b.id;this.vs[this.av].gridObj=b;return this.vs[this._viewRestore()].grid};
this.obj.attachScheduler=function(b,d){var e=document.createElement("DIV");e.id="dhxSchedObj_"+this._genStr(12);e.innerHTML='<div id="'+e.id+'" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>';
document.body.appendChild(e.firstChild);this.attachObject(e.id,!1,!0);this.vs[this.av].sched=scheduler;this.vs[this.av].schedId=e.id;scheduler.setSizes=scheduler.update_view;scheduler.destructor=function(){};scheduler.init(e.id,b,d);return this.vs[this._viewRestore()].sched};this.obj.attachTree=function(b){this._isWindow&&"dhx_skyblue"==this.skin&&(this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw());var d=document.createElement("DIV");d.id="dhxTreeObj_"+this._genStr(12);
d.style.width="100%";d.style.height="100%";d.cmp="tree";document.body.appendChild(d);this.attachObject(d.id,!1,!0);this.vs[this.av].tree=new dhtmlXTreeObject(d.id,"100%","100%",b);this.vs[this.av].tree.setSkin(this.skin);this.vs[this.av].tree.allTree.childNodes[0].style.marginTop="2px";this.vs[this.av].tree.allTree.childNodes[0].style.marginBottom="2px";this.vs[this.av].treeId=d.id;this.vs[this.av].treeObj=d;return this.vs[this._viewRestore()].tree};this.obj.attachTabbar=function(b){this._isWindow&&
"dhx_skyblue"==this.skin&&(this.vs[this.av].dhxcont.style.border="none",this.setDimension(this.w,this.h));var d=document.createElement("DIV");d.id="dhxTabbarObj_"+this._genStr(12);d.style.width="100%";d.style.height="100%";d.style.overflow="hidden";d.cmp="tabbar";document.body.appendChild(d);this.attachObject(d.id,!1,!0);"dhtmlxLayoutSinglePoly"==this.className&&this.hideHeader();this.vs[this.av].tabbar=new dhtmlXTabBar(d.id,b||"top",20);this._isWindow||(this.vs[this.av].tabbar._s.expand=!0);this.vs[this.av].tabbar.setSkin(this.skin);
this.vs[this.av].tabbar.adjustOuterSize();this.vs[this.av].tabbarId=d.id;this.vs[this.av].tabbarObj=d;return this.vs[this._viewRestore()].tabbar};this.obj.attachFolders=function(){this._isWindow&&"dhx_skyblue"==this.skin&&(this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw());var b=document.createElement("DIV");b.id="dhxFoldersObj_"+this._genStr(12);b.style.width="100%";b.style.height="100%";b.style.overflow="hidden";b.cmp="folders";document.body.appendChild(b);
this.attachObject(b.id,!1,!0);this.vs[this.av].folders=new dhtmlxFolders(b.id);this.vs[this.av].folders.setSizes();this.vs[this.av].foldersId=b.id;this.vs[this.av].foldersObj=b;return this.vs[this._viewRestore()].folders};this.obj.attachAccordion=function(){this._isWindow&&"dhx_skyblue"==this.skin&&(this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw());var b=document.createElement("DIV");b.id="dhxAccordionObj_"+this._genStr(12);"dhx_web"==this.skin?(b.style.left=
"0px",b.style.top="0px",b.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+"px",b.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+"px"):(b.style.left="-1px",b.style.top="-1px",b.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px",b.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px");b.style.position="relative";b.cmp="accordion";document.body.appendChild(b);this.attachObject(b.id,
!1,!0);this.vs[this.av].accordion=new dhtmlXAccordion(b.id,this.skin);this.vs[this.av].accordion.setSizes();this.vs[this.av].accordionId=b.id;this.vs[this.av].accordionObj=b;return this.vs[this._viewRestore()].accordion};this.obj.attachLayout=function(b,d){this._isCell&&"dhx_skyblue"==this.skin&&(this.hideHeader(),this.vs[this.av].dhxcont.style.border="0px solid white",this.adjustContent(this.childNodes[0],0));this._isCell&&"dhx_web"==this.skin&&this.hideHeader();var e=document.createElement("DIV");
e.id="dhxLayoutObj_"+this._genStr(12);e.style.overflow="hidden";e.style.position="absolute";e.style.left="0px";e.style.top="0px";e.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+"px";e.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+"px";if((this._isTabbarCell||this._isAcc)&&"dhx_skyblue"==this.skin)e.style.left="-1px",e.style.top="-1px",e.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px",e.style.height=
parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px";e.dhxContExists=!0;e.cmp="layout";document.body.appendChild(e);this.attachObject(e.id,!1,!0);this.vs[this.av].layout=new dhtmlXLayoutObject(e,b,d||this.skin);this._isWindow&&this.attachEvent("_onBeforeTryResize",this.vs[this.av].layout._defineWindowMinDimension);this.vs[this.av].layoutId=e.id;this.vs[this.av].layoutObj=e;return this.vs[this._viewRestore()].layout};this.obj.attachEditor=function(){this._isWindow&&"dhx_skyblue"==
this.skin&&(this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw());var b=document.createElement("DIV");b.id="dhxEditorObj_"+this._genStr(12);b.style.position="relative";b.style.display="none";b.style.overflow="hidden";b.style.width="100%";b.style.height="100%";b.cmp="editor";document.body.appendChild(b);this.attachObject(b.id,!1,!0);this.vs[this.av].editor=new dhtmlXEditor(b.id,this.skin);this.vs[this.av].editorId=b.id;this.vs[this.av].editorObj=b;return this.vs[this._viewRestore()].editor};
this.obj.attachMap=function(b){var d=document.createElement("DIV");d.id="GMapsObj_"+this._genStr(12);d.style.position="relative";d.style.display="none";d.style.overflow="hidden";d.style.width="100%";d.style.height="100%";d.cmp="gmaps";document.body.appendChild(d);this.attachObject(d.id,!1,!0);b||(b={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP});this.vs[this.av].gmaps=new google.maps.Map(d,b);return this.vs[this.av].gmaps};this.obj.attachObject=
function(b,d,e){"string"==typeof b&&(b=document.getElementById(b));if(d){b.style.visibility="hidden";b.style.display="";var l=b.offsetWidth,m=b.offsetHeight}this._attachContent("obj",b);d&&this._isWindow&&(b.style.visibility="",this._adjustToContent(l,m));e||this._viewRestore()};this.obj.detachObject=function(b,d){for(var e=null,l=null,m="tree grid layout tabbar accordion folders".split(" "),k=0;k<m.length;k++)if(this.vs[this.av][m[k]]){e=this.vs[this.av][m[k]];l=this.vs[this.av][m[k]+"Obj"];if(b){e.unload&&
e.unload();for(e.destructor&&e.destructor();0<l.childNodes.length;)l.removeChild(l.childNodes[0]);l.parentNode.removeChild(l);e=l=null}else document.body.appendChild(l),l.style.display="none";this.vs[this.av][m[k]]=null;this.vs[this.av][m[k]+"Id"]=null;this.vs[this.av][m[k]+"Obj"]=null}if(null!=e&&null!=l)return[e,l];b&&this.vs[this.av]._frame&&(this._detachURLEvents(),this.vs[this.av]._frame=null);for(e=this.vs[this.av].dhxcont.mainCont[this.av];0<e.childNodes.length;)!0==b?e.removeChild(e.childNodes[0]):
(l=e.childNodes[0],null!=d?("object"!=typeof d&&(d=document.getElementById(d)),d.appendChild(l)):document.body.appendChild(l),l.style.display="none")};this.obj.appendObject=function(b){"string"==typeof b&&(b=document.getElementById(b));this._attachContent("obj",b,!0)};this.obj.attachHTMLString=function(b){this._attachContent("str",b);b=b.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var d=0;d<b.length;d++){var e=b[d].replace(/<([\/]{0,1})script[^>]*>/g,"");window.execScript?window.execScript(e):
window.eval(e)}};this.obj.attachURL=function(b,d,e){this._attachContent(!0==d?"urlajax":"url",b,!1,e);this._viewRestore()};this.obj.adjust=function(){if("dhx_skyblue"==this.skin){if(this.vs[this.av].menu){if(this._isWindow||this._isLayout)this.vs[this.av].menu._topLevelOffsetLeft=0,document.getElementById(this.vs[this.av].menuId).style.height="26px",this.vs[this.av].menuHeight=document.getElementById(this.vs[this.av].menuId).offsetHeight,this._doOnAttachMenu&&this._doOnAttachMenu("show");this._isCell&&
(document.getElementById(this.vs[this.av].menuId).className+=" in_layoutcell",this.vs[this.av].menuHeight=25);this._isAcc&&(document.getElementById(this.vs[this.av].menuId).className+=" in_acccell",this.vs[this.av].menuHeight=25);this._doOnAttachMenu&&this._doOnAttachMenu("adjust")}if(this.vs[this.av].toolbar){if(this._isWindow||this._isLayout)document.getElementById(this.vs[this.av].toolbarId).style.height="29px",this.vs[this.av].toolbarHeight=document.getElementById(this.vs[this.av].toolbarId).offsetHeight,
this._doOnAttachToolbar&&this._doOnAttachToolbar("show");this._isCell&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_layoutcell");this._isAcc&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_acccell")}}};this.obj._attachContent=function(b,d,e,l){if(!0!==e){this.vs[this.av]._frame&&(this._detachURLEvents(),this.vs[this.av]._frame=null);for(;0<this.vs[this.av].dhxcont.mainCont[this.av].childNodes.length;)this.vs[this.av].dhxcont.mainCont[this.av].removeChild(this.vs[this.av].dhxcont.mainCont[this.av].childNodes[0])}if("url"==
b){this._isWindow&&(null==d.cmp&&"dhx_skyblue"==this.skin)&&(this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw());b={};if(_isIE)try{b=document.createElement("<iframe name='"+l+"'>")}catch(m){b=document.createElement("IFRAME"),b.setAttribute("name",l)}else b=document.createElement("IFRAME");l&&(b.name=l);b.frameBorder=0;b.border=0;b.style.width="100%";b.style.height="100%";b.setAttribute("src","javascript:false;");this.vs[this.av].dhxcont.mainCont[this.av].appendChild(b);
b.src=d;this.vs[this.av]._frame=b;this._attachURLEvents()}else if("urlajax"==b){this._isWindow&&(null==d.cmp&&"dhx_skyblue"==this.skin)&&(this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor="#FFFFFF",this._redraw());var k=this,n=String(this.av).valueOf();l=new dtmlXMLLoaderObject(function(){var b=k.av;k.av=n;k.attachHTMLString(this.xmlDoc.responseText,this);k.av=b;k._doOnFrameContentLoaded&&k._doOnFrameContentLoaded();
this.destructor()},window);l.dhxWindowObject=this;l.loadXML(d)}else"obj"==b?(this._isWindow&&(null==d.cmp&&"dhx_skyblue"==this.skin)&&(this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor="#FFFFFF",this._redraw()),this.vs[this.av].dhxcont._frame=null,this.vs[this.av].dhxcont.mainCont[this.av].appendChild(d),this.vs[this.av].dhxcont.mainCont[this.av].style.overflow=!0===e?"auto":"hidden",d.style.display=""):"str"==
b&&(this._isWindow&&(null==d.cmp&&"dhx_skyblue"==this.skin)&&(this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor="#FFFFFF",this._redraw()),this.vs[this.av].dhxcont._frame=null,this.vs[this.av].dhxcont.mainCont[this.av].innerHTML=d)};this.obj._attachURLEvents=function(){var b=this,d=this.vs[this.av]._frame;_isIE?d.onreadystatechange=function(){if("complete"==d.readyState){try{8==_isIE&&8==document.documentMode&&
(d.style.position="relative"),d.contentWindow.document.body.onmousedown=function(){b._doOnFrameMouseDown&&b._doOnFrameMouseDown()}}catch(e){}try{b._doOnFrameContentLoaded&&b._doOnFrameContentLoaded()}catch(l){}}}:d.onload=function(){try{d.contentWindow.onmousedown=function(){b._doOnFrameMouseDown&&b._doOnFrameMouseDown()}}catch(e){}try{b._doOnFrameContentLoaded&&b._doOnFrameContentLoaded()}catch(l){}}};this.obj._detachURLEvents=function(){if(_isIE)try{this.vs[this.av]._frame.onreadystatechange=null,
this.vs[this.av]._frame.contentWindow.document.body.onmousedown=null,this.vs[this.av]._frame.onload=null}catch(b){}else try{this.vs[this.av]._frame.contentWindow.onmousedown=null,this.vs[this.av]._frame.onload=null}catch(d){}};this.obj.showMenu=function(){this.vs[this.av].menu&&(this.vs[this.av].menuId&&"none"==document.getElementById(this.vs[this.av].menuId).style.display)&&(this.vs[this.av].menuHidden=!1,this._doOnAttachMenu&&this._doOnAttachMenu("show"),document.getElementById(this.vs[this.av].menuId).style.display=
"",this._viewRestore())};this.obj.hideMenu=function(){this.vs[this.av].menu&&(this.vs[this.av].menuId&&"none"!=document.getElementById(this.vs[this.av].menuId).style.display)&&(document.getElementById(this.vs[this.av].menuId).style.display="none",this.vs[this.av].menuHidden=!0,this._doOnAttachMenu&&this._doOnAttachMenu("hide"),this._viewRestore())};this.obj.showToolbar=function(){this.vs[this.av].toolbar&&(this.vs[this.av].toolbarId&&"none"==document.getElementById(this.vs[this.av].toolbarId).style.display)&&
(this.vs[this.av].toolbarHidden=!1,this._doOnAttachToolbar&&this._doOnAttachToolbar("show"),document.getElementById(this.vs[this.av].toolbarId).style.display="",this._viewRestore())};this.obj.hideToolbar=function(){this.vs[this.av].toolbar&&(this.vs[this.av].toolbarId&&"none"!=document.getElementById(this.vs[this.av].toolbarId).style.display)&&(this.vs[this.av].toolbarHidden=!0,document.getElementById(this.vs[this.av].toolbarId).style.display="none",this._doOnAttachToolbar&&this._doOnAttachToolbar("hide"),
this._viewRestore())};this.obj.showStatusBar=function(){this.vs[this.av].sb&&(this.vs[this.av].sbId&&"none"==document.getElementById(this.vs[this.av].sbId).style.display)&&(this.vs[this.av].sbHidden=!1,this._doOnAttachStatusBar&&this._doOnAttachStatusBar("show"),document.getElementById(this.vs[this.av].sbId).style.display="",this._viewRestore())};this.obj.hideStatusBar=function(){this.vs[this.av].sb&&(this.vs[this.av].sbId&&"none"!=document.getElementById(this.vs[this.av].sbId).style.display)&&(this.vs[this.av].sbHidden=
!0,document.getElementById(this.vs[this.av].sbId).style.display="none",this._doOnAttachStatusBar&&this._doOnAttachStatusBar("hide"),this._viewRestore())};this.obj._dhxContDestruct=function(){for(var b in this.vs)this.av=b,this.detachMenu(),this.detachToolbar(),this.detachForm(),this.detachStatusBar(),this.detachObject(!0),this.vs[b].dhxcont.mainCont[b].parentNode.removeChild(this.vs[b].dhxcont.mainCont[b]),this.vs[b].dhxcont.mainCont[b]=null;this.vs[this.dv].dhxcont.mainCont=null;this.vs[this.dv].dhxcont.parentNode.removeChild(this.vs[this.dv].dhxcont);
for(b in this.vs)this.vs[b].dhxcont=null;this._dhxContDestruct=this._genStr=this._init=this._setPadding=this._viewRestore=this._detachURLEvents=this._attachURLEvents=this._attachContent=this.updateNestedObjects=this.hideCoverBlocker=this.showCoverBlocker=this.coverBlocker=this.adjustContent=this.moveContentTo=this.setMinContentSize=this.adjust=this.show=this.view=this.attachURL=this.attachHTMLString=this.appendObject=this.detachObject=this.attachObject=this.attachEditor=this.attachLayout=this.attachAccordion=
this.attachFolders=this.attachTabbar=this.attachTree=this.attachScheduler=this.attachGrid=this.hideStatusBar=this.hideToolbar=this.hideMenu=this.showStatusBar=this.showToolbar=this.showMenu=this.detachStatusBar=this.detachToolbar=this.detachMenu=this.attachStatusBar=this.attachToolbar=this.attachMenu=this.vs=null;d.st.parentNode.removeChild(d.st);d.st=null;d.setContent=null;d.dhxcont=null;d=d.obj=null;if(dhtmlx.detaches)for(b in dhtmlx.detaches)dhtmlx.detaches[b](this)};if(dhtmlx.attaches)for(var e in dhtmlx.attaches)this.obj[e]=
dhtmlx.attaches[e]}
function dhtmlXCalendarObject(b,d,e){this.i={};this.uid=function(){this.uidd||(this.uidd=(new Date).getTime());return this.uidd++};var f=null,g="string"==typeof b?document.getElementById(b):b;g&&("object"==typeof g&&g.tagName&&"input"!=String(g.tagName).toLowerCase())&&(f=g);g=null;if("object"!=typeof b||!b.length)b=[b];for(g=0;g<b.length;g++)"string"==typeof b[g]&&(b[g]=document.getElementById(b[g])||null),null!=b[g]&&(b[g].tagName&&"input"==String(b[g].tagName).toLowerCase())&&(this.i[this.uid()]=
b[g],b[g].calendar=this),b[g]=null;this.skin=d||"dhx_skyblue";this.setSkin=function(b){this.skin=b;this.base.className="dhtmlxcalendar_container dhtmlxcalendar_skin_"+this.skin};this.base=document.createElement("DIV");this.base.className="dhtmlxcalendar_container";this.base.style.display="none";null!=f?(this._hasParent=!0,f.appendChild(this.base),f=null):document.body.appendChild(this.base);this.setParent=function(b){this._hasParent&&("object"==typeof b?b.appendChild(this.base):"string"==typeof b&&
document.getElementById(b).appendChild(this.base))};this.setSkin(this.skin);this.base.onclick=function(b){b=b||event;b.cancelBubble=!0};this.loadUserLanguage=function(b){if(this.langData[b]&&(this.lang=b,this.setWeekStartDay(this.langData[this.lang].weekstart),this.msCont))for(var d=b=0;d<this.msCont.childNodes.length;d++)for(var e=0;e<this.msCont.childNodes[d].childNodes.length;e++)this.msCont.childNodes[d].childNodes[e].innerHTML=this.langData[this.lang].monthesSNames[b++]};this.contMonth=document.createElement("DIV");
this.contMonth.className="dhtmlxcalendar_month_cont";this.contMonth.onselectstart=function(b){b=b||event;b.cancelBubble=!0;return b.returnValue=!1};this.base.appendChild(this.contMonth);b=document.createElement("UL");b.className="dhtmlxcalendar_line";this.contMonth.appendChild(b);d=document.createElement("LI");d.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr";d.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span class='dhtmlxcalendar_month_label_month'>Month</span><span class='dhtmlxcalendar_month_label_year'>Year</span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>";
b.appendChild(d);var h=this;d.onclick=function(b){b=b||event;var d=b.target||b.srcElement;d.className&&0===d.className.indexOf("dhtmlxcalendar_month_arrow")?(h._hideSelector(),b=d.parentNode.firstChild==d?-1:1,h._drawMonth(new Date(h._activeMonth.getFullYear(),h._activeMonth.getMonth()+b,1,0,0,0,0)),h._setMonthYearDate()):d.className&&"dhtmlxcalendar_month_label_month"==d.className?(b.cancelBubble=!0,h._showSelector("month",31,21,"selector_month",!0)):d.className&&"dhtmlxcalendar_month_label_year"==
d.className?(b.cancelBubble=!0,h._showSelector("year",42,21,"selector_year",!0)):h._hideSelector()};this.contDays=document.createElement("DIV");this.contDays.className="dhtmlxcalendar_days_cont";this.base.appendChild(this.contDays);this.setWeekStartDay=function(b){0==b&&(b=7);this._wStart=Math.min(Math.max(isNaN(b)?1:b,1),7);this._drawDaysOfWeek()};this._drawDaysOfWeek=function(){if(0==this.contDays.childNodes.length){var b=document.createElement("UL");b.className="dhtmlxcalendar_line";this.contDays.appendChild(b)}else b=
this.contDays.firstChild;var d=this._wStart,e=this.langData[this.lang].daysSNames;e.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var f=0;7>f;f++){if(null==b.childNodes[f]){var g=document.createElement("LI");b.appendChild(g)}else g=b.childNodes[f];g.className="dhtmlxcalendar_cell"+(6<=d?" dhtmlxcalendar_day_weekday_cell":"")+(0==f?"_first":"");g.innerHTML=e[d];7<++d&&(d=1)}null!=this._activeMonth&&this._drawMonth(this._activeMonth)};this._wStart=this.langData[this.lang].weekstart;
this.setWeekStartDay(this._wStart);this.contDates=document.createElement("DIV");this.contDates.className="dhtmlxcalendar_dates_cont";this.base.appendChild(this.contDates);this.contDates.onclick=function(b){b=b||event;b=b.target||b.srcElement;if(null!=b._date&&!b._css_dis){var d=h._activeDate.getHours(),e=h._activeDate.getMinutes(),f=h._activeDate.getSeconds();if(!h.checkEvent("onBeforeChange")||h.callEvent("onBeforeChange",[new Date(b._date.getFullYear(),b._date.getMonth(),b._date.getDate(),d,e,f)])){null!=
h._activeDateCell&&(h._activeDateCell._css_date=!1,h._updateCellStyle(h._activeDateCell._q,h._activeDateCell._w));var g=h._hasParent&&h._activeDate.getFullYear()+"_"+h._activeDate.getMonth()!=b._date.getFullYear()+"_"+b._date.getMonth();h._activeDate=new Date(b._date.getFullYear(),b._date.getMonth(),b._date.getDate(),d,e,f);h._activeDateCell=b;h._activeDateCell._css_date=!0;h._activeDateCell._css_hover=!1;h._lastHover=null;h._updateCellStyle(h._activeDateCell._q,h._activeDateCell._w,!0);g&&h._drawMonth(h._activeDate);
h._activeInp&&h.i[h._activeInp]&&(h.i[h._activeInp].value=h._dateToStr(new Date(h._activeDate.getTime())));b=h.i[h._activeInp];h._hasParent||(-1==h._dateFormat.indexOf("%H")||!h.c)&&h._hide();h.callEvent("onClick",[new Date(h._activeDate.getTime()),b])}}};this.contDates.onmouseover=function(b){b=b||event;b=b.target||b.srcElement;null!=b._date&&(b._css_hover=!0,h._updateCellStyle(b._q,b._w,!0),h._lastHover=b)};this.contDates.onmouseout=function(){h._clearDayHover()};this._lastHover=null;this._clearDayHover=
function(){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),this._lastHover=null)};for(g=0;6>g;g++){b=document.createElement("UL");b.className="dhtmlxcalendar_line";this.contDates.appendChild(b);for(f=0;7>f;f++)d=document.createElement("LI"),d.className="dhtmlxcalendar_cell",b.appendChild(d)}this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.base.appendChild(this.contTime);this.showTime=function(){this.contTime.firstChild.style.marginTop=
this._onlyTime?"3px":"0px";0<String(this.base.className).search("dhtmlxcalendar_time_hidden")&&(this.base.className=String(this.base.className).replace(/dhtmlxcalendar_time_hidden/gi,""))};this.hideTime=function(){0>String(this.base.className).search("dhtmlxcalendar_time_hidden")&&(this.base.className+=" dhtmlxcalendar_time_hidden")};b=document.createElement("UL");b.className="dhtmlxcalendar_line";this.contTime.appendChild(b);d=document.createElement("LI");d.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";
d.innerHTML="<div class='dhtmlxcalendar_time_label'></div><span class='dhtmlxcalendar_label_hours' _h='true'></span><span class='dhtmlxcalendar_label_colon'>:</span><span class='dhtmlxcalendar_label_minutes' _m='true'></span><span style='display:none' class='dhtmlxcalendar_label_colon'>:</span><span style='display:none' class='dhtmlxcalendar_label_minutes' _s='true'></span>";b.appendChild(d);d.onclick=function(b){b=b||event;var d=b.target||b.srcElement,e=h._onlyTime?20:115;d.className&&"dhtmlxcalendar_label_hours"==
d.className?(b.cancelBubble=!0,h._showSelector("hours",-5,e,"selector_hours",!0)):d.className&&"dhtmlxcalendar_label_minutes"==d.className&&d.getAttribute("_m")?(b.cancelBubble=!0,h._showSelector("minutes",12,e,"selector_minutes",!0)):d.className&&"dhtmlxcalendar_label_minutes"==d.className&&d.getAttribute("_s")?(b.cancelBubble=!0,h._showSelector("seconds",30,e,"selector_minutes",!0)):h._hideSelector()};this._activeMonth=null;this._activeDate=new Date;this._activeDateCell=null;this.setDate=function(b){""===
b&&(b=new Date);b instanceof Date||(b=this._strToDate(b,!1));b=b.getTime();this._isOutOfRange(b)||(this._activeDate=new Date(b),this._drawMonth(this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes(),this._updateVisibleSeconds())};this.getDate=function(b){var d=new Date(this._activeDate.getTime());return b?this._dateToStr(d):d};this._drawMonth=function(b){if(b instanceof Date){isNaN(b.getFullYear())&&(b=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,
0,0));this._activeMonth=new Date(b.getFullYear(),b.getMonth(),1,0,0,0,0);this._activeDateCell=null;var d=new Date(this._activeMonth.getTime()),e=d.getDay()-this._wStart;0>e&&(e+=7);d.setDate(d.getDate()-e);for(var e=b.getMonth(),f=(new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0)).getTime(),g=0,h=0;6>h;h++)for(var l=this._wStart,x=0;7>x;x++){var A=new Date(d.getFullYear(),d.getMonth(),d.getDate()+g++,0,0,0,0);this.contDates.childNodes[h].childNodes[x].innerHTML=
A.getDate();A.getDay();var D=A.getTime();this.contDates.childNodes[h].childNodes[x]._date=new Date(D);this.contDates.childNodes[h].childNodes[x]._q=h;this.contDates.childNodes[h].childNodes[x]._w=x;this.contDates.childNodes[h].childNodes[x]._css_month=A.getMonth()==e;this.contDates.childNodes[h].childNodes[x]._css_date=D==f;this.contDates.childNodes[h].childNodes[x]._css_weekend=6<=l;this.contDates.childNodes[h].childNodes[x]._css_dis=this._isOutOfRange(D);this.contDates.childNodes[h].childNodes[x]._css_holiday=
!0==this._holidays[D];this.contDates.childNodes[h].childNodes[x]._css_custom=this._customdays[D]?!0==this._customdays[D][0]?this._customdays[D][1]:!1:null;this._updateCellStyle(h,x);D==f&&(this._activeDateCell=this.contDates.childNodes[h].childNodes[x]);7<++l&&(l=1)}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this.langData[this.lang].monthesFNames[b.getMonth()];this.contMonth.firstChild.firstChild.childNodes[2].innerHTML=b.getFullYear()}};this._updateCellStyle=function(b,d){var e=
this.contDates.childNodes[b].childNodes[d],f;f="dhtmlxcalendar_cell dhtmlxcalendar_cell"+(e._css_month?"_month":"");f+=e._css_date?"_date":"";f+=e._css_weekend?"_weekend":"";f+=e._css_holiday?"_holiday":"";f+=e._css_dis?"_dis":"";f+=e._css_hover&&!e._css_dis?"_hover":"";e.className=f;e.style.cssText=e._css_custom?e._css_custom:"";if(3==arguments.length||e._css_date)e.style.cssText=""};this._initSelector=function(b,d){this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className=
"dhtmlxcalendar_selector_cover",this.base.appendChild(this._selCover));this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),
this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className=
"dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=
function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(b){b=b||event;b.cancelBubble=!0;h._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(b){b=b||event;b.cancelBubble=!0;h._scrollYears(1)},this._sel._ta=
{},this._selHover=null,this._sel.onmouseover=function(b){b=b||event;b=b.target||b.srcElement;!0===b._cell&&(h._selHover!=b&&h._clearSelHover(),null!=String(b.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)&&(b.className+=" dhtmlxcalendar_selector_cell_hover",h._selHover=b))},this._sel.onmouseout=function(){h._clearSelHover()},this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow");if(!0!=this._sel._ta[b]){if("month"==
b){this._msCells={};this.msCont=document.createElement("DIV");this.msCont.className="dhtmlxcalendar_area_"+d;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);for(var e=0,f=0;4>f;f++){var g=document.createElement("UL");g.className="dhtmlxcalendar_selector_line";this.msCont.appendChild(g);for(var l=0;3>l;l++){var w=document.createElement("LI");w.innerHTML=this.langData[this.lang].monthesSNames[e];w.className="dhtmlxcalendar_selector_cell";g.appendChild(w);w._month=e;
w._cell=!0;this._msCells[e++]=w}}this.msCont.onclick=function(b){b=b||event;b.cancelBubble=!0;b=b.target||b.srcElement;null!=b._month&&(h._hideSelector(),h._updateActiveMonth(),h._drawMonth(new Date(h._activeMonth.getFullYear(),b._month,1,0,0,0,0)),h._doOnSelectorChange())}}if("year"==b){this._ysCells={};this.ysCont=document.createElement("DIV");this.ysCont.className="dhtmlxcalendar_area_"+d;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(f=0;4>f;f++){g=document.createElement("UL");
g.className="dhtmlxcalendar_selector_line";this.ysCont.appendChild(g);for(l=0;3>l;l++)w=document.createElement("LI"),w.className="dhtmlxcalendar_selector_cell",w._cell=!0,g.appendChild(w)}this.ysCont.onclick=function(b){b=b||event;b.cancelBubble=!0;b=b.target||b.srcElement;null!=b._year&&(h._hideSelector(),h._drawMonth(new Date(b._year,h._activeMonth.getMonth(),1,0,0,0,0)),h._doOnSelectorChange())}}if("hours"==b){this._hsCells={};this.hsCont=document.createElement("DIV");this.hsCont.className="dhtmlxcalendar_area_"+
d;this.hsCont.setAttribute("_h",!0);this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);for(f=e=0;4>f;f++){g=document.createElement("UL");g.className="dhtmlxcalendar_selector_line";this.hsCont.appendChild(g);for(l=0;6>l;l++)w=document.createElement("LI"),w.innerHTML=this._fixLength(e,2),w.className="dhtmlxcalendar_selector_cell",g.appendChild(w),w._hours=e,w._cell=!0,this._hsCells[e++]=w}this.hsCont.onclick=function(b){b=b||event;b.cancelBubble=!0;b=b.target||b.srcElement;
null!=b._hours&&(h._hideSelector(),h._activeDate.setHours(b._hours),h._updateActiveHours(),h._updateVisibleHours(),h._doOnSelectorChange())}}if("minutes"==b){this._rsCells={};this.rsCont=document.createElement("DIV");this.rsCont.className="dhtmlxcalendar_area_"+d;this.rsCont.setAttribute("_m",!0);this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(f=e=0;10>f;f++){g=document.createElement("UL");g.className="dhtmlxcalendar_selector_line";this.rsCont.appendChild(g);
for(l=0;6>l;l++)w=document.createElement("LI"),w.innerHTML=this._fixLength(e,2),w.className="dhtmlxcalendar_selector_cell",g.appendChild(w),w._minutes=e,w._cell=!0,this._rsCells[e]=w,e+=1}this.rsCont.onclick=function(b){b=b||event;b.cancelBubble=!0;b=b.target||b.srcElement;null!=b._minutes&&(h._hideSelector(),h._activeDate.setMinutes(b._minutes),h._updateActiveMinutes(),h._updateVisibleMinutes(),h._doOnSelectorChange())}}if("seconds"==b){this._ssCells={};this.ssCont=document.createElement("DIV");
this.ssCont.className="dhtmlxcalendar_area_"+d;this.ssCont.setAttribute("_s",!0);this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ssCont);for(f=e=0;10>f;f++){g=document.createElement("UL");g.className="dhtmlxcalendar_selector_line";this.ssCont.appendChild(g);for(l=0;6>l;l++)w=document.createElement("LI"),w.innerHTML=this._fixLength(e,2),w.className="dhtmlxcalendar_selector_cell",g.appendChild(w),w._seconds=e,w._cell=!0,this._ssCells[e]=w,e+=1}this.ssCont.onclick=function(b){b=
b||event;b.cancelBubble=!0;b=b.target||b.srcElement;null!=b._seconds&&(h._hideSelector(),h._activeDate.setSeconds(b._seconds),h._updateActiveSeconds(),h._updateVisibleSeconds(),h._doOnSelectorChange())}}this._sel._ta[b]=!0}};this._showSelector=function(b,d,e,f,g){if(!0===g&&null!=this._sel&&this._isSelectorVisible()&&b==this._sel._t)this._hideSelector();else{this.ysCont&&(this.ysCont.style.display="none");this.msCont&&(this.msCont.style.display="none");this.rsCont&&(this.rsCont.style.display="none");
this.hsCont&&(this.hsCont.style.display="none");this.ssCont&&(this.ssCont.style.display="none");(!this._sel||!this._sel._ta[b])&&this._initSelector(b,f);this._selCover.style.display="";this._sel._t=b;this._sel.style.left=d+"px";this._sel.style.top=e+"px";this._sel.style.display="";this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+f;if(this._onlyTime)this._sel.lastChild.style.bottom="auto",this._sel.lastChild.style.top="0px",this._sel.firstChild.style.marginTop="8px",this._sel.firstChild.style.borderBottom=
"1px solid #CCC",this._sel.lastChild.style.backgroundPosition="50% -69px";else if("hours"==b||"seconds"==b||"minutes"==b)this._sel.lastChild.style.bottom="0px",this._sel.lastChild.style.top="auto",this._sel.firstChild.style.marginTop="0px",this._sel.firstChild.style.borderBottom="none",this._sel.lastChild.style.backgroundPosition="50% -78px";switch(b){case "seconds":this.ssCont&&(this.ssCont.style.display="block");break;case "minutes":this.rsCont&&(this.rsCont.style.display="block");break;case "hours":this.hsCont&&
(this.hsCont.style.display="block");break;case "year":this.ysCont&&(this.ysCont.style.display="block");break;case "month":this.msCont&&(this.msCont.style.display="block")}this._doOnSelectorShow(b)}};this._doOnSelectorShow=function(b){"month"==b&&this._updateActiveMonth();"year"==b&&this._updateYearsList(this._activeMonth);"hours"==b&&this._updateActiveHours();"minutes"==b&&this._updateActiveMinutes();"seconds"==b&&this._updateActiveSeconds()};this._hideSelector=function(){this._sel&&(this._sel.style.display=
"none",this._selCover.style.display="none")};this._isSelectorVisible=function(){return!this._sel?!1:"none"!=this._sel.style.display};this._setMonthYearDate=function(){this._onlyMonthYear&&this.callEvent("onBeforeChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0)])&&(this.setDate(new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)),this._activeInp&&(this.i[this._activeInp].value=this._dateToStr(new Date(this._activeDate.getTime()))),
this.callEvent("onClick",[new Date(this._activeDate.getTime()),this._activeInp]))};this._doOnSelectorChange=function(b){this._setMonthYearDate();this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),b])};this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,
"")),this._selHover=null)};this._updateActiveMonth=function(){"undefined"!=typeof this._msActive&&"undefined"!=typeof this._msCells[this._msActive]&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell");this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var b=this._activeMonth.getFullYear();this._ysCells[b]&&(this._ysCells[b].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};
this._updateYearsList=function(b){for(var d in this._ysCells)this._ysCells[d]=null,delete this._ysCells[d];b=12*Math.floor(b.getFullYear()/12);for(d=0;4>d;d++)for(var e=0;3>e;e++)this.ysCont.childNodes[d].childNodes[e].innerHTML=b,this.ysCont.childNodes[d].childNodes[e]._year=b,this.ysCont.childNodes[d].childNodes[e].className="dhtmlxcalendar_selector_cell",this._ysCells[b++]=this.ysCont.childNodes[d].childNodes[e];this._updateActiveYear()};this._scrollYears=function(b){b=new Date((0>b?this.ysCont.firstChild.firstChild._year:
this.ysCont.lastChild.lastChild._year)+b,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(b)};this._updateActiveHours=function(){"undefined"!=typeof this._hsActive&&"undefined"!=typeof this._hsCells[this._hsActive]&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell");this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=
this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){"undefined"!=typeof this._rsActive&&"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell");this._rsActive=this._activeDate.getMinutes();"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};this._updateActiveSeconds=function(){"undefined"!=
typeof this._ssActive&&"undefined"!=typeof this._ssCells[this._ssActive]&&(this._ssCells[this._ssActive].className="dhtmlxcalendar_selector_cell");this._ssActive=this._activeDate.getSeconds();"undefined"!=typeof this._ssCells[this._ssActive]&&(this._ssCells[this._ssActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};this._updateVisibleMinutes=function(){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this._fixLength(this._activeDate.getMinutes(),2)};
this._updateVisibleSeconds=function(){this.contTime.firstChild.firstChild.childNodes[5].innerHTML=this._fixLength(this._activeDate.getSeconds(),2)};this._fixLength=function(b,d){for(;String(b).length<d;)b="0"+String(b);return b};this._dateFormat="";this._dateFormatRE=null;this.setDateFormat=function(b){this._dateFormat=b;-1<this._dateFormat.indexOf("%Y")&&-1<this._dateFormat.indexOf("%m")&&-1==this._dateFormat.indexOf("%d")?this._onlyMonthYear=!0:this._onlyMonthYear=!1;-1==this._dateFormat.indexOf("%Y")&&
-1==this._dateFormat.indexOf("%m")?this._onlyTime=!0:this._onlyTime=!1;this._dateFormatRE=RegExp(String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(b){switch(b.replace(/%/,"")){case "m":case "d":case "H":case "i":return"\\d{2}";case "s":return h.enableSeconds(),"\\d{2}";case "Y":return"\\d{4}"}return b}))};this.enableSeconds=function(){this.contTime.firstChild.firstChild.childNodes[0].style.left="48px";this.contTime.firstChild.firstChild.childNodes[4].style.display="";this.contTime.firstChild.firstChild.childNodes[5].style.display=
""};this.setDateFormat("%Y-%m-%d");this._strToDate=function(b,d,e){var f={Y:!1,m:!1,d:!1,H:!1,i:!1,s:!1};b=String(b).match(/[0-9]{1,}/g);e=(e||this._dateFormat).match(/%[a-zA-Z]/g);if(!b)return"Invalid Date";if(b.length!=e.length)for(var g=b.join(""),h=0;h<e.length;h++){var l=e[h].replace(/%/g,""),x=2;"Y"==l?(f[l]=g.substring(0,4),x=4):f[l]=g.substring(0,2);g=g.substring(x,g.length)}else for(h=0;h<e.length;h++)l=e[h].replace(/%/g,""),"undefined"!=typeof f[l]&&(f[l]=Number(b[h]));if(d)return f;for(b in f)!1===
f[b]&&(f[b]=0);return new Date(f.Y,f.m-1,f.d?f.d:1,f.H,f.i,f.s,0)};this._dateToStr=function(b,d){if(b instanceof Date)var e=function(b){return 1==String(b).length?"0"+String(b):b},f=String(d||this._dateFormat).replace(/%[a-zA-Z]/g,function(d){switch(d){case "%d":return e(b.getDate());case "%j":return b.getDate();case "%D":return h.langData[h.lang].daysSNames[b.getDay()];case "%l":return h.langData[h.lang].daysFNames[b.getDay()];case "%m":return e(b.getMonth()+1);case "%n":return date.getMonth()+1;
case "%M":return h.langData[h.lang].monthesSNames[b.getMonth()];case "%F":return h.langData[h.lang].monthesFNames[b.getMonth()];case "%y":return e(b.getYear()%100);case "%Y":return b.getFullYear();case "%g":return(b.getHours()+11)%12+1;case "%h":return e((b.getHours()+11)%12+1);case "%G":return b.getHours();case "%H":return e(b.getHours());case "%i":return e(b.getMinutes());case "%s":return e(b.getSeconds());case "%a":return 11<b.getHours()?"pm":"am";case "%A":return 11<b.getHours()?"PM":"AM";case "%%":"%";
default:return d}});return f||String(b)};this._updateDateStr=function(b){if(""==b)this.setDate(new Date),this.callEvent("onChange",[null,!0]);else{if(!this._dateFormatRE||!b.match(this._dateFormatRE))return-1;b=this._strToDate(b,!0);var d=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds());!1!==b.Y&&b.Y!=d.getFullYear()&&this._activeDate.setFullYear(b.Y);!1!==b.m&&
(b.m--,b.m!=d.getMonth()&&this._activeDate.setMonth(b.m));!1!==b.d&&b.d!=d.getDate()&&this._activeDate.setDate(b.d);!1!==b.H&&b.H!=d.getHours()&&this._activeDate.setHours(b.H);!1!==b.i&&b.i!=d.getMinutes()&&this._activeDate.setMinutes(b.i);!1!==b.s&&b.s!=d.getSeconds()&&this._activeDate.setSeconds(b.s);this._drawMonth(this._activeDate);this._updateVisibleSeconds();this._updateVisibleMinutes();this._updateVisibleHours();this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t);this._doOnSelectorChange(!0)}};
this.setFormatedDate=function(b,d,e,f){b=this._strToDate(d,!1,b);if(f)return b;this.setDate(b)};this.getFormatedDate=function(b,d){d&&d instanceof Date||(d=new Date(this._activeDate));return this._dateToStr(d,b)};this.show=function(b){if(!b&&this._hasParent)this._show();else if("object"==typeof b&&"undefined"!=typeof b._dhtmlxcalendar_uid&&this.i[b._dhtmlxcalendar_uid]==b)this._show(b._dhtmlxcalendar_uid);else{if("undefined"==typeof b)for(var d in this.i)b||(b=d);b&&this._show(b)}};this.hide=function(){this._isVisible()&&
this._hide()};this.draw=function(){this.show()};this.close=function(){this.hide()};this._activeInp=null;this.pos=e?e:"bottom";this.setPosition=function(b,d){"right"==b||"bottom"==b||"top"==b||"leftTop"==b?this.pos=b:this._hasParent||("undefined"!=typeof b&&!isNaN(b)&&(this.base.style.left=b+"px"),"undefined"!=typeof d&&!isNaN(d)&&(this.base.style.top=d+"px"))};this._show=function(b,d){this._adjustShowConts();if(!0===d&&this._activeInp==b&&this._isVisible())this._hide();else{if(b){var e=this.pos;if("right"==
e)this.base.style.left=this._getLeft(this.i[b])+this.i[b].offsetWidth-1+"px",this.base.style.top=this._getTop(this.i[b])+"px";else if("bottom"==e){this.base.style.left=this._getLeft(this.i[b])+"px";var f=this._getTop(this.i[b]),g=f+this.i[b].offsetHeight-1;g+211>document.body.scrollHeight?(this.base.style.top=f+"px",e="top"):this.base.style.top=g+"px"}else"top"==e&&(this.base.style.left=this._getLeft(this.i[b])+"px",this.base.style.top=this._getTop(this.i[b])+"px");this._activeInp=b}else this.base.style.left=
"0px",this.base.style.top="0px";this._hideSelector();this.base.style.display="";"top"==e&&(this.base.style.top=this._getTop(this.i[b])-this.base.offsetHeight+"px");"leftTop"==e&&(this.base.style.left=this._getLeft(this.i[b])+this.i[b].offsetWidth-this.base.offsetWidth+"px",this.base.style.top=this._getTop(this.i[b])-this.base.offsetHeight+"px");this.callEvent("onShow",[])}};this._hide=function(){this._hideSelector();this.base.style.display="none";this._activeInp=null};this._isVisible=function(){return"none"!=
this.base.style.display};this._getLeft=function(b){return this._posGetOffset(b).left};this._getTop=function(b){return this._posGetOffset(b).top};this._posGetOffsetSum=function(b){for(var d=0,e=0;b;)d+=parseInt(b.offsetTop),e+=parseInt(b.offsetLeft),b=b.offsetParent;return{top:d,left:e}};this._posGetOffsetRect=function(b){b=b.getBoundingClientRect();var d=document.body,e=document.documentElement,f=b.left+(window.pageXOffset||e.scrollLeft||d.scrollLeft)-(e.clientLeft||d.clientLeft||0)-0;return{top:Math.round(b.top+
(window.pageYOffset||e.scrollTop||d.scrollTop)-(e.clientTop||d.clientTop||0)-0),left:Math.round(f)}};this._posGetOffset=function(b){return this[b.getBoundingClientRect?"_posGetOffsetRect":"_posGetOffsetSum"](b)};this._rangeActive=!1;this._rangeTo=this._rangeFrom=null;this._rangeSet={};this.setInsensitiveDays=function(b){b=this._extractDates(b);for(var d=0;d<b.length;d++)this._rangeSet[(new Date(b[d].getFullYear(),b[d].getMonth(),b[d].getDate(),0,0,0,0)).getTime()]=!0;this._drawMonth(this._activeDate)};
this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeDate)};this._holidays={};this.setHolidays=function(b){if(null==b)this._clearHolidays();else if(null!=b){b=this._extractDates(b);for(var d=0;d<b.length;d++)this._holidays[(new Date(b[d].getFullYear(),b[d].getMonth(),b[d].getDate(),0,0,0,0)).getTime()]=!0}this._drawMonth(this._activeDate)};this._customdays={};this.setCustomdays=function(b,d){if(null==b)this._clearCustomdays();else if(null!=b)for(var e=this._extractDates(b),
f=0;f<e.length;f++)this._customdays[(new Date(e[f].getFullYear(),e[f].getMonth(),e[f].getDate(),0,0,0,0)).getTime()]=[!0,d];this._drawMonth(this._activeDate)};this._extractDates=function(b){if("string"==typeof b||b instanceof Date)b=[b];for(var d=[],e=0;e<b.length;e++)if("string"==typeof b[e])for(var f=b[e].split(","),g=0;g<f.length;g++)d.push(this._strToDate(f[g],!1));else b[e]instanceof Date&&d.push(b[e]);return d};this._clearRange=function(){this._rangeActive=!1;this._rangeTo=this._rangeFrom=this._rangeType=
null};this._clearRangeSet=function(){for(var b in this._rangeSet)this._rangeSet[b]=null,delete this._rangeSet[b]};this._clearHolidays=function(){for(var b in this._holidays)this._holidays[b]=null,delete this._holidays[b]};this._clearCustomdays=function(){for(var b in this._customdays)this._customdays[b]=null,delete this._customdays[b]};this._isOutOfRange=function(b){return!0==this._rangeSet[b]||this._rangeActive&&("in"==this._rangeType&&(b<this._rangeFrom||b>this._rangeTo)||"out"==this._rangeType&&
b>=this._rangeFrom&&b<=this._rangeTo||"from"==this._rangeType&&b<this._rangeFrom||"to"==this._rangeType&&b>this._rangeTo)?!0:!1};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeDate)};this.setSensitiveRange=function(b,d,e){var f=!1;if(null!=b&&null!=d){b instanceof Date||(b=this._strToDate(b,!1));d instanceof Date||(d=this._strToDate(d,!1));if(b.getTime()>d.getTime())return;this._rangeFrom=(new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0)).getTime();this._rangeTo=
(new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0,0)).getTime();this._rangeActive=!0;this._rangeType="in";f=!0}!f&&(null!=b&&null==d)&&(b instanceof Date||(b=this._strToDate(b,!1)),this._rangeFrom=(new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0)).getTime(),this._rangeTo=null,!0===e&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",f=!0);!f&&(null==b&&null!=d)&&(d instanceof Date||(d=this._strToDate(d,!1)),this._rangeFrom=null,this._rangeTo=(new Date(d.getFullYear(),
d.getMonth(),d.getDate(),0,0,0,0)).getTime(),!0===e&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",f=!0);f&&this._drawMonth(this._activeDate)};this.setInsensitiveRange=function(b,d){null!=b&&null!=d?(b instanceof Date||(b=this._strToDate(b,!1)),d instanceof Date||(d=this._strToDate(d,!1)),b.getTime()>d.getTime()||(this._rangeFrom=(new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0)).getTime(),this._rangeTo=(new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0,0)).getTime(),this._rangeActive=
!0,this._rangeType="out",this._drawMonth(this._activeDate))):null!=b&&null==d?this.setSensitiveRange(null,b,!0):null==b&&null!=d&&this.setSensitiveRange(d,null,!0)};this._doOnClick=function(b){b=b||event;b=b.target||b.srcElement;if(b._dhtmlxcalendar_uid&&b._dhtmlxcalendar_uid!=h._activeInp&&h._isVisible())h._hide();else if(!b._dhtmlxcalendar_uid||!h.i[b._dhtmlxcalendar_uid])h._isSelectorVisible()?h._hideSelector():!h._hasParent&&h._isVisible()&&h._hide()};this._doOnKeyDown=function(b){b=b||event;
27==b.keyCode&&(h._isSelectorVisible()?h._hideSelector():h._isVisible()&&!h._hasParent&&h._hide())};this._doOnInpClick=function(b){b=b||event;b=b.target||b.srcElement;b._dhtmlxcalendar_uid&&(h._updateDateStr(b.value),h._show(b._dhtmlxcalendar_uid,!0))};this._adjustShowConts=function(){for(var b in this.i);this._onlyMonthYear?(this.contDates.style.display="none",this.contDays.style.display="none",this.contMonth.style.display="",this.base.style.borderBottom="1px solid #C1C1C1",this.hideTime()):this._onlyTime?
(this.contDates.style.display="none",this.contDays.style.display="none",this.contMonth.style.display="none",this.base.style.borderBottom="1px solid #C1C1C1",this.showTime()):(this.contDates.style.display="",this.contDays.style.display="",this.contMonth.style.display="",this.base.style.borderBottom="1px solid #C1C1C1",-1!=this._dateFormat.indexOf("%H")?this.showTime():this.hideTime())};this._doOnInpKeyUp=function(b){b=b||event;var d=b.target||b.srcElement;if(13==b.keyCode||!d._dhtmlxcalendar_uid||
41>b.keyCode&&33<b.keyCode)return!0;h._updateDateStr(d.value)};this._doOnUnload=function(){h&&h.unload&&h.unload()};window.addEventListener?(document.body.addEventListener("click",h._doOnClick,!1),window.addEventListener("keydown",h._doOnKeyDown,!1),window.addEventListener("unload",h._doOnUnload,!1)):(document.body.attachEvent("onclick",h._doOnClick),document.body.attachEvent("onkeydown",h._doOnKeyDown),window.attachEvent("onunload",h._doOnUnload));this.attachObj=function(b){var d=this.uid();this.i[d]=
b;this._attachEventsToObject(d)};this.detachObj=function(b){b=b._dhtmlxcalendar_uid;null!=this.i[b]&&(this._detachEventsFromObject(b),this.i[b]._dhtmlxcalendar_uid=null,this.i[b]=null,delete this.i[b])};this._attachEventsToObject=function(b){this.i[b]._dhtmlxcalendar_uid=b;window.addEventListener?(this.i[b].addEventListener("click",h._doOnInpClick,!1),this.i[b].addEventListener("keyup",h._doOnInpKeyUp,!1)):(this.i[b].attachEvent("onclick",h._doOnInpClick),this.i[b].attachEvent("onkeyup",h._doOnInpKeyUp))};
this._detachEventsFromObject=function(b){window.addEventListener?(this.i[b].removeEventListener("click",h._doOnInpClick,!1),this.i[b].removeEventListener("keyup",h._doOnInpKeyUp,!1)):(this.i[b].detachEvent("onclick",h._doOnInpClick),this.i[b].detachEvent("onkeyup",h._doOnInpKeyUp))};for(var l in this.i)this._attachEventsToObject(l);this.evs={};this.attachEvent=function(b,d){var e=this.uid();this.evs[e]={name:String(b).toLowerCase(),func:d};return e};this.detachEvent=function(b){this.evs[b]&&(this.evs[b].name=
null,this.evs[b].func=null,this.evs[b]=null,delete this.evs[b])};this.callEvent=function(b,d){var e=!0,f=String(b).toLowerCase();d=d||[];for(var g in this.evs)if(this.evs[g].name==f)var h=this.evs[g].func.apply(this,d),e=e&&h;return e};this.checkEvent=function(b){var d=!1;b=String(b).toLowerCase();for(var e in this.evs)d=d||this.evs[e].name==b;return d};this.unload=function(){this.uidd=this.uid=this._lastHover=this._dateFormatRE=this._dateFormat=this._activeMonth=this._activeInp=this._activeDateCell=
this._activeDate=null;dhtmlx._detachEvent(document.body,"click",h._doOnClick);dhtmlx._detachEvent(window,"keydown",h._doOnKeyDown);dhtmlx._detachEvent(window,"unload",h._doOnUnload);this._doOnUnload=this._doOnKeyDown=this._doOnClick=null;for(var b in this.i)try{this.i[b]._dhtmlxcalendar_uid=null,dhtmlx._detachEvent(this.i[b],"click",h._doOnInpClick),dhtmlx._detachEvent(this.i[b],"keyup",h._doOnInpKeyUp),this.i[b]=null,delete this.i[b]}catch(d){}this._doOnInpKeyUp=this._doOnInpClick=this.i=null;for(b in this.evs)this.detachEvent(b);
this.callEvent=this.checkEvent=this.detachEvent=this.attachEvent=this.evs=null;this.contMonth.onselectstart=null;this.contMonth.firstChild.firstChild.onclick=null;this.contMonth.firstChild.firstChild.firstChild.onmouseover=null;this.contMonth.firstChild.firstChild.firstChild.onmouseout=null;this.contMonth.firstChild.firstChild.lastChild.onmouseover=null;for(this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;0<this.contMonth.firstChild.firstChild.childNodes.length;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);
this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild);this.contMonth.removeChild(this.contMonth.firstChild);this.contMonth.parentNode.removeChild(this.contMonth);for(this.contMonth=null;0<this.contDays.firstChild.childNodes.length;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);this.contDays.removeChild(this.contDays.firstChild);this.contDays.parentNode.removeChild(this.contDays);this.contDays=null;this.contDates.onclick=null;this.contDates.onmouseover=
null;for(this.contDates.onmouseout=null;0<this.contDates.childNodes.length;){for(;0<this.contDates.lastChild.childNodes.length;)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);
this.contDates.removeChild(this.contDates.lastChild)}this.contDates.parentNode.removeChild(this.contDates);this.contDates=null;for(this.contTime.firstChild.firstChild.onclick=null;0<this.contTime.firstChild.firstChild.childNodes.length;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild);this.contTime.removeChild(this.contTime.firstChild);this.contTime.parentNode.removeChild(this.contTime);
this._lastHover=this.contTime=null;if(this.msCont){this._msActive=this.msCont.onclick=null;for(b in this._msCells)this._msCells[b]._cell=null,this._msCells[b]._month=null,this._msCells[b].parentNode.removeChild(this._msCells[b]),this._msCells[b]=null;for(this._msCells=null;0<this.msCont.childNodes.length;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if(this.ysCont){this.ysCont.onclick=null;for(b in this._ysCells)this._ysCells[b]._cell=
null,this._ysCells[b]._year=null,this._ysCells[b].parentNode.removeChild(this._ysCells[b]),this._ysCells[b]=null;for(this._ysCells=null;0<this.ysCont.childNodes.length;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if(this.hsCont){this._hsActive=this.hsCont.onclick=null;for(b in this._hsCells)this._hsCells[b]._cell=null,this._hsCells[b]._hours=null,this._hsCells[b].parentNode.removeChild(this._hsCells[b]),this._hsCells[b]=null;for(this._hsCells=
null;0<this.hsCont.childNodes.length;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if(this.rsCont){this._rsActive=this.rsCont.onclick=null;for(b in this._rsCells)this._rsCells[b]._cell=null,this._rsCells[b]._minutes=null,this._rsCells[b].parentNode.removeChild(this._rsCells[b]),this._rsCells[b]=null;for(this._rsCells=null;0<this.rsCont.childNodes.length;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont);
this.rsCont=null}if(this.ssCont){this._ssActive=this.ssCont.onclick=null;for(b in this._ssCells)this._ssCells[b]._cell=null,this._ssCells[b]._seconds=null,this._ssCells[b].parentNode.removeChild(this._ssCells[b]),this._ssCells[b]=null;for(this._ssCells=null;0<this.ssCont.childNodes.length;)this.ssCont.removeChild(this.ssCont.lastChild);this.ssCont.parentNode.removeChild(this.ssCont);this.ssCont=null}this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null);if(this._sel){for(b in this._sel._ta)this._sel._ta[b]=
null;this._sel._ta=null;this._sel._t=null;this._sel.onmouseover=null;for(this._sel.onmouseout=null;0<this._sel.firstChild.firstChild.firstChild.childNodes.length;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild);
for(this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);0<this._sel.childNodes.length;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.parentNode.removeChild(this.base);this.unload=this.showTime=this.show=this.setDateFormat=this.setDate=this.hideTime=this.hide=this._updateYearsList=this._updateVisibleMinutes=this._updateVisibleHours=this._updateDateStr=this._updateCellStyle=this._updateActiveYear=
this._updateActiveMonth=this._updateActiveSeconds=this._updateActiveMinutes=this._updateActiveHours=this._strToDate=this._showSelector=this._show=this._scrollYears=this._posGetOffsetSum=this._posGetOffsetRect=this._posGetOffset=this._isVisible=this._isSelectorVisible=this._initSelector=this._hideSelector=this._hide=this._getTop=this._getLeft=this._fixLength=this._drawMonth=this._doOnSelectorShow=this._doOnSelectorChange=this._clearSelHover=this._clearDayHover=this.base=null;for(b in this)delete this[b];
h=null};this.setDate(this._activeDate);return this}dhtmlXCalendarObject.prototype.setYearsRange=function(){};dhtmlXCalendarObject.prototype.lang="cn";
dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",monthesFNames:"January February March April May June July August September October November December".split(" "),monthesSNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysFNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),daysSNames:"Su Mo Tu We Th Fr Sa".split(" "),weekstart:1},cn:{dateformat:"%Y-%m-%d",monthesFNames:"&#19968;&#26376; &#20108;&#26376; &#19977;&#26376; &#22235;&#26376; &#20116;&#26376; &#20845;&#26376; &#19971;&#26376; &#20843;&#26376; &#20061;&#26376; &#21313;&#26376; &#21313;&#19968;&#26376; &#21313;&#20108;&#26376;".split(" "),
monthesSNames:"&#19968; &#20108; &#19977; &#22235; &#20116; &#20845; &#19971; &#20843; &#20061; &#21313; &#21313;&#19968; &#21313;&#20108;".split(" "),daysFNames:"&#21608;&#26085; &#21608;&#19968; &#21608;&#20108; &#21608;&#19977; &#21608;&#22235; &#21608;&#20116; &#21608;&#20845;".split(" "),daysSNames:"&#26085; &#19968; &#20108; &#19977; &#22235; &#20116; &#20845;".split(" "),weekstart:1}};dhtmlxCalendarObject=dhtmlXCalendarObject;
function dhtmlXColorPickerInput(b){"object"!=typeof b&&(b=document.getElementById(b));var d=b.getAttribute("colorbox"),e=b.getAttribute("customcolors"),f=b.getAttribute("selectonclick"),g=b.getAttribute("fullview"),h=b.getAttribute("selectedcolor"),l=b;d&&(d=document.createElement("DIV"),d.style.width=b.offsetWidth+"px",d.style.height=b.offsetHeight+"px",b.style.width=b.offsetWidth-b.offsetHeight-2,b.parentNode.insertBefore(d,b),d.style.position="relative",l=document.createElement("DIV"),d.appendChild(l),
d.appendChild(b),l.className="cs_colorBox",b.className+=" cs_colorInput",l.style.width=l.style.height=b.offsetHeight-(document.all?0:2)+"px",b.style.left=b.offsetHeight+2+"px");e=new dhtmlXColorPicker(null,f,e,!0,g);h&&e.setColor(h);e.linkToObjects=[l,b,b];return e}
function dhtmlXColorPicker(b,d,e,f,g){if(document.all)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}this._cc=e;b||(b=document.createElement("DIV"),b.style.position="absolute",document.body.appendChild(b),b._dhx_remove=!0);this.container="object"!=typeof b?document.getElementById(b):b;dhtmlxEventable(this);this.skinName=dhtmlx.skin||"";this.ready=!1;this.hideOnInit=f||!1;this.linkToObjects=[];this.imgURL=dhtmlx.image_path||window.dhx_globalImgPath||"";this.hideSelfOnSelect=!0;this.hex=
"000000";this.h=100;this.s=0.9;this.v=0.1;this.old_sat=this.old_hue=this.b=this.g=this.r=0;this.fullview=g||!1;this.customColorsCount=!this.fullview?10:8;this.language=null;this.elements=[];this.customColors=[];this.restoreFrom=null;this.fullview?this.colorSelectW=this.colorSelectH=255:(this.colorSelectH=119,this.colorSelectW=209);this.isClickOnly=d||!1;if(null==window.cs_dechex){b=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"];window.cs_dechex=[];for(d=0;256>d;d++)e=b[d>>4].toString()+b[d&15].toString(),
2>e.length&&(e="0"+e),window.cs_dechex[d]=e}defLeng={langname:"en-us",labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Add to Custom Colors",btnSelect:"Select",btnCancel:"Cancel"};window.dhtmlxColorPickerObjects?window.dhtmlxColorPickerObjects[window.dhtmlxColorPickerObjects.length]=this:window.dhtmlxColorPickerObjects=[this];window.dhtmlxColorPickerLangModules||(window.dhtmlxColorPickerLangModules={});window.dhtmlxColorPickerLangModules["en-us"]=
defLeng;return this}
dhtmlXColorPicker.prototype.generate=function(){X="BackCompat"!=document.compatMode?"X":"";if(this.fullview)b="<div class='dhtmlxcolorpicker"+(""!=this.skinName?"_"+this.skinName:"")+"' csid='cs_Content' style='display:none;'>",document.all&&"absolute"==this.container.style.position&&(b+="<iframe src='"+(this.imgURL||"")+"blank.html' style='position:absolute; top:0px; left:0px; width:320px;  height:"+(this._cc?454:407)+"px; z-index:-1;'></iframe>"),b=b+"<table cellpadding='0' cellspacing='0'>"+("<tr><td style='width:2px;height:2px;background:url("+
(this.imgURL||"")+"left_top.gif);'></td><td style='height:2px;background:url("+(this.imgURL||"")+"top.gif);'></td><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"right_top.gif);'></td></tr>"),b+="<tr><td style='width:2px;background:url("+(this.imgURL||"")+"left.gif);'></td><td style='width:316px;height:"+(this._cc?446:392)+"px;background:#E6E5E5;'>",b+="<table class='cs_ContentTable' csid='cs_ContentTable' cellpadding='0px' cellspacing='0px'>",b+="<tr>",b+="<td><div class='cs_SelectorDiv' csid='cs_SelectorDiv'><div class='cs_SelectorVer' csid='cs_SelectorVer' style='left:100px;top:0px;'></div><div class='cs_SelectorHor' csid='cs_SelectorHor' style='left:0px;top:100px;'></div></div></td>",
b+="<td><div class='cs_LumSelect' csid='cs_LumSelect'><div class='cs_LumSelectArrow' csid='cs_LumSelectArrow' style='left:16px;top:124px;'></div><div class='cs_LumSelectLine' csid='cs_LumSelectLine' style='left:0px;top:0px;'></div></div></td>",b+="</tr>",b+="<tr><td style='padding-top:10px;' colspan='2'>",b+="<table class='cs_ColorArea' cellpadding='0px' cellspacing='0px'>",b+="<tr><td rowspan='3'><div class='cs_EndColor' csid='cs_EndColor'></div></td><td valign='top' style='text-align:center;width:80px;'># <input csid='cs_Hex' class='cs_Hex'></td><td>"+
this.language.labelHue+":</td><td><input tabindex='1' class='cs_Input' csid='cs_InputHue' value='' /></td><td>"+this.language.labelRed+":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputRed' value='' /></td></tr>",b+="<tr><td></td><td>"+this.language.labelSat+":</td><td><input tabindex='2' class='cs_Input' csid='cs_InputSat' value='' /></td><td>"+this.language.labelGreen+":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputGreen' value='' /></td></tr>",b+="<tr><td></td><td>"+this.language.labelLum+
":</td><td><input tabindex='2' class='cs_Input' csid='cs_InputLum' value='' /></td><td>"+this.language.labelBlue+":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputBlue' value='' /></td></tr>",this._cc&&(b+="<tr><td>",b+="<div class='cs_CustomColors' csid='cs_CustomColors'></div>",b+="</td><td></td><td colspan='4' valign='top'><input tabindex='7' class='cs_CustomColorAdd' csid='cs_CustomColorAdd' type='button' value='"+this.language.btnAddColor+"'></td></tr>"),b+="</table>",b+="</td></tr>",
b+="</table>",b+="<table cellpadding='0' cellspacing='0' style='width:100%;'><tr><td style='height:49px;background:url("+(this.imgURL||"")+"buttons_panel.gif);'><input tabindex='9' class='cs_ButtonCancel' csid='cs_ButtonCancel' type='button' value='"+this.language.btnCancel+"' /><input tabindex='8' class='cs_ButtonOk' csid='cs_ButtonOk' type='button' value='"+this.language.btnSelect+"' /></td></tr></table>";else{var b="<div class='dhtmlxcolorpicker"+(""!=this.skinName?"_"+this.skinName:"")+"' csid='cs_Content' style='display:none;'>";
document.all&&"absolute"==this.container.style.position&&(b+="<iframe src='"+(this.imgURL||"")+"blank.html' frameBorder='0' style='position:absolute; top:0px; left:0px; width:252px;  height:"+(this._cc?300:244)+"px; z-index:-1;'></iframe>");b+="<table cellpadding='0' cellspacing='0'>";b+="<tr><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"left_top.gif);'></td><td style='height:2px;background:url("+(this.imgURL||"")+"top.gif);'></td><td style='width:2px;height:2px;background:url("+
(this.imgURL||"")+"right_top.gif);'></td></tr>";b+="<tr><td style='width:2px;background:url("+(this.imgURL||"")+"left.gif);'></td><td style='width:"+(document.all?247:243)+"px;height:"+(this._cc?281:240)+"px;'>";b+="<table class='cs_ContentTable' csid='cs_ContentTable' cellpadding='0px' cellspacing='0px'>";b+="<tr>";b+="<td><div class='cs_SelectorDiv_Mini' csid='cs_SelectorDiv'><div class='cs_SelectorVer' csid='cs_SelectorVer' style='left:100px;top:0px;'></div><div class='cs_SelectorHor' csid='cs_SelectorHor' style='left:0px;top:100px;'></div></div></td>";
b+="<td><div class='cs_LumSelect_Mini' csid='cs_LumSelect'><div csid='cs_LumSelectArrow'></div><div class='cs_LumSelectLine' csid='cs_LumSelectLine' style='left:0px;top:0px;'></div></div></td>";b+="</tr>";b+="<tr><td style='padding-top:10px;' colspan='2'>";b+="<table class='cs_ColorArea_Mini' cellpadding='0px' cellspacing='0px'>";b+="<tr><td rowspan='2' valign='top' style='text-align:left;'><div class='cs_EndColor_Mini' csid='cs_EndColor' ></div></td><td>"+this.language.labelHue+":</td><td><input tabindex='1' class='cs_Input_Mini"+
X+"' csid='cs_InputHue' value='' /></td><td>"+this.language.labelRed+":</td><td><input tabindex='4' class='cs_Input_Mini"+X+"' csid='cs_InputRed' value='' /></td></tr>";b+="<tr><td>"+this.language.labelSat+":</td><td><input tabindex='2' class='cs_Input_Mini"+X+"' csid='cs_InputSat' value='' /></td><td>"+this.language.labelGreen+":</td><td><input tabindex='4' class='cs_Input_Mini"+X+"' csid='cs_InputGreen' value='' /></td></tr>";b+="<tr><td style='vertical-align:top;width:80px;text-align:left;'># <input csid='cs_Hex' class='cs_Hex_Mini"+
X+"'></td><td>"+this.language.labelLum+":</td><td><input tabindex='2' class='cs_Input_Mini"+X+"' csid='cs_InputLum' value='' /></td><td>"+this.language.labelBlue+":</td><td><input tabindex='4' class='cs_Input_Mini"+X+"' csid='cs_InputBlue' value='' /></td></tr>";this._cc&&(b+="<tr><td colspan='6'><input tabindex='7' class='cs_CustomColorAdd_Mini' csid='cs_CustomColorAdd' type='button' value='"+this.language.btnAddColor+"'></td></tr>",b+="<tr><td colspan='6'><div class='cs_CustomColors_Mini' csid='cs_CustomColors'></div></td></tr>");
b+="</table>";b+="</td></tr>";b+="</table>";b+="<table class='cs_ButtonsPanel' cellpadding='0' cellspacing='0' style='width:100%;'><tr><td style='width:100%;'><input tabindex='9' class='cs_ButtonCancel' csid='cs_ButtonCancel' type='button' value='"+this.language.btnCancel+"' /><input tabindex='8' class='cs_ButtonOk' csid='cs_ButtonOk' type='button' value='"+this.language.btnSelect+"' /></td></tr></table>"}b+="</td><td style='width:2px;background:url("+(this.imgURL||"")+"right.gif);'></td></tr>";b+=
"<tr><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"left_bottom.gif);'></td><td style='height:2px;background:url("+(this.imgURL||"")+"bottom.gif);'></td><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"right_bottom.gif);'></td></tr>";b+="</table>";b+="</div>";this.container.style.width=this.fullview?"320px":"252px";this.container.innerHTML=b;this._initCsIdElement();this.elements.cs_SelectorDiv.style.backgroundImage=this.fullview?"url("+(this.imgURL||"")+"color.png)":
"url("+(this.imgURL||"")+"colormini.png)";this.elements.cs_SelectorDiv.z=this;this.elements.cs_LumSelect.z=this;this.elements.cs_LumSelectArrow.z=this;this.z=this;this._drawLum();this._colorizeLum(this.old_hue,this.old_sat);this._initEvents();this._cc&&this._initCustomColors();this.ColorNum=0;this.restoreFromHSV();this._drawValues()};
dhtmlXColorPicker.prototype._initCsIdElement=function(b){null==b&&(b=this.container);b=b.childNodes;for(var d=b.length,e=0;e<d;e++)if(1==b[e].nodeType){var f=b[e].getAttribute("csid");null!==f&&(this.elements[f]=b[e]);0<b[e].childNodes.length&&this._initCsIdElement(b[e])}};
dhtmlXColorPicker.prototype._initEvents=function(){this.elements.cs_SelectorDiv.onmousedown=this._startMoveColor;this.elements.cs_SelectorDiv.ondblclick=this.clickOk;this.elements.cs_LumSelect.onmousedown=this._startMoveLum;this.elements.cs_LumSelect.ondblclick=this.clickOk;this.elements.cs_LumSelectArrow.onmousedown=this._startMoveLum;this._cc&&(this.elements.cs_CustomColorAdd.z=this,this.elements.cs_CustomColorAdd.onclick=this.addCustomColor,this.elements.cs_CustomColorAdd.onmouseover=this.hoverButton,
this.elements.cs_CustomColorAdd.onmouseout=this.normalButton);for(var b="cs_InputHue cs_InputRed cs_InputSat cs_InputGreen cs_InputLum cs_InputBlue".split(" "),d=0;d<b.length;d++)this.elements[b[d]].z=this,this.elements[b[d]].onchange=d%2?this._changeValueRGB:this._changeValueHSV;this.elements.cs_Hex.z=this;this.elements.cs_Hex.onchange=this._changeValueHEX;this.elements.cs_ButtonOk.z=this;this.elements.cs_ButtonOk.onclick=this.clickOk;this.elements.cs_ButtonOk.onmouseover=this.hoverButton;this.elements.cs_ButtonOk.onmouseout=
this.normalButton;this.elements.cs_ButtonCancel.z=this;this.elements.cs_ButtonCancel.onclick=this.clickCancel;this.elements.cs_ButtonCancel.onmouseover=this.hoverButton;this.elements.cs_ButtonCancel.onmouseout=this.normalButton};dhtmlXColorPicker.prototype.resetHandlers=function(){};dhtmlXColorPicker.prototype.clickOk=function(){var b=this.z,d=b.getSelectedColor();b.callEvent("onSelect",[d[0]]);b.hideSelfOnSelect&&b.hide()};
dhtmlXColorPicker.prototype.clickCancel=function(){this.z.callEvent("onCancel",[]);this.z.hideSelfOnSelect&&this.z.hide()};
dhtmlXColorPicker.prototype._setCrossPos=function(b){var d=this.z,e=d._getOffset(this.elements.cs_SelectorDiv),f=b.clientY-e[0];0>f?f=0:f>this.colorSelectH&&(f=this.colorSelectH);b=b.clientX-e[1];0>b?b=0:b>this.colorSelectW&&(b=this.colorSelectW);d.elements.cs_SelectorVer.style.left=b+"px";d.elements.cs_SelectorHor.style.top=f+"px";return[b==this.colorSelectW?0:360*b/this.colorSelectW,1-f/this.colorSelectH]};
dhtmlXColorPicker.prototype._getScrollers=function(){return[document.body.scrollLeft||document.documentElement.scrollLeft,document.body.scrollTop||document.documentElement.scrollTop]};dhtmlXColorPicker.prototype._setLumPos=function(b){var d=this.z,e=d._getOffset(d.elements.cs_LumSelect);b=b.clientY-e[0]-4;-3>b&&(b=-3);b>this.colorSelectH-4&&(b=this.colorSelectH-4);d.elements.cs_LumSelectArrow.style.top=b+"px";d.elements.cs_LumSelectLine.style.top=b+4+"px";return(b+3)/this.colorSelectH};
dhtmlXColorPicker.prototype._startMoveColor=function(b){var d=this.z;null==b&&(b=event);d.elements.cs_SelectorDiv.onmousedown=null;d.b_move=document.body.onmousemove;d.b_up=document.body.onmouseup;var e=d;document.body.onmousemove=function(b){null==b&&(b=event);e._mouseMoveColor(b)};document.body.onmouseup=function(b){null==b&&(b=event);e._stopMoveColor(b);e=null};d.elements.cs_SelectorDiv.onmousemove=d._mouseMoveColor;d.elements.cs_SelectorDiv.onmouseup=d._stopMoveColor;b=d._setCrossPos(b);d.h=b[0];
d.s=b[1];b=d._calculateColor();d._colorizeLum(b[0],b[1])};dhtmlXColorPicker.prototype._mouseMoveColor=function(b){var d=this.z;null==b&&(b=event);b=d._setCrossPos(b);d.isClickOnly||(d.h=b[0],d.s=b[1],b=d._calculateColor(),d._colorizeLum(b[0],b[1]))};
dhtmlXColorPicker.prototype._stopMoveColor=function(b){var d=this.z;null==b&&(b=event);d.elements.cs_SelectorDiv.onmousedown=d._startMoveColor;d.elements.cs_SelectorDiv.onmousemove=null;d.elements.cs_SelectorDiv.onmouseup=null;document.body.onmousemove=d.b_move;document.body.onmouseup=d.b_up;b=d._setCrossPos(b);d.h=b[0];d.s=b[1];b=d._calculateColor();d._colorizeLum(b[0],b[1])};
dhtmlXColorPicker.prototype._startMoveLum=function(b){var d=this.z;null==b&&(b=event);d.elements.cs_LumSelect.onmousedown=null;d.elements.cs_LumSelectArrow.onmousedown=null;d.elements.cs_LumSelect.onmousemove=d._mouseMoveLum;d.elements.cs_LumSelect.onmouseup=d._stopMoveLum;d.b_move=document.body.onmousemove;d.b_up=document.body.onmouseup;d.b_selstart=document.body.onselectstart;var e=d;document.body.onmousemove=function(b){null==b&&(b=event);e._mouseMoveLum(b)};document.body.onmouseup=function(b){null==
b&&(b=event);e._stopMoveLum(b);e=null};document.body.onselectstart=function(){return!1};d.v=d._setLumPos(b);d._calculateColor()};dhtmlXColorPicker.prototype._mouseMoveLum=function(b){var d=this.z;null==b&&(b=event);d.v=d._setLumPos(b);d.isClickOnly||d._calculateColor()};
dhtmlXColorPicker.prototype._stopMoveLum=function(b){var d=this.z;null==b&&(b=event);d.elements.cs_LumSelect.onmousedown=d._startMoveLum;d.elements.cs_LumSelectArrow.onmousedown=d._startMoveLum;d.elements.cs_LumSelect.onmousemove=null;d.elements.cs_LumSelect.onmouseup=null;d.v=d._setLumPos(b);d._calculateColor();document.body.onmousemove=d.b_move;document.body.onmouseup=d.b_up;document.body.onselectstart=d.b_selstart};
dhtmlXColorPicker.prototype._getOffset=function(b){var d=this._getOffsetTop(b);b=this._getOffsetLeft(b);var e=this._getScrollers();return[d-e[1],b-e[0]]};dhtmlXColorPicker.prototype._getOffsetTop=function(b){var d=0;b.offsetParent&&(d+=b.offsetTop+this._getOffsetTop(b.offsetParent));return d};dhtmlXColorPicker.prototype._getOffsetLeft=function(b){var d=0;b.offsetParent&&(d+=b.offsetLeft+this._getOffsetLeft(b.offsetParent));return d};
dhtmlXColorPicker.prototype._calculateColor=function(){if("RGB"==this.restoreFrom)var b=[this.r,this.g,this.b];else b=this._hsv2rgb(this.h,this.s,1-this.v),this.r=b[0],this.g=b[1],this.b=b[2];this.hex=this._getColorHEX(b);this.elements.cs_EndColor.style.backgroundColor="#"+this.hex;this._drawValues();this.restoreFrom=null;return[this.h,this.s,1-this.v]};
dhtmlXColorPicker.prototype._drawValues=function(){this.elements.cs_Hex.value=this.hex;this.elements.cs_InputHue.value=Math.floor(this.h);this.elements.cs_InputSat.value=Math.floor(100*this.s);this.elements.cs_InputLum.value=Math.floor(100*(1-this.v));this.elements.cs_InputRed.value=Math.floor(this.r);this.elements.cs_InputGreen.value=Math.floor(this.g);this.elements.cs_InputBlue.value=Math.floor(this.b)};
dhtmlXColorPicker.prototype.saveColor=function(b,d){var e=new Date,e=new Date(e.valueOf()+26784E5),e="color_"+d+"="+b+"; expires="+e.toGMTString();document.cookie=e};dhtmlXColorPicker.prototype.restoreColor=function(b){var d=!1;0<document.cookie.length&&(b=document.cookie.indexOf("color_"+b+"="),-1!=b&&(d=document.cookie.indexOf(";",b),-1==d&&(d=document.cookie.length),b=document.cookie.indexOf("=",b)+1,d=document.cookie.substr(b,d-b)));return d};
dhtmlXColorPicker.prototype._hsv2rgb=function(b,d,e){Hi=Math.floor(b/60)%6;b=b/60-Hi;p=e*(1-d);q=e*(1-b*d);t=e*(1-(1-b)*d);var f=d=0;b=0;switch(Hi){case 0:d=e;f=t;b=p;break;case 1:d=q;f=e;b=p;break;case 2:d=p;f=e;b=t;break;case 3:d=p;f=q;b=e;break;case 4:d=t;f=p;b=e;break;case 5:d=e,f=p,b=q}d=Math.floor(255*d);f=Math.floor(255*f);b=Math.floor(255*b);return[d,f,b]};
dhtmlXColorPicker.prototype._rgb2hsv=function(b,d,e){R=b/255;G=d/255;B=e/255;b=Math.max(R,G,B);d=Math.min(R,G,B);e=0;b==d?e=0:b==R&&G>=B?e=60*(G-B)/(b-d)+0:b==R&&G<B?e=60*(G-B)/(b-d)+360:b==G?e=60*(B-R)/(b-d)+120:b==B&&(e=60*(R-G)/(b-d)+240);return[e,0==b?0:1-d/b,b]};
dhtmlXColorPicker.prototype._drawLum=function(){for(var b=this.colorSelectH,d=!this.fullview?30:64,e=!this.fullview?8:4,f=0;f<d;f++){var g=document.createElement("div"),h=this._dec2hex(b);g.style.backgroundColor="#"+h+h+h;g.className="cs_LumElement";b-=e;this.elements.cs_LumSelect.appendChild(g)}};
dhtmlXColorPicker.prototype._colorizeLum=function(b,d){this.old_hue=b;this.old_sat=d;for(var e=255,f=!this.fullview?8:4,g=this.elements.cs_LumSelect.childNodes.length,h=2;h<g;h++){var l=this._hsv2rgb(b,d,255<e?1:e/255),l="#"+this._getColorHEX(l);this.elements.cs_LumSelect.childNodes[h].style.backgroundColor=l;e-=f}this.callEvent("onChange",[this.getSelectedColor()])};dhtmlXColorPicker.prototype._dec2hex=function(b){return window.cs_dechex[b]||"00"};
dhtmlXColorPicker.prototype._hex2dec=function(b){return parseInt(b,16)};
dhtmlXColorPicker.prototype._initCustomColors=function(){for(var b=this.elements.cs_CustomColors,d=0;d<this.customColorsCount;d++){var e=document.createElement("div");e.className=this.fullview?"cs_CustomColor":"cs_CustomColor_Mini";e.color_num=d;document.all&&("Opera"==navigator.appName?this.fullview?(e.style.width="14px",e.style.height="14px"):(e.style.width="18px",e.style.height="18px"):this.fullview?(e.style.width="16px",e.style.height="16px"):(e.style.width="BackCompat"!=document.compatMode?"18px":
"20px",e.style.height="20px"));e.z=this;e.onclick=this._selectCustomColor;e.ondblclick=this.clickOk;var f=this.restoreColor(d)||"0,0,0";e.color=f;f=f.split(",");e.style.backgroundColor="#"+this._getColorHEX(f);this.customColors.push(e);b.appendChild(e)}};
dhtmlXColorPicker.prototype._reinitCustomColors=function(){for(var b=0;b<this.customColorsCount;b++){var d=this.customColors[b],e=this.restoreColor(b)||"0,0,0";d.color=e;e=e.split(",");d.style.backgroundColor="#"+this._getColorHEX(e);this.customColors[b]=d}};dhtmlXColorPicker.prototype._getColorHEX=function(b){var d=this._dec2hex(b[0]),e=this._dec2hex(b[1]);b=this._dec2hex(b[2]);return d+e+b};
dhtmlXColorPicker.prototype._selectCustomColor=function(b){b=this.z;if(!this.selected){for(var d=0;d<b.customColors.length;d++)b.customColors[d].style.border="1px solid gray";this.style.border="1px dashed black";this.selected=!0;null!=b.selectedColor&&(b.customColors[b.selectedColor].style.border="1px solid gray",b.customColors[b.selectedColor].selected=!1)}b.selectedColor=this.color_num;b.ColorNum=this.color_num;d=this.color.split(",");b.r=d[0];b.g=d[1];b.b=d[2];b.restoreFromRGB()};
dhtmlXColorPicker.prototype.addCustomColor=function(){var b=this.z;if(null!=b.selectedColor){var d=b.customColors[b.selectedColor],e=b.selectedColor;d.style.border="1px solid gray";b.selectedColor=null}else d=b.customColors[b.ColorNum],e=b.ColorNum,d.style.border="1px solid gray";var f=b.r+","+b.g+","+b.b;b.saveColor(f,e);d.color=f;b.ColorNum=9==b.ColorNum?0:b.ColorNum+1;b.customColors[b.ColorNum].style.border="1px dashed red";d.style.backgroundColor=b.elements.cs_EndColor.style.backgroundColor};
dhtmlXColorPicker.prototype.restoreFromRGB=function(){this.restoreFrom="RGB";var b=this._rgb2hsv(this.r,this.g,this.b);this.h=b[0];this.s=b[1];this.v=1-b[2];this.ready&&this.redraw()};dhtmlXColorPicker.prototype.restoreFromHSV=function(){this.restoreFrom="HSV";var b=this._hsv2rgb(this.h,this.s,this.v);this.r=b[0];this.g=b[1];this.b=b[2];this.redraw()};
dhtmlXColorPicker.prototype.restoreFromHEX=function(){this.r=this._hex2dec(this.hex.substr(0,2));this.g=this._hex2dec(this.hex.substr(2,2));this.b=this._hex2dec(this.hex.substr(4,2));this.restoreFromRGB()};
dhtmlXColorPicker.prototype.redraw=function(){var b=this.colorSelectW*this.h/360,d=this.v*this.colorSelectH;this.elements.cs_SelectorHor.style.top=(1-this.s)*this.colorSelectH+"px";this.elements.cs_SelectorVer.style.left=b+"px";this.elements.cs_LumSelectArrow.style.top=d-3+"px";this.elements.cs_LumSelectLine.style.top=d+1+"px";b=this._calculateColor();this._colorizeLum(b[0],b[1])};
dhtmlXColorPicker.prototype._changeValueHSV=function(){var b=this.z,d=parseInt(b.elements.cs_InputHue.value)||0,e=parseInt(b.elements.cs_InputSat.value)||0,f=parseInt(b.elements.cs_InputLum.value)||0;if(0>d||359<d)d=0;if(0>e||100<e)e=0;if(0>f||100<f)f=0;b.elements.cs_InputHue.value=d;b.elements.cs_InputSat.value=e;b.elements.cs_InputLum.value=f;b.h=d;b.s=e/100;b.v=1-f/100;b.restoreFromHSV()};
dhtmlXColorPicker.prototype._changeValueRGB=function(){var b=this.z,d=parseInt(b.elements.cs_InputRed.value)||0,e=parseInt(b.elements.cs_InputGreen.value)||0,f=parseInt(b.elements.cs_InputBlue.value)||0;if(0>d||255<d)d=0;if(0>e||255<e)e=0;if(0>f||255<f)f=0;b.elements.cs_InputRed.value=d;b.elements.cs_InputGreen.value=e;b.elements.cs_InputBlue.value=f;b.r=d;b.g=e;b.b=f;b.restoreFromRGB()};
dhtmlXColorPicker.prototype._changeValueHEX=function(){var b=this.z,d=b.elements.cs_Hex.value||0,d=d.replace(/[^a-fA-F0-9]/gi,"0");if(6<d.length)d=d.substr(0,6);else for(;6>d.length;)d+="0";b.elements.cs_Hex.value=d;b.hex=d;b.restoreFromHEX()};
dhtmlXColorPicker.prototype.setCustomColors=function(b){b=b.split(",");for(var d=0;d<b.length;d++){var e=b[d];"#"==e.substr(0,1)&&(e=e.substr(1));var f=this._hex2dec(e.substr(0,2)),g=this._hex2dec(e.substr(2,2)),e=this._hex2dec(e.substr(4,2)),e=f+","+g+","+e;this.saveColor(e,d)}};
dhtmlXColorPicker.prototype.setColor=function(b){if("string"!=typeof b){var d=b[0],e=b[1];b=b[2]}else-1!=b.indexOf("rgb")?(b=b.substr(b.indexOf("(")+1,b.lastIndexOf(")")-b.indexOf("(")-1).split(","),d=b[0],e=b[1],b=b[2]):("#"==b.substr(0,1)&&(b=b.substr(1)),d=this._hex2dec(b.substr(0,2)),e=this._hex2dec(b.substr(2,2)),b=this._hex2dec(b.substr(4,2)));d=parseInt(d)||0;e=parseInt(e)||0;b=parseInt(b)||0;if(0>d||255<d)d=0;if(0>e||255<e)e=0;if(0>b||255<b)b=0;this.r=d;this.g=e;this.b=b;this.restoreFromRGB()};
dhtmlXColorPicker.prototype.close=function(){this.elements.cs_SelectorDiv.z=null;this.elements.cs_LumSelect.z=null;this.elements.cs_LumSelectArrow.z=null;this.elements.cs_ButtonOk.z=null;this.elements.cs_ButtonCancel.z=null;this.cc&&(this.elements.cs_CustomColorAdd.z=null);this.container.innerHTML="";this.container._dhx_remove&&this.container.parentNode.removeChild(this.container)};
dhtmlXColorPicker.prototype.show=function(){this.callEvent("onShow",[]);""!=this.container.innerHTML&&(this.elements.cs_Content.style.display="",this.elements.cs_InputHue.focus())};dhtmlXColorPicker.prototype.setPosition=function(b,d){this.container.style.position="absolute";this.container.style.top=(0<d?d:10)+"px";this.container.style.left=b+"px"};dhtmlXColorPicker.prototype.hide=function(){this.resetHandlers();this.elements.cs_Content&&(this.elements.cs_Content.style.display="none")};
dhtmlXColorPicker.prototype.setOnSelectHandler=function(b){this.attachEvent("onSelect",b)};dhtmlXColorPicker.prototype.setOnCancelHandler=function(b){this.attachEvent("onCancel",b)};dhtmlXColorPicker.prototype.getSelectedColor=function(){var b=[this.r,this.g,this.b];return["#"+(this._dec2hex(this.r)+this._dec2hex(this.g)+this._dec2hex(this.b)),b,[this.h,this.s,this.v]]};
dhtmlXColorPicker.prototype.linkTo=function(b,d,e){"object"!=typeof b&&(b=document.getElementById(b));"object"!=typeof d&&(d=document.getElementById(d));"object"!=typeof e&&(e=document.getElementById(e));this.linkToObjects=arguments;var f=this;d.onclick=function(){var d=f._getOffset(b),e=f._getScrollers();f.setPosition(d[1]+e[0]+b.offsetWidth,d[0]+e[1]);f.isVisible()?f.hide():f.show()};this.setOnSelectHandler(function(d){b.style.backgroundColor=d;e&&(e.value=d)});this.close=this.hide;this.hide()};
dhtmlXColorPicker.prototype.hideOnSelect=function(b){this.hideSelfOnSelect=b};dhtmlXColorPicker.prototype.setImagePath=function(b){this.imgURL=b};dhtmlXColorPicker.prototype.init=function(){this.language||this.loadUserLanguage("en-us");this.generate();this.ready=!0;this._cc&&this._reinitCustomColors();0<this.linkToObjects.length&&this.linkTo(this.linkToObjects[0],this.linkToObjects[1],this.linkToObjects[2]);this.hideOnInit||this.show()};
dhtmlXColorPicker.prototype.loadUserLanguage=function(b){window.dhtmlxColorPickerLangModules[b]&&(this.language=window.dhtmlxColorPickerLangModules[b],this.ready&&(this.generate(),this.show()))};dhtmlXColorPicker.prototype.setSkin=function(b){this.skinName=b;this.elements.cs_Content&&(this.elements.cs_Content.className="dhtmlxcolorpicker"+(b?"_"+b:b))};dhtmlXColorPicker.prototype.isVisible=function(){return"none"!=this.elements.cs_Content.style.display};
dhtmlXColorPicker.prototype.hoverButton=function(){this.className+="_Hover"};dhtmlXColorPicker.prototype.normalButton=function(){this.className=this.className.substr(0,this.className.length-6)};(function(){dhtmlx.extend_api("dhtmlXColorPicker",{_init:function(b){return[b.parent,b.click,b.colors,b.hide,b.full]},show:"showA",link:"linkTo",image_path:"setImagePath",color:"setColor"},{showA:function(){this.init();this.show()}})})();
function dhtmlXComboFromSelect(b,d){"string"==typeof b&&(b=document.getElementById(b));d=d||b.getAttribute("width")||(window.getComputedStyle?window.getComputedStyle(b,null).width:b.currentStyle?b.currentStyle.width:0);if(!d||"auto"==d)d=b.offsetWidth||100;d=35>1*(d+"").replace("px","")?35:d;var e=document.createElement("SPAN");b.parentNode.insertBefore(e,b);b.style.display="none";for(var f=b.getAttribute("opt_type"),e=new dhtmlXCombo(e,b.name,d,f,b.tabIndex),f=[],g=-1,h=0;h<b.options.length;h++){b.options[h].selected&&
(g=h);var l=b.options[h].innerHTML,m=b.options[h].getAttribute("value");if("undefined"==typeof m||null===m)m=l;f[h]={value:m,text:l,img_src:b.options[h].getAttribute("img_src"),checked:b.options[h].selected,pid:b.options[h].getAttribute("pid")}}f.length&&e.addOption(f);b.parentNode.removeChild(b);0<=g&&e.selectOption(g,null,!0);b.onchange&&e.attachEvent("onChange",b.onchange);"rtl"==b.style.direction&&e.setRTL&&e.setRTL(!0);return e}var dhtmlXCombo_optionTypes=[];
function dhtmlXCombo(b,d,e,f,g,h){"string"==typeof b&&(b=document.getElementById(b));this.dhx_Event();this.optionType=f!=window.undefined&&dhtmlXCombo_optionTypes[f]?f:"default";this._optionObject=dhtmlXCombo_optionTypes[this.optionType];this._disabled=!1;this._filterAutoSelect=!0;window.dhx_glbSelectAr||(window.dhx_glbSelectAr=[],window.dhx_openedSelect=null,window.dhx_SelectId=1,dhtmlxEvent(document.body,"click",this.closeAll),dhtmlxEvent(document.body,"keydown",function(b){try{9==(b||event).keyCode&&
window.dhx_glbSelectAr[0].closeAll()}catch(d){}return!0}));if("SELECT"==b.tagName)return dhtmlXComboFromSelect(b);this._createSelf(b,d,e,g,h);dhx_glbSelectAr.push(this);-1<this.optionType.indexOf("checkbox")&&(this._filter=!1,this.attachEvent("onCheck",function(){this.setCheckedValue();return!0}),this.readonly(!0))}dhtmlXCombo.prototype.setMultiCheckSeprator=dhtmlXCombo.prototype.setMultiCheckSeparator=function(b){this._multiCheckSep=b};
dhtmlXCombo.prototype.setCheckedValue=function(){if(""==this.getChecked())this.setComboValue("");else{for(var b=this.getChecked(),d=[],e=0;e<b.length;e++){var f=this.getIndexByValue(b[e]);d[e]=this.getOptionByIndex(f).text}this.setComboText(d.join(this._multiCheckSep?this._multiCheckSep:","))}};dhtmlXCombo.prototype.sortBy=function(b){this.optionsArr.sort(b);this.redrawOptions()};
dhtmlXCombo.prototype.setSize=function(b,d){this.DOMlist.style.width=b+"px";this.DOMlistF&&(this.DOMlistF.style.width=b+"px");this.DOMelem.style.width=b+"px";this.DOMelem_input.style.width=Math.max(0,b-19)+"px"};dhtmlXCombo.prototype.setHeight=function(b){b&&(this.DOMlist.style.height=b+"px",this.DOMlistF&&(this.DOMlistF.style.height=b+"px"))};dhtmlXCombo.prototype.enableFilteringAuto=function(b){this._filterAuto=convertStringToBoolean(b)};
dhtmlXCombo.prototype.enableFilteringAutoSelect=function(b){this._filterAutoSelect=convertStringToBoolean(b)};dhtmlXCombo.prototype.enableAutoComplete=function(b){this._autoComplete=convertStringToBoolean(b)};
dhtmlXCombo.prototype.enableFilteringMode=function(b,d,e,f,g){this._filterAuto="undefined"==typeof this._filterAuto?!0:this.filterAuto;this._filter=convertStringToBoolean(b);this._filterStrict=convertStringToBoolean(g);d&&(this._xml=d,this._autoxml=convertStringToBoolean(f));convertStringToBoolean(e)&&(this._xmlCache=[])};dhtmlXCombo.prototype.setFilteringParam=function(b,d){this._prs||(this._prs=[]);this._prs.push([b,d])};
dhtmlXCombo.prototype.disable=function(b){b=convertStringToBoolean(b);this._disabled!=b&&(this._disabled=this.DOMelem_input.disabled=b)};
dhtmlXCombo.prototype.readonly=function(b,d){this.DOMelem_input.readOnly=b?!0:!1;if(!1===d||!1===b)this.DOMelem.onkeyup=function(){};else{var e=this;this.DOMelem.onkeyup=function(b){b=b||window.event;9!=b.keyCode&&(b.cancelBubble=!0);if(48<=b.keyCode&&57>=b.keyCode||65<=b.keyCode&&90>=b.keyCode){for(var d=0;d<e.optionsArr.length;d++)if(0==e.optionsArr[d].text.toString().toUpperCase().indexOf(String.fromCharCode(b.keyCode))){e.selectOption(d);break}b.cancelBubble=!0}}}};
dhtmlXCombo.prototype.getOption=function(b){for(var d=0;d<this.optionsArr.length;d++)if(this.optionsArr[d].value==b)return this.optionsArr[d];return null};dhtmlXCombo.prototype.getOptionByLabel=function(b){for(var d=0;d<this.optionsArr.length;d++)if(this.optionsArr[d].text==b||this.optionsArr[d]._ctext==b)return this.optionsArr[d];return null};dhtmlXCombo.prototype.getOptionByIndex=function(b){return this.optionsArr[b]};
dhtmlXCombo.prototype.clearAll=function(b){b&&this.setComboText("");this.optionsArr=[];this.redrawOptions();b&&this._confirmSelection()};dhtmlXCombo.prototype.deleteOption=function(b){b=this.getIndexByValue(b);0>b||(this.optionsArr[b]==this._selOption&&(this._selOption=null),this.optionsArr.splice(b,1),this.redrawOptions())};dhtmlXCombo.prototype.render=function(b){this._skiprender=!convertStringToBoolean(b);this.redrawOptions()};
dhtmlXCombo.prototype.updateOption=function(b,d,e,f,g){b=this.getOption(b);"object"!=typeof d&&(d={text:e,value:d,css:f,img_src:g});b.setValue(d);this.redrawOptions()};dhtmlXCombo.prototype.getOptionsTextWidth=function(){for(var b=0,d=0,e=0;e<this.optionsArr.length;e++)var f=6*this.DOMlist.childNodes[e].innerText.replace(/[^\x00-\xFF]/g,"**").length+30,d=d+f,b=b>f?b:f;d=Math.round(d/this.optionsArr.length);1.5<b/d&&(b=Math.round(1.5*d));return b};
dhtmlXCombo.prototype.addOption=function(b){args=!arguments[0].length||"object"!=typeof arguments[0]?[arguments]:b;this.render(!1);for(var d=0;d<args.length;d++){var e=args[d];e.length&&(e.value=e[0]||"",e.text=e[1]||"",e.css=e[2]||"",e.checked=e[3]||!1,e.img_src=e[4]||"",e.pid=e[5]||"");this._addOption(e)}this.render(!0)};dhtmlXCombo.prototype._addOption=function(b,d){dOpt=new this._optionObject;this.optionsArr.push(dOpt);dOpt.setValue.apply(dOpt,[b,d]);this.redrawOptions()};
dhtmlXCombo.prototype.getIndexByValue=function(b){for(var d=0;d<this.optionsArr.length;d++)if(this.optionsArr[d].value==b)return d;return-1};dhtmlXCombo.prototype.getSelectedValue=function(){return this._selOption?this._selOption.value:null};dhtmlXCombo.prototype.getComboText=function(){return this.DOMelem_input.value==this.DOMelem_input.prompt?"":this.DOMelem_input.value};
dhtmlXCombo.prototype.setComboText=function(b){this.DOMelem_input.value=b;this.DOMelem_input.style.color==this.DOMelem_input.prompt_color&&(this.DOMelem_input.style.color="black")};dhtmlXCombo.prototype.setComboValue=function(b){this.setComboText(b);for(var d=0;d<this.optionsArr.length;d++)if(this.optionsArr[d].data()[0]==b)return this.selectOption(d,null,!0);this.DOMelem_hidden_input.value=b};
dhtmlXCombo.prototype.presetComboValue=function(b){for(var d=0;d<this.optionsArr.length;d++)this.optionsArr[d].data()[0]==b&&(this._selOption=this.optionsArr[d],this._selOption.select(),this.setComboText(this._selOption.text),this._selOption.RedrawHeader(this));this.DOMelem_hidden_input.value=b};dhtmlXCombo.prototype.getActualValue=function(){return this.DOMelem_hidden_input.value};dhtmlXCombo.prototype.getSelectedText=function(){return this._selOption?this._selOption.text:""};
dhtmlXCombo.prototype.getSelectedIndex=function(){for(var b=0;b<this.optionsArr.length;b++)if(this.optionsArr[b]==this._selOption)return b;return-1};dhtmlXCombo.prototype.setName=function(b){this.DOMelem_hidden_input.name=b;this.DOMelem_hidden_input2=b.replace(/(\]?)$/,"_new_value$1");this.name=b};dhtmlXCombo.prototype.show=function(b){this.DOMelem.style.display=convertStringToBoolean(b)?"":"none"};
dhtmlXCombo.prototype.readyToCascading=function(){this.unSelectOption();this.setComboText("");this.setPrompt("\u8bf7\u9009\u62e9");this.disable(1);for(var b=this.optionsArr,d=0;d<b.length;d++)b[d].hide(1)};
dhtmlXCombo.prototype.setCascadingCombo=function(b){this._casCombo=b;this._casCombo.readyToCascading();this.attachEvent("onChange",function(){var b=this.getSelectedValue(),e=this._casCombo;e.unSelectOption();e.setComboText("");e.setPrompt("\u8bf7\u9009\u62e9");if(null==b||""==b)e.readyToCascading();else{e.disable(0);for(var f=e.optionsArr,g=0;g<f.length;g++)f[g].hide(f[g].pid!=b)}e.callEvent("onChange",[])})};
dhtmlXCombo.prototype.setPrompt=function(b){if(b){""==this.DOMelem_input.value&&(this.DOMelem_input.value=b,this.DOMelem_input.style.color="#CCC",this.DOMelem_input.prompt_color=this.DOMelem_input.style.color);this.DOMelem_input.prompt=b;var d=this;this.DOMelem_input.onfocus=function(){this.value==this.prompt&&(this.value="",this.style.color="black")};this.DOMelem_input.onblur=function(){""==this.value&&(this.value=this.prompt,this.style.color="#CCC");d._onBlur.call(this)}}};
dhtmlXCombo.prototype.destructor=function(){this.DOMParent.removeChild(this.DOMelem);this.DOMlist.parentNode.removeChild(this.DOMlist);this.DOMlistF&&this.DOMlistF.parentNode.removeChild(this.DOMlistF);var b=dhx_glbSelectAr;this.DOMParent=this.DOMlist=this.DOMelem=0;for(var d=this.DOMlist.combo=this.DOMelem.combo=0;d<b.length;d++)if(b[d]==this){b[d]=null;b.splice(d,1);break}};
dhtmlXCombo.prototype._createSelf=function(b,d,e,f,g){if(-1!=e.toString().indexOf("%")){var h=this,l=parseInt(e)/100;window.setInterval(function(){if(b.parentNode){var d=b.parentNode.offsetWidth*l-2;if(!(isNaN(d)||0>d)&&d!=h._lastTs)h.setSize(h._lastTs=d)}},500);e=parseInt(b.offsetWidth)}e=parseInt(e||100);this.ListPosition="Bottom";this.DOMParent=b;this._inID=null;this.name=d;this._selOption=null;this.optionsArr=[];(new this._optionObject).DrawHeader(this,d,e,f);this.DOMlist=document.createElement("DIV");
this.DOMlist.className="dhx_combo_list "+(dhtmlx.skin?dhtmlx.skin+"_list":"");this.DOMlist.style.width=e-0+"px";g&&(this.DOMlist.style.height=g+"px");if(_isOpera||_isKHTML)this.DOMlist.style.overflow="auto";this.DOMlist.style.display="none";document.body.insertBefore(this.DOMlist,document.body.firstChild);_isIE&&(this.DOMlistF=document.createElement("IFRAME"),this.DOMlistF.style.border="0px",this.DOMlistF.className="dhx_combo_list",this.DOMlistF.style.width=e-0+"px",this.DOMlistF.style.display="none",
this.DOMlistF.src="javascript:false;",document.body.insertBefore(this.DOMlistF,document.body.firstChild));this.DOMlist.combo=this.DOMelem.combo=this;this.DOMelem_input.onkeydown=this._onKey;this.DOMelem_input.onkeypress=this._onKeyF;this.DOMelem_input.onblur=this._onBlur;this.DOMelem.onclick=this._toggleSelect;this.DOMlist.onclick=this._selectOption;this.DOMlist.onmousedown=function(){this._skipBlur=!0};this.DOMlist.onkeydown=function(b){(b||event).cancelBubble=!0;this.combo.DOMelem_input.onkeydown(b)};
this.DOMlist.onmouseover=this._listOver};dhtmlXCombo.prototype._listOver=function(b){b=b||event;b.cancelBubble=!0;b=_isIE?event.srcElement:b.target;var d=this.combo;if(b.parentNode==d.DOMlist){d._selOption&&d._selOption.deselect();d._tempSel&&d._tempSel.deselect();for(var e=0;e<d.DOMlist.childNodes.length&&d.DOMlist.childNodes[e]!=b;e++);d._tempSel=d.optionsArr[e];d._tempSel.select();d._autoxml&&e+1==d._lastLength&&d._fetchOptions(e+1,d._lasttext||"")}};
dhtmlXCombo.prototype._positList=function(){var b=dhx_getPosition(this.DOMelem,document.body);"Bottom"==this.ListPosition?(this.DOMlist.style.top=b[1]+this.DOMelem.offsetHeight-1+"px",this.DOMlist.style.left=b[0]+"px"):"Top"==this.ListPosition?(this.DOMlist.style.top=b[1]-this.DOMlist.offsetHeight+"px",this.DOMlist.style.left=b[0]+"px"):(this.DOMlist.style.top=b[1]+"px",this.DOMlist.style.left=b[0]+this.DOMelem.offsetWidth+"px")};
dhtmlXCombo.prototype.getPosition=function(b,d){if(_isChrome){d||(d=document.body);for(var e=b,f=0,g=0;e&&e!=d;)f+=e.offsetLeft-e.scrollLeft,g+=e.offsetTop-e.scrollTop,e=e.offsetParent;d==document.body&&(_isIE&&8>_isIE?(document.documentElement.scrollTop&&(g+=document.documentElement.scrollTop),document.documentElement.scrollLeft&&(f+=document.documentElement.scrollLeft)):_isFF||(f+=document.body.offsetLeft,g+=document.body.offsetTop));return[f,g]}e=getOffset(b);return[e.left,e.top]};
dhtmlXCombo.prototype._correctSelection=function(){if(""!=this.getComboText())for(var b=0;b<this.optionsArr.length;b++)if(!this._filterStrict&&!this._xml){if(this._selOption==this.optionsArr[b])return this.selectOption(b,!0,!1)}else if(!this.optionsArr[b].isHidden())return this.selectOption(b,!0,!1);this.unSelectOption()};dhtmlXCombo.prototype.selectNext=function(b){for(var d=this.getSelectedIndex()+b;this.optionsArr[d];){if(!this.optionsArr[d].isHidden())return this.selectOption(d,!1,!1);d+=b}};
dhtmlXCombo.prototype._onKeyF=function(b){var d=this.parentNode.combo;b=b||event;b.cancelBubble=!0;"13"==b.keyCode||"9"==b.keyCode?(d._confirmSelection(),d.closeAll()):"27"==b.keyCode?(d._resetSelection(),d.closeAll()):d._activeMode=!0;return"13"==b.keyCode||"27"==b.keyCode?(d.callEvent("onKeyPressed",[b.keyCode]),!1):!0};
dhtmlXCombo.prototype._onKey=function(b){var d=this.parentNode.combo;(b||event).cancelBubble=!0;var e=(b||event).keyCode;if(15<e&&19>e||27==e)return!0;if("block"!=d.DOMlist.style.display&&"13"!=e&&"9"!=e&&(!d._filter||d._filterAny))d.DOMelem.onclick(b||event);if("13"!=e&&"9"!=e){if(window.setTimeout(function(){d._onKeyB(e)},1),"40"==e||"38"==e)return!1}else 9==e&&(d._confirmSelection(),d.closeAll(),(b||event).cancelBubble=!1)};
dhtmlXCombo.prototype._onKeyB=function(b){if("40"==b)this.selectNext(1);else if("38"==b)this.selectNext(-1);else{this.callEvent("onKeyPressed",[b]);if(this._filter)return 229==b&&this.DOMelem_input.value==this._dhxRange?void 0:this.filterSelf(8==b||46==b);for(b=0;b<this.optionsArr.length;b++)if(this.optionsArr[b].data()[1]==this.DOMelem_input.value)return this.selectOption(b,!1,!1),!1;this.unSelectOption()}return!0};
dhtmlXCombo.prototype._onBlur=function(){var b=this.parentNode._self;window.setTimeout(function(){if(!b.DOMelem_input.disalbed){if(b.DOMlist._skipBlur)return!(b.DOMlist._skipBlur=!1);b._confirmSelection();b.callEvent("onBlur",[])}},100)};dhtmlXCombo.prototype.redrawOptions=function(){if(!this._skiprender){for(var b=this.DOMlist.childNodes.length-1;0<=b;b--)this.DOMlist.removeChild(this.DOMlist.childNodes[b]);for(b=0;b<this.optionsArr.length;b++)this.DOMlist.appendChild(this.optionsArr[b].render())}};
dhtmlXCombo.prototype.loadXML=function(b,d){this._load=!0;this.callEvent("onXLS",[]);if(this._prs)for(var e=0;e<this._prs.length;e++)b+=[getUrlSymbol(b),escape(this._prs[e][0]),"=",escape(this._prs[e][1])].join("");this._xmlCache&&this._xmlCache[b]?(this._fillFromXML(this,null,null,null,this._xmlCache[b]),d&&d()):(e=new dtmlXMLLoaderObject(this._fillFromXML,this,!0,!0),d&&(e.waitCall=d),e._cPath=b,e.loadXML(b))};
dhtmlXCombo.prototype.loadXMLString=function(b){(new dtmlXMLLoaderObject(this._fillFromXML,this,!0,!0)).loadXMLString(b)};
dhtmlXCombo.prototype._fillFromXML=function(b,d,e,f,g){b._xmlCache&&(b._xmlCache[g._cPath]=g);if("complete"!=g.getXMLTopNode("complete").tagName)b._load=!1;else{f=g.doXPath("//complete");d=g.doXPath("//option");e=!1;b.render(!1);if(!f[0]||!f[0].getAttribute("add")){if(b.clearAll(),b._lastLength=d.length,b._xml)!d||!d.length?b.closeAll():b._activeMode&&(b._positList(),b.DOMlist.style.display="block",_isIE&&b._IEFix(!0))}else b._lastLength+=d.length||Infinity,e=!0;for(f=0;f<d.length;f++){var h={};e=
[];h.text=d[f].firstChild?d[f].firstChild.nodeValue:"";for(var l=0;l<d[f].attributes.length;l++){var m=d[f].attributes[l];m&&(h[m.nodeName]=m.nodeValue,e.push(m.nodeName))}b._addOption(h,e)}b.render(!0!=e||!!d.length);b._load&&!0!==b._load?b.loadXML(b._load):(b._load=!1,!b._lkmode&&b._filter&&b._filterAutoSelect&&b._correctSelection());g=g.doXPath("//option[@selected]");g.length&&b.selectOption(b.getIndexByValue(g[0].getAttribute("value")),!1,!0);b.callEvent("onXLE",[])}};
dhtmlXCombo.prototype.unSelectOption=function(){this._selOption&&this._selOption.deselect();this._tempSel&&this._tempSel.deselect();this._tempSel=this._selOption=null};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelection()};
dhtmlXCombo.prototype._confirmSelection=function(b,d){if(0==arguments.length){var e=this.getOptionByLabel(this.DOMelem_input.value);b=e?e.value:this.DOMelem_input.value;d=null==e;if(b==this.getActualValue())return}if(!this.DOMelem_input.disabled&&!this._quietInit)try{this.DOMelem_input.focus(),this._quietInit=window.undefined}catch(f){}this.DOMelem_hidden_input.value=b;this.DOMelem_hidden_input2.value=d?"true":"false";this.callEvent("onChange",[]);this._activeMode=!1};
dhtmlXCombo.prototype._resetSelection=function(){var b=this.getOption(this.DOMelem_hidden_input.value);this.setComboValue(b?b.data()[0]:this.DOMelem_hidden_input.value);this.setComboText(b?b.data()[1]:this.DOMelem_hidden_input.value)};
dhtmlXCombo.prototype.selectOption=function(b,d,e){3>arguments.length&&(e=!0);this.unSelectOption();var f=this.optionsArr[b];if(f){this._selOption=f;this._selOption.select();f=this._selOption.content.offsetTop+this._selOption.content.offsetHeight-this.DOMlist.scrollTop-this.DOMlist.offsetHeight;0<f&&(this.DOMlist.scrollTop+=f);f=this.DOMlist.scrollTop-this._selOption.content.offsetTop;0<f&&(this.DOMlist.scrollTop-=f);f=this._selOption.data();e&&(this._confirmSelection(f[0],!1),this._filterAuto&&this._autoxml&&
b+1==this._lastLength&&this._fetchOptions(b+1,this._lasttext||""));if(d){var g=this.getComboText();g!=f[1]&&(this._confirmSelection(f[0],!1),this._filter?this._autoComplete&&this.setComboText(f[1]):this.setComboText(f[1]),this._autoComplete&&dhtmlXRange(this.DOMelem_input,g.length+1,f[1].length))}else this.setComboText(f[1]);this._selOption.RedrawHeader(this);this.callEvent("onSelectionChange",[])}};
dhtmlXCombo.prototype._selectOption=function(b){(b||event).cancelBubble=!0;b=_isIE?event.srcElement:b.target;for(var d=this.combo;!b._self;)if(b=b.parentNode,!b)return;for(var e=0;e<d.DOMlist.childNodes.length&&d.DOMlist.childNodes[e]!=b;e++);-1<d.optionType.indexOf("checkbox")?b.childNodes[0].click():(d.selectOption(e,!1,!0),d.closeAll());d.callEvent("onBlur",[]);d._activeMode=!1};
dhtmlXCombo.prototype.openSelect=function(b){if(!this._disabled&&(this.closeAll(),this.callEvent("onBeforeOpen",[]))){this._positList();this.DOMlist.style.display="block";this.callEvent("onOpen",[]);this._tempSel&&this._tempSel.deselect();this._selOption&&this._selOption.select();if(this._selOption){var d=this._selOption.content.offsetTop+this._selOption.content.offsetHeight-this.DOMlist.scrollTop-this.DOMlist.offsetHeight;0<d&&(this.DOMlist.scrollTop+=d);d=this.DOMlist.scrollTop-this._selOption.content.offsetTop;
0<d&&(this.DOMlist.scrollTop-=d)}_isIE&&this._IEFix(!0);this.DOMelem_input.focus();this._filter&&!b&&this.filterSelf()}};dhtmlXCombo.prototype._toggleSelect=function(b){var d=this.combo;"block"==d.DOMlist.style.display?d.closeAll():d.openSelect();(b||event).cancelBubble=!0};
dhtmlXCombo.prototype._fetchOptions=function(b,d){if(""==d)return this.closeAll(),this.clearAll();var e=this._xml+(-1!=this._xml.indexOf("?")?"&":"?")+"pos="+b+"&mask="+encodeURIComponent(d);this._lasttext=d;this._load?this._load=e:this.callEvent("onDynXLS",[d,b])&&this.loadXML(e)};
dhtmlXCombo.prototype.filterSelf=function(b){var d=this.getComboText();this._xml&&(this._lkmode=b,this._fetchOptions(0,d));var e=RegExp("^"+d.replace(/([\[\]\{\}\(\)\+\*\\\?\.])/g,"\\$1"),"i");this.filterAny=!1;var f=-1;this._selOption&&this._selOption.deselect();this._selOption=null;for(var g=0;g<this.optionsArr.length;g++){var h,l=!1;h=this._filterAuto?e.test(this.optionsArr[g].content?this.optionsArr[g].data()[1]:this.optionsArr[g].text):-1<(this.optionsArr[g].content?this.optionsArr[g].data()[1]:
this.optionsArr[g].text).indexOf(d);l=(this.optionsArr[g].content?this.optionsArr[g].data()[1]:this.optionsArr[g].text)==d?!0:!1;h&&-1==f&&(f=g,(this._filterAutoSelect||l)&&(this._selOption=this.optionsArr[g]));this.filterAny|=h;this._filterStrict&&this.optionsArr[g].hide(!h)}this._dhxRange=d;this.filterAny?("block"!=this.DOMlist.style.display&&this.openSelect(!1),_isIE&&this._IEFix(!0)):(this.closeAll(),this._activeMode=!0);this._filter&&!this._autoComplete&&this._filterAutoSelect?this._correctSelection():
!b&&this._autoComplete?this._correctSelection():b&&this.unSelectOption();this.callEvent("onFilterEnd",[d])};dhtmlXCombo.prototype._IEFix=function(b){this.DOMlistF.style.display=b?"block":"none";this.DOMlistF.style.top=this.DOMlist.style.top;this.DOMlistF.style.left=this.DOMlist.style.left};
dhtmlXCombo.prototype.closeAll=function(){if(window.dhx_glbSelectAr)for(var b=0;b<dhx_glbSelectAr.length;b++)"block"==dhx_glbSelectAr[b].DOMlist.style.display&&(dhx_glbSelectAr[b].DOMlist.style.display="none",_isIE&&dhx_glbSelectAr[b]._IEFix(!1)),dhx_glbSelectAr[b]._activeMode=!1;this.callEvent&&this.callEvent("onClose",[])};
function dhtmlXRange(b,d,e){var f="object"==typeof b?b:document.getElementById(b);try{f.focus()}catch(g){}b=f.value.length;d--;if(0>d||d>e||d>b)d=0;e>b&&(e=b);if(d!=e)if(f.setSelectionRange)f.setSelectionRange(d,e);else if(f.createTextRange){f=f.createTextRange();f.moveStart("character",d);f.moveEnd("character",e-b);try{f.select()}catch(h){}}}dhtmlXCombo_defaultOption=function(){this.init()};
dhtmlXCombo_defaultOption.prototype.init=function(){this.value=null;this.text="";this.selected=!1;this.css="";this.userdata={};this.pid=""};dhtmlXCombo_defaultOption.prototype.select=function(){this.content&&(this.content.className="dhx_selected_option"+(dhtmlx.skin?" combo_"+dhtmlx.skin+"_sel":""))};dhtmlXCombo_defaultOption.prototype.hide=function(b){this.render().style.display=b?"none":""};dhtmlXCombo_defaultOption.prototype.isHidden=function(){return"none"==this.render().style.display};
dhtmlXCombo_defaultOption.prototype.deselect=function(){this.content&&this.render();this.content.className=""};dhtmlXCombo_defaultOption.prototype.setValue=function(b,d){this.value=b.value||"";this.text=b.text||"";this.css=b.css||"";this.content=null;this.pid=b.pid||"";if(d)for(var e=0;e<d.length;e++)this.userdata[d[e]]=b[d[e]]};
dhtmlXCombo_defaultOption.prototype.render=function(){if(!this.content){this.content=document.createElement("DIV");this.content._self=this;this.content.style.cssText="width:100%; overflow:hidden; white-space:nowrap; text-overflow:ellipsis; "+this.css;this.content.title=this.text;if(_isOpera||_isKHTML)this.content.style.padding="2px 0px 2px 0px";this.content.innerHTML=this.text;this._ctext=_isIE?this.content.innerText:this.content.textContent}return this.content};
dhtmlXCombo_defaultOption.prototype.data=function(){if(this.content)return[this.value,this._ctext?this._ctext:this.text]};dhtmlXCombo_defaultOption.prototype.DrawHeader=function(b,d,e,f){var g=document.createElement("DIV");g.style.width=e+"px";g.className="dhx_combo_box "+(dhtmlx.skin||"");g.dir="ltr";g._self=b;b.DOMelem=g;this._DrawHeaderInput(b,d,e,f);this._DrawHeaderButton(b,d,e);b.DOMParent.appendChild(b.DOMelem)};
dhtmlXCombo_defaultOption.prototype._DrawHeaderInput=function(b,d,e,f){var g=document.createElement("input");g.setAttribute("autocomplete","off");g.type="text";g.className="dhx_combo_input";f&&(g.tabIndex=f);g.style.width=e-19-("BackCompat"==document.compatMode?0:3)+"px";b.DOMelem.appendChild(g);b.DOMelem_input=g;g=document.createElement("input");g.type="hidden";g.name=d;b.DOMelem.appendChild(g);b.DOMelem_hidden_input=g;g=document.createElement("input");g.type="hidden";g.name=(d||"").replace(/(\]?)$/,
"_new_value$1");g.value="true";b.DOMelem.appendChild(g);b.DOMelem_hidden_input2=g};dhtmlXCombo_defaultOption.prototype._DrawHeaderButton=function(b){var d=document.createElement("img");d.className="dhx_combo_img";dhtmlx.image_path&&(dhx_globalImgPath=dhtmlx.image_path);d.src=(window.dhx_globalImgPath?dhx_globalImgPath:"")+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif";b.DOMelem.appendChild(d);b.DOMelem_button=d};dhtmlXCombo_defaultOption.prototype.RedrawHeader=function(){};
dhtmlXCombo_optionTypes["default"]=dhtmlXCombo_defaultOption;
dhtmlXCombo.prototype.dhx_Event=function(){this.dhx_SeverCatcherPath="";this.attachEvent=function(b,d,e){e=e||this;b="ev_"+b;if(!this[b]||!this[b].addEvent)e=new this.eventCatcher(e),e.addEvent(this[b]),this[b]=e;return b+":"+this[b].addEvent(d)};this.callEvent=function(b,d){return this["ev_"+b]?this["ev_"+b].apply(this,d):!0};this.checkEvent=function(b){return this["ev_"+b]?!0:!1};this.eventCatcher=function(b){var d=[],e=function(b,d){b=b.split(":");return function(){}},f=function(){if(d)var e=!0;
for(var f=0;f<d.length;f++)if(null!=d[f])var l=d[f].apply(b,arguments),e=e&&l;return e};f.addEvent=function(f){"function"!=typeof f&&(f=f&&f.indexOf&&0==f.indexOf("server:")?new e(f,b.rpcServer):eval(f));return f?d.push(f)-1:!1};f.removeEvent=function(b){d[b]=null};return f};this.detachEvent=function(b){!1!=b&&(b=b.split(":"),this[b[0]].removeEvent(b[1]))}};
(function(){dhtmlx.extend_api("dhtmlXCombo",{_init:function(b){b.image_path&&(dhx_globalImgPath=b.image_path);return[b.parent,b.name,b.width||"100%",b.type,b.index]},filter:"filter_command",auto_height:"aW",auto_position:"aR",auto_width:"bv",xml:"loadXML",readonly:"readonly",items:"addOption"},{filter_command:function(b){"string"==typeof b?this.enableFilteringMode(!0,b):this.enableFilteringMode(b)}})})();dhtmlXCombo_imageOption=function(){this.init()};dhtmlXCombo_imageOption.prototype=new dhtmlXCombo_defaultOption;
dhtmlXCombo_imageOption.prototype.setValue=function(b){this.value=b.value||"";this.text=b.text||"";this.css=b.css||"";this.img_src=b.img_src||this.getDefImage()};
dhtmlXCombo_imageOption.prototype.render=function(){if(!this.content){this.content=document.createElement("DIV");this.content._self=this;this.content.style.cssText="width:100%; overflow:hidden; white-space:nowrap; text-overflow:ellipsis; "+this.css;this.content.title=this.text;var b="";null!=this.img_src&&""!=this.img_src&&(b+='<img style="float:left;" src="'+this.img_src+'" />');b+='<div style="float:left">'+this.text+"</div>";this.content.innerHTML=b}return this.content};
dhtmlXCombo_imageOption.prototype.data=function(){return[this.value,this.text,this.img_src]};dhtmlXCombo_imageOption.prototype.DrawHeader=function(b,d,e){var f=document.createElement("DIV");f.style.width=e+"px";f.className="dhx_combo_box";f._self=b;b.DOMelem=f;this._DrawHeaderImage(b,d,e);this._DrawHeaderInput(b,d,e-19);this._DrawHeaderButton(b,d,e);b.DOMParent.appendChild(b.DOMelem)};
dhtmlXCombo_imageOption.prototype._DrawHeaderImage=function(b){var d=document.createElement("img");d.className="dhx_combo_option_img";d.style.visibility="hidden";b.DOMelem.appendChild(d);b.DOMelem_image=d};dhtmlXCombo_imageOption.prototype.RedrawHeader=function(b){this.img_src?(b.DOMelem_image.style.visibility="visible",b.DOMelem_image.src=this.img_src):b.DOMelem_image.style.visibility="hidden"};dhtmlXCombo_imageOption.prototype.getDefImage=function(){return""};
dhtmlXCombo.prototype.setDefaultImage=function(b){dhtmlXCombo_imageOption.prototype.getDefImage=function(){return b}};dhtmlXCombo_optionTypes.image=dhtmlXCombo_imageOption;dhtmlXCombo_checkboxOption=function(){this.init()};dhtmlXCombo_checkboxOption.prototype=new dhtmlXCombo_defaultOption;dhtmlXCombo_checkboxOption.prototype.setValue=function(b){this.value=b.value||"";this.text=b.text||"";this.css=b.css||"";this.checked=b.checked||0};
dhtmlXCombo_checkboxOption.prototype.render=function(){if(!this.content){this.content=document.createElement("DIV");this.content._self=this;this.content.style.cssText="width:100%; overflow:hidden; white-space:nowrap; text-overflow:ellipsis; "+this.css;this.content.title=this.text;var b;b=""+(this.checked?'<input style="float:left;" type="checkbox" checked   />':'<input style="float:left;" type="checkbox" />');b+='<div style="float:left">'+this.text+"</div>";this.content.innerHTML=b;this.content.firstChild.onclick=
function(b){this.parentNode.parentNode.combo.DOMelem_input.focus();(b||event).cancelBubble=!0;if(!this.parentNode.parentNode.combo.callEvent("onCheck",[this.parentNode._self.value,this.checked]))return this.checked=!this.checked,!1}}return this.content};dhtmlXCombo_multicheckboxOption=function(){this.init()};dhtmlXCombo_multicheckboxOption.prototype=new dhtmlXCombo_checkboxOption;
dhtmlXCombo_multicheckboxOption.prototype.DrawHeader=function(b,d,e){b.DOMelem=document.createElement("DIV");b.DOMelem.style.width=e+"px";b.DOMelem.className="dhx_combo_box";b.DOMelem._self=b;this._DrawHeaderInput(b,d,e);this._DrawHeaderButton(b,d,e);b.DOMParent.appendChild(b.DOMelem)};dhtmlXCombo_multicheckboxOption.prototype.RedrawHeader=function(b){};dhtmlXCombo_optionTypes.multicheckbox=dhtmlXCombo_multicheckboxOption;
dhtmlXCombo_checkboxOption.prototype.data=function(){return[this.value,this.text,this.render().firstChild.checked]};dhtmlXCombo_checkboxOption.prototype.DrawHeader=function(b,d,e){b.DOMelem=document.createElement("DIV");b.DOMelem.style.width=e+"px";b.DOMelem.className="dhx_combo_box";b.DOMelem._self=b;this._DrawHeaderCheckbox(b,d,e);this._DrawHeaderInput(b,d,e-19);this._DrawHeaderButton(b,d,e);b.DOMParent.appendChild(b.DOMelem)};
dhtmlXCombo_checkboxOption.prototype._DrawHeaderCheckbox=function(b){var d=document.createElement("input");d.type="checkbox";d.className="dhx_combo_option_img";d.style.visibility="hidden";d.onclick=function(e){var f=b.getIndexByValue(b.getActualValue());-1!=f&&b.setChecked(f,d.checked);(e||event).cancelBubble=!0};b.DOMelem.appendChild(d);b.DOMelem_checkbox=d};dhtmlXCombo_checkboxOption.prototype.RedrawHeader=function(b){b.DOMelem_checkbox.style.visibility="";b.DOMelem_checkbox.checked=this.content.firstChild.checked};
dhtmlXCombo_optionTypes.checkbox=dhtmlXCombo_checkboxOption;dhtmlXCombo.prototype.getChecked=function(){for(var b=[],d=0;d<this.optionsArr.length;d++)this.optionsArr[d].data()[2]&&b.push(this.optionsArr[d].value);return b};dhtmlXCombo.prototype.setChecked=function(b,d){this.optionsArr[b].content.firstChild.checked=!1!==d;this.setCheckedValue()};dhtmlXCombo.prototype.setCheckedByValue=function(b,d){return this.setChecked(this.getIndexByValue(b),d)};
dhtmlXCombo.prototype.clearAllCheckedValue=function(b,d){for(d=0;d<this.optionsArr.length;d++)this.optionsArr[d].data()[2]=!1,this.optionsArr[d].content.firstChild.checked=!1};dhtmlXCombo.prototype.enableOptionAutoPositioning=function(b){this.ListAutoPosit||(this.ListAutoPosit=1);this.attachEvent("onOpen",function(){this._setOptionAutoPositioning(b)});this.attachEvent("onXLE",function(){this._setOptionAutoPositioning(b)})};
dhtmlXCombo.prototype._setOptionAutoPositioning=function(b){if("undefined"!=typeof b&&!convertStringToBoolean(b))return this.ListPosition="Bottom",this.ListAutoPosit=0,!0;b=this.getPosition(this.DOMelem);var d=this._getClientHeight()-b[1]-this.DOMelem.offsetHeight,e=this.autoHeight?this.DOMlist.scrollHeight:parseInt(this.DOMlist.offsetHeight);this.ListPosition=d<e&&b[1]>e?"Top":"Bottom";this._positList()};
dhtmlXCombo.prototype._getClientHeight=function(){return"CSS1Compat"==document.compatMode&&!window.opera?document.documentElement.clientHeight:document.body.clientHeight};dhtmlXCombo.prototype.setOptionWidth=function(b){if(0<arguments.length&&(this.DOMlist.style.width=b+"px",this.DOMlistF))this.DOMlistF.style.width=b+"px"};
dhtmlXCombo.prototype.setOptionHeight=function(b){0<arguments.length&&(this.DOMlist.style.height=_isIE?this.DOMlistF.style.height=b+"px":b+"px",this.DOMlistF&&(this.DOMlistF.style.height=this.DOMlist.style.height),this._positList())};
dhtmlXCombo.prototype.enableOptionAutoWidth=function(b){this._listWidthConf||(this._listWidthConf=this.DOMlist.offsetWidth);0==arguments.length&&(b=1);convertStringToBoolean(b)?(this.autoOptionWidth=1,this.awOnOpen=this.attachEvent("onOpen",function(){this._setOptionAutoWidth()}),this.awOnXLE=this.attachEvent("onXLE",function(){this._setOptionAutoWidth()})):"undefined"!=typeof this.awOnOpen&&(this.autoOptionWidth=0,this.detachEvent(this.awOnOpen),this.detachEvent(this.awOnXLE),this.setOptionWidth(this._listWidthConf))};
dhtmlXCombo.prototype._setOptionAutoWidth=function(){var b=!this.ahOnOpen&&this.DOMlist.scrollHeight>this.DOMlist.offsetHeight;this.setOptionWidth(1);for(var d=this.DOMlist.offsetWidth,e=0;e<this.optionsArr.length;e++)if((_isFF?this.DOMlist.childNodes[e].scrollWidth-2:this.DOMlist.childNodes[e].scrollWidth)>d)d=this.DOMlist.childNodes[e].scrollWidth;d+=b?18:0;this.setOptionWidth(this.DOMelem.offsetWidth>d?this.DOMelem.offsetWidth:d+2)};
dhtmlXCombo.prototype.enableOptionAutoHeight=function(b,d){this._listHeightConf||(this._listHeightConf=""==this.DOMlist.style.height?100:parseInt(this.DOMlist.style.height));0==arguments.length&&(b=1);if(this.autoHeight=convertStringToBoolean(b)){if(this.ahOnOpen=this.attachEvent("onOpen",function(){this._setOptionAutoHeight(b,d);_isIE&&this._setOptionAutoHeight(b,d)}),!this.awOnOpen)this.ahOnXLE=this.attachEvent("onXLE",function(){var b=this;window.setTimeout(function(){b.callEvent("onOpen",[])},
1)})}else"undefined"!=typeof this.ahOnOpen&&(this.detachEvent(this.ahOnOpen),this.detachEvent(this.ahOnXLE),this.setOptionHeight(this._listHeightConf))};
dhtmlXCombo.prototype._setOptionAutoHeight=function(b,d){if(convertStringToBoolean(b)){this.setOptionHeight(1);var e=0;0<this.optionsArr.length?(e=this.DOMlist.scrollHeight>this.DOMlist.offsetHeight?this.DOMlist.scrollHeight+2:this.DOMlist.offsetHeight,1<arguments.length&&d&&(d=parseInt(d),e=e>d?d:e),this.setOptionHeight(e)):this.DOMlist.style.display="none"}};
dhtmlXCombo.prototype.attachChildCombo=function(b,d){this._child_combos||(this._child_combos=[]);this._has_childen=1;this._child_combos[this._child_combos.length]=b;b.show(0);var e=this,f=arguments.length;this.attachEvent("onChange",function(){for(var g=0;g<e._child_combos.length;g++)e._child_combos[g]==b&&(b.show(1),b.callEvent("onMasterChange",[e.getActualValue(),e]));""==e.getActualValue()?e.showSubCombo(e,0):b._xml?(1==f&&(d=b._xml),b._xml=e.deleteParentVariable(d),b._xml+=(-1!=b._xml.indexOf("?")?
"&":"?")+"parent="+encodeURIComponent(e.getActualValue())):d&&(b.clearAll(!0),b.loadXML(d+(-1!=d.indexOf("?")?"&":"?")+"parent="+encodeURIComponent(e.getActualValue())))})};
dhtmlXCombo.prototype.setAutoSubCombo=function(b,d){1==arguments.length&&(d="subcombo");if(this._parentCombo)e=new dhtmlXCombo(this._parentCombo.DOMParent,d,this._parentCombo.DOMelem.style.width),e._parentCombo=this._parentCombo;else{var e=new dhtmlXCombo(this.DOMParent,d,this.DOMelem.style.width);e._parentCombo=this}this._filter&&(e._filter=1);if(this._xml&&(e._xml=0<arguments.length?b:this._xml,b=e._xml,e._autoxml=this._autoxml,this._xmlCache))e._xmlCache=[];this.attachChildCombo(e,b);return e};
dhtmlXCombo.prototype.detachChildCombo=function(b){for(var d=0;d<this._child_combos.length;d++)this._child_combos.splice(d,1);b.show(1)};dhtmlXCombo.prototype.showSubCombo=function(b,d){if(b._child_combos)for(var e=0;e<b._child_combos.length;e++)b._child_combos[e].show(d),b.showSubCombo(b._child_combos[e],0)};dhtmlXCombo.prototype.deleteParentVariable=function(b){return b.replace(/parent\=[^&]*/g,"").replace(/\?\&/,"?")};
function dhtmlXTabBar(b,d,e){d=d||"top";dhtmlxEventable(this);this._hrefs={};this._s={};this._c={};this._s.mode=d;this._s.scrolls=!0;this._s.line_height=(parseInt(e)||20)+3;this._s.skin_line=1;this._s.tab_margin=0;this._s.expand=0;this._s.ext_border=2;this._s._bMode="right"==d||"bottom"==d?1:0;this._s._vMode="right"==d||"left"==d?1:0;this._dx=this._s._vMode?"height":"width";this._dy=this._s._vMode?"width":"height";switch(d){case "top":this._py="top";this._px="left";this._pxc="right";break;case "bottom":this._py=
"bottom";this._px="left";this._pxc="right";break;case "right":this._py="right";this._px="top";this._pxc="bottom";break;case "left":this._py="left",this._px="top",this._pxc="bottom"}this._active=null;this._tabs={};this._content={};this._href={};this._rows=[];this._s._tabSize=150;this._styles={"default":{left:3,right:3,select_shift:3,select_top:2,margin:1,offset:5,tab_color:"#F4F3EE",data_color:"#F0F8FF"},winbiscarf:{left:18,right:18,select_shift:3,select_top:2,margin:1,offset:5},winscarf:{left:18,
right:4,select_shift:3,select_top:2,margin:5,offset:5},modern:{left:5,right:5,select_shift:3,select_top:2,margin:1,offset:5,tab_color:"#F4F3EE",data_color:"#F0F8FF"},silver:{left:7,right:7,select_shift:3,select_top:2,margin:1,offset:5,tab_color:"#F4F3EE",data_color:"#F0F8FF"},dark_blue:{left:2,right:2,select_shift:3,select_top:2,margin:1,offset:5},glassy_blue:{left:2,right:3,select_shift:3,select_top:2,margin:1,offset:5},dhx_black:{left:2,right:2,select_shift:3,select_top:0,margin:1,offset:5},dhx_blue:{left:2,
right:2,select_shift:3,select_top:0,margin:1,offset:5,tab_color:"#F4F3EE",data_color:"#F0F8FF"},dhx_skyblue:{left:3,right:3,select_shift:0,select_top:0,margin:-1,offset:5,data_color:"white",hover:!0},dhx_web:{left:3,right:3,select_shift:1,select_top:0,margin:5,offset:15,data_color:"white"}};"object"!=typeof b&&(b=document.getElementById(b));this.entBox=b;this.entBox.className+=" dhx_tabbar_zone_"+this._s.mode;dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);this.setStyle("default");this.__skin=
!1;this._createSelf();_isIE&&this.preventIECashing(!0);return this}
dhtmlXTabBar.prototype={_get_size:function(b,d){var e=this.entBox.getAttribute(b)||this.entBox.style[b]||(window.getComputedStyle?window.getComputedStyle(this.entBox,null)[b]:this.entBox.currentStyle?this.entBox.currentStyle[b]:0);-1!=(e||"").indexOf("%")&&this.enableAutoReSize(!0,!0);if(!e||-1!=e.indexOf("%")||"auto"==e)e=d+"px";return e},setStyle:function(b){this.setSkin(b)},_getSkin:function(){return this._a},setSkin:function(b){b=b.toLowerCase();this._styles[b]||(b="default");this._a=this._styles[b];
this.skin=b;this._tabAll&&(this._tabAll.className="dhx_tabbar_zone dhx_tabbar_zone_"+this.skin);var d=0==b.indexOf("dhx_sky");b=0==b.indexOf("dhx_web");d&&(this._s.skin_line=0);b&&(this._s.line_height=29,this._s.ext_border=-1,this._s.expand=!0);if(d){this._s.line_height=26;this._setRowSizes();this._s.expand&&(this._s.tab_margin=-1);this._s.skin_line_x=!0;this._s.skin_line=-3;if(d=this._s._rendered)for(b=0;b<d.length;b++)d[b].parentNode.removeChild(d[b]);var e=document.createElement("DIV");e.className=
"dhx_tabbar_lineA";this._tabAll.appendChild(e);var f=document.createElement("DIV");f.className="dhx_tabbar_lineB";this._tabAll.appendChild(f);var g=document.createElement("DIV");g.className="dhx_tabbar_lineC";this._tabAll.appendChild(g);d=document.createElement("DIV");d.className="dhx_tabbar_lineD";this._tabAll.appendChild(d);this._getCoverLine();this._s._rendered=[e,f,g,d];this._s.expand&&(this._conZone.style.borderWidth="0px 0px 0px 0px",this._tabZone.firstChild.style.borderWidth="0px 0px 0px 0px",
g.style.borderWidth="0px 0px 0px 0px",d.style.left="0px",g.style.right="0px",e.style.borderWidth="0px 0px 0px 0px","top"==this._s.mode&&(this._lineA.style.borderWidth="1px 0px 0px 0px"),f.style.left="1px");var h=function(){this._lineA.style[this._dx]="1px";var b=_isIE&&"BackCompat"==document.compatMode,d=this._tabAll[this._s._vMode?"offsetHeight":"offsetWidth"]+(b?2:0);this._lastActive&&(d=Math.max(d,this._lastActive.parentNode[this._s._vMode?"scrollHeight":"scrollWidth"]));6>d||(e.style[this._py]=
parseInt(this._conZone.style[this._py])-3+"px",e.style[this._dx]=d-2+"px",f.style[this._py]=parseInt(this._conZone.style[this._py])-3+"px",f.style[this._dx]=d-(b?6:4)+(this._s.expand?2:0)+"px",g.style[this._dy]=parseInt(this._tabZone.style[this._dy])-3+"px",this._lineA.style[this._dx]=d-2+"px")};h.call(this);var l=this._checkScroll;this._checkScroll=function(){h.apply(this,arguments);l.apply(this,arguments)};var m=this._scrollTo;this._scrollTo=function(){m.apply(this,arguments);h.apply(this,arguments)}}this._a.data_color&&
this._conZone&&(this._conZone.style.backgroundColor=this._a.data_color);this.__skin=!0},enableAutoReSize:function(){var b=this;dhtmlxEvent(window,"resize",function(){window.setTimeout(function(){b&&b._setSizes&&b._setSizes()},1)})},_createSelf:function(){this._tabAll=document.createElement("DIV");this._tabZone=document.createElement("DIV");this._conZone=document.createElement("DIV");this.entBox.appendChild(this._tabAll);this._tabAll.appendChild(this._tabZone);this._tabAll.appendChild(this._conZone);
this._tabAll.className="dhx_tabbar_zone dhx_tabbar_zone_"+this.skin;this._s._vMode&&(this._tabAll.className+="V");this._s._bMode&&(this._tabAll.className+="B");this._tabZone.className="dhx_tablist_zone";this._conZone.className="dhx_tabcontent_zone";this._a.data_color&&(this._conZone.style.backgroundColor=this._a.data_color);this._tabZone.onselectstart=function(){return!1};this._tabZone.onclick=this._onClickHandler;this._tabZone.onmouseover=this._onMouseOverHandler;this._tabZone[_isFF?"onmouseout":
"onmouseleave"]=this._onMouseOutHandler;this._tabZone.tabbar=this;this._createRow()},_createRow:function(){var b=document.createElement("DIV");b.className="dhx_tabbar_row";b.tabCount=0;this._tabZone.appendChild(b);this._rows[this._rows.length]=b;this._setRowSizes()},_removeRow:function(b){b.parentNode.removeChild(b);for(var d=[],e=0;e<this._rows.length;e++)this._rows[e]!=b&&(d[d.length]=this._rows[e]);this._rows=d},_setSizes:function(b,d){var e=["clientHeight","clientWidth"];"width"!=this._dx&&e.reverse();
var f=_isIE&&"BackCompat"==document.compatMode,g=this._conZone.offsetWidth-this._conZone.clientWidth,h=d||this.entBox[e[0]]+(f?g:0),f=b||this.entBox[e[1]]+(f?g:0),e=this._rows.length*(this._s.line_height-(this._s.skin_line_x?4:2))+(this._s.skin_line_x?2:0);this._tabZone.style[this._dy]=e+"px";this._conZone.style[this._dy]=Math.max(0,h-this._s.ext_border-e-(this._s.skin_line_x?3:0)-this._s.tab_margin)+"px";this._conZone.style[this._dx]=Math.max(0,f-(this._s.expand?0:2))+"px";this._tabZone.style[this._py]=
this._s.tab_margin+"px";this._conZone.style[this._py]=e+this._s.tab_margin-this._s.skin_line+"px";this._checkScroll();(f=this.getActiveTab())&&this.cells(f).activate()},_checkScroll:function(){if(this._lineA){this._lineA.style[this._dx]="1px";var b=this._tabAll[this._s._vMode?"offsetHeight":"offsetWidth"]+(_isIE&&"BackCompat"==document.compatMode?2:0);this._lastActive&&(b=Math.max(b,this._lastActive.parentNode[this._s._vMode?"scrollHeight":"scrollWidth"]));2<b&&(this._lineA.style[this._dx]=b-2+"px")}if(!this._s._vMode&&
this._s.scrolls)for(b=0;b<this._rows.length;b++)2<this._rows[b].scrollWidth-this._rows[b].offsetWidth?this._showScroll(b):this._hideScroll(b)},_showScroll:function(b){if(!this._rows[b]._scroll){var d=this._rows[b]._scroll=[],e=Math.max(0,this._s.line_height-23);d[0]=document.createElement("DIV");d[0].style.cssText="background-image:url("+this.imgUrl+this.skin+"/"+this.skin+"_scroll_left.gif); width:20px; height:21px;position:absolute;left:0px;z-index:990;top:"+e+"px;";d[0].className="dhx_tab_scroll_left";
this._rows[b].appendChild(d[0]);d[1]=document.createElement("DIV");d[1].style.cssText="background-image:url("+this.imgUrl+this.skin+"/"+this.skin+"_scroll_right.gif); width:20px; height:21px;position:absolute;right:0px;z-index:990;top:"+e+"px;";d[1].className="dhx_tab_scroll_right";this._rows[b].appendChild(d[1])}},_hideScroll:function(b){this._rows[b]._scroll&&(this._rows[b].removeChild(this._rows[b]._scroll[0]),this._rows[b].removeChild(this._rows[b]._scroll[1]),this._rows[b]._scroll=null)},_setRowSizes:function(){for(var b=
0;b<this._rows.length;b++)this._rows[b].style[this._dy]=this._s.line_height+"px",this._rows[b].style[this._py]=b*(this._s.line_height-(this._s.skin_line_x?4:2))-0+"px",this._rows[b].style.zIndex=10+b;this._setSizes()},_setTabSizes:function(b){for(var d=this._a.offset,e=this._vMode?this._pxc:this._px,f=0;f<b.tabCount;f++){var g=b.childNodes[f];"none"!=g.style.display&&(g.style[e]=d-(this._lastActive==g?this._a.select_shift:0)+"px",d+=g._size+this._a.margin)}},addTab:function(b,d,e,f,g){!this.__skin&&
dhtmlx.skin&&this.setSkin(dhtmlx.skin);g=g||0;for(var h=this._rows.length;h<=g;h++)this._createRow();h=this._rows[g].tabCount;!f&&0!==f&&(f=h);d=this._createTab(b,d,"*"==e?10:e||this._s._tabSize);this._addTab(this._rows[g],d,e,f);this._tabs[b]=d;this.cells(b).hide();this._checkScroll()},removeTab:function(b,d){var e=this._tabs[b];if(e){this.cells(b)._dhxContDestruct();this._content[b]&&this._content[b].parentNode&&this._content[b].parentNode.removeChild(this._content[b]);this._content[b]=null;this._goToAny(e,
d);var f=e.parentNode;e.innerHTML="";f.removeChild(e);f.tabCount--;0==f.tabCount&&1<this._rows.length?this._removeRow(f):this._setTabSizes(f);delete this._tabs[b];this._lastActive==e&&(this._lastActive=null);this._setRowSizes()}},_goToAny:function(b,d){if(this._lastActive==b&&(d&&this.goToNextTab()==b&&this.goToPrevTab(),this._lastActive==b))this._lastActive=null},_createTab:function(b,d,e){var f=document.createElement("DIV");f.className="dhx_tab_element dhx_tab_element_inactive";d="<span>"+d+"</span><div></div><div></div><div></div>";
this._close&&(d+="<IMG style='"+this._pxc+":4px; "+this._py+("dhx_web"==this.skin?":7":":4")+"px; position:absolute;z-index:11;' src='"+this.imgUrl+this.skin+"/close.png' >");f.innerHTML=d;f.setAttribute("tab_id",b);f._size=parseInt(e);f.style[this._dx]=parseInt(e)+"px";f.style[this._dy]=this._s.line_height+"px";f.style[this._py]=this._a.select_top+"px";f.skin=this.skin;this._a.tab_color&&(f.style.backgroundColor=this._a.tab_color);this._c[b]&&(f.childNodes[0].style.cssText=this._c[b].color);this._img_all(f);
if(this._close){var g=this;f.childNodes[4].onclick=function(b){var d=this.parentNode.getAttribute("tab_id");g.callEvent("onTabClose",[d])&&g.removeTab(d,!0);(b||event).cancelBubble=!0}}return f},_img_all:function(b){var d=this._getSkin(b),e=b._active?1:4;this._img(b.childNodes[1],e,this._px,d.left);this._img(b.childNodes[2],e+2,this._pxc,d.right);this._img(b.childNodes[3],e+1,this._px,parseInt(b.style[this._dx])-(d.left+d.right),d.left)},_get_img_pos:function(b){this._s._bMode&&7>b&&(b=Math.abs(b-
6));b=-5-45*b;return this._s._vMode?b+"px 0px":"0px "+b+"px"},_img:function(b,d,e,f,g){"undefined"!=typeof b&&(b.style.backgroundImage="url("+this.imgUrl+this.skin+"/"+this.skin+"_"+this._s.mode+".gif)",b.style.backgroundPosition=this._get_img_pos(d),b.style[this._py]="0px",e&&(b.style[this._dx]=Math.max(f,0)+"px",b.style[e]=(g||0)+"px"))},_addTab:function(b,d,e,f){var g=this._a.offset;b.tabCount&&(g=b.childNodes[b.tabCount-1],g=parseInt(g.style[this._s.align?this._pxc:this._px])+parseInt(g._size)+
this._a.margin);var h=b.childNodes[f];h?b.insertBefore(d,h):b.appendChild(d);b.tabCount++;"*"==e&&(d.style.whiteSpace="nowrap",this.adjustTabSize(d));d.style[this._s.align?this._pxc:this._px]=g+"px";f!=b.tabCount-1&&this._setTabSizes(b)},adjustTabSize:function(b,d){var e=this._getSkin(e);d||(b.style.fontWeight="bold",b.childNodes[3].style[this._dx]=b.style[this._dx]="10px",d=b[this._s._vMode?"scrollHeight":"scrollWidth"]+10+(this._close?20:0),b.style.fontWeight="");b.style[this._dx]=d+"px";b._size=
d;this._img_all(b)},_onMouseOverHandler:function(b){b=this.tabbar._getTabTarget(b?b.target:event.srcElement);this.tabbar._showHover(b)},_onMouseOutHandler:function(){this.tabbar._showHover()},_showHover:function(b){if(b!=this._lastHower){if(this._lastHower&&this._lastHower!=this._lastActive){var d=this._getSkin(this._lastHower);this._lastHower.className=this._lastHower.className.replace(/[ ]*dhx_tab_hover/gi,"");d.hover?this._img_all(this._lastHower):this._img(this._lastHower.childNodes[3],5,this._px,
parseInt(this._lastHower.style[this._dx])-(d.left+d.right),d.left);this._lastHower=null}if(!b||!(b==this._lastActive||b._disabled))if(this._lastHower=b)d=this._getSkin(b),b.className+=" dhx_tab_hover",d.hover&&(this._img(b.childNodes[1],7,this._px,d.left),this._img(b.childNodes[2],8,this._pxc,d.right)),this._img(b.childNodes[3],0,this._px,parseInt(b.style[this._dx])-(d.left+d.right),d.left)}},_getTabTarget:function(b){if(!b)return null;for(;!b.className||-1==b.className.indexOf("dhx_tab_element");){if(b.className&&
-1!=b.className.indexOf("dhx_tabbar_zone"))return null;b=b.parentNode;if(!b)return null}return b},_onClickHandler:function(b){b=b?b.target:event.srcElement;var d=this.tabbar._getTabTarget(b);if(d&&!d._disabled)this.tabbar._setTabActive(d);else if(d=null,"dhx_tab_scroll_left"==b.className?(b.parentNode.scrollLeft=Math.max(0,b.parentNode.scrollLeft-b.parentNode.offsetWidth/2),d=b,this.tabbar._setTabTop(this.tabbar._lastActive)):"dhx_tab_scroll_right"==b.className&&(b.parentNode.scrollLeft+=b.parentNode.offsetWidth/
2,d=b.previousSibling,this.tabbar._setTabTop(this.tabbar._lastActive)),d&&d.parentNode&&d.parentNode.tagName){d.style.left=d.parentNode.scrollLeft+"px";if(!_isIE||window.XMLHttpRequest)d.nextSibling.style.right=-1*d.parentNode.scrollLeft+"px";return!1}},_deactivateTab:function(){this._setTabInActive(this._lastActive);this._lastActive=null},_setTabInActive:function(b){if(!b||b!=this._lastActive)return!0;var d=this._getSkin(b),e=b.getAttribute("tab_id"),f=this._s.align?this._pxc:this._px;b.className=
b.className.replace("_active","_inactive");b.style[this._py]=d.select_top+"px";b.style[f]=parseInt(b.style[f])+d.select_shift+"px";b.style[this._dx]=b._size+"px";b._active=!1;d.tab_color&&(b.style.backgroundColor=d.tab_color);this._c[e]&&(b.childNodes[0].style.cssText=this._c[e].color);this._img_all(b);this.cells(e).hide()},_setTabActive:function(b,d){if(!b)return!0;var e=b.getAttribute("tab_id"),f=this._lastActive?this._lastActive.getAttribute("tab_id"):null,g=this._getSkin(b);d||this.callEvent("onTabClick",
[e,f]);if(b==this._lastActive)return!0;if(d||this.callEvent("onSelect",[e,f]))return f=this._s.align?this._pxc:this._px,this._setTabInActive(this._lastActive),b.className=b.className.replace("_inactive","_active"),b.style[this._py]="0px",b.style[f]=parseInt(b.style[f])-g.select_shift+"px",b.style[this._dx]=b._size+2*g.select_shift+"px",b._active=!0,g.data_color&&(b.style.backgroundColor=g.data_color),this._c[e]&&(b.childNodes[0].style.cssText=this._c[e].scolor),this._img_all(b),this._setTabTop(b),
this._lastActive=b,this.cells(e).show(),this._scrollTo(b),!0},_scrollTo:function(b){if(this._s.scrolls&&(b.offsetLeft<b.parentNode.scrollLeft||b.offsetLeft+b.offsetWidth>b.parentNode.scrollLeft+b.parentNode.offsetWidth))if(b.parentNode.scrollLeft=b.offsetLeft,(b=b.parentNode._scroll)&&b[0]&&(b[0].style.left=b[0].parentNode.scrollLeft+"px",!_isIE||window.XMLHttpRequest))b[1].style.right=-1*b[1].parentNode.scrollLeft+"px"},_setTabTop:function(b){for(var d=this._rows.length-1,e=0;e<this._rows.length;e++)if(this._rows[e]==
b.parentNode){var f=this._rows[e];e!=d&&(this._rows[e]=this._rows[d],this._rows[d]=f);d=this._getCoverLine();f.appendChild(d);d.style[this._dx]="1px";f=this._s._vMode?Math.max(this._tabZone.offsetHeight,f.scrollHeight):Math.max(this._tabZone.offsetWidth,f.scrollWidth);0<f&&(d.style[this._dx]=f+"px");b.style.zIndex=d._index++;break}this._setRowSizes()},_getCoverLine:function(){this._lineA||(this._lineA=document.createElement("div"),this._lineA.className="dhx_tablist_line",this._lineA.style[this._py]=
this._s.line_height-3-(this._s.skin_line_x?1:0)+"px",this._lineA.style[this._dx]="100%",this._lineA._index=1);this._lineA.style.zIndex=this._lineA._index++;return this._lineA},cells:function(b){if(!this._tabs[b])return null;if(!this._content[b]){var d=document.createElement("DIV");d.style.cssText="width:100%;height:100%;visibility:hidden;overflow:hidden;position:absolute;top:0px; left:0px;";d.setAttribute("tab_id",b);d.skin=this.skin;this._conZone.appendChild(d);(new dhtmlXContainer(d)).setContent(d);
"dhx_web"==this.skin&&d._setPadding&&d._setPadding(1,"dhxcont_tabbar_dhx_web");d._isTabbarCell=!0;this._content[b]=d;var e=this;d.show=function(){e._s.hide&&(this.style.display="");this.style.visibility="";this.style.zIndex="1";this.autoSize();this._activate()};d.hide=function(){e._s.hide?(this.style.visibility="",this.style.display="none"):this.style.visibility="hidden";this.style.zIndex=-1;"iframe"==e._hrfmode&&this.attachURL("javascript:false")};d.autoSize=function(){if(e._awdj||e._ahdj){var b=
this.vs?this.vs[this.av].dhxcont.mainCont[this.av]:this.mainCont;b.offsetWidth||(b.style.width=Math.max(0,e.entBox.offsetWidth-2)+"px");e._ahdj&&(b.style.height="1px");var d=this._getContentDim();e._awdj&&(e.entBox.style.width=d[0]+2+"px",b.style.width=d[0]+"px");e._ahdj&&(e._tabAll.style.height=e.entBox.style.height=d[1]+e._rows.length*(e._s.line_height-2)+(e._s.expand?0:2)+2+"px",b.style.height=d[1]+"px");e._setSizes();e._setTabTop(e._lastActive)}};d._activate=function(){this._delay&&this._attachContent.apply(this,
this._delay);this.activate();"iframe"!=e._hrfmode&&(this._delay=null)};d._doOnResize=function(){this.activate()};d.activate=function(){this.adjustContent(this.parentNode,0,0,!1,0);d.updateNestedObjects()};d._doOnAttachStatusBar=d.activate;d._doOnAttachMenu=d.activate;d._doOnAttachToolbar=d.activate;d._getContentDim=function(){var b=this.vs?this.vs[this.av].dhxcont.mainCont[this.av]:this.mainCont;return[b.scrollWidth,b.scrollHeight]};d._doOnFrameContentLoaded=function(){(e._awdj||e._ahdj)&&e.cells(b).autoSize();
e.callEvent("onXLE",[]);e.callEvent("onTabContentLoaded",[this.getAttribute("tab_id")])};d._doOnBeforeAttachURL=function(){e.callEvent("onXLS",[])};d.adjustContent(d.parentNode,0,0,!1,0)}return this._content[b]},forceLoad:function(b,d){this.setContentHref(b,d||this._hrefs[b]);this.cells(b)._activate()},enableAutoSize:function(b,d){this._ahdj=convertStringToBoolean(d);this._awdj=convertStringToBoolean(b)},clearAll:function(){for(var b in this._tabs)this.removeTab(b,!1);this._lineA&&(b=this._getCoverLine(),
b.parentNode&&b.parentNode.removeChild(b))},enableTabCloseButton:function(b){this._close=convertStringToBoolean(b)},preventIECashing:function(b){this.no_cashe=convertStringToBoolean(b);this.XMLLoader&&(this.XMLLoader.rSeed=this.no_cashe)},setTabActive:function(b,d){this._setTabActive(this._tabs[b],!1===d)},setTabInActive:function(){var b=this._lastActive;b&&(this._deactivateTab(),this._setTabTop(b),this._getCoverLine())},loadXMLString:function(b,d){this.XMLLoader=new dtmlXMLLoaderObject(this._parseXML,
this,!0,this.no_cashe);this.XMLLoader.waitCall=d||0;this.XMLLoader.loadXMLString(b)},loadXML:function(b,d){this.callEvent("onXLS",[]);this.XMLLoader=new dtmlXMLLoaderObject(this._parseXML,this,!0,this.no_cashe);this.XMLLoader.waitCall=d||0;this.XMLLoader.loadXML(b)},_parseXML:function(b,d,e,f,g){b.clearAll();d="";g||(g=b.XMLLoader);f=g.getXMLTopNode("tabbar");e=g.doXPath("//row",f);var h=f.getAttribute("tabstyle");h&&b.setStyle(h);b._hrfmode=f.getAttribute("hrefmode")||b._hrfmode;b._a.margin=parseInt(f.getAttribute("margin")||
b._a.margin,10);if(h=f.getAttribute("align"))b._s.align="right"==h||"bottom"==h;b._a.offset=parseInt(f.getAttribute("offset")||b._a.offset,10);(h=f.getAttribute("skinColors"))&&b.setSkinColors(h.split(",")[0],h.split(",")[1]);for(f=0;f<e.length;f++)for(var h=g.doXPath("./tab",e[f]),l=0;l<h.length;l++){var m=h[l].getAttribute("width"),k=b._getXMLContent(h[l]),n=h[l].getAttribute("id");b.addTab(n,k,m,"",f);h[l].getAttribute("selected")&&(d=n);if(b._hrfmode)b.setContentHref(n,h[l].getAttribute("href"));
else for(m=0;m<h[l].childNodes.length;m++)k=h[l].childNodes[m],"content"==k.tagName&&(k.getAttribute("id")?b.setContent(n,k.getAttribute("id")):b.setContentHTML(n,b._getXMLContent(k)))}d&&b.setTabActive(d);b.callEvent("onXLE",[])},adjustOuterSize:function(){this._setSizes()},_getXMLContent:function(b){for(var d="",e=0;e<b.childNodes.length;e++)var f=b.childNodes[e],d=d+(null===f.nodeValue?"":f.nodeValue);return d},enableContentZone:function(b){this._conZone.style.display=convertStringToBoolean(b)?
"":"none";this._setSizes()},enableForceHiding:function(b){this._s.hide=convertStringToBoolean(b)},setSize:function(b,d){this.entBox.style.width=b+"px";this.entBox.style.height=d+"px";this._setSizes()},setSkinColors:function(b,d,e){b&&(this._a.data_color=b);d&&(this._a.tab_color=d);this._conZone.style.backgroundColor=e||b},setCustomStyle:function(b,d,e,f){this._c[b]={color:";"+(d?"color:"+d+";":"")+(f||""),scolor:";"+(e?"color:"+e+";":"")+(f||"")};this._tabs[b]&&(this._tabs[b].childNodes[0].style.cssText=
this._tabs[b]==this._lastActive?this._c[b].scolor:this._c[b].color)},setImagePath:function(b){this.imgUrl=b},getNext:function(b,d){d=d||"nextSibling";var e=b[d];e&&-1==e.className.indexOf("dhx_tab_element")&&(e=null);!e&&b.parentNode[d]&&(e=b.parentNode[d].childNodes[0]);return e||b},goToNextTab:function(b){do b=this.getNext(b||this._lastActive);while(!this._setTabActive(b));return b},goToPrevTab:function(b){do b=this.getNext(b||this._lastActive,"previousSibling");while(!this._setTabActive(b));return b},
disableTab:function(b){this._tabs[b]._disabled=!0;this._tabs[b].style.color="silver"},enableTab:function(b){this._tabs[b]._disabled=!1;this._tabs[b].style.color=""},showTab:function(b){b="object"==typeof b?b:this._tabs[b];b.style.display="";this._setTabSizes(b.parentNode)},hideTab:function(b,d){var e="object"==typeof b?b:this._tabs[b];e.style.display="none";e==this._lastActive&&!1!==d&&this.goToNextTab();this._setTabSizes(e.parentNode)},getActiveTab:function(){return!this._lastActive?null:this._lastActive.getAttribute("tab_id")},
setLabel:function(b,d,e){this.getActiveTab();this._tabs[b].firstChild.innerHTML=d;this.adjustTabSize(this._tabs[b],e);this._setTabSizes(this._tabs[b].parentNode);this._checkScroll()},getLabel:function(b){return this._tabs[b].firstChild.innerHTML},setOffset:function(b){this._a.offset=1*b},enableScroll:function(b){this._s.scrolls=convertStringToBoolean(b)},setMargin:function(b){this._a.margin=1*b},setAlign:function(b){this._s.align="bottom"==b||"right"==b},tabWindow:function(b){return this._content[b]?
this._content[b]._frame.contentWindow:null},setContentHTML:function(b,d){this.cells(b).attachHTMLString(d)},setContent:function(b,d){this.cells(b).attachObject(d);this.cells(b).activate()},setHrefMode:function(b){this._hrfmode=b},setContentHref:function(b,d){this._hrefs[b]=d;switch(this._hrfmode){case "iframes":this.cells(b).attachURL(d);break;case "iframe":case "iframes-on-demand":this.cells(b)._delay=["url",d,!1];break;case "ajax":var e=this.cells(b),f=this;e._delay=["urlajax",d,!0];e.attachHTMLStringA||
(e.attachHTMLStringA=e.attachHTMLString,e.attachHTMLString=function(b,d){d&&(b=f._getXMLContent(d.doXPath("//content")[0]));return this.attachHTMLStringA(b)});break;case "ajax-html":this.cells(b)._delay=["urlajax",d,!0]}this._tabs[b]==this._lastActive&&this.cells(b).show(!0)},normalize:function(b,d){function e(b,d){f[d]._size+=Infinity!=k?k-m:0;b.adjustTabSize(f[d],f[d]._size)}b=b||this._tabZone.offsetWidth;for(var f=[],g=0;g<this._rows.length;g++)for(var h=0;h<this._rows[g].tabCount;h++)f.push(this._rows[g].removeChild(this._rows[g].childNodes[0]));
this._tabZone.innerHTML="";this._rows=[];var l=this._lastActive;this._lastActive=null;this._createRow();for(var g=0,m=this._a.offset,k=Infinity,h=0;h<f.length;h++)m+f[h]._size+this._a.margin<b?(this._rows[g].appendChild(f[h]),this._rows[g].tabCount++,m+=f[h]._size+this._a.margin):(d&&m<k&&e(this,h-1),this._createRow(),h--,g++,k=m,m=this._a.offset);d&&m<k&&Infinity!=k&&e(this,h-1);for(g=0;g<this._rows.length;g++)this._setTabSizes(this._rows[g]);this._setSizes();(this._lastActive=l)&&this._setTabTop(this._lastActive)},
showInnerScroll:function(){for(var b in this._tabs)if(this.cells(b).vs){var d=this.cells(b).av;this.cells(b).vs[d].dhxcont.mainCont[d].style.overflow="auto"}else this.cells(b).dhxcont.mainCont.style.overflow="auto"},getNumberOfTabs:function(){for(var b=0,d=0;d<this._rows.length;d++)b+=this._rows[d].tabCount;return b},destructor:function(){}};
window.dhtmlXContainer||(window.dhtmlXContainer=function(b){var d=this;this.obj=b;this.dhxcont=null;this.setContent=function(b){this.dhxcont=b;this.dhxcont.innerHTML="<div id='dhxMainCont' class='dhxcont_main_content'></div><div id='dhxContBlocker' class='dhxcont_content_blocker' style='display: none;'></div>";this.dhxcont.mainCont=this.dhxcont.childNodes[0];this.obj.dhxcont=this.dhxcont};this.obj._genStr=function(b){for(var d="",g=0;g<b;g++)d+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(62*
Math.random()));return d};this.obj.setMinContentSize=function(b,d){this._minDataSizeW=b;this._minDataSizeH=d};this.obj.moveContentTo=function(b){b.updateNestedObjects()};this.obj.adjustContent=function(b,d,g,h,l){this.dhxcont.style.top=d+"px";this.dhxcont.style.left="0px";!0!=h&&(this.dhxcont.style.width=b.clientWidth+"px");var m=b.clientHeight-d;0>m&&(m=0);this.dhxcont.style.height=m+(null!=g?g:0)+"px";!0!=h&&this.dhxcont.offsetWidth>b.clientWidth&&(this.dhxcont.style.width=Math.max(0,2*b.clientWidth-
this.dhxcont.offsetWidth)+"px");this.dhxcont.offsetHeight>b.clientHeight-d&&(m=2*(b.clientHeight-d)-this.dhxcont.offsetHeight,0>m&&(m=0),this.dhxcont.style.height=m+"px");l&&!isNaN(l)&&(this.dhxcont.style.height=parseInt(this.dhxcont.style.height)-l+"px");null!=this._minDataSizeH&&parseInt(this.dhxcont.style.height)<this._minDataSizeH&&(this.dhxcont.style.height=this._minDataSizeH+"px");null!=this._minDataSizeW&&parseInt(this.dhxcont.style.width)<this._minDataSizeW&&(this.dhxcont.style.width=this._minDataSizeW+
"px");!0!=h&&(this.dhxcont.mainCont.style.width=this.dhxcont.clientWidth+"px");this.dhxcont.mainCont.style.height=this.dhxcont.clientHeight-(null!=this.menu?!this.menuHidden?this.menuHeight:0:0)-(null!=this.toolbar?!this.toolbarHidden?this.toolbarHeight:0:0)-(null!=this.sb?!this.sbHidden?this.sbHeight:0:0)+"px"};this.obj.updateNestedObjects=function(){};this.obj.attachObject=function(b,d){"string"==typeof b&&(b=document.getElementById(b));if(d){b.style.visibility="hidden";b.style.display="";var g=
b.offsetWidth,h=b.offsetHeight}this._attachContent("obj",b);d&&this._isWindow&&(b.style.visibility="",this._adjustToContent(g,h))};this.obj.appendObject=function(b){"string"==typeof b&&(b=document.getElementById(b));this._attachContent("obj",b,!0)};this.obj.attachHTMLString=function(b){this._attachContent("str",b);b=b.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var d=0;d<b.length;d++){var g=b[d].replace(/<([\/]{0,1})script[^>]*>/g,"");if(window.execScript){var h=b[d].match(/src=("|')([^"']+)("|')/);
h&&(g=dhtmlxAjax.getSync(h[2]).xmlDoc.responseText);g&&window.execScript(g)}else window.eval(g)}};this.obj.attachURL=function(b,d,g){this._attachContent(!0==d?"urlajax":"url",b,!1,g)};this.obj._attachContent=function(b,f,g,h){if(!0!==g)for(;0<d.dhxcont.mainCont.childNodes.length;)d.dhxcont.mainCont.removeChild(d.dhxcont.mainCont.childNodes[0]);if("url"==b)b=_isIE?document.createElement("<iframe name='"+h+"'>"):document.createElement("IFRAME"),h&&(b.name=h),b.frameBorder=0,b.border=0,b.style.width=
"100%",b.style.height="100%",d.dhxcont.mainCont.appendChild(b),b.src=f,this._frame=b,this._doOnFrameContentLoaded&&this._doOnFrameContentLoaded(!0);else if("urlajax"==b){var l=this;(new dtmlXMLLoaderObject(function(){l.attachHTMLString(this.xmlDoc.responseText,this);l._doOnFrameContentLoaded&&l._doOnFrameContentLoaded(!1);this.destructor()},window)).loadXML(f);l._doOnBeforeAttachURL&&l._doOnBeforeAttachURL(!1)}else"obj"==b?(d.dhxcont._frame=null,d.dhxcont.mainCont.appendChild(f),d.dhxcont.mainCont.style.overflow=
!0===g?"auto":"hidden",f.style.display=""):"str"==b&&(d.dhxcont._frame=null,d.dhxcont.mainCont.innerHTML=f)};this.obj._dhxContDestruct=function(){}});
(function(){dhtmlx.extend_api("dhtmlXTabBar",{_init:function(b){return[b.parent,b.mode,b.height]},tabs:"tabs",skin:"setSkin",offset:"setOffset",margin:"setMargin",image_path:"setImagePath",href_mode:"setHrefMode",align:"setAlign",xml:"loadXML",close_button:"enableTabCloseButton",scroll:"enableScroll",forced:"enableForceHiding",content_zone:"enableContentZone",size_by_content:"enableAutoSize",auto_size:"enableAutoReSize"},{tabs:function(b){for(var d=0;d<b.length;d++){var e=b[d];this.addTab(e.id,e.label,
e.width,e.index,e.row);e.active&&this.setTabActive(e.id)}}})})();
function dhx_init_tabbars(){for(var b=document.getElementsByTagName("div"),d=0;d<b.length;d++)if(-1!=b[d].className.indexOf("dhtmlxTabBar")){var e=b[d],f=e.id;e.className="";for(var g=[],h=0;h<e.childNodes.length;h++)e.childNodes[h].tagName&&"!"!=e.childNodes[h].tagName&&(g[g.length]=e.childNodes[h]);var l=new dhtmlXTabBar(f,e.getAttribute("mode")||"top",e.getAttribute("tabheight")||20);window[f]=l;(m=e.getAttribute("onbeforeinit"))&&eval(m);e.getAttribute("enableForceHiding")&&l.enableForceHiding(!0);
l.setImagePath(e.getAttribute("imgpath"));var m=e.getAttribute("margin");null!=m&&(l._margin=m);if(m=e.getAttribute("align"))l._align=m;(m=e.getAttribute("hrefmode"))&&l.setHrefMode(m);m=e.getAttribute("offset");null!=m&&(l._offset=m);m=e.getAttribute("tabstyle");null!=m&&l.setStyle(m);m=e.getAttribute("select");(h=e.getAttribute("skinColors"))&&l.setSkinColors(h.split(",")[0],h.split(",")[1]);for(h=0;h<g.length;h++){f=g[h];f.parentNode.removeChild(f);l.addTab(f.id,f.getAttribute("name"),f.getAttribute("width"),
null,f.getAttribute("row"));var k=f.getAttribute("href");k?l.setContentHref(f.id,k):l.setContent(f.id,f);!l._dspN&&"none"==f.style.display&&(f.style.display="")}g.length&&l.setTabActive(m||g[0].id);(m=e.getAttribute("oninit"))&&eval(m)}}dhtmlxEvent(window,"load",dhx_init_tabbars);
function dhtmlXEditor(b,d){var e=this;this.skin=d||dhtmlx.skin||"dhx_skyblue";this.iconsPath=dhtmlx.image_path||"../../codebase/imgs/";"string"==typeof b&&(b=document.getElementById(b));for(this.base=b;0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);this.tbData=(this._isToolbar=null!=this.initDhtmlxToolbar&&null!=window.dhtmlXToolbarObject?!0:!1)?"":"<div class='dhxeditor_"+this.skin+"_btns'><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='b' cmd='applyBold' class='dhxeditor_"+
this.skin+"_tbbtn btn_bold'></div></a><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='i' cmd='applyItalic' class='dhxeditor_"+this.skin+"_tbbtn btn_italic'></div></a><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='u' cmd='applyUnderscore' class='dhxeditor_"+this.skin+"_tbbtn btn_underline'></div></a><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='c' cmd='clearFormatting' class='dhxeditor_"+this.skin+"_tbbtn btn_clearformat'></div></a><div class='verline_l'></div><div class='verline_r'></div></div>";
var f=_isIE?this.base.currentStyle.position:window.getComputedStyle(this.base,null).getPropertyValue("position");"relative"==f||"absolute"==f||(this.base.style.position="relative");this.base.innerHTML=this.tbData+"<div style='position:absolute; width: 100%; overflow: hidden;'></div>";f=new dhtmlXContainerLite(this.base);f.skin=this.skin;f.setContent(this.base.childNodes[this._isToolbar?0:1]);this.base.adjustContent(this.base,this._isToolbar?0:this.base.childNodes[0].offsetHeight);this.cBlock=document.createElement("DIV");
this.cBlock.className="dhxcont_content_blocker";this.cBlock.style.display="none";this.base.appendChild(this.cBlock);this.editor=document.createElement("IFRAME");this.editor.className="dhxeditor_mainiframe_"+this.skin;this.editor.frameBorder=0;_isOpera&&(this.editor.scrolling="yes");var g=this.editor;_isIE?(g.onreadystatechange=function(){if("complete"==g.readyState)try{this.contentWindow.document.body.attachEvent("onfocus",function(b){e._ev("focus",b)}),this.contentWindow.document.body.attachEvent("onblur",
function(b){e._ev("blur",b)}),this.contentWindow.document.body.attachEvent("onkeydown",function(b){e._ev("keydown",b)}),this.contentWindow.document.body.attachEvent("onkeyup",function(b){e._ev("keyup",b)}),this.contentWindow.document.body.attachEvent("onkeypress",function(b){e._ev("keypress",b)}),this.contentWindow.document.body.attachEvent("onmouseup",function(b){e._ev("mouseup",b)}),this.contentWindow.document.body.attachEvent("onmousedown",function(b){e._ev("mousedown",b)}),this.contentWindow.document.body.attachEvent("onclick",
function(b){e._ev("click",b)})}catch(b){}},g.onunload=function(){this.contentWindow.document.body.detachEvent("onfocus",function(){e._ev("focus",event)});this.contentWindow.document.body.detachEvent("onblur",function(){e._ev("blur",event)});this.contentWindow.document.body.detachEvent("onkeydown",function(){e._ev("keydown",event)});this.contentWindow.document.body.detachEvent("onkeyup",function(){e._ev("keyup",event)});this.contentWindow.document.body.detachEvent("onkeypress",function(){e._ev("keypress",
event)});this.contentWindow.document.body.detachEvent("onmouseup",function(){e._ev("mouseup",event)});this.contentWindow.document.body.detachEvent("onmousedown",function(){e._ev("mousedown",event)});this.contentWindow.document.body.detachEvent("onclick",function(){e._ev("click",event)})}):(g.onload=function(){this.contentWindow.addEventListener("focus",function(b){e._ev("focus",b)},!1);this.contentWindow.addEventListener("blur",function(b){e._ev("blur",b)},!1);this.contentWindow.addEventListener("keydown",
function(b){e._ev("keydown",b)},!1);this.contentWindow.addEventListener("keyup",function(b){e._ev("keyup",b)},!1);this.contentWindow.addEventListener("keypress",function(b){e._ev("keypress",b)},!1);this.contentWindow.addEventListener("mouseup",function(b){e._ev("mouseup",b)},!1);this.contentWindow.addEventListener("mousedown",function(b){e._ev("mousedown",b)},!1);this.contentWindow.addEventListener("click",function(b){e._ev("click",b)},!1)},g.onunload=function(){this.contentWindow.removeEventListener("focus",
function(b){e._ev("focus",b)},!1);this.contentWindow.removeEventListener("blur",function(b){e._ev("blur",b)},!1);this.contentWindow.removeEventListener("keydown",function(b){e._ev("keydown",b)},!1);this.contentWindow.removeEventListener("keyup",function(b){e._ev("keyup",b)},!1);this.contentWindow.removeEventListener("keypress",function(b){e._ev("keypress",b)},!1);this.contentWindow.removeEventListener("mouseup",function(b){e._ev("mouseup",b)},!1);this.contentWindow.removeEventListener("mousedown",
function(b){e._ev("mousedown",b)},!1);this.contentWindow.removeEventListener("click",function(b){e._ev("click",b)},!1)});this._ev=function(b,d){this.callEvent("onAccess",[b,d])};this._focus=function(){_isIE?this.editor.contentWindow.document.body.focus():this.editor.contentWindow.focus()};this.base.attachObject(this.editor);this.edWin=this.editor.contentWindow;this.edDoc=this.edWin.document;this._prepareContent=function(b,d){var e="";!0===b&&null!=this.getContent&&(e=this.getContent());var f=this.editor.contentWindow.document;
f.open("text/html","replace");_isOpera?f.write("<html><head><style> html, body { overflow:auto; padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color:#ffffff;} </style></head><body "+(!0!==d?"contenteditable='true'":"")+" tabindex='0'></body></html>"):window._KHTMLrv?f.write("<html><head><style> html {overflow-x: auto; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color:#ffffff;} </style></head><body "+
(!0!==d?"contenteditable='true'":"")+" tabindex='0'></body></html>"):_isIE?f.write("<html><head><style> html {overflow-y: auto;} body {overflow-y: scroll;} html,body { overflow-x: auto; padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color:#ffffff;} </style></head><body "+(!0!==d?"contenteditable='true'":"")+" tabindex='0'></body></html>"):f.write("<html><head><style> html,body { overflow-x: auto; overflow-y: scroll; padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color:#ffffff;} </style></head><body "+
(!0!==d?"contenteditable='true'":"")+" tabindex='0'></body></html>");f.close();_isIE?f.contentEditable=!0!==d:f.designMode=!0!==d?"On":"Off";if(_isFF)try{f.execCommand("useCSS",!1,!0)}catch(g){}!0===b&&null!=this.setContent&&this.setContent(e)};this._prepareContent();this.setIconsPath=function(){};this.init=function(){};this.setSizes=function(){this.base.adjustContent(this.base,this._isToolbar?0:this.base.childNodes[0].offsetHeight)};this._resizeTM=null;this._resizeTMTime=100;this._doOnResize=function(){window.clearTimeout(e._resizeTM);
e._resizeTM=window.setTimeout(function(){e.setSizes&&e.setSizes()},e._resizeTMTime)};this._doOnUnload=function(){window.detachEvent("onresize",this._doOnResize);window.removeEventListener("resize",this._doOnResize,!1)};dhtmlxEvent(window,"resize",this._doOnResize);this.base.childNodes[0].onselectstart=function(b){b=b||event;b.cancelBubble=!0;b.returnValue=!1;b.preventDefault&&b.preventDefault();return!1};for(f=0;f<this.base.childNodes[0].childNodes.length-2;f++)this.base.childNodes[0].childNodes[f].childNodes[0].onmousedown=
function(){var b=this.getAttribute("cmd");"function"==typeof e[b]&&(e[b](),e.callEvent("onToolbarClick",[this.getAttribute("actv")]));return!1},this.base.childNodes[0].childNodes[f].childNodes[0].onclick=function(){return!1};this.runCommand=function(b,d){if(!0!==this._roMode){2>arguments.length&&(d=null);_isIE&&this.edWin.focus();try{var e=this.editor.contentWindow.document;if("CreateLink"==b){var f=_isIE?window.prompt("http://"):"";e.execCommand(b,!0,f)}else e.execCommand(b,!1,d)}catch(g){}if(_isIE){this.edWin.focus();
var s=this;window.setTimeout(function(){s.edWin.focus()},1)}}};this.applyBold=function(){this.runCommand("Bold")};this.applyItalic=function(){this.runCommand("Italic")};this.applyUnderscore=function(){this.runCommand("Underline")};this.clearFormatting=function(){this.runCommand("RemoveFormat");var b=this.getContent(),b=b.replace(/<\/?h\d>/gi,"");this.setContent(b)};this._isToolbar&&this.initDhtmlxToolbar();dhtmlxEventable(this);dhtmlxEvent(this.edDoc,"click",function(b){b=b||window.event;e.showInfo(b.target||
b.srcElement)});_isOpera&&dhtmlxEvent(this.edDoc,"mousedown",function(b){b=b||window.event;e.showInfo(b.target||b.srcElement)});dhtmlxEvent(this.edDoc,"keyup",function(b){var d=b||window.event;b=d.keyCode;d=d.target||d.srcElement;(37==b||38==b||39==b||40==b||13==b)&&e.showInfo(d)});this.attachEvent("onFocusChanged",function(b){e._doOnFocusChanged&&e._doOnFocusChanged(b)});this.showInfo=function(b){if(b=this.getSelectionBounds().end?this.getSelectionBounds().end:b)try{if(this.edWin.getComputedStyle){var d=
this.edWin.getComputedStyle(b,null),e=401==d.getPropertyValue("font-weight")?700:d.getPropertyValue("font-weight");this.style={fontStyle:d.getPropertyValue("font-style"),fontSize:d.getPropertyValue("font-size"),textDecoration:d.getPropertyValue("text-decoration"),fontWeight:e,fontFamily:d.getPropertyValue("font-family"),textAlign:d.getPropertyValue("text-align")};window._KHTMLrv&&(this.style.fontStyle=d.getPropertyValue("font-style"),this.style.vAlign=d.getPropertyValue("vertical-align"),this.style.del=
this.isStyleProperty(b,"span","textDecoration","line-through"),this.style.u=this.isStyleProperty(b,"span","textDecoration","underline"))}else d=b.currentStyle,this.style={fontStyle:d.fontStyle,fontSize:d.fontSize,textDecoration:d.textDecoration,fontWeight:d.fontWeight,fontFamily:d.fontFamily,textAlign:d.textAlign};this.setStyleProperty(b,"h1");this.setStyleProperty(b,"h2");this.setStyleProperty(b,"h3");this.setStyleProperty(b,"h4");window._KHTMLrv||(this.setStyleProperty(b,"del"),this.setStyleProperty(b,
"sub"),this.setStyleProperty(b,"sup"),this.setStyleProperty(b,"u"));this.callEvent("onFocusChanged",[this.style,d])}catch(f){return null}};this.getSelectionBounds=function(){var b,d,e,f;if(this.edWin.getSelection)return b=this.edWin.getSelection(),b=b.getRangeAt(b.rangeCount-1),e=b.startContainer,f=b.endContainer,d=b.commonAncestorContainer,"#text"==e.nodeName&&(d=d.parentNode),"#text"==e.nodeName&&(e=e.parentNode),"body"==e.nodeName.toLowerCase()&&(e=e.firstChild),"#text"==f.nodeName&&(f=f.parentNode),
"body"==f.nodeName.toLowerCase()&&(f=f.lastChild),e==f&&(d=e),{root:d,start:e,end:f};if(this.edWin.document.selection){b=this.edDoc.selection.createRange();if(!b.duplicate)return null;d=b.parentElement();f=b.duplicate();var g=b.duplicate();f.collapse(!0);g.moveToElementText(f.parentElement());g.setEndPoint("EndToStart",f);e=f.parentElement();f=b.duplicate();g=b.duplicate();g.collapse(!1);f.moveToElementText(g.parentElement());f.setEndPoint("StartToEnd",g);f=g.parentElement();"body"==e.nodeName.toLowerCase()&&
(e=e.firstChild);"body"==f.nodeName.toLowerCase()&&(f=f.lastChild);e==f&&(d=e);return{root:d,start:e,end:f}}return null};this.getContent=function(){return this.edDoc.body?_isFF?this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,""):this.edDoc.body.innerHTML:""};this.setContent=function(b){this.edDoc.body?(-1!=navigator.userAgent.indexOf("Firefox")?("undefined"==typeof this._ffTest&&(this.editor.contentWindow.document.body.innerHTML="",this.runCommand("InsertHTML",
"test"),this._ffTest=0<this.editor.contentWindow.document.body.innerHTML.length),this._ffTest?this.editor.contentWindow.document.body.innerHTML=b:(this.editor.contentWindow.document.body.innerHTML="",0==b.length&&(b=" "),this.runCommand("InsertHTML",b))):this.editor.contentWindow.document.body.innerHTML=b,this.callEvent("onContentSet",[])):dhtmlxEvent(this.edWin,"load",function(){e.setContent(b)})};this.setContentHTML=function(b){(new dtmlXMLLoaderObject(this._ajaxOnLoad,this,!1,!0)).loadXML(b)};
this._ajaxOnLoad=function(b,d,e,f,g){g.xmlDoc.responseText&&b.setContent(g.xmlDoc.responseText)}}
function dhtmlXContainerLite(b){var d=this;this.obj=b;this.dhxcont=null;this.setContent=function(b){this.dhxcont=b;this.dhxcont.innerHTML="<div style='position: relative; left: 0px; top: 0px; overflow: hidden;'></div>";this.dhxcont.mainCont=this.dhxcont.childNodes[0];this.obj.dhxcont=this.dhxcont};this.obj._genStr=function(b){for(var d="",g=0;g<b;g++)d+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(61*Math.random()));return d};this.obj.adjustContent=function(b,
d,g,h,l){this.dhxcont.style.left=(this._offsetLeft||0)+"px";this.dhxcont.style.top=(this._offsetTop||0)+d+"px";var m=b.clientWidth+(this._offsetWidth||0);!0!==h&&(this.dhxcont.style.width=Math.max(0,m)+"px");!0!==h&&this.dhxcont.offsetWidth>m&&(this.dhxcont.style.width=Math.max(0,2*m-this.dhxcont.offsetWidth)+"px");b=b.clientHeight+(this._offsetHeight||0);this.dhxcont.style.height=Math.max(0,b-d)+(null!=g?g:0)+"px";this.dhxcont.offsetHeight>b-d&&(this.dhxcont.style.height=Math.max(0,2*(b-d)-this.dhxcont.offsetHeight)+
"px");l&&!isNaN(l)&&(this.dhxcont.style.height=Math.max(0,parseInt(this.dhxcont.style.height)-l)+"px");null!=this._minDataSizeH&&parseInt(this.dhxcont.style.height)<this._minDataSizeH&&(this.dhxcont.style.height=this._minDataSizeH+"px");null!=this._minDataSizeW&&parseInt(this.dhxcont.style.width)<this._minDataSizeW&&(this.dhxcont.style.width=this._minDataSizeW+"px");if(!0!==h&&(this.dhxcont.mainCont.style.width=this.dhxcont.clientWidth+"px",this.dhxcont.mainCont.offsetWidth>this.dhxcont.clientWidth))this.dhxcont.mainCont.style.width=
Math.max(0,2*this.dhxcont.clientWidth-this.dhxcont.mainCont.offsetWidth)+"px";d=null!=this.menu?!this.menuHidden?this.menuHeight:0:0;g=null!=this.toolbar?!this.toolbarHidden?this.toolbarHeight:0:0;h=null!=this.sb?!this.sbHidden?this.sbHeight:0:0;this.dhxcont.mainCont.style.height=this.dhxcont.clientHeight+"px";this.dhxcont.mainCont.offsetHeight>this.dhxcont.clientHeight&&(this.dhxcont.mainCont.style.height=Math.max(0,2*this.dhxcont.clientHeight-this.dhxcont.mainCont.offsetHeight)+"px");this.dhxcont.mainCont.style.height=
Math.max(0,parseInt(this.dhxcont.mainCont.style.height)-d-g-h)+"px"};this.obj.attachToolbar=function(){var b=document.createElement("DIV");b.style.position="relative";b.style.overflow="hidden";b.id="dhxtoolbar_"+this._genStr(12);this.dhxcont.insertBefore(b,this.dhxcont.childNodes[null!=this.menu?1:0]);this.toolbar=new dhtmlXToolbarObject(b.id,this.skin);"dhx_web"==d.skin?(this.toolbarHeight=32,this.dhxcont.className="dhtmlx_editor_extended_"+d.skin):this.toolbarHeight=b.offsetHeight+(this._isLayout&&
"dhx_skyblue"==this.skin?2:0);this.toolbarId=b.id;this._doOnAttachToolbar&&this._doOnAttachToolbar("init");this.adjust();return this.toolbar};this.obj.attachObject=function(b,d){"string"==typeof b&&(b=document.getElementById(b));if(d){b.style.visibility="hidden";b.style.display="";var g=b.offsetWidth,h=b.offsetHeight}this._attachContent("obj",b);d&&this._isWindow&&(b.style.visibility="visible",this._adjustToContent(g,h))};this.obj.adjust=function(){if("dhx_skyblue"==this.skin&&this.toolbar){if(this._isWindow||
this._isLayout)document.getElementById(this.toolbarId).style.height="29px",this.toolbarHeight=document.getElementById(this.toolbarId).offsetHeight,this._doOnAttachToolbar&&this._doOnAttachToolbar("show");this._isCell&&(document.getElementById(this.toolbarId).className+=" in_layoutcell");this._isAcc&&(document.getElementById(this.toolbarId).className+=" in_acccell")}};this.obj._attachContent=function(b,f,g){for(;0<d.dhxcont.mainCont.childNodes.length;)d.dhxcont.mainCont.removeChild(d.dhxcont.mainCont.childNodes[0]);
"obj"==b&&(this._isWindow&&(null==f.cmp&&"dhx_skyblue"==this.skin)&&(this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this.dhxcont.mainCont.style.backgroundColor="#FFFFFF",this._redraw()),d.dhxcont._frame=null,d.dhxcont.mainCont.appendChild(f),d.dhxcont.mainCont.style.overflow=!0===g?"auto":"hidden",f.style.display="")};this.obj._dhxContDestruct=function(){for(;0<this.dhxcont.mainCont.childNodes.length;)this.dhxcont.mainCont.removeChild(this.dhxcont.mainCont.childNodes[0]);this.dhxcont.mainCont.innerHTML=
"";this.dhxcont.mainCont=null;try{delete this.dhxcont.mainCont}catch(b){}for(;0<this.dhxcont.childNodes.length;)this.dhxcont.removeChild(this.dhxcont.childNodes[0]);this.dhxcont.innerHTML="";this.dhxcont=null;try{delete this.dhxcont}catch(d){}this.attachToolbar=this.adjustContent=this.moveContentTo=this.attachObject=this.adjust=this._dhxContDestruct=this._attachContent=this._genStr=null}}
(function(){dhtmlx.extend_api("dhtmlXEditor",{_init:function(b){return[b.parent,b.skin]},content:"setContent"},{})})();
dhtmlXEditor.prototype.unload=function(){if(this._isToolbar)this._unloadExtModule();else for(;0<this.base.childNodes[0].childNodes.length;)this.base.childNodes[0].childNodes[0].tagName&&"a"==String(this.base.childNodes[0].childNodes[0].tagName).toLowerCase()&&(this.base.childNodes[0].childNodes[0].childNodes[0].onclick=null,this.base.childNodes[0].childNodes[0].childNodes[0].onmousedown=null,this.base.childNodes[0].childNodes[0].removeChild(this.base.childNodes[0].childNodes[0].childNodes[0])),this.base.childNodes[0].removeChild(this.base.childNodes[0].childNodes[0]);
this.tbData=this.base.childNodes[0].onselectstart=null;this.detachAllEvents();_isIE?this.editor.onreadystatechange=null:this.editor.onload=null;this.editor.parentNode.removeChild(this.editor);this.edWin=this.edDoc=this.editor=this.editor.onunload=null;this.base._dhxContDestruct();this.base._idd=null;for(this.base.name=null;0<this.base.childNodes.length;)this.base.removeChild(this.base.childNodes[0]);this.unload=this.isReadonly=this.setReadonly=this.setContentHTML=this.setContent=this.getContent=this.getSelectionBounds=
this.showInfo=this.detachAllEvents=this.detachEvent=this.eventCatcher=this.checkEvent=this.callEvent=this.attachEvent=this.clearFormatting=this.applyUnderscore=this.applyItalic=this.applyBold=this.runCommand=this.setSizes=this.init=this.setIconsPath=this._doOnUnload=this._doOnResize=this._prepareContent=this._focus=this._ev=this._ajaxOnLoad=this.iconsPath=this.skin=this._resizeTMTime=this._resizeTM=this._isToolbar=this.cBlock=this.base=null};
dhtmlXEditor.prototype.setReadonly=function(b){this._roMode=!0===b;this._prepareContent(!0,this._roMode);this.cBlock.style.display=this._roMode?"":"none"};dhtmlXEditor.prototype.isReadonly=function(){return this._roMode||!1};
dhtmlXEditor.prototype.initDhtmlxToolbar=function(){this.tb=this.base.attachToolbar();this.tb.setSkin(this.skin);"dhx_skyblue"==this.skin&&(this.tb.base.style.borderLeft="none",this.tb.base.style.borderRight="none",this.tb.base.style.top="-1px");this.setSizes();this.tb.setIconsPath(this.iconsPath+"dhxeditor_"+this.skin+"/");this._availFonts="Arial;Arial Narrow;Comic Sans MS;Courier;Georgia;Impact;Tahoma;Times New Roman;Verdana".split(";");this._initFont=this._availFonts[0];this._xmlFonts="";for(var b=
0;b<this._availFonts.length;b++){var d=String(this._availFonts[b]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+d+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(d).toLowerCase()+'.gif" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]\x3e</itemText></item>'}this._availSizes={1:"8pt",2:"10pt",3:"12pt",4:"14pt",5:"18pt",6:"24pt",7:"36pt"};this._xmlSizes="";for(var e in this._availSizes)this._xmlSizes+='<item type="button" id="applyFontSize:'+
e+":"+this._availSizes[e]+'" text="'+this._availSizes[e]+'"/>';this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.gif" imgdis="h4_dis.gif" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.gif" imgdis="h4_dis.gif" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.gif" imgdis="h4_dis.gif" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.gif" imgdis="h4_dis.gif" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.gif" imgdis="bold_dis.gif" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.gif" imgdis="italic_dis.gif" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.gif" imgdis="underline_dis.gif" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.gif" imgdis="strike_dis.gif" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.gif" imgdis="align_left_dis.gif" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.gif" imgdis="align_center_dis.gif" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.gif" imgdis="align_right_dis.gif" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.gif" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.gif" imgdis="script_sub.gif" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.gif" imgdis="script_super_dis.gif" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.gif" imgdis="list_number_dis.gif" title="Number List"/><item id="createBulList" type="button" img="list_bullet.gif" imgdis="list_bullet_dis.gif" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.gif" imgdis="indent_inc_dis.gif" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.gif" imgdis="indent_dec_dis.gif" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.gif" title="Clear Formatting"/><item id="separ07" type="separator"/><item id="applyHyperLink" type="button" img="link_add.png" title="Create HyperLink"/></toolbar>';
this.tb.loadXMLString(this.tbXML);this._checkAlign=function(b){this.tb.setItemState("alignCenter",!1);this.tb.setItemState("alignRight",!1);this.tb.setItemState("alignJustify",!1);this.tb.setItemState("alignLeft",!1);b&&this.tb.setItemState(b,!0)};this._checkH=function(b){this.tb.setItemState("applyH1",!1);this.tb.setItemState("applyH2",!1);this.tb.setItemState("applyH3",!1);this.tb.setItemState("applyH4",!1);b&&this.tb.setItemState(b,!0)};this._doOnFocusChanged=function(b){if(!b.h1&&!b.h2&&!b.h3&&
!b.h4){var d=-1!=String(b.fontWeight).search(/bold/i)||700<=Number(b.fontWeight);this.tb.setItemState("applyBold",d)}else this.tb.setItemState("applyBold",!1);d="alignLeft";-1!=String(b.textAlign).search(/center/)&&(d="alignCenter");-1!=String(b.textAlign).search(/right/)&&(d="alignRight");-1!=String(b.textAlign).search(/justify/)&&(d="alignJustify");this.tb.setItemState(d,!0);this._checkAlign(d);this.tb.setItemState("applyH1",b.h1);this.tb.setItemState("applyH2",b.h2);this.tb.setItemState("applyH3",
b.h3);this.tb.setItemState("applyH4",b.h4);window._KHTMLrv&&(b.sub="sub"==b.vAlign,b.sup="super"==b.vAlign);this.tb.setItemState("applyItalic","italic"==b.fontStyle);this.tb.setItemState("applyStrikethrough",b.del);this.tb.setItemState("applySub",b.sub);this.tb.setItemState("applySuper",b.sup);this.tb.setItemState("applyUnderscore",b.u)};this._doOnToolbarClick=function(b){var d=String(b).split(":");null!=this[d[0]]&&"function"==typeof this[d[0]]&&(this[d[0]](d[1]),this.callEvent("onToolbarClick",
[b]))};this._doOnStateChange=function(b){this[b]();switch(b){case "alignLeft":case "alignCenter":case "alignRight":case "alignJustify":this._checkAlign(b);break;case "applyH1":case "applyH2":case "applyH3":case "applyH4":this._checkH(b)}this.callEvent("onToolbarClick",[b])};this._doOnBeforeStateChange=function(b,d){return("alignLeft"==b||"alignCenter"==b||"alignRight"==b||"alignJustify"==b)&&!0==d?!1:!0};var f=this;this.tb.attachEvent("onClick",function(b){f._doOnToolbarClick(b)});this.tb.attachEvent("onStateChange",
function(b,d){f._doOnStateChange(b,d)});this.tb.attachEvent("onBeforeStateChange",function(b,d){return f._doOnBeforeStateChange(b,d)});this.applyBold=function(){this.runCommand("Bold")};this.applyHyperLink=function(){this.runCommand("CreateLink")};this.applyItalic=function(){this.runCommand("Italic")};this.applyUnderscore=function(){this.runCommand("Underline")};this.applyStrikethrough=function(){this.runCommand("StrikeThrough")};this.alignLeft=function(){this.runCommand("JustifyLeft")};this.alignRight=
function(){this.runCommand("JustifyRight")};this.alignCenter=function(){this.runCommand("JustifyCenter")};this.alignJustify=function(){this.runCommand("JustifyFull")};this.applySub=function(){this.runCommand("Subscript")};this.applySuper=function(){this.runCommand("Superscript")};this.applyH1=function(){this.runCommand("FormatBlock","<H1>")};this.applyH2=function(){this.runCommand("FormatBlock","<H2>")};this.applyH3=function(){this.runCommand("FormatBlock","<H3>")};this.applyH4=function(){this.runCommand("FormatBlock",
"<H4>")};this.createNumList=function(){this.runCommand("InsertOrderedList")};this.createBulList=function(){this.runCommand("InsertUnorderedList")};this.increaseIndent=function(){this.runCommand("Indent")};this.decreaseIndent=function(){this.runCommand("Outdent")};this.clearFormatting=function(){this.runCommand("RemoveFormat");this.tb.setItemState("applyBold",!1);this.tb.setItemState("applyItalic",!1);this.tb.setItemState("applyStrikethrough",!1);this.tb.setItemState("applySub",!1);this.tb.setItemState("applySuper",
!1);this.tb.setItemState("applyUnderscore",!1);var b=this.getContent(),b=b.replace(/<\/?h\d>/gi,"");this.setContent(b)};this.getParentByTag=function(b,d){d=d.toLowerCase();var e=b;do if(""==d||e.nodeName.toLowerCase()==d)return e;while(e=e.parentNode);return b};this.isStyleProperty=function(b,d,e,f){d=d.toLowerCase();do if(b.nodeName.toLowerCase()==d&&b.style[e]==f)return!0;while(b=b.parentNode);return!1};this.setStyleProperty=function(b,d){this.style[d]=!1;var e=this.getParentByTag(b,d);e&&e.tagName.toLowerCase()==
d&&(this.style[d]=!0);"del"==d&&(this.getParentByTag(b,"strike")&&"strike"==this.getParentByTag(b,"strike").tagName.toLowerCase())&&(this.style.del=!0)};this._unloadExtModule=function(){this.tb.unload();this.setStyleProperty=this.isStyleProperty=this.getParentByTag=this.clearFormatting=this.decreaseIndent=this.increaseIndent=this.createBulList=this.createNumList=this.applyH4=this.applyH3=this.applyH2=this.applyH1=this.applySuper=this.applySub=this.alignJustify=this.alignCenter=this.alignRight=this.alignLeft=
this.applyStrikethrough=this.applyUnderscore=this.applyItalic=this.applyBold=this._doOnBeforeStateChange=this._doOnStateChange=this._doOnToolbarClick=this._doOnFocusChanged=this._checkH=this._checkAlign=this.tbXML=this._xmlSizes=this._availSizes=this._xmlFonts=this._initFont=this._availFonts=this.tb=null}};
function dhtmlXForm(b,d){this.i={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left"};this.e={};this.apos_css={"label-left":"item_label_left","label-right":"item_label_right","label-top":"item_label_top",absolute:"item_absolute"};this.align_css={left:"align_left",center:"align_center",right:"align_right"};var e=this;this.skin="dhx_skyblue";this.setSkin=function(b){this.skin=b;this.cont.className="dhxlist_obj_"+this.skin;this.cont.style.fontSize=
"13px"};this._type="checkbox";this._rGroup="default";this.cont="object"==typeof b?b:document.getElementById(b);this.cont.form=this;b._isNestedForm||(this._parentForm=!0,this.cont.style.fontSize="13px",this.cont.className="dhxlist_obj_"+this.skin,this.setFontSize=function(b){this.cont.style.fontSize=b},this.getForm=function(){return this});this.b=null;this.base=[];this._prepare=function(b){null==this.b?this.b=0:this.b++;this.base[this.b]=document.createElement("DIV");this.base[this.b].className="dhxlist_base";
this.base[this.b].style.marginLeft="0px";this.base[this.b].style.paddingRight="5px";this.base[this.b].style.paddingLeft="5px";"string"==typeof b&&(b=parseInt(b));"number"==typeof b&&(this.base[this.b].style.marginLeft=b+"px");this.cont.appendChild(this.base[this.b])};this.setSizes=function(){};this._mergeSettings=function(b){var d=-1,e={type:"settings"},f;for(f in this.i)e[f]=this.i[f];for(var k=0;k<b.length;k++)if(b[k]&&"settings"==b[k].type){for(f in b[k])e[f]=b[k][f];d=k}b[0<=d?d:b.length]=e;return b};
this._genStr=function(b){for(var d="",e=0;e<b;e++)d+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.round(61*Math.random()));return d};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(b,d,f,m,k){b||(b=this._type);"list"==b&&!0=={fieldset:!0,block:!0}[this.getItemType(k)]?k=this.itemPull[this.idPrefix+k]._addSubListNode():"newcolumn"==b?k={}:(k=document.createElement("DIV"),this.base[this.b].appendChild(k));
k._idd=d;"number"==typeof f.offsetLeft&&(k.style.paddingLeft=f.offsetLeft+"px");"number"==typeof f.offsetTop&&(k.style.paddingTop=f.offsetTop+"px");if("list"==b)return null!=m&&(k._sId=m),b=this.items[b].render(k),this.itemPull[this.idPrefix+d]._listObj||(this.itemPull[this.idPrefix+d]._listObj=[]),this.itemPull[this.idPrefix+d]._list||(this.itemPull[this.idPrefix+d]._list=[]),this.itemPull[this.idPrefix+d]._listBase||(this.itemPull[this.idPrefix+d]._listBase=[]),this.itemPull[this.idPrefix+d]._listObj.push(b[0]),
this.itemPull[this.idPrefix+d]._list.push(b[1]),this.itemPull[this.idPrefix+d]._listBase.push(k),b[1].checkEvent=function(b){return e.checkEvent(b)},b[1].callEvent=function(b,d){return e.callEvent(b,d)},b[1].getForm=function(){return e.getForm()},b[1]._initObj(this._mergeSettings(f)),k._inBlcok&&(k.className+=" in_block"),b[1];"newcolumn"==b?this._prepare(f.offset):(!0!=={input:!0,fieldset:!0,block:!0,combo:!0}[b]&&(k.onselectstart=function(b){b=b||event;return b.returnValue=!1}),"label"==b&&0==this._ic++&&
(f._isTopmost=!0),f.position=this.apos_css[!f.position||!this.apos_css[f.position]?this.i.position:f.position],k.className=f.position+("string"==typeof f.className?" "+f.className:""),f.labelWidth||(f.labelWidth=this.i.labelWidth),f.labelHeight||(f.labelHeight=this.i.labelHeight),f.labelAlign=this.align_css[f.labelAlign]?this.align_css[f.labelAlign]:this.align_css[this.i.labelAlign],f.inputWidth=f.width?f.width:f.inputWidth?f.inputWidth:this.i.inputWidth,f.inputHeight||(f.inputHeight=this.i.inputHeight),
k.checkEvent=function(b){return e.checkEvent(b)},k.callEvent=function(b,d){return e.callEvent(b,d)},k.getForm=function(){return e.getForm()},k._autoCheck=function(){e._autoCheck()},f.validate&&(k._validate=String(f.validate).split(",")),k.form=this,this.objPull[this.idPrefix+d]=this.items[b].render(k,f),this.itemPull[this.idPrefix+d]=k)};this._initObj=function(b){for(var d=0;d<b.length;d++){if("settings"==b[d].type)for(var e in b[d])this.i[e]=b[d][e];if("api"==b[d].type)for(var f=0;f<b[d].list.length;f++)this.e[b[d].list[f].name]=
b[d].list[f]}this._prepare(this.i.offsetLeft);for(d=0;d<b.length;d++){var k=b[d].type||"";if(this.items[k]){b[d].name||(b[d].name=this._genStr(12));e=b[d].name;if(null!=this.objPull[this.idPrefix+e]||"radio"==k)e=this._genStr(12);f=b[d];f.label=f.label||"";f.value=f.value;f.checked=!!f.checked;f.disabled=!!f.disabled;f.name=f.name||this._genStr(12);f.options=f.options||[];f.rows=f.rows||"none";f.uid=this._genStr(12);this._addItem(k,e,f);!1===this._parentEnabled&&this._disableItem(e);for(k=0;k<f.options.length;k++)if(null!=
f.options[k].list){f.options[k].value||(f.options[k].value=this._genStr());var n=this._addItem("list",e,f.options[k].list,f.options[k].value);n._subSelect=!0;n._subSelectId=f.options[k].value}null!=b[d].list&&(b[d].listParent||(b[d].listParent=f.name),this._addItem("list",e,b[d].list,null,b[d].listParent))}}this._autoCheck();this._autoApi()};this._autoApi=function(){for(var b in this.e){var d=this[b],e=this.e[b].param;if(d){for(var f=[],k=0;k<e.length;k++){var n=e[k].data;if(-1<n.indexOf("function()"))try{"function"==
typeof eval("(function(){return "+n+"})()")&&(n=eval("(function(){return "+n+"})()"))}catch(s){}else window[n]&&"function"==typeof window[n]&&(n=window[n]);f[f.length]=n}d.apply(this,f)}}};this._prepareItem=function(b,d,e){var f=null!=b&&null!=b.type?b.type:"";if(this.items[f]){b.name||(b.name=this._genStr(12));var k=b.name;if(null!=this.objPull[this.idPrefix+k]||"radio"==f)k=this._genStr(12);b.label=b.label||"";b.value=b.value;b.checked=this._s2b(b.checked);b.disabled=this._s2b(b.disabled);b.name=
b.name||this._genStr(12);b.options=b.options||[];b.rows=b.rows||"none";b.uid=this._genStr(12);this._addItem(f,k,b,null,null,d,e);!1===this._parentEnabled&&this._disableItem(k);for(d=0;d<b.options.length;d++)null!=b.options[d].list&&(b.options[d].value||(b.options[d].value=this._genStr()),e=this._addItem("list",k,b.options[d].list,b.options[d].value,null),e._subSelect=!0,e._subSelectId=b.options[d].value);null!=b.list&&(b.listParent||(b.listParent=b.name),this._addItem("list",k,b.list,null,b.listParent))}};
this._s2b=function(b){return"true"==b||"1"==b||"yes"==b||!0==b?!0:!1};this._xmlSubItems={item:"list",param:"param",option:"options"};this._xmlToObject=function(b,d){if(!0===d)var e=[];else{var e={},f;for(f in this._xmlSubItems)e[this._xmlSubItems[f]]=[]}for(var k=0;k<b.childNodes.length;k++)if("undefiend"!=typeof b.childNodes[k].nodeName&&null!=this._xmlSubItems[b.childNodes[k].nodeName]){var n=this._xmlSubItems[b.childNodes[k].nodeName],s={};"param"==b.childNodes[k].nodeName&&(s.data=b.childNodes[k].firstChild.nodeValue);
for(var u=0;u<b.childNodes[k].attributes.length;u++){s[b.childNodes[k].attributes[u].name]=b.childNodes[k].attributes[u].value;var v=this._xmlToObject(b.childNodes[k],!1);for(f in this._xmlSubItems)0<v[this._xmlSubItems[f]].length&&(s[this._xmlSubItems[f]]=v[this._xmlSubItems[f]])}!0===d?e.push(s):e[n].push(s)}return e};this._xmlParser=function(){"jsonp"==e._loadType?(eval("var formJSONData="+this.xmlDoc.responseText),"object"==typeof formJSONData&&null!=formJSONData&&e._initObj(formJSONData)):e._initObj(e._xmlToObject(this.getXMLTopNode("items"),
!0));e.cont&&(e.cont.cmp&&"form"==e.cont.cmp)&&e.setSizes();e.callEvent("onXLE",[]);"function"==typeof e._doOnLoad&&e._doOnLoad()};this._doOnLoad=null;this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this.loadStruct=function(b,d,e){if("string"==typeof d){if("json"==d.toLowerCase()){this._initObj(b);return}"jsonp"==d.toLowerCase()&&(this._loadType="jsonp");this._doOnLoad=e||null}else this._doOnLoad=d||null;if((d=b.match(/(\?|\&)id\=([a-z0-9_]*)/i))&&d[0])this.formId=d=d[0].split("=")[1],
this.dp&&this.attachEvent("onXLE",function(){this.resetDataProcessor("updated")});this.callEvent("onXLS",[]);this._xmlLoader.loadXML(b)};this.loadStructString=function(b,d){this._doOnLoad=d||null;this._xmlLoader.loadXMLString(b)};this._autoCheck=function(b){"undefined"==typeof b&&(b=!0);for(var d in this.itemPull){var e=b&&!0!==this.itemPull[d]._udis;if(!e||!this.itemPull[d]._combo_ro)this[e?"_enableItem":"_disableItem"](this.itemPull[d]._idd);e=e&&("boolean"==typeof this.itemPull[d]._checked?this.itemPull[d]._checked:
!0);if(this.itemPull[d]._list)for(var f=0;f<this.itemPull[d]._list.length;f++){var k=!0;if(!0==this.itemPull[d]._list[f]._subSelect){var k=!1,n=this.getItemValue(this.itemPull[d]._idd);"object"==typeof n&&"number"==typeof n.length||(n=[n]);for(var s=0;s<n.length;s++)k=n[s]==this.itemPull[d]._list[f]._subSelectId||k;this.itemPull[d]._listObj[f][k?"show":"hide"](this.itemPull[d]._listBase[f])}this.itemPull[d]._list[f]._autoCheck(e&&k)}}};this.blur=function(){for(var b in this.itemPull)try{for(var d=
0;d<this.itemPull[b].childNodes.length;d++)this.itemPull[b]._enabled&&(this.itemPull[b].childNodes[1]&&this.itemPull[b].childNodes[1].childNodes[0])&&this.doWithItem(b.replace(this.idPrefix,""),"doOnChange",this.itemPull[b].childNodes[1].childNodes[0]);if(null!=this.itemPull[b]._list&&this.itemPull[b]._enabled)for(d=0;d<this.itemPull[b]._list.length;d++)this.itemPull[b]._list[d].blur()}catch(e){}};this.setItemFocusBgColor=function(b){this.focusBgColor=b};this.doWithItem=function(b,d,e,f,k,n){if("object"==
typeof b){var s=b[0],u=b[1],v=null,w;for(w in this.itemPull){if((this.itemPull[w]._value==u||null===u)&&this.itemPull[w]._group==s)return this.objPull[w][d](this.itemPull[w],e,f,k,n);if(null!=this.itemPull[w]._list&&!v)for(var x=0;x<this.itemPull[w]._list.length;x++)v=this.itemPull[w]._list[x].doWithItem(b,d,e,f,k)}if(null!=v)return v;if("getType"==d)return this.doWithItem(b[0],"getType")}else if(this.itemPull[this.idPrefix+b]){if(this.objPull[this.idPrefix+b][d])return this.objPull[this.idPrefix+
b][d](this.itemPull[this.idPrefix+b],e,f,k,n)}else{v=null;for(w in this.itemPull)if(this.itemPull[w]._list&&!v)for(x=0;x<this.itemPull[w]._list.length;x++)if(!v&&(v=this.itemPull[w]._list[x].doWithItem(b,d,e,f,k,n),null!=v))return v;return v}};this.removeItem=function(b,d){null!=d?b=this.doWithItem([b,d],"destruct"):this.doWithItem(b,"destruct");this._clearItemData(b)};this._clearItemData=function(b){if(this.itemPull[this.idPrefix+b]){b=this.idPrefix+b;try{this.objPull[b]=null,this.itemPull[b]=null,
delete this.objPull[b],delete this.itemPull[b]}catch(d){}}else for(var e in this.itemPull)if(this.itemPull[e]._list)for(var f=0;f<this.itemPull[e]._list.length;f++)this.itemPull[e]._list[f]._clearItemData(b)};this.isItem=function(b,d){null!=d&&(b=[b,d]);return this.doWithItem(b,"isExist")};this.isItemDynamic=function(b,d){b=[b,d||null];return this.doWithItem(b,"isDynamic")};this.isItemReady=function(b,d){b=[b,d||null];return this.doWithItem(b,"isReady")};this.getItemType=function(b,d){b=[b,d||null];
return this.doWithItem(b,"getType")};this.getItemsList=function(){var b=[],d=[],e;for(e in this.itemPull){var f=null,f=this.itemPull[e]._group?this.itemPull[e]._group:e.replace(this.idPrefix,"");!0!=d[f]&&b.push(f);d[f]=!0}return b};this.forEachItem=function(b){for(var d in this.objPull)if(b(String(d).replace(this.idPrefix,"")),this.itemPull[d]._list)for(var e=0;e<this.itemPull[d]._list.length;e++)this.itemPull[d]._list[e].forEachItem(b)};this.setItemLabel=function(b,d,e){null!=e?b=[b,d]:e=d;this.doWithItem(b,
"setText",e)};this.getItemLabel=function(b,d){null!=d&&(b=[b,d]);return this.doWithItem(b,"getText")};this.setItemText=this.setItemLabel;this.getItemText=this.getItemLabel;this._enableItem=function(b){this.doWithItem(b,"enable")};this._disableItem=function(b){this.doWithItem(b,"disable")};this._isItemEnabled=function(b){return this.doWithItem(b,"isEnabled")};this.checkItem=function(b,d){null!=d&&(b=[b,d]);this.doWithItem(b,"check");this._autoCheck()};this.uncheckItem=function(b,d){null!=d&&(b=[b,
d]);this.doWithItem(b,"unCheck");this._autoCheck()};this.isItemChecked=function(b,d){null!=d&&(b=[b,d]);return this.doWithItem(b,"isChecked")};this.getCheckedValue=function(b){return this.doWithItem([b,null],"getChecked")};this._getRGroup=function(b,d){for(var e in this.itemPull){if(this.itemPull[e]._group==b&&(null==d||this.itemPull[e]._value==d))return this.itemPull[e]._idd;if(null!=this.itemPull[e]._list)for(var f=0;f<this.itemPull[e]._list.length;f++){var k=this.itemPull[e]._list[f]._getRGroup(b,
d);if(null!=k)return k}}return null};this.setItemValue=function(b,d){return"radio"==this.getItemType(b)?(null!=this._getRGroup(b,d)?this.checkItem(b,d):this.uncheckItem(b,this.getCheckedValue(b)),null):this.doWithItem(b,"setValue",d)};this.getItemValue=function(b,d){return"radio"==this.getItemType(b)?this.getCheckedValue(b):this.doWithItem(b,"getValue",d)};this.showItem=function(b,d){null!=d&&(b=[b,d]);this.doWithItem(b,"show")};this.hideItem=function(b,d){null!=d&&(b=[b,d]);this.doWithItem(b,"hide")};
this.isItemHidden=function(b,d){null!=d&&(b=[b,d]);return this.doWithItem(b,"isHidden")};this.getOptions=function(b){return this.doWithItem(b,"getOptions")};this.setItemWidth=function(b,d){this.doWithItem(b,"setWidth",d)};this.getItemWidth=function(b){return this.doWithItem(b,"getWidth")};this.setItemHeight=function(b,d){this.doWithItem(b,"setHeight",d)};this.setItemFocus=function(b){this.doWithItem(b,"setFocus")};this._getItemByName=function(b){for(var d in this.itemPull){if(this.itemPull[d]._idd==
b)return this.itemPull[d];if(null!=this.itemPull[d]._list)for(var e=0;e<this.itemPull[d]._list.length;e++){var f=this.itemPull[d]._list[e]._getItemByName(b);if(null!=f)return f}}return null};this._resetValidateCss=function(b){b.className=b.className.replace(b._vcss,"");b._vcss=null};this.setItemsValidate=function(b,d,e){b="string"==typeof b?b.split(","):b;d="object"==typeof d?d.join(","):d;if(0!=arguments.length)for(var f in this.itemPull){var k=this.itemPull[f];if(!(d&&-1==(","+d+",").indexOf(","+
k._idd+",")))if("lb"!=k._type&&!k._list)"add"==e?(k._validate=k._validate?k._validate:[],k._validate=dhtmlx.concat(k._validate,b)):k._validate=b;else if(k._list)for(var n=0;n<k._list.length;n++)k._list[n].setItemsValidate(b,d)}};this.setItemValidateByName=function(b,d){d="string"==typeof d?d.split(","):d;var e=this["radio"==this.getItemType(b)?"_getRGroup":"_getItemByName"](b);if(e)if(e._list)for(var f=0;f<e._list.length;f++)e._list[f].setItemsValidate(d);else"lb"!=e._type&&(e._validate=d)};this._validate_hidden=
this._validate_disabled=!0;this.ignoreItemValidate=function(b){b="string"==typeof b?b.split(","):b;for(var d=0;d<b.length;d++)"disabled"==b[d]?this._validate_disabled=!1:"hidden"==b[d]&&(this._validate_hidden=!1)};this.getItemValidateByName=function(b){if(b=this["radio"==this.getItemType(b)?"_getRGroup":"_getItemByName"](b))return b._validate};this.setValidateCss=function(b,d,e){if(b=this["radio"==this.getItemType(b)?"_getRGroup":"_getItemByName"](b))null!=b._vcss&&this._resetValidateCss(b),b._vcss=
"string"==typeof e?e:"validate_"+(!0===d?"ok":"error"),b.className+=" "+b._vcss};this.resetValidateCss=function(b){for(var d in this.itemPull)if(null!=this.itemPull[d]._vcss&&this._resetValidateCss(this.itemPull[d]),null!=this.itemPull[d]._list)for(b=0;b<this.itemPull[d]._list.length;b++)this.itemPull[d]._list[b].resetValidateCss()};this.validate=function(b){if(!("nestedFormCall"!=b&&!1==this.callEvent("onBeforeValidate",[]))){var d=!0,e;for(e in this.itemPull){if(this.itemPull[e]._validate){if(!this._validate_disabled&&
-1<this.itemPull[e].className.indexOf("disabled"))continue;if(!this._validate_hidden&&"none"==this.itemPull[e].style.display)continue;for(var f=this.itemPull[e]._idd,k=this.getItemValue(f)||"",n=!0,s=0;s<this.itemPull[e]._validate.length;s++){var u=dhtmlxValidation["is"+this.itemPull[e]._validate[s]];"function"!=typeof u&&"function"==typeof this.itemPull[e]._validate[s]&&(u=this.itemPull[e]._validate[s]);"function"!=typeof u&&"function"==typeof window[this.itemPull[e]._validate[s]]&&(u=window[this.itemPull[e]._validate[s]]);
n=n&&("function"==typeof u?u(k):RegExp(this.itemPull[e]._validate[s]).test(k))}d=d&&n;!1!==this.callEvent("onValidate"+(n?"Success":"Error"),[f,k,n])&&this.setValidateCss(f,n)}if(this.itemPull[e]._list)for(s=0;s<this.itemPull[e]._list.length;s++)f=this.itemPull[e]._list[s],f._validate_disabled=this._validate_disabled,f._validate_hidden=this._validate_hidden,d=f.validate("nestedFormCall")&&d}"nestedFormCall"!=b&&this.callEvent("onAfterValidate",[d]);return d}};this.setReadonly=function(b,d){this.doWithItem(b,
"setReadonly",d)};this.isReadonly=function(b){return this.doWithItem(b,"isReadonly")};this.ag=function(b,d){null!=d&&(b=[b,d]);this.doWithItem(b,"userEnable");this._autoCheck()};this.disableItem=function(b,d){null!=d&&(b=[b,d]);this.doWithItem(b,"userDisable");this._autoCheck()};this.isItemEnabled=function(b,d){null!=d&&(b=[b,d]);return this.doWithItem(b,"isUserEnabled")};this.clear=function(){var b={};this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");for(var d in this.itemPull){var e=
this.itemPull[d]._idd;"ch"==this.itemPull[d]._type&&this.uncheckItem(e);("ta"==this.itemPull[d]._type||"hd"==this.itemPull[d]._type||"editor"==this.itemPull[d]._type||"calendar"==this.itemPull[d]._type||"tree"==this.itemPull[d]._type)&&this.setItemValue(e,"");("combo"==this.itemPull[d]._type||"multicombo"==this.itemPull[d]._type)&&this.setItemValue(e,"");if("se"==this.itemPull[d]._type){var f=this.getOptions(e);0<f.length&&(f[0].selected=!0)}"ra"==this.itemPull[d]._type&&(f=this.itemPull[d]._group,
b[f]||(this.checkItem(f,this.doWithItem(e,"_getFirstValue")),b[f]=!0));if(this.itemPull[d]._list)for(e=0;e<this.itemPull[d]._list.length;e++)this.itemPull[d]._list[e].clear()}this._parentForm&&this._autoCheck();this.resetValidateCss()};this.unload=function(){for(var b in this.objPull)this.removeItem(String(b).replace(this.idPrefix,""));this.detachAllEvents();this._xmlLoader.destructor();this._subSelectId=this._subSelect=this.idPrefix=this.skin=this.i=this.b=this.align_css=this.apos_css=this.isReadonly=
this.setReadonly=this.isLocked=this.unlock=this.lock=this.getItemsList=this.getFormData=this.setFormData=this.getEditor=this.getCombo=this.getColorPicker=this.getCalendar=this.setSizes=this.setRTL=this.getUserData=this.setUserData=this.getItemWidth=this.getCheckedValue=this.detachAllEvents=this._prepare=this._locked=this._mergeSettings=this._doLock=this._parentForm=this._parentEnabled=this._type=this._rGroup=this.setSkin=this.setItemWidth=this.setItemHeight=this.setFontSize=this.remove=this.loadStructString=
this.loadStruct=this._ulToObject=this._ic=this.getOptions=this.isItemChecked=this.uncheckItem=this.checkItem=this.isItemHidden=this.hideItem=this.showItem=this.getItemValue=this.setItemValue=this.getItemText=this.setItemText=this.getItemLabel=this.setItemLabel=this._getPosition=this._setPosition=this.getItemPosition=this.setItemPosition=this.eventCatcher=this.detachEvent=this.checkEvent=this.callEvent=this.attachEvent=this.getForm=this.unload=this.removeItem=this.getItemType=this.doWithItem=this.clear=
this.isItem=this.forEachItem=this._isItemEnabled=this._disableItem=this._enableItem=this._clearItemData=this._autoCheck=this._initObj=this._genStr=this._addItem=this.itemPull=this.objPull=this.items=this.loadXMLString=this.loadXML=this._xmlToObject=this._xmlParser=this._xmlLoader=null;for(b=0;b<this.base.length;b++){for(;0<this.base[b].childNodes.length;)this.base[b].removeChild(this.base[b].childNodes[0]);this.base[b].parentNode&&this.base[b].parentNode.removeChild(this.base[b]);this.base[b]=null}this.base=
null;this.cont.className="";this.cont=null};for(var f in this.items)this.items[f].t=f,this.items[f].show||(this.items[f].show=function(b){b.style.display="";if(b._listObj)for(var d=0;d<b._listObj.length;d++)b._listObj[d].show(b._listBase[d])}),this.items[f].hide||(this.items[f].hide=function(b){b.style.display="none";if(b._listObj)for(var d=0;d<b._listObj.length;d++)b._listObj[d].hide(b._listBase[d])}),this.items[f].isHidden||(this.items[f].isHidden=function(b){return"none"==b.style.display}),this.items[f].userEnable||
(this.items[f].userEnable=function(b){b._udis=!1}),this.items[f].userDisable||(this.items[f].userDisable=function(b){b._udis=!0}),this.items[f].isUserEnabled||(this.items[f].isUserEnabled=function(b){return!0!==b._udis}),this.items[f].getType=function(){return this.t},this.items[f].isDynamic=function(){return this.isDynamic},this.items[f].isReady=function(){return this._itemReady},this.items[f].isExist=function(){return!0};this._locked=!1;this._doLock=function(b){b=!0===b?!0:!1;this._locked!=b&&(this._locked=
b,this._autoCheck(!this._locked))};this.lock=function(){this._doLock(!0)};this.unlock=function(){this._doLock(!1)};this.isLocked=function(){return this._locked};dhtmlxEventable(this);this.attachEvent("_onButtonClick",function(b,d){this.callEvent("onButtonClick",[b,d])});null!=d&&"object"==typeof d&&this._initObj(d);this.callEvent("onXLE",[])}dhtmlXForm.prototype._getDynamicItems=function(){var b=[];this.forEachItem(function(d){this.isItemDynamic(d)&&b.push([d,!1])});return b};
dhtmlXForm.prototype.getInput=function(b){return this.doWithItem(b,"getInput")};dhtmlXForm.prototype.getSelect=function(b){return this.doWithItem(b,"getSelect")};dhtmlXForm.prototype.items={};
dhtmlXForm.prototype.items.checkbox={render:function(b,d){b._type="ch";b._enabled=!0;b._checked=!1;b._value=String(d.value);b._ro=!0==d.readonly;"left"==d.labelAlign&&this.doAddLabel(b,d);var e=document.createElement("DIV");e.className="dhxlist_img chbx0";b.appendChild(e);isNaN(d.inputLeft)||(e.style.left=parseInt(d.inputLeft)+"px");isNaN(d.inputTop)||(e.style.top=parseInt(d.inputTop)+"px");"left"!=d.labelAlign&&this.doAddLabel(b,d);b.t0="left"==d.labelAlign?b.childNodes[1]:b.childNodes[0];b.t1="left"==
d.labelAlign?b.childNodes[0]:b.childNodes[1];e=document.createElement("INPUT");e.type="HIDDEN";e.value=String(d.value);b.appendChild(e);!0==d.checked&&this.check(b);!0==d.hidden&&this.hide(b);!0==d.disabled&&this.userDisable(b);this.doAttachEvents(b);return this},destruct:function(b){this.doUnloadNestedLists(b);this.doDestruct(b)},doAddLabel:function(b,d){var e=document.createElement("DIV");e.className="dhxlist_txt "+d.labelAlign;b.appendChild(e);e.innerHTML="<span class='nav_link' onkeypress='e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' "+
(_dhxForm_isIPad?"ontouchstart='e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+d.label+"</span>";isNaN(d.labelWidth)||(e.style.width=parseInt(d.labelWidth)+"px");isNaN(d.labelHeight)||(e.style.height=parseInt(d.labelHeight)+"px");isNaN(d.labelLeft)||(e.style.left=parseInt(d.labelLeft)+"px");isNaN(d.labelTop)||(e.style.top=parseInt(d.labelTop)+"px")},doUnloadNestedLists:function(b){if(b._list){for(var d=0;d<b._list.length;d++)b._list[d].unload(),
b._list[d]=null,b._listObj[d]=null,b._listBase[d].parentNode.removeChild(b._listBase[d]),b._listBase[d]=null;b._list=null;b._listObj=null;b._listBase=null}},doDestruct:function(b){b.callEvent=null;b.checkEvent=null;b.getForm=null;b._autoCheck=null;b._checked=null;b._enabled=null;b._idd=null;b._type=null;b._value=null;b._group=null;b.onselectstart=null;b.childNodes[0].onmousedown=null;b.childNodes[0].ontouchstart=null;b.childNodes[1].onmousedown=null;b.childNodes[1].ontouchstart=null;b.childNodes[1].childNodes[0].onkeypress=
null;b.childNodes[1].childNodes[0].ontouchstart=null;for(b.childNodes[1].removeChild(b.childNodes[1].childNodes[0]);0<b.childNodes.length;)b.removeChild(b.childNodes[0]);b.parentNode.removeChild(b)},doAttachEvents:function(b){var d=this;b.childNodes[0][_dhxForm_isIPad?"ontouchstart":"onmousedown"]=function(b){b=b||event;b.preventDefault&&b.preventDefault();if(!this.parentNode._enabled||this.parentNode._ro)return b.cancelBubble=!0,b.returnValue=!1;d.doClick(this.parentNode)};b.childNodes[1].childNodes[0][_dhxForm_isIPad?
"ontouchstart":"onmousedown"]=function(b){b=b||event;b.preventDefault&&b.preventDefault();if(!this.parentNode.parentNode._enabled)return b.cancelBubble=!0,b.returnValue=!1;d.doClick(this.parentNode.parentNode)}},doClick:function(b){b.childNodes[1].childNodes[0].focus();b._enabled&&!b._ro&&!(b.checkEvent("onBeforeChange")&&!0!==b.callEvent("onBeforeChange",[b._idd,b._value,b._checked]))&&(this.setChecked(b,!b._checked),b._autoCheck(),b.callEvent("onChange",[b._idd,b._value,b._checked]))},doCheckValue:function(b){b._checked&&
b._enabled?b.childNodes[2].setAttribute("name",String(b._idd)):b.childNodes[2].removeAttribute("name")},setChecked:function(b,d){b._checked=!0===d?!0:!1;b.childNodes[0].className="dhxlist_img "+(b._checked?"chbx1":"chbx0");this.doCheckValue(b)},check:function(b){this.setChecked(b,!0)},unCheck:function(b){this.setChecked(b,!1)},isChecked:function(b){return b._checked},enable:function(b){0<=String(b.className).search("disabled")&&(b.className=String(b.className).replace(/disabled/gi,""));b._enabled=
!0;b.childNodes[1].childNodes[0].tabIndex=0;b.childNodes[1].childNodes[0].removeAttribute("disabled");this.doCheckValue(b)},disable:function(b){0>String(b.className).search("disabled")&&(b.className+=" disabled");b._enabled=!1;b.childNodes[1].childNodes[0].tabIndex=-1;b.childNodes[1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(b)},isEnabled:function(b){return b._enabled},setText:function(b,d){b.childNodes[1].childNodes[0].innerHTML=d},getText:function(b){return b.childNodes[1].childNodes[0].innerHTML},
setValue:function(b,d){this.setChecked(b,!0===d||b._value===d)},getValue:function(b){return b._value},setReadonly:function(b,d){b._ro=!0===d},isReadonly:function(b){return b._ro},setValue:function(b,d){b._value=d;b.childNodes[2].value=b._value},getValue:function(b){return b._value}};
dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(b,d,e){b._type="ra";b._enabled=!0;b._checked=!1;b._group=d.name;b._value=d.value;b._uid=e;b._ro=!0==d.readonly;this.r[b._idd]=b;e=document.createElement("DIV");e.className="dhxlist_img rdbt0";b.appendChild(e);isNaN(d.inputLeft)||(e.style.left=parseInt(d.inputLeft)+"px");isNaN(d.inputTop)||(e.style.top=parseInt(d.inputTop)+"px");this.doAddLabel(b,d);b.t0=b.childNodes[0];b.t1=b.childNodes[1];null==this.input[d.name]&&(e=document.createElement("INPUT"),
e.type="HIDDEN",e.name=d.name,e.firstValue=b._value,b.appendChild(e),this.input[d.name]=e);this.firstValue[d.name]||(this.firstValue[d.name]=d.value);!0==d.checked&&this.check(b);!0==d.hidden&&this.hide(b);!0==d.disabled&&this.userDisable(b);this.doAttachEvents(b);return this},destruct:function(b,d){if(b.lastChild==this.input[b._group]){var e=!1,f;for(f in this.r)!e&&(this.r[f]._group==b._group&&this.r[f]._idd!=b._idd)&&(this.r[f].appendChild(this.input[b._group]),e=!0);e||(this.input[b._group].parentNode.removeChild(this.input[b._group]),
this.input[b._group]=null,this.firstValue[b._group]=null)}e=b._idd;this.doUnloadNestedLists(b);this.doDestruct(b);return e},doClick:function(b){b.childNodes[1].childNodes[0].focus();if(b._enabled&&!b._checked&&!b._ro){var d=[b._group,b._value,!0];b.checkEvent("onBeforeChange")&&!0!==b.callEvent("onBeforeChange",d)||(this.setChecked(b,!0),b.getForm()._autoCheck(),b.callEvent("onChange",d))}},doCheckValue:function(b){var d=null,e;for(e in this.r)this.r[e]._checked&&(this.r[e]._enabled&&this.r[e]._group==
b._group)&&(d=this.r[e]._value);null!=d?(this.input[b._group].setAttribute("name",String(b._group)),this.input[b._group].setAttribute("value",d),this.input[b._group]._value=d):(this.input[b._group].removeAttribute("name"),this.input[b._group].removeAttribute("value"),this.input[b._group]._value=null)},setChecked:function(b,d){d=!0===d;for(var e in this.r)if(this.r[e]._group==b._group){var f=!1;this.r[e]._idd==b._idd?this.r[e]._checked!=d&&(this.r[e]._checked=d,f=!0):this.r[e]._checked&&(this.r[e]._checked=
!1,f=!0);f&&(this.r[e].childNodes[0].className="dhxlist_img "+(this.r[e]._checked?"rdbt1":"rdbt0"))}this.doCheckValue(b)},getChecked:function(b){return this.input[b._group]._value},_getFirstValue:function(b){return this.firstValue[b._group]},setValue:function(b,d){},setValue:function(b,d){b._value=d;b._checked&&(this.input[b._group].value=d)},getValue:function(b){return b._value}};
(function(){for(var b in{doAddLabel:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1})dhtmlXForm.prototype.items.radio[b]=dhtmlXForm.prototype.items.checkbox[b]})();
dhtmlXForm.prototype.items.select={render:function(b,d){b._type="se";b._enabled=!0;b._value=null;b._newValue=null;this.doAddLabel(b,d);this.doAddInput(b,d,"SELECT",null,!0,!0,"dhxlist_txt_select");this.doAttachEvents(b);this.doLoadOpts(b,d);if(d.connector){var e=this;this._ready=!1;dhtmlxAjax.get(d.connector,function(d){d=d.doXPath("//item");for(var g=[],h=0;h<d.length;h++)g[h]={label:d[h].getAttribute("label"),value:d[h].getAttribute("value"),selected:null!=d[h].getAttribute("selected")};e.itemReady(b);
e.doLoadOpts(b,{options:g},!0)})}return this},destruct:function(b){this.doUnloadNestedLists(b);b.callEvent=null;b.checkEvent=null;b.getForm=null;b._autoCheck=null;b._enabled=null;b._idd=null;b._type=null;b._value=null;b._newValue=null;b.onselectstart=null;try{b.childNodes[1].childNodes[0].onclick=null;b.childNodes[1].childNodes[0].onkeydown=null;b.childNodes[1].childNodes[0].onchange=null;b.childNodes[1].childNodes[0].onblur=null;for(b.childNodes[1].removeChild(b.childNodes[1].childNodes[0]);0<b.childNodes.length;)b.removeChild(b.childNodes[0]);
b.parentNode.removeChild(b)}catch(d){}},doAddLabel:function(b,d){var e=document.createElement("DIV");e.className="dhxlist_txt_label "+d.labelAlign;e.innerHTML="<label for='"+d.uid+"'>"+d.label+"</label>";b.appendChild(e);0==d.label.length&&(e.style.display="none");isNaN(d.labelWidth)||(e.style.width=parseInt(d.labelWidth)+"px");isNaN(d.labelHeight)||(e.style.height=parseInt(d.labelHeight)+"px");isNaN(d.labelLeft)||(e.style.left=parseInt(d.labelLeft)+"px");isNaN(d.labelTop)||(e.style.top=parseInt(d.labelTop)+
"px")},doAddInput:function(b,d,e,f,g,h,l){var m=document.createElement("DIV");m.className="dhxlist_cont";_isIE&&8<=document.documentMode&&(m.style.marginTop="4px");b.appendChild(m);e=document.createElement(e);e.className=l;e.name=b._idd;e._idd=b._idd;e.id=d.uid;"string"==typeof f&&(e.type=f);m.appendChild(e);d.readonly&&this.setReadonly(b,!0);!0==d.hidden&&this.hide(b);!0==d.disabled&&this.userDisable(b);g&&(isNaN(d.inputLeft)||(m.style.left=parseInt(d.inputLeft)+"px"),isNaN(d.inputTop)||(m.style.top=
parseInt(d.inputTop)+"px"));b="";h&&(isNaN(d.inputWidth)||(b+="width:"+parseInt(d.inputWidth)+"px;"),isNaN(d.inputHeight)||(b+="height:"+parseInt(d.inputHeight)+"px;"));"string"==typeof d.style&&(b+=d.style);e.style.cssText=b;d.maxLength&&e.setAttribute("maxlength",d.maxLength);d.connector&&e.setAttribute("connector",d.connector)},doAttachEvents:function(b){b=b.childNodes[1].childNodes[0];var d=this;b.onclick=function(){d.doOnChange(this)};b.onkeydown=function(){d.doOnChange(this)};b.onchange=function(){d.doOnChange(this)}},
doLoadOpts:function(b,d,e){var f=b.childNodes[1].childNodes[0];d=d.options;for(var g=0;g<d.length;g++){var h=new Option(d[g].text||d[g].label,d[g].value);f.options.add(h);if(!0==d[g].selected||"true"==d[g].selected)h.selected=!0,b._initSelected=!0,b._value=d[g].value;d[g].pid&&h.setAttribute("pid",d[g].pid)}!0===e&&b.callEvent("onOptionsLoaded",[b._idd])},doOnChange:function(b){var d=b.parentNode.parentNode;d._newValue=0<=b.selectedIndex?b.options[b.selectedIndex].value:null;if(d._newValue!=d._value){if(d.checkEvent("onBeforeChange")&&
!0!==d.callEvent("onBeforeChange",[d._idd,d._value,d._newValue])){for(var e=0;e<b.options.length;e++)b.options[e].value==d._value&&(b.options[e].selected=!0);return}d._value=d._newValue;d.callEvent("onChange",[d._idd,d._value])}d._autoCheck()},setText:function(b,d){d||(d="");b.childNodes[0].childNodes[0].innerHTML=d;b.childNodes[0].style.display=0==d.length||null==d?"none":""},getText:function(b){return b.childNodes[0].childNodes[0].innerHTML},enable:function(b){0<=String(b.className).search("disabled")&&
(b.className=String(b.className).replace(/disabled/gi,""));b._enabled=!0;b.childNodes[1].childNodes[0].removeAttribute("disabled")},disable:function(b){0>String(b.className).search("disabled")&&(b.className+=" disabled");b._enabled=!1;b.childNodes[1].childNodes[0].setAttribute("disabled",!0)},getOptions:function(b){return b.childNodes[1].childNodes[0].options},setValue:function(b,d){for(var e=this.getOptions(b),f=0;f<e.length;f++)e[f].value==d&&(e[f].selected=!0,b._value=e[f].value)},getValue:function(b){var d=
-1;b=this.getOptions(b);for(var e=0;e<b.length;e++)b[e].selected&&(d=b[e].value);return d},setWidth:function(b,d){b.childNodes[1].childNodes[0].style.width=d+"px"},getSelect:function(b){return b.childNodes[1].childNodes[0]},_ready:!0,itemReady:function(b){this._ready=!0;b.getForm().callEvent("onItemReady",[b._idd]);b.getForm().checkItemsReady()}};(function(){for(var b in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.select[b]=dhtmlXForm.prototype.items.checkbox[b]})();
dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(b,d){var e=b.childNodes[1].childNodes[0];e.multiple=!0;isNaN(d.size)||(e.size=Number(d.size));b._value=[];b._newValue=[];for(var f=d.options,g=0;g<f.length;g++){var h=new Option(f[g].text||f[g].label,f[g].value);e.options.add(h);if(!0==f[g].selected||"true"==f[g].selected)h.selected=!0,b._value.push(f[g].value)}},doAttachEvents:function(b){var d=b.childNodes[1].childNodes[0],e=this;d.onblur=function(){e.doOnChange(this)};d.onclick=function(){b._autoCheck()}},
doOnChange:function(b){var d=b.parentNode.parentNode;d._newValue=[];for(var e=0;e<b.options.length;e++)b.options[e].selected&&d._newValue.push(b.options[e].value);if(d._value.sort().toString()!=d._newValue.sort().toString()){if(d.checkEvent("onBeforeChange")&&!0!==d.callEvent("onBeforeChange",[d._idd,d._value,d._newValue])){for(var f={},e=0;e<d._value.length;e++)f[d._value[e]]=!0;for(e=0;e<b.options.length;e++)b.options[e].selected=!0==f[b.options[e].value];return}d._value=[];for(e=0;e<d._newValue.length;e++)d._value.push(d._newValue[e]);
d.callEvent("onChange",[d._idd,d._value])}d._autoCheck()},setValue:function(b,d){var e={};"string"==typeof d&&(d=d.split(","));"object"!=typeof d&&(d=[d]);for(var f=0;f<d.length;f++)e[d[f]]=!0;for(var g=this.getOptions(b),f=0;f<g.length;f++)g[f].selected=!0==e[g[f].value]},getValue:function(b){var d=[];b=this.getOptions(b);for(var e=0;e<b.length;e++)b[e].selected&&d.push(b[e].value);return d}};
(function(){for(var b in dhtmlXForm.prototype.items.select)dhtmlXForm.prototype.items.multiselect[b]||(dhtmlXForm.prototype.items.multiselect[b]=dhtmlXForm.prototype.items.select[b])})();
dhtmlXForm.prototype.items.input={render:function(b,d){var e=!isNaN(d.rows);b._type="ta";b._enabled=!0;b.placeholder=d.placeholder;b.wrap=convertStringToBoolean(d.wrap);this.doAddLabel(b,d);this.doAddInput(b,d,e?"TEXTAREA":"INPUT",e?null:"TEXT",!0,!0,"dhxlist_txt_textarea");this.doAttachEvents(b);this.customRender&&this.customRender(b,d);e&&(b.childNodes[1].childNodes[0].rows=d.rows);this.setValue(b,d.value);return this},setPlaceholder:function(b){var d=b.childNodes[1].childNodes[0];d.value=b.placeholder;
d.setAttribute("_color",d.style.color);d.style.color="#ccc"},setBackgroudColor:function(b){b=b.childNodes[1].childNodes[0];b.getAttribute("_bgcolor")?b.style.backgroundColor=b.getAttribute("_bgColor"):b.style.backgroundColor=""},doAttachEvents:function(b){var d=this;b.childNodes[1].childNodes[0].onblur=function(){d.doOnChange(b._idd,this);b.placeholder&&""==this.value&&d.setPlaceholder(b);d.setBackgroudColor(b)};b.childNodes[1].childNodes[0].onfocus=b.placeholder?function(){this.style.color=this.getAttribute("_color");
this.value==b.placeholder&&(this.value="");b.getForm().focusBgColor&&(this.style.backgroundColor=b.getForm().focusBgColor)}:function(){this.style.backgroundColor&&this.setAttribute("_bgColor",this.style.backgroundColor);b.getForm().focusBgColor&&(this.style.backgroundColor=b.getForm().focusBgColor)}},doOnChange:function(b,d){var e=d.parentNode.parentNode;e._value!=d.value&&(e.checkEvent("onBeforeChange")&&!0!==e.callEvent("onBeforeChange",[this._idd,e._value,d.value])?d.value=e._value:(e._value=d.value,
e.callEvent("onChange",[d._idd,d.value])))},setValue:function(b,d){b._value="undefined"==typeof String(d)||"undefined"==String(d)?"":String(d);var e=b._value||"",e=b.wrap?e.replace(RegExp("<br>","gi"),"\r\n"):e;""==e&&b.placeholder?this.setPlaceholder(b):b.childNodes[1].childNodes[0].value=e},getValue:function(b){var d=b._value;return d=b.wrap?d.replace(RegExp("\\r|\\n","gi"),"<br>"):d},setReadonly:function(b,d){b._ro=!0===d;b._ro?b.childNodes[1].childNodes[0].setAttribute("readOnly","true"):b.childNodes[1].childNodes[0].removeAttribute("readOnly")},
isReadonly:function(b){b._ro||(b._ro=!1);return b._ro},setFocus:function(b){b.childNodes[1].childNodes[0].disabled||b.childNodes[1].childNodes[0].focus()},getInput:function(b){return b.childNodes[1].childNodes[0]}};(function(){for(var b in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,setWidth:1,_ready:1,itemReady:1,isEnabled:1})dhtmlXForm.prototype.items.input[b]=dhtmlXForm.prototype.items.select[b]})();
dhtmlXForm.prototype.items.password={render:function(b,d){b._type="pw";b._enabled=!0;this.doAddLabel(b,d);this.doAddInput(b,d,"INPUT","PASSWORD",!0,!0,"dhxlist_txt_textarea");this.doAttachEvents(b);b._value=d.value||"";b.childNodes[1].childNodes[0].value=b._value;return this}};
(function(){for(var b in{doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,enable:1,disable:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1,isEnabled:1,doOnChange:1,setBackgroudColor:1})dhtmlXForm.prototype.items.password[b]=dhtmlXForm.prototype.items.input[b]})();
dhtmlXForm.prototype.items.file={render:function(b,d){b._type="fl";b._enabled=!0;this.doAddLabel(b,d);this.doAddInput(b,d,"INPUT","FILE",!0,!0,"dhxlist_txt_textarea");b.childNodes[1].childNodes[0].onchange=function(){b.callEvent("onChange",[b._idd,this.value])};return this}};(function(){for(var b in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,setWidth:1,isEnabled:1,doOnChange:1})dhtmlXForm.prototype.items.file[b]=dhtmlXForm.prototype.items.input[b]})();
dhtmlXForm.prototype.items.label={render:function(b,d){b._type="lb";b._enabled=!0;b._checked=!0;var e=document.createElement("DIV");e.className="dhxlist_txt_label2"+(d._isTopmost?" topmost":"");e.innerHTML=d.label;b.appendChild(e);!0==d.hidden&&this.hide(b);!0==d.disabled&&this.userDisable(b);isNaN(d.labelWidth)||(e.style.width=parseInt(d.labelWidth)+"px");isNaN(d.labelHeight)||(e.style.height=parseInt(d.labelHeight)+"px");isNaN(d.labelLeft)||(e.style.left=parseInt(d.labelLeft)+"px");isNaN(d.labelTop)||
(e.style.top=parseInt(d.labelTop)+"px");return this},destruct:function(b){this.doUnloadNestedLists(b);b._autoCheck=null;b._enabled=null;b._type=null;b.callEvent=null;b.checkEvent=null;b.getForm=null;b.onselectstart=null;b.parentNode.removeChild(b)},enable:function(b){0<=String(b.className).search("disabled")&&(b.className=String(b.className).replace(/disabled/gi,""));b._enabled=!0},disable:function(b){0>String(b.className).search("disabled")&&(b.className+=" disabled");b._enabled=!1},isEnabled:function(b){return b._enabled},
setText:function(b,d){b.firstChild.innerHTML=d},getText:function(b){return b.firstChild.innerHTML}};(function(){for(var b in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.label[b]=dhtmlXForm.prototype.items.checkbox[b]})();
dhtmlXForm.prototype.items.button={render:function(b,d){b._type="bt";b._enabled=!0;b._cmd=d.command;b._name=d.name;b.className=String(b.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");if(!isNaN(d.width))var e=Math.max(d.width-10,0);b.innerHTML='<div class="dhx_list_btn" role="link" tabindex="0" dir="ltr" onkeypress="e=event||window.arguments[0];if((e.keyCode==32||e.charCode==32)&&!this.parentNode._busy){this.parentNode._busy=true;e.cancelBubble=true;e.returnValue=false;_dhxForm_doClick(this.childNodes[0],[\'mousedown\',\'mouseup\']);return false;}" ontouchstart="e=event;e.preventDefault();if(!this.parentNode._busy){this.parentNode._busy=true;_dhxForm_doClick(this.childNodes[0],[\'mousedown\',\'mouseup\']);}" onblur="_dhxForm_doClick(this.childNodes[0],\'mouseout\');" ><table cellspacing="0" class="dhx_list_btn" cellpadding="0" border="0" align="left"><tr><td class="btn_l"><div class="btn_l">&nbsp;</div></td><td class="btn_m"><div class="btn_txt"'+
(null!=e?' style="width:'+e+'px;"':"")+">"+d.value+'</div></td><td class="btn_r"><div class="btn_r">&nbsp;</div></td></tr></table></div>';isNaN(d.inputLeft)||(b.childNodes[0].style.left=parseInt(d.inputLeft)+"px");isNaN(d.inputTop)||(b.childNodes[0].style.top=parseInt(d.inputTop)+"px");!0==d.hidden&&this.hide(b);!0==d.disabled&&this.userDisable(b);b.onselectstart=function(b){b=b||event;b.cancelBubble=!0;return b.returnValue=!1};b.childNodes[0].onselectstart=function(b){b=b||event;b.cancelBubble=!0;
return b.returnValue=!1};b.childNodes[0].childNodes[0].onmouseover=function(){this.parentNode.parentNode._enabled&&(this._isOver=!0,this.className="dhx_list_btn_over")};b.childNodes[0].childNodes[0].onmouseout=function(){this.parentNode.parentNode._enabled&&(this.className="dhx_list_btn",this._isOver=this._pressed=this._allowClick=!1)};b.childNodes[0].childNodes[0].onmousedown=function(){!this._pressed&&this.parentNode.parentNode._enabled&&(this.className="dhx_list_btn_pressed",this._pressed=this._allowClick=
!0)};b.childNodes[0].childNodes[0].onmouseup=function(){if(this._pressed){var b=this.parentNode.parentNode;b._enabled&&(b._busy=!1,this.className=this._isOver?"dhx_list_btn_over":"",this._pressed&&this._allowClick&&b.callEvent("_onButtonClick",[b._name,b._cmd]),this._pressed=this._allowClick=!1)}};return this},destruct:function(b){this.doUnloadNestedLists(b);b.callEvent=null;b.checkEvent=null;b.getForm=null;b._autoCheck=null;b._type=null;b._enabled=null;b._cmd=null;b._name=null;b.onselectstart=null;
b.childNodes[0].onselectstart=null;b.childNodes[0].onkeypress=null;b.childNodes[0].ontouchstart=null;b.childNodes[0].onblur=null;b.childNodes[0].childNodes[0].onmouseover=null;b.childNodes[0].childNodes[0].onmouseout=null;b.childNodes[0].childNodes[0].onmousedown=null;for(b.childNodes[0].childNodes[0].onmouseup=null;0<b.childNodes.length;)b.removeChild(b.childNodes[0]);b.parentNode.removeChild(b)},enable:function(b){0<=String(b.className).search("disabled")&&(b.className=String(b.className).replace(/disabled/gi,
""));b._enabled=!0;b.childNodes[0].tabIndex=0;b.childNodes[0].removeAttribute("disabled")},disable:function(b){0>String(b.className).search("disabled")&&(b.className+=" disabled");b._enabled=!1;b.childNodes[0].tabIndex=-1;b.childNodes[0].setAttribute("disabled","true")},isEnabled:function(b){return b._enabled},setText:function(b,d){b.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML=d},getText:function(b){return b.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML}};
(function(){for(var b in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.button[b]=dhtmlXForm.prototype.items.checkbox[b]})();
dhtmlXForm.prototype.items.hidden={render:function(b,d){b.style.display="none";b._name=d.name;b._type="hd";b._enabled=!0;var e=document.createElement("INPUT");e.type="HIDDEN";e.name=d.name;e.value=d.value||"";b.appendChild(e);return this},destruct:function(b){for(this.doUnloadNestedLists(b);0<b.childNodes.length;)b.removeChild(b.childNodes[0]);b._autoCheck=null;b._name=null;b._type=null;b._enabled=null;b.onselectstart=null;b.callEvent=null;b.checkEvent=null;b.getForm=null;b.parentNode.removeChild(b)},
enable:function(b){b._enabled=!0;b.childNodes[0].setAttribute("name",b._name)},disable:function(b){b._enabled=!1;b.childNodes[0].removeAttribute("name")},isEnabled:function(b){return b._enabled},show:function(){},hide:function(){},isHidden:function(){return!0},setValue:function(b,d){b.childNodes[0].value=d},getValue:function(b){return b.childNodes[0].value}};(function(){for(var b in{doUnloadNestedLists:1})dhtmlXForm.prototype.items.hidden[b]=dhtmlXForm.prototype.items.checkbox[b]})();
dhtmlXForm.prototype.items.list={render:function(b){b._type="list";b._enabled=!0;b._isNestedForm=!0;b.className="dhxlist_base_nested";return[this,new dhtmlXForm(b)]},destruct:function(b){}};
dhtmlXForm.prototype.items.fieldset={render:function(b,d){b._type="fs";b._width=d.width;b._enabled=!0;b._checked=!0;b.className="fs_"+d.position+("string"==typeof d.className?" "+d.className:"");var e=document.createElement("FIELDSET");e.className="dhxlist_fs";var f=String(d.labelAlign).replace("align_","");e.innerHTML="<legend class='fs_legend' align='"+f+"' style='text-align:"+f+(_isIE&&8==document.documentMode?";margin-top:-14px;background-color:white":"")+"'>"+d.label+"</legend>";e.style.marginTop=
_isIE&&8==document.documentMode?"15px":e.style.marginTop;b.appendChild(e);isNaN(d.inputLeft)||(e.style.left=parseInt(d.inputLeft)+"px");isNaN(d.inputTop)||(e.style.top=parseInt(d.inputTop)+"px");"auto"!=d.inputWidth&&!isNaN(d.inputWidth)&&(e.style.width=parseInt(d.inputWidth)+"px");b._addSubListNode=function(){var b=document.createElement("DIV");this.childNodes[0].appendChild(b);return b};!0==d.hidden&&this.hide(b);!0==d.disabled&&this.userDisable(b);return this},destruct:function(b){this.doUnloadNestedLists(b);
b._checked=null;b._enabled=null;b._idd=null;b._type=null;b._width=null;b.onselectstart=null;b._addSubListNode=null;b._autoCheck=null;b.callEvent=null;b.checkEvent=null;for(b.getForm=null;0<b.childNodes.length;)b.removeChild(b.childNodes[0]);b.parentNode.removeChild(b)},setText:function(b,d){b.childNodes[0].childNodes[0].innerHTML=d},getText:function(b){return b.childNodes[0].childNodes[0].innerHTML},enable:function(b){b._enabled=!0;0<=String(b.className).search("disabled")&&(b.className=String(b.className).replace(/disabled/gi,
""))},disable:function(b){b._enabled=!1;0>String(b.className).search("disabled")&&(b.className+=" disabled")},isEnabled:function(b){return b._enabled},setWidth:function(b,d){b.childNodes[0].style.width=d+"px";b._width=d},getWidth:function(b){return b._width}};(function(){for(var b in{doUnloadNestedLists:1})dhtmlXForm.prototype.items.fieldset[b]=dhtmlXForm.prototype.items.checkbox[b]})();
dhtmlXForm.prototype.items.block={render:function(b,d){b._type="bl";b._width=d.width;b._enabled=!0;b._checked=!0;b.className="block_"+d.position+("string"==typeof d.className?" "+d.className:"");var e=document.createElement("DIV");e.className="dhxlist_block";d.style&&(e.style.cssText=d.style);b.appendChild(e);isNaN(d.inputLeft)||(e.style.left=parseInt(d.inputLeft)+"px");isNaN(d.inputTop)||(e.style.top=parseInt(d.inputTop)+"px");"auto"!=d.inputWidth&&!isNaN(d.inputWidth)&&(e.style.width=parseInt(d.inputWidth)+
"px");b._addSubListNode=function(){var b=document.createElement("DIV");b._inBlcok=!0;this.childNodes[0].appendChild(b);return b};!0==d.hidden&&this.hide(b);!0==d.disabled&&this.userDisable(b);return this}};(function(){for(var b in{enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1})dhtmlXForm.prototype.items.block[b]=dhtmlXForm.prototype.items.fieldset[b]})();dhtmlXForm.prototype.items.newcolumn={};
dhtmlXForm.prototype.items.template={render:function(b,d){isNaN(d.rows);b._type="tp";b._enabled=!0;d.format&&("function"==typeof d.format&&(b.format=d.format),"function"==typeof window[d.format]&&(b.format=window[d.format]));b.format||(b.format=function(b,d){return d});this.doAddLabel(b,d);this.doAddInput(b,d,"DIV",null,!0,!0,"dhxlist_item_template");b.childNodes[1].style.marginTop="4px";b._value=d.value||"";b.childNodes[1].childNodes[0].innerHTML=b.format(b._idd,b._value);return this},setValue:function(b,
d){b._value=d;b.childNodes[1].childNodes[0].innerHTML=b.format(b._idd,b._value)},getValue:function(b){return b._value},enable:function(b){0<=String(b.className).search("disabled")&&(b.className=String(b.className).replace(/disabled/gi,""));b._enabled=!0},disable:function(b){0>String(b.className).search("disabled")&&(b.className+=" disabled");b._enabled=!1}};
(function(){for(var b in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,setWidth:1,isEnabled:1})dhtmlXForm.prototype.items.template[b]=dhtmlXForm.prototype.items.select[b]})();
dhtmlXForm.prototype._ulToObject=function(b,d){for(var e=[],f=0;f<b.childNodes.length;f++){if("li"==String(b.childNodes[f].tagName||"").toLowerCase()){for(var g={},h=b.childNodes[f],l=0;l<d.length;l++)null!=h.getAttribute(d[l])&&(g[String(d[l]).replace("ftype","type")]=h.getAttribute(d[l]));if(!g.label)try{g.label=h.firstChild.nodeValue}catch(m){}h=h.getElementsByTagName("UL");null!=h[0]&&(g["select"==g.type?"options":"list"]=dhtmlXForm.prototype._ulToObject(h[0],d));e[e.length]=g}if("div"==String(b.childNodes[f].tagName||
"").toLowerCase()){g={type:"label"};try{g.label=b.childNodes[f].firstChild.nodeValue}catch(k){}e[e.length]=g}}return e};
dhtmlxEvent(window,"load",function(){for(var b="ftype name value label check checked disabled text rows select selected command width style labelWidth labelHeight labelLeft labelTop inputWidth inputHeight inputLeft inputTop position size".split(" "),d=document.getElementsByTagName("UL"),e=[],f=0;f<d.length;f++)if("dhtmlxForm"==d[f].className){var g=document.createElement("DIV");e[e.length]={nodeUL:d[f],nodeForm:g,data:dhtmlXForm.prototype._ulToObject(d[f],b),name:d[f].getAttribute("name")||null}}for(f=
0;f<e.length;f++)if(e[f].nodeUL.parentNode.insertBefore(e[f].nodeForm,e[f].nodeUL),b=new dhtmlXForm(e[f].nodeForm,e[f].data),null!==e[f].name&&(window[e[f].name]=b),b=e[f].nodeUL.getAttribute("oninit")||null,e[f].nodeUL.parentNode.removeChild(e[f].nodeUL),e[f].nodeUL=null,e[f].nodeForm=null,e[f].data=null,e[f]=null,b)if("function"==typeof b)b();else if("function"==typeof window[b])window[b]()});
window.dhtmlXContainer&&(dhtmlx.attaches||(dhtmlx.attaches={}),dhtmlx.attaches.attachForm||(dhtmlx.attaches.attachForm=function(b){this.vs[this.av].formObj&&this.detachForm();var d=document.createElement("DIV");d.id="dhxFormObj_"+this._genStr(12);d.style.position="relative";d.style.width="100%";d.style.height="100%";d.style.overflow="auto";d.cmp="form";this.attachObject(d);this.vs[this.av].form=new dhtmlXForm(d,b);this.vs[this.av].form.setSkin(this.skin);this.vs[this.av].form.setSizes();this.vs[this.av].formObj=
d;return this.vs[this.av].form}),dhtmlx.detaches||(dhtmlx.detaches={}),dhtmlx.detaches.detachForm||(dhtmlx.detaches.detachForm=function(b){b.form&&(b.form.unload(),b.form=null,b.formObj=null,b.attachForm=null)}));dhtmlXForm.prototype.setUserData=function(b,d,e){this._userdata||(this._userdata={});this._userdata[b]=this._userdata[b]||{};this._userdata[b][d]=e};dhtmlXForm.prototype.getUserData=function(b,d){return this._userdata?(this._userdata[b]||{})[d]||"":""};
dhtmlXForm.prototype.setRTL=function(b){this._rtl=!0===b?!0:!1;this.base.className=this._rtl?"dhxform_rtl":""};_dhxForm_doClick=function(b,d){if("object"==typeof d){var e=d[1];d=d[0]}if(document.createEvent){var f=document.createEvent("MouseEvents");f.initEvent(d,!0,!1);b.dispatchEvent(f)}else document.createEventObject&&(f=document.createEventObject(),f.button=1,b.fireEvent("on"+d,f));e&&window.setTimeout(function(){_dhxForm_doClick(b,e)},100)};
dhtmlXForm.prototype.setFormData=function(b){for(var d in b){var e=this.getItemType(d);switch(e){case "checkbox":this[!0==b[d]||1==parseInt(b[d])||"true"==b[d]?"checkItem":"uncheckItem"](d);break;case "radio":this.checkItem(d,b[d]);break;case "input":case "textarea":case "select":case "hidden":case "template":case "combo":case "multicombo":case "tree":case "calendar":case "editor":this.setItemValue(d,b[d]);break;default:if(this["setFormData_"+e])this["setFormData_"+e](d,b[d]);else this.hId||(this.hId=
this._genStr(12)),this.setUserData(this.hId,d,b[d])}}};
dhtmlXForm.prototype.getFormData=function(b,d){var e={},f;for(f in this.itemPull){var g=this.itemPull[f]._idd,h=this.itemPull[f]._type;"ch"==h&&(e[g]=this.isItemChecked(g)?1:0);"ra"==h&&!e[this.itemPull[f]._group]&&(e[this.itemPull[f]._group]=this.getCheckedValue(this.itemPull[f]._group));h in{se:1,ta:1,pw:1,hd:1,tp:1,calendar:1,combo:1,multicombo:1,tree:1,editor:1,mathInput:1}&&(e[g]=this.getItemValue(g,b));this["getFormData_"+h]&&(e[g]=this["getFormData_"+h](g));if(this.itemPull[f]._list)for(g=
0;g<this.itemPull[f]._list.length;g++){var h=this.itemPull[f]._list[g].getFormData(d),l;for(l in h)e[l]=h[l]}}if(!d&&this.hId&&this._userdata[this.hId])for(f in this._userdata[this.hId])e[f]||(e[f]=this._userdata[this.hId][f]);return e};_dhxForm_isIPad=0<=navigator.userAgent.search(/iPad/gi);
dhtmlXForm.prototype.load=function(b,d,e){var f=this;f.callEvent("onXLS",[]);"function"==typeof d&&(e=d,d="xml");dhtmlxAjax.get(b,function(g){var h={};if("json"==d)eval("data="+g.xmlDoc.responseText);else{g=g.doXPath("//data/*");for(var l=0;l<g.length;l++)h[g[l].tagName]=g[l].firstChild?g[l].firstChild.nodeValue:""}(g=b.match(/(\?|\&)id\=([a-z0-9_]*)/i))&&g[0]&&(g=g[0].split("=")[1]);f.callEvent("onBeforeDataLoad",[g,h])&&(f.formId=g?g:f.formId,f._last_load_data=h,f.setFormData(h),f.resetDataProcessor("updated"));
f.callEvent("onXLE",[]);e&&e.call(this)})};dhtmlXForm.prototype.reset=function(){this.callEvent("onBeforeReset",[this.formId,this.getFormData()])&&(this._last_load_data&&this.setFormData(this._last_load_data),this.callEvent("onAfterReset",[this.formId]))};
dhtmlXForm.prototype.send=function(b,d,e){"function"==typeof d&&(e=d,d="post");if(this.validate()){var f=this.getFormData(),g=[],h;for(h in f)g.push(h+"="+encodeURIComponent(f[h]));f=function(b){e&&e.call(this,b,b.xmlDoc.responseText)};"get"==d?dhtmlxAjax.get(b+(-1==b.indexOf("?")?"?":"&")+g.join("&"),f):dhtmlxAjax.post(b,g.join("&"),f)}};dhtmlXForm.prototype.save=function(b,d){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(b,d){this.formId=d};
dhtmlXForm.prototype._dp_init=function(b,d){b._methods=["dummy","dummy","_changeFormId","dummy"];b._getRowData=function(b,d){var e=this.obj.getFormData();e[this.action_param]=this.obj.getUserData(b,this.action_param);return e};b._clearUpdateFlag=function(){};b.attachEvent("onAfterUpdate",function(b,d,e,l){if("inserted"==d||"updated"==d)this.obj.resetDataProcessor("updated"),this.obj._last_load_data=this.obj.getFormData();this.obj.callEvent("onAfterSave",[this.obj.formId,l]);return!0});b.autoUpdate=
!1;b.setTransactionMode("POST",!0);this.dp=b;this.formId=d?d:(new Date).valueOf();this.resetDataProcessor("inserted");var e=this;this.save=function(){window.setTimeout(function(){e.callEvent("onBeforeSave",[e.formId,e.getFormData()])&&e.validate()&&b.sendData()},100)};this._isModified=!1;this.attachEvent("onChange",function(){this._isModified=!0})};dhtmlXForm.prototype.isModified=function(){return this._isModified};
dhtmlXForm.prototype.resetDataProcessor=function(b){this.dp&&(this.dp.updatedRows=[],this.dp._in_progress=[],this.setUserData(this.formId,this.dp.action_param,""),this.dp.setUpdated(this.formId,!0,b))};dhtmlXForm.prototype.checkItemsReady=function(){for(var b in this.itemPull){var d=this.itemPull[b]._type;if(("se"==d||"combo"==d||"multicombo"==d||"tree"==d)&&!this.objPull[b]._ready)return}this.callEvent("onItemsReady",[this])};
dhtmlXForm.prototype.addItem=function(b,d,e,f){var g=null;b instanceof Array&&(g=b[1],b=b[0]);var h=null;if(null!=b&&(h=this._getParentForm(b,g),null!=h)){null==h.item._list?(d.listParent||(d.listParent=h.item._idd),h.form._addItem("list",h.item._idd,[d],null,h.item._idd,e,f)):h.item._list[0].addItem(null,d,e,f);h.form=h.item=null;this._autoCheck();return}this._prepareItem(d,e,f);this._autoCheck()};
dhtmlXForm.prototype._getParentForm=function(b,d){if(null!=this.itemPull[this.idPrefix+b])return{form:this,item:this.itemPull[this.idPrefix+b]};for(var e in this.itemPull)if("ra"==this.itemPull[e]._type&&this.itemPull[e]._group==b&&this.itemPull[e]._value==d)return{form:this,item:this.itemPull[e]};var f=null;for(e in this.itemPull)if(!f&&null!=this.itemPull[e]._list)for(var g=0;g<this.itemPull[e]._list.length;g++)f||(f=this.itemPull[e]._list[g]._getParentForm(b,d));return f};
dhtmlXForm.prototype.items.calendar={ev:!1,inp:null,calendar:{},f:{},f0:{},useString:!1,render:function(b,d){var e=this;b._type="calendar";b._enabled=!0;this.doAddLabel(b,d);this.doAddInput(b,d,"INPUT","TEXT",!0,!0,"dhxlist_txt_textarea");this.f[b.form.idPrefix+"_"+b._idd]=d.dateFormat||(d.enableTime?"%Y-%m-%d %H:%i:%s":"%Y-%m-%d");this.f0[b.form.idPrefix+"_"+b._idd]=d.serverDateFormat||this.f[b.form.idPrefix+"_"+b._idd];b._value=d.value?d.value instanceof Date?d.value:this.strToDate(b,d.value):"";
-1==this.f[b.form.idPrefix+"_"+b._idd].indexOf("%Y")&&(-1==this.f[b.form.idPrefix+"_"+b._idd].indexOf("%m")&&-1<this.f0[b.form.idPrefix+"_"+b._idd].indexOf("%Y")&&-1<this.f0[b.form.idPrefix+"_"+b._idd].indexOf("%m"))&&(b.childNodes[1].childNodes[0]._dates=new Date(b._value.getFullYear(),b._value.getMonth(),b._value.getDate()));b.useString=d.useString?!0:!1;b.childNodes[1].childNodes[0].value=this.getFValue(b,b._value,this.f[b.form.idPrefix+"_"+b._idd]);b.childNodes[1].childNodes[0]._value=b.childNodes[1].childNodes[0].value;
this.calendar[b.form.idPrefix+"_"+b._idd]=new dhtmlXCalendarObject(b.childNodes[1].childNodes[0]);this.calendar[b.form.idPrefix+"_"+b._idd].setSkin(d.skin||"dhx_skyblue");this.calendar[b.form.idPrefix+"_"+b._idd].setDateFormat(this.f[b.form.idPrefix+"_"+b._idd]);d.enableTime||this.calendar[b.form.idPrefix+"_"+b._idd].hideTime();"undefined"!=typeof d.calendarPosition&&this.calendar[b.form.idPrefix+"_"+b._idd].setPosition(d.calendarPosition);this.calendar[b.form.idPrefix+"_"+b._idd]._itemIdd=b._idd;
this.calendar[b.form.idPrefix+"_"+b._idd].attachEvent("onShow",function(b){this._onlyTime?this._activeInp&&(b=this.i[this._activeInp],b._dates&&(this._activeDate.setYear(b._dates.getFullYear()),this._activeDate.setMonth(b._dates.getMonth()),this._activeDate.setDate(b._dates.getDate())),this.c.childNodes[0].style.display=""):-1!=this._dateFormat.indexOf("%H")||this._onlyMonthYear?this.c.childNodes[0].style.display="":this.c.childNodes[0].style.display="none"});d.readonly||(this.calendar[b.form.idPrefix+
"_"+b._idd].attachEvent("onChange",function(d){var f=e.getFValue(b,b._value,e.f[b.form.idPrefix+"_"+b._idd]),l=e.getFValue(b,d,e.f[b.form.idPrefix+"_"+b._idd]);return f!=l?(e.setValue(b,d),b.callEvent("onChange",[b._idd,b._value]),!0):!1}),b.childNodes[1].childNodes[0].onblur=function(){var d=e.calendar[b.form.idPrefix+"_"+b._idd]._dateFormatRE;if(!d||!this.value.match(RegExp("^"+d.toString()+"$")))this.value=this._value});this.calendar[b.form.idPrefix+"_"+b._idd].attachEvent("onBeforeChange",function(d){var f=
e.f[b.form.idPrefix+"_"+b._idd];if(e.getFValue(b,b._value,f)!=e.getFValue(b,d,f)){if(b.checkEvent("onBeforeChange")&&!0!==b.callEvent("onBeforeChange",[b._idd,b._value,d]))return!1;e.setValue(b,d);b.callEvent("onChange",[b._idd,b._value])}return!0});b.childNodes[1].childNodes[0]._idd=b._idd;var f=document.createElement("DIV");this.calendar[b.form.idPrefix+"_"+b._idd].base.appendChild(f);this.calendar[b.form.idPrefix+"_"+b._idd].base.style.backgroundPosition="0px 0px";f.style.marginLeft="3px";f.style.marginTop=
"3px";f.style.paddingTop=this.f[b.form.idPrefix+"_"+b._idd]&&-1<this.f[b.form.idPrefix+"_"+b._idd].indexOf("%H")?"3px":"0px";f.style.height="24px";f.style.fontSize="10px";f.style.textAlign="center";f.innerHTML="<button t='t' style='font-size:10px; width:48px; display:none; height:21px;'>\u786e\u5b9a</button>&nbsp;&nbsp;<button style='font-size:10px; width:48px; height:21px;'>\u6e05\u7a7a</button>";f.c=this.calendar[b.form.idPrefix+"_"+b._idd];this.calendar[b.form.idPrefix+"_"+b._idd].c=f;f.onclick=
function(){if("button"!=event.srcElement.tagName.toLowerCase())return!1;var d="";event.srcElement.getAttribute("t")&&(d=e.calendar[b.form.idPrefix+"_"+b._idd]._activeDate);var f=e.f[b.form.idPrefix+"_"+b._idd],l=e.getFValue(b,b._value,f);e.setValue(b,d);try{l!=e.getFValue(b,b._value,f)&&b.callEvent("onChange",[b._idd,b._value])}finally{e.calendar[b.form.idPrefix+"_"+b._idd].hide()}return!0};return this},getCalendar:function(b){return this.calendar[b.form.idPrefix+"_"+b._idd]},setSkin:function(b,d){this.calendar[b.form.idPrefix+
"_"+b._idd].setSkin(d)},getFValue:function(b,d,e){if(d instanceof Date)var f=function(b){return 1==String(b).length?"0"+String(b):b},g=String(e).replace(/%[a-zA-Z]/g,function(b){switch(b){case "%Y":return d.getFullYear();case "%m":return f(d.getMonth()+1);case "%n":return date.getMonth()+1;case "%d":return f(d.getDate());case "%j":return d.getDate();case "%y":return f(d.getYear()%100);case "%D":return{0:"Su",1:"Mo",2:"Tu",3:"We",4:"Th",5:"Fr",6:"Sa"}[d.getDay()];case "%l":return{0:"Sunday",1:"Monday",
2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}[d.getDay()];case "%M":return{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}[d.getMonth()];case "%F":return{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}[d.getMonth()];case "%H":return f(d.getHours());case "%h":return f((d.getHours()+11)%12+1);case "%i":return f(d.getMinutes());case "%s":return f(d.getSeconds());
case "%a":return 11<d.getHours()?"pm":"am";case "%A":return 11<d.getHours()?"PM":"AM";default:return b}});return g||""},strToDate:function(b,d){var e={Y:0,m:0,d:0,H:0,i:0,s:0},f=String(d).match(/[0-9]{1,}/g),g=this.f0[b.form.idPrefix+"_"+b._idd].match(/%[a-zA-Z]/g);if(f){for(var h=0;h<g.length;h++){var l=g[h].replace(/%/g,"");"undefined"!=typeof e[l]&&(e[l]=Number(f[h]))}e.m&&0==e.d&&(e.d=1);return new Date(e.Y,e.m-1,e.d,e.H,e.i,e.s,0)}return""},copyDate:function(b,d){b instanceof Date||(b=new Date);
b.setYear(d.getFullYear());b.setMonth(d.getMonth());b.setDate(d.getDate());b.setHours(d.getHours());b.setMinutes(d.getMinutes());b.setSeconds(d.getSeconds());return b},setValue:function(b,d){b._value=""==d||null==d?"":this.copyDate(b._value,d instanceof Date?d:this.strToDate(b,d));var e=b.childNodes[1].childNodes[0];e.value=this.getFValue(b,b._value,this.f[b.form.idPrefix+"_"+b._idd]);e._value=e.value},getValue:function(b,d){return!0===d||b.useString?this.getFValue(b,b._value,this.f0[b.form.idPrefix+
"_"+b._idd]):b._value},destruct:function(b){try{this.calendar[b.form.idPrefix+"_"+b._idd].unload(),this.calendar[b.form.idPrefix+"_"+b._idd]=null,delete this.calendar[b.form.idPrefix+"_"+b._idd],this.f[b.form.idPrefix+"_"+b._idd]=null,delete this.f[b.form.idPrefix+"_"+b._idd],this.cz[b._idd].parentNode.removeChild(this.cz[b._idd]),this.cz[b._idd]=null,delete this.cz[b._idd]}catch(d){}var e=0,f;for(f in this.calendar)e++;0==e&&(this.clickEvent&&(_isIE?document.body.detachEvent("onclick",this.clickEvent):
window.removeEventListener("click",this.clickEvent,!1)),this.ev=!1);try{b.childNodes[1].childNodes[0]._idd=null,b.childNodes[1].childNodes[0].onkeypress=null,this.d2(b)}catch(g){}}};(function(){for(var b in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1,isEnabled:1})dhtmlXForm.prototype.items.calendar[b]=dhtmlXForm.prototype.items.input[b]})();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;
dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getCalendar=function(b){return this.doWithItem(b,"getCalendar")};dhtmlXForm.prototype.setItemDateFormat=function(b,d){var e=this.doWithItem(b,"getCalendar"),f=this.doWithItem(b,"getInput").parentNode.parentNode;dhtmlXForm.prototype.items.calendar.f[f.form.idPrefix+"_"+b]=d;e.setDateFormat(d)};
dhtmlXForm.prototype.items.colorpicker={ev:!1,inp:null,colorpicker:{},cz:{},render:function(b,d){var e=this;b._type="colorpicker";b._enabled=!0;this.doAddLabel(b,d);this.doAddInput(b,d,"INPUT","TEXT",!0,!0,"dhxlist_txt_textarea");b._value=d.value||"";b.childNodes[1].childNodes[0].value=b._value;this.cz[b._idd]=document.createElement("DIV");this.cz[b._idd].style.position="absolute";this.cz[b._idd].style.top="0px";this.cz[b._idd].style.zIndex=999;document.body.insertBefore(this.cz[b._idd],document.body.firstChild);
this.colorpicker[b._idd]=new dhtmlXColorPicker(this.cz[b._idd],null,null,!0);this.colorpicker[b._idd].setImagePath(d.imagePath||"");this.colorpicker[b._idd].init();this.colorpicker[b._idd].elements.cs_Content.onclick=function(b){(b||event).cancelBubble=!0};this.colorpicker[b._idd].setOnSelectHandler(function(d){b._value!=d&&!(b.checkEvent("onBeforeChange")&&!0!==b.callEvent("onBeforeChange",[b._idd,b._value,d]))&&(b._value=d,e.setValue(b,d),b.callEvent("onChange",[b._idd,b._value]))});b.childNodes[1].childNodes[0]._idd=
b._idd;b.childNodes[1].childNodes[0].onclick=function(){if(e.colorpicker[this._idd].isVisible())e.colorpicker[this._idd].hide(),e.inp=null;else{var d=1*e.colorpicker[this._idd].container.childNodes[0].getElementsByTagName("TABLE")[0].rows[1].cells[1].style.height.replace("px","")+3,g=getAbsoluteTop(this)+this.offsetHeight-1;g+d>document.body.offsetHeight&&(g=document.body.offsetHeight-d);e.colorpicker[this._idd].setPosition(getAbsoluteLeft(this),g);e.colorpicker[this._idd].setColor(b._value);e.colorpicker[this._idd].show();
e.inp=this._idd}};this.ev||("undefined"!=typeof window.addEventListener?window.addEventListener("click",this.clickEvent,!1):window.attachEvent("onclick",this.clickEvent),this.ev=!0);return this},clickEvent:function(){dhtmlXForm.prototype.items.colorpicker.hideAllColorPickers()},hideAllColorPickers:function(){for(var b in this.colorpicker)b!=this.inp&&this.colorpicker[b].hide();this.inp=null},getColorPicker:function(b){return this.colorpicker[b._idd]},destruct:function(b){try{this.colorpicker[b._idd].elements.cs_Content.onclick=
null,this.colorpicker[b._idd].unload(),this.colorpicker[b._idd]=null,delete this.colorpicker[b._idd],this.cz[b._idd].parentNode.removeChild(this.cz[b._idd]),this.cz[b._idd]=null,delete this.cz[b._idd]}catch(d){}var e=0,f;for(f in this.colorpicker)e++;0==e&&(_isIE?document.body.detachEvent("onclick",this.clickEvent):window.removeEventListener("click",this.clickEvent,!1),this.ev=!1);try{b.childNodes[1].childNodes[0]._idd=null,this.d2(b)}catch(g){}}};
(function(){for(var b in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,setFocus:1,getInput:1,isEnabled:1})dhtmlXForm.prototype.items.colorpicker[b]=dhtmlXForm.prototype.items.input[b]})();dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(b){return this.doWithItem(b,"getColorPicker")};
dhtmlXColorPicker.prototype.unload=function(){this.elements.cs_SelectorVer.parentNode.removeChild(this.elements.cs_SelectorVer);this.elements.cs_SelectorHor.parentNode.removeChild(this.elements.cs_SelectorHor);this.elements.cs_SelectorVer=null;this.elements.cs_SelectorHor=null;this.elements.cs_SelectorDiv.ondblclick=null;this.elements.cs_SelectorDiv.onmousedown=null;this.elements.cs_SelectorDiv.z=null;this.elements.cs_SelectorDiv.parentNode.removeChild(this.elements.cs_SelectorDiv);this.elements.cs_SelectorDiv=
null;this.elements.cs_LumSelectArrow.onmousedown=null;this.elements.cs_LumSelectArrow.z=null;this.elements.cs_LumSelectArrow.parentNode.removeChild(this.elements.cs_LumSelectArrow);this.elements.cs_LumSelectArrow=null;this.elements.cs_LumSelectLine.parentNode.removeChild(this.elements.cs_LumSelectLine);for(this.elements.cs_LumSelectLine=null;0<this.elements.cs_LumSelect.childNodes.length;)this.elements.cs_LumSelect.removeChild(this.elements.cs_LumSelect.childNodes[0]);this.elements.cs_LumSelect.ondblclick=
null;this.elements.cs_LumSelect.onmousedown=null;this.elements.cs_LumSelect.z=null;this.elements.cs_LumSelect.parentNode.removeChild(this.elements.cs_LumSelect);this.elements.cs_LumSelect=null;this.elements.cs_EndColor.parentNode.removeChild(this.elements.cs_EndColor);this.elements.cs_EndColor=null;this.elements.cs_InputHue.onchange=null;this.elements.cs_InputHue.z=null;this.elements.cs_InputHue.parentNode.removeChild(this.elements.cs_InputHue);this.elements.cs_InputHue=null;this.elements.cs_InputRed.onchange=
null;this.elements.cs_InputRed.z=null;this.elements.cs_InputRed.parentNode.removeChild(this.elements.cs_InputRed);this.elements.cs_InputRed=null;this.elements.cs_InputSat.onchange=null;this.elements.cs_InputSat.z=null;this.elements.cs_InputSat.parentNode.removeChild(this.elements.cs_InputSat);this.elements.cs_InputSat=null;this.elements.cs_InputGreen.onchange=null;this.elements.cs_InputGreen.z=null;this.elements.cs_InputGreen.parentNode.removeChild(this.elements.cs_InputGreen);this.elements.cs_InputGreen=
null;this.elements.cs_Hex.onchange=null;this.elements.cs_Hex.z=null;this.elements.cs_Hex.parentNode.removeChild(this.elements.cs_Hex);this.elements.cs_Hex=null;this.elements.cs_InputLum.onchange=null;this.elements.cs_InputLum.z=null;this.elements.cs_InputLum.parentNode.removeChild(this.elements.cs_InputLum);this.elements.cs_InputLum=null;this.elements.cs_InputBlue.onchange=null;this.elements.cs_InputBlue.z=null;this.elements.cs_InputBlue.parentNode.removeChild(this.elements.cs_InputBlue);this.elements.cs_InputBlue=
null;this.elements.cs_ButtonOk.onclick=null;this.elements.cs_ButtonOk.onmouseout=null;this.elements.cs_ButtonOk.onmouseover=null;this.elements.cs_ButtonOk.z=null;this.elements.cs_ButtonOk.parentNode.removeChild(this.elements.cs_ButtonOk);this.elements.cs_ButtonOk=null;this.elements.cs_ButtonCancel.onclick=null;this.elements.cs_ButtonCancel.onmouseout=null;this.elements.cs_ButtonCancel.onmouseover=null;this.elements.cs_ButtonCancel.z=null;this.elements.cs_ButtonCancel.parentNode.removeChild(this.elements.cs_ButtonCancel);
this.elements.cs_ButtonCancel=null;this.elements.cs_ContentTable.parentNode.removeChild(this.elements.cs_ContentTable);this.elements.cs_ContentTable=null;this.elements.cs_Content.parentNode.removeChild(this.elements.cs_Content);this.z=this.elements.cs_Content=null;this.detachAllEvents();this.customColors=this.linkToObjects=this.language=this.elements=this.container=this._changeValueHEX=this._changeValueRGB=this._changeValueHSV=this._selectCustomColor=this._getColorHEX=this._reinitCustomColors=this._initCustomColors=
this._hex2dec=this._dec2hex=this._colorizeLum=this._drawLum=this._rgb2hsv=this._hsv2rgb=this._drawValues=this._calculateColor=this._getOffsetLeft=this._getOffsetTop=this._getOffset=this._stopMoveLum=this._mouseMoveLum=this._startMoveLum=this._stopMoveColor=this._mouseMoveColor=this._startMoveColor=this._setLumPos=this._getScrollers=this._setCrossPos=this._initEvents=this._initCsIdElement=this.unload=this.showA=this.show=this.normalButton=this.hoverButton=this.isVisible=this.setSkin=this.loadUserLanguage=
this.init=this.setImagePath=this.hideOnSelect=this.linkTo=this.getSelectedColor=this.setOnCancelHandler=this.setOnSelectHandler=this.hide=this.setPosition=this.close=this.setColor=this.setCustomColors=this.redraw=this.restoreFromHEX=this.restoreFromHSV=this.restoreFromRGB=this.addCustomColor=this.restoreColor=this.saveColor=this.clickCancel=this.clickOk=this.resetHandlers=this.generate=this.detachAllEvents=this.detachEvent=this.eventCatcher=this.checkEvent=this.callEvent=this.attachEvent=null};
dhtmlXForm.prototype.items.upload={render:function(b,d){b._type="up";b._enabled=!0;b._checked=!0;b.className=d.position+("string"==typeof d.className?" "+d.className:"");var e=document.createElement("DIV");b.appendChild(e);isNaN(d.inputLeft)||(b.style.left=parseInt(d.inputLeft)+"px");isNaN(d.inputTop)||(b.style.top=parseInt(d.inputTop)+"px");"auto"!=d.inputWidth&&!isNaN(d.inputWidth)&&(e.style.width=parseInt(d.inputWidth)+"px");b._uploader=new dhtmlXFileUploader(e,d.swfPath||"",d.swfUrl||"",d.mode||
null,d.swfLogs,d.slXap||"",d.slUrl||"",d.slLogs||"");b._uploader.setURL(d.url||"");b._uploader.callEvent=b.callEvent;"undefined"!=typeof d.autoStart&&b._uploader.setAutoStart(d.autoStart);"undefined"!=typeof d.autoRemove&&b._uploader.setAutoRemove(d.autoRemove);"undefined"!=typeof d.titleScreen&&b._uploader.enableTitleScreen(d.titleScreen);"undefined"!=typeof d.titleText&&b._uploader.setTitleText(d.titleText);!0==d.hidden&&this.hide(b);!0==d.disabled&&this.userDisable(b);"auto"==d.inputHeight||NaN==
parseInt(d.inputHeight)||(b._uploader.p_files.style.height=parseInt(d.inputHeight)+"px");return this},destruct:function(b){this.doUnloadNestedLists(b);b._uploader.unload();b._uploader=null;b._checked=null;b._enabled=null;b._idd=null;b._type=null;b.onselectstart=null;b._autoCheck=null;b.callEvent=null;b.checkEvent=null;for(b.getForm=null;0<b.childNodes.length;)b.removeChild(b.childNodes[0]);b.parentNode.removeChild(b)},setText:function(b,d){},getText:function(b){},enable:function(b){b._enabled=!0;
0<=String(b.className).search("disabled")&&(b.className=String(b.className).replace(/disabled/gi,""));b._uploader.enable()},disable:function(b){b._enabled=!1;0>String(b.className).search("disabled")&&(b.className+=" disabled");b._uploader.disable()},setWidth:function(b,d){b.childNodes[0].style.width=d+"px";b._width=d},getWidth:function(b){return b._width||parseInt(b.childNodes[0].style.width)},setValue:function(b){b._uploader.clear()},getValue:function(b){var d=b._uploader.getData(),e={},f=0,g;for(g in d)e[b._idd+
"_r_"+f]=d[g].realName,e[b._idd+"_s_"+f]=d[g].serverName,f++;e[b._idd+"_count"]=f;return e},getUploader:function(b){return b._uploader},getStatus:function(b){return b._uploader.getStatus()}};(function(){for(var b in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.upload[b]=dhtmlXForm.prototype.items.checkbox[b]})();dhtmlXForm.prototype.setFormData_upload=function(b){this.doWithItem(b,"setValue")};dhtmlXForm.prototype.getUploader=function(b){return this.doWithItem(b,"getUploader")};
dhtmlXForm.prototype.getUploaderStatus=function(b){return this.doWithItem(b,"getStatus")};
function dhtmlXFileUploader(b,d,e,f,g,h,l,m){var k=this;if("string"==typeof f&&"function"==typeof this[f])this.engine=f;else if(this.engine="html4","undefined"!=typeof window.FormData&&"undefined"!=typeof window.XMLHttpRequest&&"undefined"!=typeof window.XMLHttpRequestUpload)this.engine="html5";else if("undefined"!=typeof window.swfobject)10<=swfobject.getFlashPlayerVersion().major&&(this.engine="flash");else if(this._sl_v=this.getSLVersion())this.engine="sl";"string"==typeof b&&(b=document.getElementById(b));
this._swf_file_url=d||"";this._swf_upolad_url=e||"";this._swf_logs=g;this._sl_xap=h;this._sl_upload_url=l;this._sl_logs=m;this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";b.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._data=
{};this._autoRemove=this._autoStart=!1;this._enabled=this._titleScreen=!0;this._uploaded_count=0;this._uid=function(){this._idd?this._idd++:this._idd=(new Date).getTime();return this._idd};this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){k._enabled&&!k._uploading&&(k._switchButton(!0),k._uploadStart())},tooltip:"Upload"},cancel:{onclick:function(){k._enabled&&(k._uploadStop(),k._switchButton(!1))},tooltip:"Stop"},clear:{onclick:function(){k._enabled&&
k.clear()},tooltip:"Clear list"}};this.buttons={};for(var b in this.b_opts){var d=document.createElement("DIV");d.innerHTML="&nbsp;";d.className="dhx_file_uploader_button button_"+b;d.onclick=this.b_opts[b].onclick;this.b_opts[b].tooltip&&(d.title=this.b_opts[b].tooltip);this.p_controls.appendChild(d);this.buttons[b]=d;d=null}this.buttons.cancel.style.display="none"};this._readableSize=function(b){for(var d=!1,e="b Kb Mb Gb Tb Pb Eb".split(" "),f=0;f<e.length;f++)1024<b?b/=1024:!1===d&&(d=f);!1===
d&&(d=e.length-1);return Math.round(100*b)/100+" "+e[d]};this._addFileToList=function(b,d,e,f,g){this._checkTitleScreen();e=document.createElement("DIV");e._idd=b;e.className="dhx_file dhx_file_"+f;e.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+g+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>";this.p_files.appendChild(e);e.childNodes[0].style.width=e.offsetWidth-127+"px";this._items[b]=e;
this._updateFileNameSize(b);e.childNodes[2].onclick=function(){k._enabled&&k._removeFileFromQueue(this.parentNode._idd)};this.callEvent("onFileAdd",[d])};this._removeFileFromList=function(b){this._items[b]&&(this._items[b].childNodes[2].onclick=null,this._items[b].parentNode.removeChild(this._items[b]),this._items[b]=null,delete this._items[b],this._data[b]&&(this._data[b]=null,delete this._data[b]),this._checkTitleScreen())};this._updateFileNameSize=function(b){this._items[b].childNodes[0].innerHTML=
this._files[b].name+(!isNaN(this._files[b].size)?" ("+this._readableSize(this._files[b].size)+")":"&nbsp;");this._items[b].childNodes[0].title=this._files[b].name+(!isNaN(this._files[b].size)?" ("+this._readableSize(this._files[b].size)+")":"")};this._updateFileInList=function(b,d,e){this._items[b]&&(this._items[b].className="dhx_file dhx_file_"+d,"uploading"==d&&100>e&&"loader"==this._progress_type?(this._items[b].childNodes[1].className="dhx_file_param dhx_file_uploading",this._items[b].childNodes[1].innerHTML=
"&nbsp;"):(this._items[b].childNodes[1].className="dhx_file_param dhx_file_progress",this._items[b].childNodes[1].innerHTML=e+"%"),this._updateFileNameSize(b))};this._removeFilesByState=function(b){for(var d in this._files)(!0===b||this._files[d].state==b)&&this._removeFileFromQueue(d)};this._switchButton=function(b){!0==b?(this.buttons.upload.style.display="none",this.buttons.cancel.style.display=""):(b=this._uploaded_count,this.buttons.upload.style.display="",this.buttons.cancel.style.display="none",
this._uploaded_count=0,0<b&&this.callEvent("onUploadComplete",[b]))};this._uploadStart=function(){if(!this._uploading)for(var b in this._files)"fail"==this._files[b].state&&(this._files[b].state="added",this._updateFileInList(b,"added",0));this._uploading=!0;var d=!1;for(b in this._files)!d&&"added"==[this._files[b].state]&&(d=!0,this._files[b].state="uploading",this._updateFileInList(b,"uploading",0),this._doUploadFile(b));d||(this._uploading=!1,this._switchButton(!1))};this._onUploadSuccess=function(b,
d,e){if("undefined"!=typeof e&&"flash"==this.engine){try{eval("var t="+e.data)}catch(f){}if("undefined"!=typeof t&&!0==t.state&&null!=t.name)d=t.name;else{this._onUploadFail(b);return}}this._uploaded_count++;this._data[b]={realName:this._files[b].name,serverName:d};this._files[b].state="uploaded";this._updateFileInList(b,"uploaded",100);this.callEvent("onUploadFile",[this._files[b].name,d]);this._autoRemove&&this._removeFileFromQueue(b);this._uploading&&this._uploadStart()};this._onUploadFail=function(b){this._files[b].state=
"fail";this._updateFileInList(b,"fail",0);this.callEvent("onUploadFail",[this._files[b].name]);this._uploading&&this._uploadStart()};this._onUploadAbort=function(b){this._uploading=!1;this._files[b].state="added";this._updateFileInList(b,"added",0);this.callEvent("onUploadCancel",[this._files[b].name])};this._checkTitleScreen=function(){var b=0,d;for(d in this._files)b++;0==b&&(0>this.p.className.search("dhx_file_uploader_title")&&this._titleScreen)&&(this.p.className+=" dhx_file_uploader_title",
this.buttons.info.innerHTML=this._titleText,this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px");if((0<b||!this._titleScreen)&&0<=this.p.className.search("dhx_file_uploader_title"))this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,""),this.buttons.info.innerHTML=""};this.callEvent=function(){};this.upload=function(){this._uploading||this._uploadStart()};this.setAutoStart=function(b){this._autoStart=!0==b};this.setAutoRemove=function(b){this._autoRemove=
!0==b};this.enableTitleScreen=function(b){this._titleScreen=!0==b;this._checkTitleScreen()};this.setTitleText=function(b){this._titleText=b;0<=this.p.className.search("dhx_file_uploader_title")&&(this.buttons.info.innerHTML=this._titleText)};this.setURL=function(b){this._url=b};this.setSWFURL=function(b){this._swf_upolad_url=b};this.enable=function(){this._enabled=!0;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=!1;
this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var b=0,d;for(d in this._files){if("uploaded"!=this._files[d].state)return-1;b=1}return b};this.getData=function(){return this._data};this.clear=function(){this._uploading&&k._uploadStop();k._switchButton(!1);k._removeFilesByState(!0);this.callEvent("onClear",[])};this.unload=function(){this._removeFilesByState(!0);this._items=this._files=this._data=
null;this._unloadEngine();for(var b in this.buttons)this.buttons[b].onclick=null,this.buttons[b].parentNode.removeChild(this.buttons[b]),this.buttons[b]=null,delete this.buttons[b];this.buttons=null;for(b in this.b_opts)this.b_opts[b].onclick=null,this.b_opts[b]=null,delete this.b_opts[b];this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_controls=null;this.p_files.parentNode.removeChild(this.p_files);this.engine=this._swf_upolad_url=this._swf_file_url=this.unload=this.clear=
this.getData=this.getStatus=this.disable=this.enable=this.setURL=this.setTitleText=this.enableTitleScreen=this.setAutoRemove=this.setAutoStart=this.upload=this.callEvent=this._checkTitleScreen=this._onUploadAbort=this._onUploadFail=this._onUploadSuccess=this._uploadStart=this._switchButton=this._removeFilesByState=this._updateFileInList=this._updateFileNameSize=this._removeFileFromList=this._addFileToList=this._readableSize=this._initToolbar=this._uid=this._idd=this._uploading=this._url=this._uploaded_count=
this._titleText=this._titleScreen=this._progress_type=this._enabled=this._autoStart=this._autoRemove=this.p_files=null;this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");k=this.p=null};b=new this[this.engine];for(var n in b)this[n]=b[n],b[n]=null;n=b=b=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUploader.prototype.html5=function(){};
dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var b=this;this.buttons.browse.onclick=function(){b._enabled&&b.f.click()};this._progress_type="percentage";this._addFileInput();this.p.ondragenter=function(b){b.dataTransfer&&(b.stopPropagation(),b.preventDefault())};this.p.ondragover=function(b){b.dataTransfer&&(b.stopPropagation(),b.preventDefault())};this.p.ondrop=function(d){d.dataTransfer&&(d.stopPropagation(),d.preventDefault(),b._enabled&&b._parseFilesInInput(d.dataTransfer.files))};
this._titleText="Drag-n-Drop files here or<br> click to select files for upload."},_addFileInput:function(){null!=this.f&&(this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null);var b=this;this.f=document.createElement("INPUT");this.f.type="file";this.f.multiple="1";this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){b._parseFilesInInput(this.files);_isOpera&&b._addFileInput()}},_doUploadFile:function(b){var d=this;this._loader||(this._loader=
new XMLHttpRequest,this._loader.upload.onprogress=function(b){"uploading"==d._files[this._idd].state&&d._updateFileInList(this._idd,"uploading",Math.round(100*b.loaded/b.total))},this._loader.onload=function(b){try{eval("var r="+this.responseText)}catch(e){}"object"==typeof r&&"undefined"!=typeof r.state&&!0==r.state?(d._onUploadSuccess(this._idd,r.name),r=null):d._onUploadFail(this._idd)},this._loader.onerror=function(b){d._onUploadFail(this._idd)},this._loader.onabort=function(b){d._onUploadAbort(this._idd)});
this._loader._idd=b;this._loader.upload._idd=b;var e=new FormData;e.append("file",this._files[b].file);this._loader.open("POST",this._url+(0>String(this._url).indexOf("?")?"?":"&")+"mode=html5&"+(new Date).getTime(),!0);this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this._loader.send(e)},_uploadStop:function(){this._uploading&&this._loader&&this._loader.abort()},_parseFilesInInput:function(b){for(var d=0;d<b.length;d++)this._addFileToQueue(b[d])},_addFileToQueue:function(b){var d=
b._idd||this._uid();this._files[d]={file:b,name:b.name,size:b.size,state:"added"};this._addFileToList(d,b.name,b.size,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(b){if(this._files[b]){var d=this._files[b].name,e=null!=this._data&&null!=this._data[b]?this._data[b].serverName:null,f=!1;this._uploading&&(b==this._loader._idd&&"uploading"==this._files[b].state)&&(this._uploadStop(),f=!0);this._files[b].file=null;this._files[b].name=null;this._files[b].size=
null;this._files[b].state=null;this._files[b]=null;delete this._files[b];this._removeFileFromList(b);this.callEvent("onFileRemove",[d,e]);f&&this._uploadStart()}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;this._loader&&(this._loader.upload.onprogress=null,this._loader.onload=null,this._loader.onerror=null,this._loader.onabort=null,this._loader._idd=
null,this._loader=this._loader.upload._idd=null);this._unloadEngine=this._removeFileFromQueue=this._addFileToQueue=this._parseFilesInInput=this._uploadStop=this._doUploadFile=this._initEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};
dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button<br>to select files for upload."},_addForm:function(){var b=this,d=this._uid();this.k||(this.k=document.createElement("DIV"),this.k.className="dhx_file_form_cont",this.buttons.browse.appendChild(this.k),this.fr_name="dhx_file_"+(new Date).getTime(),this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>',this.fr=
this.k.firstChild,0<=window.navigator.userAgent.indexOf("MSIE")?this.fr.onreadystatechange=function(){"complete"==this.readyState&&b._onLoad()}:this.fr.onload=function(){b._onLoad()});var e=document.createElement("DIV");e.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+(new Date).getTime()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+d+"'><input type='file' name='file' class='dhx_file_input'></form>";
this.k.appendChild(e);e.firstChild.lastChild._idd=d;e.firstChild.lastChild.onchange=function(){b._addFileToQueue(this);this.onchange=null;this.parentNode.parentNode.style.display="none";b._addForm()};e=null},_onLoad:function(){if(this._uploading){try{eval("var r="+this.fr.contentWindow.document.body.innerHTML)}catch(b){}if("object"==typeof r&&"undefined"!=typeof r.state){if("cancelled"==r.state){this._onUploadAbort(this.fr._idd);r=null;return}if(!0==r.state){"undefined"!=typeof r.size&&!isNaN(r.size)&&
(this._files[this.fr._idd].size=r.size);this._onUploadSuccess(this.fr._idd,r.name);r=null;return}}this._onUploadFail(this.fr._idd)}},_addFileToQueue:function(b){var d=b.value.match(/[^\\\/]*$/g),d=null!=d[0]?d[0]:b.value;this._files[b._idd]={name:d,form:b.parentNode,node:b.parentNode.parentNode,input:b,state:"added"};this._addFileToList(b._idd,b.value,!1,"added",0)},_removeFileFromQueue:function(b){var d=this._files[b].name,e=null!=this._data&&null!=this._data[b]?this._data[b].serverName:null;this._files[b].input.onchange=
null;this._files[b].form.removeChild(this._files[b].input);this._files[b].node.removeChild(this._files[b].form);this._files[b].node.parentNode.removeChild(this._files[b].node);this._files[b].input=null;this._files[b].name=null;this._files[b].form=null;this._files[b].node=null;this._files[b].size=null;this._files[b].state=null;this._files[b]=null;delete this._files[b];this._removeFileFromList(b);this.callEvent("onFileRemove",[d,e])},_doUploadFile:function(b){this.fr._idd=b;this._files[b].form.action=
this._url;this._files[b].form.submit()},_uploadStop:function(){this._uploading&&(this.fr.contentWindow.location.href=this._url+(0>this._url.indexOf("?")?"?":"&")+"mode=html4&action=cancel&etc="+(new Date).getTime())},_unloadEngine:function(){this.k&&(this.fr_name=null,this.fr.onreadystatechange=null,this.fr.onload=null,this.fr.parentNode.removeChild(this.fr),this.fr=null,this.k.firstChild.firstChild.lastChild.onchange=null,this.k.parentNode.removeChild(this.k),this.k=null);this._unloadEngine=this._uploadStop=
this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._onLoad=this._addForm=this._initEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};
dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){window.dhtmlXFileUploaderSWFObjects||(window.dhtmlXFileUploaderSWFObjects={items:{},uid:function(){this.id?this.id++:this.id=(new Date).getTime();return this.id},callEvent:function(b,e,f){window.dhtmlXFileUploaderSWFObjects.items[b].uploader[e].apply(window.dhtmlXFileUploaderSWFObjects.items[b].uploader,f)}});this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhtmlXFileUploaderSWFObjects.uid();this._swf_file_url=this._swf_file_url+
(0<=this._swf_file_url.indexOf("?")?"&":"?")+"etc="+(new Date).getTime();this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var b=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+b.major+"."+b.minor+"."+b.release;this._progress_type="percentage";window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=
{id:this._swf_obj_id,uploader:this}},_addFileToQueue:function(b,d,e){this._files[b]={name:d,size:e,state:"added"};this._addFileToList(b,d,e,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(b){if(this._files[b]){var d=this._files[b].name,e=null!=this._data&&null!=this._data[b]?this._data[b].serverName:null,f=!1;this._uploading&&"uploading"==this._files[b].state&&(this._uploadStop(),f=!0);swfobject.getObjectById(this._swf_obj_id).removeFileById(b);this._files[b].name=
null;this._files[b].size=null;this._files[b].state=null;this._files[b]=null;delete this._files[b];this._removeFileFromList(b);this.callEvent("onFileRemove",[d,e]);f&&this._uploadStart()}},_doUploadFile:function(b){swfobject.getObjectById(this._swf_obj_id).upload(b,this._swf_upolad_url)},_uploadStop:function(b){for(var d in this._files)"uploading"==this._files[d].state&&swfobject.getObjectById(this._swf_obj_id).uploadStop(d)},_unloadEngine:function(){window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]&&
(window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=null,delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]);this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._initEngine=this._swf_obj_id=null}};dhtmlXFileUploader.prototype.sl=function(){};
dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){"undefined"==typeof this._sl_v&&(this._sl_v=this.getSLVersion());window.dhtmlXFileUploaderSLObjects||(window.dhtmlXFileUploaderSLObjects={items:{},uid:function(){this.id?this.id++:this.id=(new Date).getTime();return this.id},callEvent:function(b,d,e){window.dhtmlXFileUploaderSLObjects.items[b].uploader[d].apply(window.dhtmlXFileUploaderSLObjects.items[b].uploader,e)}});this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhtmlXFileUploaderSLObjects.uid();
!1!=this._sl_v?(this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1],this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+
",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'):(this._titleText="Silverlight plugin not found<br>or version less than 4.0",this.buttons.browse.style.cursor="wait",this.buttons.browse.title="");this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(b,d,e){this._files[b]={name:d,size:e,state:"added"};this._addFileToList(b,d,e,"added",0);this._autoStart&&!this._uploading&&
this._uploadStart(!0)},_removeFileFromQueue:function(b){if(this._files[b]){var d=!1;this._uploading&&"uploading"==this._files[b].state&&(this._uploadStop(),d=!0);document.getElementById([this._sl_obj_id]).Content.a.removeFileById(b);this._files[b].name=null;this._files[b].size=null;this._files[b].state=null;this._files[b]=null;delete this._files[b];this._removeFileFromList(b);d&&this._uploadStart()}},_doUploadFile:function(b){document.getElementById(this._sl_obj_id).Content.a.upload(b,this._sl_upload_url,
"&mode=sl&etc="+(new Date).getTime())},_uploadStop:function(b){this._uploading=!1;for(var d in this._files)"uploading"==this._files[d].state&&document.getElementById(this._sl_obj_id).Content.a.uploadStop(d)},_unloadEngine:function(){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]&&(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null,delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]);
this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._initEngine=this._sl_obj_id=null}};dhtmlXFileUploader.prototype.setSLURL=function(b){this._sl_upload_url=b};
dhtmlXFileUploader.prototype.getSLVersion=function(){var b=!1;if(_isIE)try{var d=new ActiveXObject("AgControl.AgControl");if(null!=d)for(var e=4,f=0;d.isVersionSupported([e,f].join("."));)b=[e,f],9<++f&&(e++,f=0)}catch(g){}else null!=navigator.plugins["Silverlight Plug-In"]&&(b=navigator.plugins["Silverlight Plug-In"].description.split("."));return b};
dhtmlXForm.prototype.items.combo={render:function(b,d){b._type="combo";b._enabled=!0;b._value=null;b._newValue=null;this.doAddLabel(b,d);this.doAddInput(b,d,"SELECT",null,!0,!0,"dhxlist_txt_select");this.doAttachEvents(b);this.doLoadOpts(b,d);b._initSelected||(b.childNodes[1].childNodes[0].selectedIndex=-1);b.childNodes[1].childNodes[0].opt_type=d.comboType||"";b._combo=new dhtmlXComboFromSelect(b.childNodes[1].childNodes[0]);d.prompt&&b._combo.setPrompt(d.prompt);d.quietInit&&(b._combo._quietInit=
!0);d.readonly&&this.setReadonly(b,!0);b._combo._currentComboValue=b._combo.getSelectedValue();b._combo.DOMelem_input.id=d.uid;var e=this;if(d.connector)b._dyn=!0,this._ready=!1,this.isDynamic=!0,b._combo.attachEvent("onXLE",function(){e.itemReady(b);e._itemReady=!0}),b._combo.loadXML(d.connector,function(){d.value&&b._combo.presetComboValue(d.value);if("auto"==d.inputWidth){var e=b._combo.getOptionsTextWidth();isNaN(e)||b._combo.setSize(e)}});else if("auto"==d.inputWidth){var f=b._combo.getOptionsTextWidth();
b._combo.setSize(f)}d.cascading&&b.getForm().attachEvent("onXLE",function(){b._combo.setCascadingCombo(b.getForm().getCombo(d.cascading))});d.filtering&&b._combo.enableFilteringMode(!0);!0==d.readonly&&this.setReadonly(b,!0);d.style&&(b._combo.DOMelem_input.style.cssText+=d.style);return this},destruct:function(b){b._combo._currentComboValue=null;b._combo.destructor();b._combo=null;b._apiChange=null;this.d2(b)},doOnChange:function(b){b.DOMParent&&(b=b.DOMParent.parentNode.parentNode);if(!b._apiChange){var d=
b._combo;if(d){d._newComboValue=d.getSelectedValue();if(d._newComboValue!=d._currentComboValue){if(b.checkEvent("onBeforeChange")&&!0!==b.callEvent("onBeforeChange",[b._idd,d._currentComboValue,d._newComboValue]))return window.setTimeout(function(){d.setComboValue(d._currentComboValue)},1),!1;d._currentComboValue=d._newComboValue;b.callEvent("onChange",[b._idd,d._currentComboValue])}b._autoCheck()}}},enable:function(b){0<=String(b.className).search("disabled")&&(b.className=String(b.className).replace(/disabled/gi,
""));b._enabled=!0;b._combo.disable(!1)},disable:function(b){0>String(b.className).search("disabled")&&(b.className+=" disabled");b._enabled=!1;b._combo.disable(!0)},getCombo:function(b){return b._combo},setValue:function(b,d){b._value=d;b._apiChange=!0;b._combo.setComboValue(d);d?b._combo._currentComboValue=b._combo.getSelectedValue():(b._combo.unSelectOption(),b._combo._currentComboValue="");b._apiChange=!1},getValue:function(b){b=b._combo.getSelectedValue();return null==b?"":b},setWidth:function(b,
d){b.childNodes[1].childNodes[0].style.width=d+"px"},setReadonly:function(b,d){b._combo&&(b._combo_ro=d,b._combo.readonly(b._combo_ro))},isReadonly:function(b,d){return b._combo_ro||!1}};(function(){for(var b in{doAddLabel:1,doAddInput:1,doAttachEvents:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,itemReady:1,_ready:1,isEnabled:1})dhtmlXForm.prototype.items.combo[b]=dhtmlXForm.prototype.items.select[b]})();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;
dhtmlXForm.prototype.getCombo=function(b){return this.doWithItem(b,"getCombo")};
dhtmlXForm.prototype.items.multicombo={render:function(b,d){b._type="multicombo";b._enabled=!0;b._value=null;b._newValue=null;this.doAddLabel(b,d);this.doAddInput(b,d,"SELECT",null,!0,!0,"dhxlist_txt_select");this.doAttachEvents(b);this.doLoadOpts(b,d);b._initSelected||(b.childNodes[1].childNodes[0].selectedIndex=-1);b.childNodes[1].childNodes[0].setAttribute("opt_type","checkbox");b._combo=new dhtmlXComboFromSelect(b.childNodes[1].childNodes[0]);b._combo._currentComboValue=b._combo.getSelectedValue();
b._combo.DOMelem_input.id=d.uid;b._combo.DOMelem_checkbox.style.display="none";var e=b._combo.DOMelem_input.style.width.replace("px","");b._combo.DOMelem_input.style.width=1*e+20+"px";var f=this;d.connector&&(this._ready=!1,this.isDynamic=!0,b._combo.loadXML(d.connector,function(){f.itemReady(b);f._itemReady=!0}));d.filtering&&b._combo.enableFilteringMode(!0);!0==d.readonly&&this.setReadonly(b,!0);d.style&&(b._combo.DOMelem_input.style.cssText+=d.style);b._combo.attachEvent("onCheck",function(d,e){for(var f=
b._combo.getChecked(),m="",k=0;k<f.length;k++){var n=b._combo.getIndexByValue(f[k]),m=m+b._combo.getOptionByIndex(n).text;k<f.length-1&&(m+=",")}b._combo.DOMelem_checkbox.checked=0<f.length;b._combo.setComboText(m);return!0});b._combo.attachEvent("onSelectionChange",function(){b._combo.setChecked(b._combo.getSelectedIndex(),!0);b._combo.callEvent("onCheck",[b._combo.getSelectedValue(),!0]);return!0});return this},destruct:function(b){try{b._combo._currentComboValue=null,b._combo.destructor(),b._combo=
null,b._apiChange=null,this.d2(b)}catch(d){}},doOnChange:function(b){var d=b.DOMParent.parentNode.parentNode;if(!d._apiChange){b._newComboValue=b.getChecked();if(b._newComboValue!=b._currentComboValue){if(d.checkEvent("onBeforeChange")&&!0!==d.callEvent("onBeforeChange",[d._idd,b._currentComboValue,b._newComboValue]))return window.setTimeout(function(){b.setComboValue(b._currentComboValue)},1),!1;b._currentComboValue=b._newComboValue;d.callEvent("onChange",[d._idd,b._currentComboValue])}d._autoCheck()}},
enable:function(b){0<=String(b.className).search("disabled")&&(b.className=String(b.className).replace(/disabled/gi,""));b._enabled=!0;b._combo.disable(!1)},disable:function(b){0>String(b.className).search("disabled")&&(b.className+=" disabled");b._enabled=!1;b._combo.disable(!0)},getCombo:function(b){return b._combo},setValue:function(b,d){b._apiChange=!0;b._combo.clearAllCheckedValue();b._combo.setComboText("");if(d&&"string"==typeof d){b._combo._currentComboValue=d;d=d.split(",");for(var e=0;e<
d.length;e++)b._combo.setCheckedByValue(d[e])}else if(d&&"object"==typeof d){b._combo._currentComboValue=d.join(",");for(e=0;e<d.length;e++)b._combo.setCheckedByValue(d[e])}else b._combo._currentComboValue="";b._apiChange=!1},getValue:function(b){b=b._combo.getChecked();var d="";if(b)for(var e=0;e<b.length;e++)d+=b[e],e<b.length-1&&(d+=",");return d},setWidth:function(b,d){b.childNodes[1].childNodes[0].style.width=d+"px"},setReadonly:function(b,d){b._combo_ro=d;b._combo&&b._combo.readonly(b._combo_ro)},
isReadonly:function(b,d){return b._combo_ro||!1}};(function(){for(var b in{doAddLabel:1,doAddInput:1,doAttachEvents:1,doLoadOpts:1,doUnloadNestedLists:1,doAttachChangeLS:1,_checkNoteWidth:1,setText:1,getText:1,itemReady:1,_ready:1,isEnabled:1})dhtmlXForm.prototype.items.multicombo[b]=dhtmlXForm.prototype.items.select[b]})();dhtmlXForm.prototype.items.multicombo.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.getCombo=function(b){return this.doWithItem(b,"getCombo")};
dhtmlXForm.prototype.items.tree={ev:!1,inp:null,tree:{},cz:{},W:"200",H:"200",pos:"bottom",uuid:null,_activeInp:null,_hasParent:!1,defaultText:"\u8bf7\u9009\u62e9...",uid:function(){this.uidd||(this.uidd=(new Date).getTime());return this.uidd++},render:function(b,d){b._type="tree";b._value="";b._filterMode=d.filterMode?d.filterMode:"keyup";b._enabled=!0;b._defaultText=d.defaultText?d.defaultText:this.defaultText;this.doAddLabel(b,d);this.doAddInput(b,d,"INPUT","TEXT",!0,!0,"dhxlist_txt_textarea");
b.input=b.childNodes[1].childNodes[0];b.input.readOnly="undefined"!=typeof d.readonly||"undefined"!=typeof d.readOnly?convertStringToBoolean(d.readOnly):!1;var e=d.tw?1*String(d.tw).replace("px",""):this.W,f=d.th?1*String(d.th).replace("px",""):this.H,g=new dhtmlXWindows;g.enableAutoViewport(!1);g.attachViewportTo(document.body);var h=dhx_fixPosition(b.input,e,f),l=g.createWindow("w1",h[0],h[1],e,f);("undefined"==typeof d.border||!d.border)&&l.attachEvent("onResizeFinish",l._resizeWinToNoborder);
l.hideHeader();this.form=b.form;e=this.form.getWinContainer();l.style.zIndex=e?10*e.style.zIndex+10:500;this.cz[b._idd]=l;this.tree[b._idd]=l.attachTree(d.root||0);this.tree[b._idd].setSkin(d.skin||"dhx_skyblue");this.tree[b._idd].setImagePath(d.imgPath||window.dhx_globalImgPath);dhtmlx.treeWin=dhtmlx.treeWin?dhtmlx.treeWin:{};dhtmlx.treeIpt=dhtmlx.treeIpt?dhtmlx.treeIpt:{};e=dhtmlx.simpleRandomId();dhtmlx.treeWin[e]=l;dhtmlx.treeIpt[e]=b.input;("undefined"==typeof d.border||!d.border)&&l._resizeWinToNoborder();
l.hide();b.input.winId=e;b.input.win=l;b.input.tree=this.tree[b._idd];var m=this,k;for(k in d)e=this.tree[b._idd][k],"function"==typeof e&&e.apply(this.tree[b._idd],(d[k]+"").split(","));"function"==typeof d.treeLoader?d.treeLoader(this.tree[b._idd]):"string"==typeof d.data?(b._dyn=!0,0==d.data.indexOf("[[")?this.tree[b._idd].loadJSArray(eval(d.data),function(){m.itemReady(b)}):0==d.data.indexOf("{")?this.tree[b._idd].loadJSONObject(eval("("+d.data+")"),function(){m.itemReady(b)}):(this.isDynamic=
!0,this.readyToLoad=this.readyToLoad?this.readyToLoad:[],this.readyToLoad.push([b,d]),this.loadTree())):"object"==typeof d.data&&d.data.length&&this.tree[b._idd].loadJSArray(d.data,function(){m.itemReady(b)});b.input._oldColor=b.input.style.color;b.input.prompt=b._defaultText;b.input.value=b._defaultText?b._defaultText:"";b.input.style.color="#CCC";b.input.prompt=b._defaultText;"undefined"!=typeof d.value&&this.setValue(b,d.value);this.tree[b._idd].attachEvent("onClick",function(e,f){if(b.checkEvent("onBeforeChange")&&
!0!==b.callEvent("onBeforeChange",[b._idd,b._value,e]))l.hide();else{d.coc&&l.hide();var g=this.getSelectedItemId();m.setValue(b,g);return!1}});b.input.onclick=function(){this.win.isHidden()&&this.win.show()};b.input.onfocus=function(){this.value==b._defaultText&&(this.value="",this._key=b._value="");if(this.win.isHidden()){var d=1*this.win.style.width.replace("px",""),e=1*this.win.style.height.replace("px",""),d=dhx_fixPosition(this,d,e);this.win.setPosition(d[0],d[1]);this.win.show();b._value&&
this.tree.selectItem(b._value,!1)}};b.input.onblur=function(){if(!this.win._justClicked){if(""==this.value)this.value=b._defaultText,this.style.color="#CCC",m.setValue(b,""),this.tree.clearSelection();else{this.value!=b.text&&(this.value=b.text);var d=this.tree.findItemQuiet(this.value,!1,!0);d?m.setValue(b,d):this.tree.clearSelection()}this.win.hide()}};b.input.onkeydown=function(d){var e=d||window.event;d=this.tree;27==e.keyCode&&this.win.hide();if(38==e.keyCode||40==e.keyCode)return this._key=
this._key?this._key:this.value,""!=this._key&&((e=d.findItemQuiet(this._key,40!=e.keyCode,!this.found))?(this.found=!0,this.value=d.getItemText(e)):this.found=!1),!1;if(13==e.keyCode){if(this.win.isHidden())return this.win.show(),!0;if(this.found){if(e=d.getSelectedItemText(),e==this.value)return this._key=this.value,m.setValue(b,d.getSelectedItemId()),this.win.hide(),!0}else{if(""==this.value)return d.clearSelection(),!0;this._key=this.value;(e=d.findItemQuiet(this.value,!1,!0))?(this.found=!0,this.value=
d.getItemText(e),b.text=this.value):(d.clearSelection(),this.found=!1)}}else{if(37==e.keyCode||39==e.keyCode)event.cancelBubble=!0;else if(27==e.keyCode)return this.value!=b.text&&(this.value=b.text),this.win.hide(),!0;this.found=!1}};l.onclick=function(b){b=b||event;b.cancelBubble=!0};l.attachEvent("_onBeforeTryResize",function(){removeDhtmlxEvent(document.body,dhtmlx._hideTreeWin)});l.attachEvent("onResizeFinish",function(){window.setTimeout(function(){dhtmlxEvent(document.body,"click",dhtmlx._hideTreeWin)},
100)});dhtmlx.attachHideTreeWin||(dhtmlxEvent(document.body,"click",dhtmlx._hideTreeWin),dhtmlx.attachHideTreeWin=!0);return this},loadTree:function(){var b=this;if(this.readyToLoad&&this.readyToLoad.length)if(this.isItemLoading)window.setTimeout(function(){b.loadTree()},50);else{var d=this.readyToLoad.shift(1);this.tree[d[0]._idd]&&d&&(this.isItemLoading=!0,d[1].smart&&this.tree[d[0]._idd].enableSmartXMLParsing(!0),d[1].autoLoad&&this.tree[d[0]._idd].setXMLAutoLoading(!0),this.tree[d[0]._idd].attachEvent("onXLE",
function(){b.itemReady(d[0]);b._itemReady=!0;b.isItemLoading=!1;void 0!=typeof d[0]._value&&b.setValue(d[0],d[0]._value,!0)}),this.tree[d[0]._idd].loadXML(d[1].data))}},getTree:function(b){return this.tree[b._idd]},getFValue:function(b,d){return this.tree[b._idd].getItemText(d)},setValue:function(b,d,e){if(b._value!=d||e)b._value=d,d=this.getFValue(b,b._value),b.text=0==d?"":d,b.input.value=0==d?b._defaultText:d,b.input.style.color=b.input.value!=b._defaultText?b.input._oldColor:"#ccc",e||b.callEvent("onChange",
[b._idd,b._value])},getValue:function(b){return b._value},destruct:function(b){try{this.tree[b._idd].destructor(),this.tree[b._idd]=null,delete this.tree[b._idd]}catch(d){}try{b.input.win.close(),delete this.cz[b._idd]}catch(e){}b.input._idd=null;b.input.onkeypress=null;b.input.onclick=null;b.input.onfocus=null;b.input.onblur=null;b.input.win=null;b.input.tree=null;this.d2(b)}};
(function(){for(var b in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1,itemReady:1,_ready:1,isEnabled:1})dhtmlXForm.prototype.items.tree[b]=dhtmlXForm.prototype.items.input[b]})();dhtmlXForm.prototype.items.tree.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getTree=function(b){return this.doWithItem(b,"getTree")};
dhtmlXForm.prototype.getWinContainer=function(){for(var b=this.cont.parentNode,d=0;b&&10>d;){if("dhtmlx_window_active"==b.className)return b;b=b.parentNode;d++}};
dhtmlXForm.prototype.items.editor={editor:{},render:function(b,d){isNaN(d.rows);b._type="editor";b._enabled=!0;this.doAddLabel(b,d);this.doAddInput(b,d,"DIV",null,!0,!0,"dhxlist_item_template");b._value=d.value||"";b.childNodes[1].childNodes[0].className+=" dhxeditor_inside";var e=this;this.editor[b._idd]=new dhtmlXEditor(b.childNodes[1].childNodes[0]);this.editor[b._idd].setContent(b._value);this.editor[b._idd].attachEvent("onAccess",function(d,g){_dhxForm_doClick(document.body,"click");"blur"==
d&&e.doOnBlur(b,this);b.callEvent("onEditorAccess",[b._idd,d,g,this,b.getForm()])});this.editor[b._idd].attachEvent("onToolbarClick",function(d){b.callEvent("onEditorToolbarClick",[b._idd,d,this,b.getForm()])});b.childNodes[0].childNodes[0].removeAttribute("for");b.childNodes[0].childNodes[0].onclick=function(){e.editor[b._idd]._focus()};return this},doOnBlur:function(b,d){var e=d.getContent();b._value!=e&&(b.checkEvent("onBeforeChange")&&!0!==b.callEvent("onBeforeChange",[b._idd,b._value,e])?d.setContent(b._value):
(b._value=e,b.callEvent("onChange",[b._idd,e])))},setValue:function(b,d){b._value!=d&&(b._value=d,this.editor[b._idd].setContent(b._value))},getValue:function(b){b._value=this.editor[b._idd].getContent();return b._value.replace(RegExp("\\r|\\n","gi"),"<br>")},enable:function(b){this.editor[b._idd].setReadonly(!1);this.doEn(b)},disable:function(b){this.editor[b._idd].setReadonly(!0);this.doDis(b)},getEditor:function(b){return this.editor[b._idd]||null},destruct:function(b){try{b.childNodes[0].childNodes[0].onclick=
null,this.editor[b._idd].unload(),this.editor[b._idd]=null,this.d2(b)}catch(d){}},setFocus:function(b){this.editor[b._idd]._focus()}};(function(){for(var b in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1})dhtmlXForm.prototype.items.editor[b]=dhtmlXForm.prototype.items.template[b]})();dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;
dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(b){return this.doWithItem(b,"getEditor")};
dhtmlXForm.prototype.items.mathInput={render:function(b,d){var e=!isNaN(d.rows);b._type="mathInput";b._enabled=!0;this.doAddLabel(b,d);this.doAddInput(b,d,e?"TEXTAREA":"INPUT",e?null:"TEXT",!0,!0,"dhxlist_txt_textarea");this.setReadonly(b,!0);this.doAttachEvents(b);e&&(b.childNodes[1].childNodes[0].rows=d.rows);this.setValue(b,d.value);return this},setValue:function(b,d){var e="undefined"==typeof String(d)||"undefined"==String(d)?"":String(d);if(0==e.indexOf("={")&&"}"==e.substr(e.length-1)){var f=
{},e=e.substring(2,e.length-1),g=e=e.replace(/(r\[([\w]+)\])/g,function(b,d,e){f[e]=1;return"_mathEmpty(this.getItemValue('"+e+"'))"});b._orignal=g;b.getForm().attachEvent("onChange",function(d,e){if(1==f[d]){var m=eval(g);b._value=m;b.childNodes[1].childNodes[0].value=b._value||"";b.callEvent("onChange",[b._idd,m])}});b.getForm().attachEvent("onXLE",function(){var d=eval(g);b._value=d;b.childNodes[1].childNodes[0].value=b._value||"";b.callEvent("onChange",[b._idd,d])})}else b._orignal||(b._value=
e,b.childNodes[1].childNodes[0].value=b._value||"")}};(function(){for(var b in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,setWidth:1,_ready:1,itemReady:1,getInput:1,setFocus:1,doAttachEvents:1,getValue:1,setReadonly:1,isReadonly:1,isEnabled:1,doOnChange:1,setBackgroudColor:1})dhtmlXForm.prototype.items.mathInput[b]=dhtmlXForm.prototype.items.input[b]})();function _mathEmpty(b){return""==b||null==b||isNaN(b)?0:1*b}
function dataProcessor(b){this.serverProcessor=b;this.action_param="!nativeeditor_status";this.object=null;this.updatedRows=[];this.autoUpdate=!0;this.updateMode="cell";this._tMode="GET";this.post_delim="_";this._waitMode=0;this._in_progress={};this._invalid={};this.mandatoryFields=[];this.messages=[];this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"background-color:FFE0E0;",
error_cell:"border-bottom:2px solid red;",clear:"font-weight:normal;text-decoration:none;"};this.enableUTFencoding(!0);dhtmlxEventable(this);return this}
dataProcessor.prototype={setTransactionMode:function(b,d){this._tMode=b;this._tSend=d},escape:function(b){return this._utf?encodeURIComponent(b):escape(b)},enableUTFencoding:function(b){this._utf=convertStringToBoolean(b)},setDataColumns:function(b){this._columns="string"==typeof b?b.split(","):b;for(b=0;b<this._columns.length;b++)this._columns[b]=convertStringToBoolean(this._columns[b])},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(b){this._endnm=convertStringToBoolean(b)},
enablePartialDataSend:function(b){this._changed=convertStringToBoolean(b)},setUpdateMode:function(b,d){this.autoUpdate="cell"==b;this.updateMode=b;this.dnd=d},ignore:function(b,d){this._silent_mode=!0;b.call(d||window);this._silent_mode=!1},setUpdated:function(b,d,e){if(!this._silent_mode){var f=this.findRow(b);e=e||"updated";var g=this.obj.getUserData(b,this.action_param);g&&"updated"==e&&(e=g);d?(this.set_invalid(b,!1),this.updatedRows[f]=b,this.obj.setUserData(b,this.action_param,e),this._in_progress[b]&&
(this._in_progress[b]="wait")):this.is_invalid(b)||(this.updatedRows.splice(f,1),this.obj.setUserData(b,this.action_param,""));d||this._clearUpdateFlag(b);this.markRow(b,d,e);d&&this.autoUpdate&&this.sendData(b)}},_clearUpdateFlag:function(){},markRow:function(b,d,e){var f="",g=this.is_invalid(b);g&&(f=this.styles[g],d=!0);if(this.callEvent("onRowMark",[b,d,e,g])&&(f=this.styles[d?e:"clear"]+f,this.obj[this._methods[0]](b,f,"invalid"==g||"error"==g),g&&g.details)){f+=this.styles[g+"_cell"];for(d=
0;d<g.details.length;d++)if(g.details[d])this.obj[this._methods[1]](b,d,f)}},getState:function(b){return this.obj.getUserData(b,this.action_param)},is_invalid:function(b){return this._invalid[b]},set_invalid:function(b,d,e){e&&(d={value:d,details:e,toString:function(){return this.value.toString()}});this._invalid[b]=d},checkBeforeUpdate:function(b){return!0},sendData:function(b){if(!this._waitMode||!("tree"==this.obj.mytype||this.obj._h2)){this.obj.editStop&&this.obj.editStop();if("undefined"==typeof b||
this._tSend)return this.sendAllData();if(this._in_progress[b])return!1;this.messages=[];if(!this.checkBeforeUpdate(b)&&this.callEvent("onValidationError",[b,this.messages]))return!1;this._beforeSendData(this._getRowData(b),b)}},_beforeSendData:function(b,d){if(!this.callEvent("onBeforeUpdate",[d,this.getState(d),b]))return!1;this._sendData(b,d)},serialize:function(b,d){if("string"==typeof b)return b;if("undefined"!=typeof d)return this.serialize_one(b,"");var e=[],f=[],g;for(g in b)b.hasOwnProperty(g)&&
(e.push(this.serialize_one(b[g],g+this.post_delim)),f.push(g));e.push("ids="+this.escape(f.join(",")));return e.join("&")},serialize_one:function(b,d){if("string"==typeof b)return b;var e=[],f;for(f in b)b.hasOwnProperty(f)&&e.push(this.escape((d||"")+f)+"="+this.escape(b[f]));return e.join("&")},_sendData:function(b,d){if(b){if(!this.callEvent("onBeforeDataSending",d?[d,this.getState(d),b]:[null,null,b]))return!1;d&&(this._in_progress[d]=(new Date).valueOf());var e=new dtmlXMLLoaderObject(this.afterUpdate,
this,!0),f=this.serverProcessor+(this._user?getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):"");"POST"!=this._tMode?e.loadXML(f+(-1!=f.indexOf("?")?"&":"?")+this.serialize(b,d)):e.loadXML(f,!0,this.serialize(b,d));this._waitMode++}this._in_progress_c=0;for(var g in this._in_progress)this._in_progress_c++},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var b=!0,d=0;d<this.updatedRows.length;d++)b&=this.checkBeforeUpdate(this.updatedRows[d]);
if(!b&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(d=0;d<this.updatedRows.length&&(this._in_progress[this.updatedRows[d]]||this.is_invalid(this.updatedRows[d])||!(this._beforeSendData(this._getRowData(this.updatedRows[d]),this.updatedRows[d]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2)));d++);}},_getAllData:function(){for(var b={},d=!1,e=0;e<this.updatedRows.length;e++){var f=this.updatedRows[e];!this._in_progress[f]&&
!this.is_invalid(f)&&this.callEvent("onBeforeUpdate",[f,this.getState(f)])&&(b[f]=this._getRowData(f,f+this.post_delim),d=!0,this._in_progress[f]=(new Date).valueOf())}return d?b:null},setVerificator:function(b,d){this.mandatoryFields[b]=d||function(b){return""!=b}},clearVerificator:function(b){this.mandatoryFields[b]=!1},findRow:function(b){for(var d=0,d=0;d<this.updatedRows.length&&b!=this.updatedRows[d];d++);return d},defineAction:function(b,d){this._uActions||(this._uActions=[]);this._uActions[b]=
d},afterUpdateCallback:function(b,d,e,f){var g=b,h="error"!=e&&"invalid"!=e;h||this.set_invalid(b,e);if(this._uActions&&this._uActions[e]&&!this._uActions[e](f))return delete this._in_progress[g];"wait"!=this._in_progress[g]&&(this.obj.getRowById&&this.obj.setRowAfterUpdated(b),this.setUpdated(b,!1));switch(e){case "inserted":case "insert":d!=b&&(this.obj[this._methods[2]](b,d),b=d);break;case "delete":case "deleted":return this.obj.setUserData(b,this.action_param,"true_deleted"),this.obj[this._methods[3]](b),
delete this._in_progress[g],this.callEvent("onAfterUpdate",[b,e,d,f])}"wait"!=this._in_progress[g]?(h&&this.obj.setUserData(b,this.action_param,""),delete this._in_progress[g]):(delete this._in_progress[g],this.setUpdated(d,!0,this.obj.getUserData(b,this.action_param)));this.callEvent("onAfterUpdate",[b,e,d,f])},afterUpdate:function(b,d,e,f,g){g.getXMLTopNode("data");e=0;if(g.xmlDoc){d=g.doXPath("//data/action");for(f=0;f<d.length;f++){g=d[f];var h=g.getAttribute("type"),l=g.getAttribute("sid"),m=
g.getAttribute("tid");b.afterUpdateCallback(l,m,h,g);b._in_progress[l]||e++}b.finalizeUpdate()}if(e<b._in_progress_c)for(var k in b._in_progress)"wait"!=b._in_progress[k]&&delete b._in_progress[k]},finalizeUpdate:function(){this._waitMode&&this._waitMode--;("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData();this.callEvent("onAfterUpdateFinish",[]);this.updatedRows.length&&this.callEvent("onFullSync",[])},init:function(b,d){this.obj=b;b._dataProcessor=this;this.obj._dp_init&&
this.obj._dp_init(this,d)},setOnAfterUpdate:function(b){this.attachEvent("onAfterUpdate",b)},bk:function(){},setOnBeforeUpdateHandler:function(b){this.attachEvent("onBeforeDataSending",b)},setAutoUpdate:function(b,d){b=b||2E3;this._user=d||(new Date).valueOf();this._need_update=!1;this._loader=null;this._update_busy=!1;this.attachEvent("onAfterUpdate",function(b,d,e,l){this.afterAutoUpdate(b,d,e,l)});this.attachEvent("onFullSync",function(){this.fullSync()});var e=this;window.setInterval(function(){e.loadUpdate()},
b)},afterAutoUpdate:function(b,d){return"collision"==d?(this._need_update=!0,!1):!0},fullSync:function(){!0==this._need_update&&(this._need_update=!1,this.loadUpdate());return!0},getUpdates:function(b,d){if(this._update_busy)return!1;this._update_busy=!0;this._loader=this._loader||new dtmlXMLLoaderObject(!0);this._loader.async=!0;this._loader.waitCall=d;this._loader.loadXML(b)},_v:function(b){return b.firstChild?b.firstChild.nodeValue:""},_a:function(b){for(var d=[],e=0;e<b.length;e++)d[e]=this._v(b[e]);
return d},loadUpdate:function(){var b=this,d=this.obj.getUserData(0,"version"),d=this.serverProcessor+getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+d].join("&"),d=d.replace("editing=true&","");this.getUpdates(d,function(){var d=b._loader.doXPath("//userdata");b.obj.setUserData(0,"version",b._v(d[0]));d=b._loader.doXPath("//update");if(d.length){b._silent_mode=!0;for(var f=0;f<d.length;f++){var g=d[f].getAttribute("status"),h=d[f].getAttribute("id"),l=d[f].getAttribute("parent");
switch(g){case "inserted":b.callEvent("insertCallback",[d[f],h,l]);break;case "updated":b.callEvent("updateCallback",[d[f],h,l]);break;case "deleted":b.callEvent("deleteCallback",[d[f],h,l])}}b._silent_mode=!1}b._update_busy=!1;b=null})}};
window.dhtmlXGridObject&&(dhtmlXGridObject.prototype.clear_url=function(b){b=b.replace(/(\?|\&)connector[^\f]*/g,"");return b+(-1!=b.indexOf("?")?"&":"?")+"connector=true"+(0<this.hdr.rows.length?"&dhx_no_header=1":"")},dhtmlXGridObject.prototype.combine_urls=function(b){return this.clear_url.call(this,b)+(this._connector_sorting||"")+(this._connector_filter||"")},dhtmlXGridObject.prototype.sorting_url=function(b,d,e){this._connector_sorting="&dhx_sort["+d+"]="+e;return this.combine_urls.call(this,
b)},dhtmlXGridObject.prototype.filtering_url=function(b,d,e,f){for(var g=[],h=",",l=0;l<d.length;l++)""!=e[l]&&(g.push("dhx_filter["+d[l]+"]="+encodeURIComponent(e[l])),h+=d[l]+",");this._connector_filter="&"+g.join("&");f&&"like"!=f&&(this._connector_filter+="&dhx_filter_equal=1");if(this.cellType&&-1==this._connector_filter.indexOf("&dhx_colls=")){d=[];for(l=0;l<this.cellType.length;l++)-1<h.indexOf(","+l+",")&&(0==this.cellType[l].indexOf("co")||0==this.cellType[l].indexOf("mathco")||2==this._con_f_used[l])&&
d.push(l);d.length&&(this._connector_filter+="&dhx_filter_colls="+d.join(","))}return this.combine_urls.call(this,b)},dhtmlXGridObject.prototype._init_point_connector=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){this._con_f_used=[].concat(this._con_f_used);dhtmlXGridObject.prototype._con_f_used=[];this.attachEvent("onCollectValues",function(b){return this._con_f_used[b]?"object"==typeof this._con_f_used[b]?this._con_f_used[b]:!1:!0});this.attachEvent("onDynXLS",
function(){this.xmlFileUrl&&(this.xmlFileUrl=this.combine_urls(this.xmlFileUrl));return!0});this.attachEvent("onBeforeSorting",function(b,d,e){this._dataProcessor&&this._dataProcessor.updatedRows.length&&(this._dataProcessor.updatedRows=[]);if("connector"==d){var f=this;this._invoke_by_connector=!0;this.clearAndLoad(this.sorting_url(this.xmlFileUrl,b,e),function(){f.setSortImgState(!0,b,e);f._invoke_by_connector=!1});return!1}return!0});this.attachEvent("onFilterStart",function(b,d){if(this._con_f_used.length){var e=
this;this._invoke_by_connector=!0;this._groups&&(this._groups=this.undefined);this.clearAndLoad(this.filtering_url(this.xmlFileUrl,b,d),function(){e._invoke_by_connector=!1;"undefined"!=typeof e._gIndex&&e.groupBy(e._gIndex,e._gmask.origin)});return!1}return!0});this.attachEvent("onXLE",function(b,d,e,f){});this._init_point_connector&&this._init_point_connector()},dhtmlXGridObject.prototype.connectorFilterBy=function(b,d,e){var f=[],g=[];if("object"==typeof b)if(b.length)f=b,g=d;else for(var h in b)f[f.length]=
h,g[g.length]=b[h];else isNaN(b)||(f[0]=b,g[0]=d);this.clearAndLoad(this.filtering_url(this.xmlFileUrl,f,g,e))},dhtmlXGridObject.prototype._con_f_used=[],dhtmlXGridObject.prototype._in_header_connector_text_filter=function(b,d){this._con_f_used[d]||(this._con_f_used[d]=1);return this._in_header_text_filter(b,d)},dhtmlXGridObject.prototype._in_header_connector_select_filter=function(b,d){this._con_f_used[d]||(this._con_f_used[d]=2);return this._in_header_select_filter(b,d)},dhtmlXGridObject.prototype.load_connector=
dhtmlXGridObject.prototype.load,dhtmlXGridObject.prototype.load=function(b,d,e){if(!this._colls_loaded&&this.cellType){for(var f=[],g=0;g<this.cellType.length;g++)(0==this.cellType[g].indexOf("co")||0==this.cellType[g].indexOf("mathco")||2==this._con_f_used[g])&&f.push(g);f.length&&(arguments[0]+=(-1!=arguments[0].indexOf("?")?"&":"?")+"connector=true&dhx_colls="+f.join(","))}return this.load_connector.apply(this,arguments)},dhtmlXGridObject.prototype.enableCollOptionsDistinct=function(b){this._collOptDistinct=
convertStringToBoolean(b)},dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead,dhtmlXGridObject.prototype._parseHead=function(b,d,e){this._parseHead_connector.apply(this,arguments);if(!this._colls_loaded){for(var f=this.xmlLoader.doXPath("./coll_options",arguments[0]),g=0;g<f.length;g++){var h=f[g].getAttribute("for"),l=[],m=null;if(-1<this.cellType[h].indexOf("combo"))m=this.getColumnCombo(h);else if(0==this.cellType[h].indexOf("co")||0==this.cellType[h].indexOf("mathco"))m=
this.getCombo(h);var k=this.xmlLoader.doXPath("./item",f[g]),n=[];if(m){for(var s=0;s<k.length;s++){for(var u=k[s].getAttribute("value"),v=k[s].getAttribute("label")||u,w=[],x=0;x<k[s].attributes.length;x++){var A=k[s].attributes[x];"value"!=A.name&&"label"!=A.name&&w.push([A.name,A.value])}convertStringToBoolean(k[s].getAttribute("disabled"));m.addOption?n.push([u,v]):this._collOptDistinct?m.put(u,v,w.length?w:null):(m.values[m.values.length]=v,m.keys[m.keys.length]=u,w.length&&(m.attrs[u]=w));l[l.length]=
[v,u]}n.length&&m.addOption(n)}else if(0==this.cellType[h].indexOf("clist2")||0==this.cellType[h].indexOf("clist")){s=0;m={};for(n=[];s<k.length;s++)u=k[s].getAttribute("value"),v=k[s].getAttribute("label"),u&&""!=u&&(m[u]=v),n[n.length]=v;0==this.cellType[h].indexOf("clist2")?this.registerCList2(h,m):this.registerCList(h,n)}this._con_f_used[1*h]&&(this._con_f_used[1*h]=l)}this._colls_loaded=!0}});
window.dataProcessor&&(dataProcessor.prototype.init_original=dataProcessor.prototype.init,dataProcessor.prototype.init=function(b){this.init_original.apply(this,arguments);b._dataprocessor=this;this.setTransactionMode("POST",!0);this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"});dhtmlxError.catchError("LoadXML",function(b,d,e){alert(b+"\n"+e[0].responseText)});window.dhtmlx||(window.dhtmlx={});
(function(){function b(b,d){var f=b.callback;e(!1);"prompt"==b.type&&(d=d?b.content.value:null);b.box.parentNode.removeChild(b.box);n=b.box=null;if(f)return f(d)}function d(d){if(n){d=d||event;var e=d.which||event.keyCode;dhtmlx.message.keyboard&&((13==e||32==e)&&b(n,!0),27==e&&b(n,!1));return!(d.cancelBubble=!0)||n&&"prompt"==n.type}}function e(b){e.cover||(e.cover=document.createElement("DIV"),e.cover.onkeydown=d,e.cover.className="dhx_modal_cover",document.body.appendChild(e.cover));e.cover.style.display=
b?"inline-block":"none"}function f(b,d){return"<div class='dhtmlx_popup_button' result='"+d+"' ><div>"+b+"</div></div>"}function g(b){s.area||(s.area=document.createElement("DIV"),s.area.className="dhtmlx_message_area",s.area.style[s.position]="5px",document.body.appendChild(s.area));s.hide(b.id);var d=document.createElement("DIV");d.innerHTML="<div>"+b.text+"</div>";d.className="dhtmlx-info dhtmlx-"+b.type;d.onclick=function(){s.hide(b.id);b=null};"bottom"==s.position&&s.area.firstChild?s.area.insertBefore(d,
s.area.firstChild):s.area.appendChild(d);0<b.expire&&(s.timers[b.id]=window.setTimeout(function(){s.hide(b.id)},b.expire));s.pull[b.id]=d;d=null;return b.id}function h(d,e,g){var h=document.createElement("DIV");h.className=" dhtmlx_modal_box dhtmlx-"+d.type;h.setAttribute("dhxbox",1);var k="";d.width&&(h.style.width=d.width);d.height&&(h.style.height=d.height);d.title&&(k+='<div class="dhtmlx_popup_title">'+d.title+"</div>");var l="";d.buttonAlign&&"center"!=d.buttonAlign&&(l="float:"+d.buttonAlign);
k+='<div class="dhtmlx_popup_text"><span>'+(d.content?"":d.text)+'</span></div><div  class="dhtmlx_popup_controls" style="'+l+'">';e&&(k+=f(d.ok||"OK",!0));g&&(k+=f(d.cancel||"Cancel",!1));if(d.buttons)for(l=0;l<d.buttons.length;l++)k+=f(d.buttons[l],l);h.innerHTML=k+"</div>";d.content&&(k=d.content,"string"==typeof k&&(k=document.getElementById(k)),"none"==k.style.display&&(k.style.display=""),h.childNodes[d.title?1:0].appendChild(k));h.onclick=function(e){e=e||event;e=e.target||e.srcElement;e.className||
(e=e.parentNode);"dhtmlx_popup_button"==e.className&&(e=e.getAttribute("result"),h.val=b(d,"true"==e||("false"==e?!1:e)))};d.box=h;if(e||g)n=d;return h}function l(b,f,g){f=b.tagName?b:h(b,f,g);b.hidden||e(!0);document.body.appendChild(f);g=b.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-f.offsetWidth)/2));var k=b.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-f.offsetHeight)/2));f.style.top="top"==b.position?"-3px":k+"px";
f.style.left=g+"px";f.onkeydown=d;if(5==document.documentMode&&(f.style.position="absolute",f.childNodes[2]))for(g=0;g<f.childNodes[2].childNodes.length;g++)f.childNodes[2].childNodes[g].style.display="inline";f.focus();b.hidden&&dhtmlx.modalbox.hide(f);return f}function m(b,d,e){"object"!=typeof b&&("function"==typeof d&&(e=d,d=""),b={text:b,type:d,callback:e});return b}function k(b,d,e,f){"object"!=typeof b&&(b={text:b,type:d,expire:e,id:f});b.id=b.id||s.uid();b.expire=b.expire||s.expire;return b}
var n=null;document.attachEvent?document.attachEvent("onkeydown",d):document.addEventListener("keydown",d,!0);dhtmlx.alert=function(){var b=m.apply(this,arguments);b.type=b.type||"confirm";return l(b,!0,!1)};dhtmlx.confirm=function(){var b=m.apply(this,arguments);b.type=b.type||"alert";return l(b,!0,!0)};dhtmlx.modalbox=function(){var b=m.apply(this,arguments);b.type=b.type||"alert";return l(b)};dhtmlx.prompt=function(){var b=m.apply(this,arguments);b.width=b.width||360;b.title=""!=b.text?b.text:
"&nbsp";b.type=b.type||"prompt";b.buttonAlign=b.buttonAlign||"right";b.ok=b.ok||"\u786e\u5b9a";b.cancel=b.cancel||"\u53d6\u6d88";var d=document.createElement("INPUT");d.style.width="100%";b.content=d;"function"!=typeof b.callback&&(b.callback=function(b){return b});return l(b,!0,!0)};dhtmlx.modalbox.hide=function(b){for(;b&&b.getAttribute&&!b.getAttribute("dhxbox");)b=b.parentNode;b&&(b.parentNode.removeChild(b),e(!1))};var s=dhtmlx.message=function(b,d,e,f){b=k.apply(this,arguments);b.type=b.type||
"info";switch(b.type.split("-")[0]){case "alert":return l(b,!0,!1);case "confirm":return l(b,!0,!0);case "modalbox":return l(b);case "prompt":return l(b,!0,!0);default:return g(b)}};s.seed=(new Date).valueOf();s.uid=function(){return s.seed++};s.expire=4E3;s.keyboard=!0;s.position="top";s.pull={};s.timers={};s.hideAll=function(){for(var b in s.pull)s.hide(b)};s.hide=function(b){var d=s.pull[b];d&&d.parentNode&&(window.setTimeout(function(){d.parentNode.removeChild(d);d=null},2E3),d.className+=" hidden",
s.timers[b]&&window.clearTimeout(s.timers[b]),delete s.pull[b])}})();window.dhx||(dhx={});dhx.version="3.0";dhx.codebase="./";dhx.name="Core";dhx.copy=function(b){var d=dhx.copy._function;d.prototype=b;return new d};dhx.copy._function=function(){};dhx.extend=function(b,d,e){b._dhx_proto_wait&&(b=b._dhx_proto_wait[0]);for(var f in d)if(!b[f]||e)b[f]=d[f];d.defaults&&dhx.extend(b.defaults,d.defaults);d.$init&&d.$init.call(b);return b};
dhx.fullCopy=function(b){var d=b.length?[]:{};1<arguments.length&&(d=arguments[0],b=arguments[1]);for(var e in b)b[e]&&"object"==typeof b[e]?(d[e]=b[e].length?[]:{},dhx.fullCopy(d[e],b[e])):d[e]=b[e];return d};dhx.single=function(b){var d=null;return function(e){d||(d=new b({}));d._reinit&&d._reinit.apply(d,arguments);return d}};
dhx.protoUI=function(){var b=arguments,d=b[0].name,e=function(f){if(b){for(var g=[b[0]],h=1;h<b.length;h++)g[h]=b[h],g[h]._dhx_proto_wait&&(g[h]=g[h].call(dhx)),g[h].prototype&&g[h].prototype.name&&(dhx.ui[g[h].prototype.name]=g[h]);dhx.ui[d]=dhx.proto.apply(dhx,g);if(e._dhx_type_wait)for(h=0;h<e._dhx_type_wait.length;h++)dhx.Type(dhx.ui[d],e._dhx_type_wait[h]);e=b=null}return this!=dhx?new dhx.ui[d](f):dhx.ui[d]};e._dhx_proto_wait=arguments;return dhx.ui[d]=e};
dhx.proto=function(){for(var b=arguments,d=b[0],e=!!d.$init,f=[],g=b.length-1;0<g;g--){"function"==typeof b[g]&&(b[g]=b[g].prototype);b[g].$init&&f.push(b[g].$init);if(b[g].defaults){var h=b[g].defaults;d.defaults||(d.defaults={});for(var l in h)dhx.isNotDefined(d.defaults[l])&&(d.defaults[l]=h[l])}if(b[g].type&&d.type)for(l in b[g].type)d.type[l]||(d.type[l]=b[g].type[l]);for(var m in b[g])d[m]||(d[m]=b[g][m])}e&&f.push(d.$init);d.$init=function(){for(var b=0;b<f.length;b++)f[b].apply(this,arguments)};
e=function(b){this.$ready=[];this.$init(b);this._parseSettings&&this._parseSettings(b,this.defaults);for(b=0;b<this.$ready.length;b++)this.$ready[b].call(this)};e.prototype=d;d=b=null;return e};dhx.bind=function(b,d){return function(){return b.apply(d,arguments)}};dhx.require=function(b){dhx._modules[b]||(dhx.exec(dhx.ajax().sync().get(dhx.codebase+b).responseText),dhx._modules[b]=!0)};dhx._modules={};dhx.exec=function(b){window.execScript?window.execScript(b):window.eval(b)};
dhx.wrap=function(b,d){return!b?d:function(){var e=b.apply(this,arguments);d.apply(this,arguments);return e}};dhx.methodPush=function(b,d){return function(){return b[d].apply(b,arguments)}};dhx.isNotDefined=function(b){return"undefined"==typeof b};dhx.delay=function(b,d,e,f){return window.setTimeout(function(){var f=b.apply(d,e||[]);b=d=e=null;return f},f||1)};dhx.uid=function(){this._seed||(this._seed=(new Date).valueOf());this._seed++;return this._seed};
dhx.toNode=function(b){return"string"==typeof b?document.getElementById(b):b};dhx.toArray=function(b){return dhx.extend(b||[],dhx.PowerArray,!0)};dhx.toFunctor=function(b){return"string"==typeof b?eval(b):b};dhx.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)};dhx._events={};dhx.event=function(b,d,e,f){b=dhx.toNode(b);var g=dhx.uid();f&&(e=dhx.bind(e,f));dhx._events[g]=[b,d,e];b.addEventListener?b.addEventListener(d,e,!1):b.attachEvent&&b.attachEvent("on"+d,e);return g};
dhx.eventRemove=function(b){if(b){var d=dhx._events[b];d[0].removeEventListener?d[0].removeEventListener(d[1],d[2],!1):d[0].detachEvent&&d[0].detachEvent("on"+d[1],d[2]);delete this._events[b]}};
dhx.EventSystem={$init:function(){this._events={};this._handlers={};this._map={}},blockEvent:function(){this._events._block=!0},unblockEvent:function(){this._events._block=!1},mapEvent:function(b){dhx.extend(this._map,b,!0)},callEvent:function(b,d){if(this._events._block)return!0;b=b.toLowerCase();var e=this._events[b.toLowerCase()],f=!0;if(e)for(var g=0;g<e.length;g++)if(!1===e[g].apply(this,d||[]))f=!1;this._map[b]&&!this._map[b].callEvent(b,d)&&(f=!1);return f},attachEvent:function(b,d,e){b=b.toLowerCase();
e=e||dhx.uid();d=dhx.toFunctor(d);var f=this._events[b]||dhx.toArray();f.push(d);this._events[b]=f;this._handlers[e]={f:d,t:b};return e},detachEvent:function(b){this._handlers[b]&&(this._events[this._handlers[b].t].remove(this._handlers[b].f),delete this._handlers[b])},hasEvent:function(b){b=b.toLowerCase();return this._events[b]?!0:!1}};dhx.extend(dhx,dhx.EventSystem);
dhx.PowerArray={removeAt:function(b,d){0<=b&&this.splice(b,d||1)},remove:function(b){this.removeAt(this.find(b))},insertAt:function(b,d){if(!d&&0!==d)this.push(b);else{var e=this.splice(d,this.length-d);this[d]=b;this.push.apply(this,e)}},find:function(b){for(var d=0;d<this.length;d++)if(b==this[d])return d;return-1},each:function(b,d){for(var e=0;e<this.length;e++)b.call(d||this,this[e])},map:function(b,d){for(var e=0;e<this.length;e++)this[e]=b.call(d||this,this[e]);return this}};dhx.env={};
(function(){-1!=navigator.userAgent.indexOf("Mobile")&&(dhx.env.mobile=!0);if(dhx.env.mobile||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android"))dhx.env.touch=!0;-1!=navigator.userAgent.indexOf("Opera")?dhx.env.isOpera=!0:(dhx.env.isIE=!!document.all,dhx.env.isFF=!document.all,dhx.env.isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),dhx.env.isSafari=dhx.env.isWebKit&&-1!=navigator.userAgent.indexOf("Mac"));-1!=navigator.userAgent.toLowerCase().indexOf("android")&&
(dhx.env.isAndroid=!0);dhx.env.transform=!1;dhx.env.transition=!1;for(var b={names:["transform","transition"],transform:["transform","WebkitTransform","MozTransform","oTransform","msTransform"],transition:["transition","WebkitTransition","MozTransition","oTransition","msTransition"]},d=document.createElement("DIV"),e=0;e<b.names.length;e++)for(var f=b[b.names[e]],g=0;g<f.length;g++)if("undefined"!=typeof d.style[f[g]]){dhx.env[b.names[e]]=f[g];break}d.style[dhx.env.transform]="translate3d(0,0,0)";
dhx.env.translate=d.style[dhx.env.transform]?"translate3d":"translate";var b=dhx.env,h;dhx.env.isOpera?h="-o-":(h="",dhx.env.isFF&&(h="-Moz-"),dhx.env.isWebKit&&(h="-webkit-"),dhx.env.isIE&&(h="-ms-"));b.transformCSSPrefix=h;dhx.env.transformPrefix=dhx.env.transformCSSPrefix.replace(/-/gi,"");dhx.env.transitionEnd="-Moz-"==dhx.env.transformCSSPrefix?"transitionend":dhx.env.transformPrefix+"TransitionEnd"})();
dhx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();
dhx.html={create:function(b,d,e){d=d||{};b=document.createElement(b);for(var f in d)b.setAttribute(f,d[f]);d.style&&(b.style.cssText=d.style);d["class"]&&(b.className=d["class"]);e&&(b.innerHTML=e);return b},getValue:function(b){b=dhx.toNode(b);return!b?"":dhx.isNotDefined(b.value)?b.innerHTML:b.value},remove:function(b){if(b instanceof Array)for(var d=0;d<b.length;d++)this.remove(b[d]);else b&&b.parentNode&&b.parentNode.removeChild(b)},insertBefore:function(b,d,e){b&&(d&&d.parentNode?d.parentNode.insertBefore(b,
d):e.appendChild(b))},locate:function(b,d){if(b.tagName)var e=b;else b=b||event,e=b.target||b.srcElement;for(;e;){if(e.getAttribute){var f=e.getAttribute(d);if(f)return f}e=e.parentNode}return null},offset:function(b){if(b.getBoundingClientRect){b=b.getBoundingClientRect();var d=document.body,e=document.documentElement,f=b.top+(window.pageYOffset||e.scrollTop||d.scrollTop)-(e.clientTop||d.clientTop||0),d=b.left+(window.pageXOffset||e.scrollLeft||d.scrollLeft)-(e.clientLeft||d.clientLeft||0);return{y:Math.round(f),
x:Math.round(d)}}for(d=f=0;b;)f+=parseInt(b.offsetTop,10),d+=parseInt(b.offsetLeft,10),b=b.offsetParent;return{y:f,x:d}},pos:function(b){b=b||event;if(b.pageX||b.pageY)return{x:b.pageX,y:b.pageY};var d=dhx.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:b.clientX+d.scrollLeft-d.clientLeft,y:b.clientY+d.scrollTop-d.clientTop}},preventEvent:function(b){b&&b.preventDefault&&b.preventDefault();return dhx.html.stopEvent(b)},stopEvent:function(b){(b||event).cancelBubble=
!0;return!1},addCss:function(b,d){b.className+=" "+d},removeCss:function(b,d){b.className=b.className.replace(RegExp(" "+d,"g"),"")}};dhx.ready=function(b){this._ready?b.call():this._ready_code.push(b)};dhx._ready_code=[];
(function(){var b=document.getElementsByTagName("SCRIPT");b.length&&(b=(b[b.length-1].getAttribute("src")||"").split("/"),b.splice(b.length-1,1),dhx.codebase=b.slice(0,b.length).join("/")+"/");dhx.event(window,"load",function(){dhx.callEvent("onReady",[]);dhx.delay(function(){dhx._ready=!0;for(var b=0;b<dhx._ready_code.length;b++)dhx._ready_code[b].call();dhx._ready_code=[]})})})();dhx.ui={};dhx.ui.zIndex=function(){return dhx.ui._zIndex++};dhx.ui._zIndex=1;
dhx.ready(function(){dhx.event(document.body,"click",function(b){dhx.callEvent("onClick",[b||event])})});
(function(){var b={};dhx.Template=function(d){if("function"==typeof d)return d;if(b[d])return b[d];d=(d||"").toString();if(-1!=d.indexOf("->"))switch(d=d.split("->"),d[0]){case "html":d=dhx.html.getValue(d[1]);break;case "http":d=(new dhx.ajax).sync().get(d[1],{uid:dhx.uid()}).responseText}d=(d||"").toString();d=d.replace(/(\r\n|\n)/g,"\\n");d=d.replace(/(\")/g,'\\"');d=d.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');d=d.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"");
d=d.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj,common):"")+"');d=d.replace(/\{obj\.([^}]*)\}/g,"\"+(obj.$1||'')+\"");d=d.replace(/#([$a-z0-9_\[\]]+)#/gi,"\"+(obj.$1||'')+\"");d=d.replace(/\{obj\}/g,'"+obj+"');d=d.replace(/\{-obj/g,"{obj");d=d.replace(/\{-common/g,"{common");d='return "'+d+'";';try{Function("obj","common",d)}catch(e){}return b[d]=Function("obj","common",d)};dhx.Template.empty=function(){return""};dhx.Template.bind=function(b){return dhx.bind(dhx.Template(b),
this)};dhx.Type=function(b,e){if(b._dhx_proto_wait)b._dhx_type_wait||(b._dhx_type_wait=[]),b._dhx_type_wait.push(e);else{"function"==typeof b&&(b=b.prototype);b.types||(b.types={"default":b.type},b.type.name="default");var f=e.name,g=b.type;f&&(g=b.types[f]=dhx.copy(b.type));for(var h in e)g[h]=0===h.indexOf("template")?dhx.Template(e[h]):e[h];return f}}})();
dhx.Settings={$init:function(){this._settings=this.config={}},define:function(b,d){return"object"==typeof b?this._parseSeetingColl(b):this._define(b,d)},_define:function(b,d){var e=this[b+"_setter"];return this._settings[b]=e?e.call(this,d,b):d},_parseSeetingColl:function(b){if(b)for(var d in b)this._define(d,b[d])},_parseSettings:function(b,d){var e={};d&&(e=dhx.extend(e,d));"object"==typeof b&&!b.tagName&&dhx.extend(e,b,!0);this._parseSeetingColl(e)},_mergeSettings:function(b,d){for(var e in d)switch(typeof b[e]){case "object":b[e]=
this._mergeSettings(b[e]||{},d[e]);break;case "undefined":b[e]=d[e]}return b}};dhx.ajax=function(b,d,e){if(0!==arguments.length){var f=new dhx.ajax;e&&(f.master=e);f.get(b,null,d)}return!this.getXHR?new dhx.ajax:this};
dhx.ajax.prototype={getXHR:function(){return dhx.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(b,d,e){var f=this.getXHR();"function"==typeof e&&(e=[e]);if("object"==typeof d){var g=[],h;for(h in d){var l=d[h];if(null===l||l===dhx.undefined)l="";g.push(h+"="+encodeURIComponent(l))}d=g.join("&")}d&&!this.post&&(b=b+(-1!=b.indexOf("?")?"&":"?")+d,d=null);f.open(this.post?"POST":"GET",b,!this._sync);this.post&&f.setRequestHeader("Content-type","application/x-www-form-urlencoded");
var m=this;f.onreadystatechange=function(){if(!f.readyState||4==f.readyState){if(e&&m)for(var b=0;b<e.length;b++)e[b]&&e[b].call(m.master||m,f.responseText,f.responseXML,f);e=m=m.master=null}};f.send(d||null);return f},get:function(b,d,e){this.post=!1;return this.send(b,d,e)},post:function(b,d,e){this.post=!0;return this.send(b,d,e)},sync:function(){this._sync=!0;return this}};
dhx.AtomDataLoader={$init:function(b){this.data={};b&&(this._settings.datatype=b.datatype||"json",this.$ready.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0;this._settings.url&&this.url_setter(this._settings.url);this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(b){if(!this._ready_for_data)return b;this.load(b,this._settings.datatype);return b},data_setter:function(b){if(!this._ready_for_data)return b;this.parse(b,this._settings.datatype);
return!0},load:function(b,d,e){this.callEvent("onXLS",[]);"string"==typeof d?(this.data.driver=dhx.DataDriver[d],d=e):this.data.driver=dhx.DataDriver.json;dhx.ajax(b,[this._onLoad,d],this)},parse:function(b,d){this.callEvent("onXLS",[]);this.data.driver=dhx.DataDriver[d||"json"];this._onLoad(b,null)},_onLoad:function(b,d){var e=this.data.driver,f=e.getRecords(e.toObject(b,d))[0];this.data=e?e.getDetails(f):b;this.callEvent("onXLE",[])},_check_data_feed:function(b){if(!this._settings.dataFeed||this._ignore_feed||
!b)return!0;var d=this._settings.dataFeed,d=d+(-1==d.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(b.id||b);this.callEvent("onXLS",[]);dhx.ajax(d,function(b){this._ignore_feed=!0;this.setValues(dhx.DataDriver.json.toObject(b)[0]);this._ignore_feed=!1;this.callEvent("onXLE",[])},this);return!1}};dhx.DataDriver={};
dhx.DataDriver.json={toObject:function(b){b||(b="[]");"string"==typeof b&&(eval("dhx.temp="+b),b=dhx.temp);if(b.data){var d=b.data;d.pos=b.pos;d.total_count=b.total_count;b=d}return b},getRecords:function(b){return b&&!dhx.isArray(b)?[b]:b},getDetails:function(b){return b},getInfo:function(b){return{_size:b.total_count||0,_from:b.pos||0}}};
dhx.DataDriver.json_ext={toObject:function(b){b||(b="[]");if("string"==typeof b){eval("temp="+b);dhx.temp=[];b=(void 0).header;for(var d=0;d<(void 0).data.length;d++){for(var e={},f=0;f<b.length;f++)"undefined"!=typeof(void 0).data[d][f]&&(e[b[f]]=(void 0).data[d][f]);dhx.temp.push(e)}return dhx.temp}return b},getRecords:function(b){return b&&!dhx.isArray(b)?[b]:b},getDetails:function(b){return b},getInfo:function(b){return{_size:b.total_count||0,_from:b.pos||0}}};
dhx.DataDriver.html={toObject:function(b){if("string"==typeof b){var d=null;-1==b.indexOf("<")&&(d=dhx.toNode(b));d||(d=document.createElement("DIV"),d.innerHTML=b);return d.getElementsByTagName(this.tag)}return b},getRecords:function(b){return b.tagName?b.childNodes:b},getDetails:function(b){return dhx.DataDriver.xml.tagToObject(b)},getInfo:function(){return{_size:0,_from:0}},tag:"LI"};
dhx.DataDriver.jsarray={toObject:function(b){return"string"==typeof b?(eval("dhx.temp="+b),dhx.temp):b},getRecords:function(b){return b},getDetails:function(b){for(var d={},e=0;e<b.length;e++)d["data"+e]=b[e];return d},getInfo:function(){return{_size:0,_from:0}}};
dhx.DataDriver.csv={toObject:function(b){return b},getRecords:function(b){return b.split(this.row)},getDetails:function(b){b=this.stringToArray(b);for(var d={},e=0;e<b.length;e++)d["data"+e]=b[e];return d},getInfo:function(){return{_size:0,_from:0}},stringToArray:function(b){b=b.split(this.cell);for(var d=0;d<b.length;d++)b[d]=b[d].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return b},row:"\n",cell:","};
dhx.DataDriver.xml={toObject:function(b,d){return d&&(d=this.checkResponse(b,d))?d:"string"==typeof b?this.fromString(b):b},getRecords:function(b){return this.xpath(b,this.records)},records:"/*/item",getDetails:function(b){return this.tagToObject(b,{})},getInfo:function(b){return{_size:b.documentElement.getAttribute("total_count")||0,_from:b.documentElement.getAttribute("pos")||0}},xpath:function(b,d){if(window.XPathResult){var e=b;-1==b.nodeName.indexOf("document")&&(b=b.ownerDocument);for(var f=
[],e=b.evaluate(d,e,null,XPathResult.ANY_TYPE,null),g=e.iterateNext();g;)f.push(g),g=e.iterateNext();return f}f=!0;try{"undefined"==typeof b.selectNodes&&(f=!1)}catch(h){}if(f)return b.selectNodes(d);f=d.split("/").pop();return b.getElementsByTagName(f)},tagToObject:function(b,d){d=d||{};var e=!1,f=b.attributes;if(f&&f.length){for(var g=0;g<f.length;g++)d[f[g].name]=f[g].value;e=!0}f=b.childNodes;for(g=0;g<f.length;g++)1==f[g].nodeType&&(e=f[g].tagName,"undefined"!=typeof d[e]?(dhx.isArray(d[e])||
(d[e]=[d[e]]),d[e].push(this.tagToObject(f[g],{}))):d[f[g].tagName]=this.tagToObject(f[g],{}),e=!0);if(!e)return this.nodeValue(b);d.value=this.nodeValue(b);return d},nodeValue:function(b){return b.firstChild?b.firstChild.data:""},fromString:function(b){if(window.DOMParser)return(new DOMParser).parseFromString(b,"text/xml");if(window.ActiveXObject){var d=new ActiveXObject("Microsoft.xmlDOM");d.loadXML(b);return d}},checkResponse:function(b,d){if(d&&d.firstChild&&"parsererror"!=d.firstChild.tagName)return d;
var e=this.fromString(b.replace(/^[\s]+/,""));if(e)return e}};
dhx.DataLoader=dhx.proto({$init:function(b){name="DataStore";this.data=(b||"").datastore||new dhx.DataStore;this._readyHandler=this.data.attachEvent("onStoreLoad",dhx.bind(this._call_onready,this))},load:function(b,d){dhx.AtomDataLoader.load.apply(this,arguments);this.data.feed||(this.data.url=b,this.data.feed=function(d,f){if(this._load_count)return this._load_count=[d,f];this._load_count=!0;this.load(b+(-1==b.indexOf("?")?"?":"&")+"start="+d+"&count="+f,function(){var b=this._load_count;this._load_count=
!1;"object"==typeof b?this.data.feed.apply(this,b):this.showItem&&this.dataCount()>d+1&&this.showItem(this.idByIndex(d+1))})})},loadNext:function(b,d){this.data.feed&&this.data.feed.call(this,d||this.dataCount(),b)},_onLoad:function(b,d){this.data._parse(this.data.driver.toObject(b,d));this.callEvent("onXLE",[]);this._readyHandler&&(this.data.detachEvent(this._readyHandler),this._readyHandler=null)},scheme_setter:function(b){this.data.scheme(b)},dataFeed_setter:function(b){this.data.attachEvent("onBeforeFilter",
dhx.bind(function(b,e){if(this._settings.dataFeed){var f={};if(b||f){if("function"==typeof b){if(!e)return;b(e,f)}else f={text:e};this.clearAll();var g=this._settings.dataFeed,h=[],l;for(l in f)h.push("dhx_filter["+l+"]="+encodeURIComponent(f[l]));this.load(g+(0>g.indexOf("?")?"?":"&")+h.join("&"),this._settings.datatype);return!1}}},this));return b},_call_onready:function(){if(this._settings.ready){var b=dhx.toFunctor(this._settings.ready);b&&b.call&&b.apply(this,arguments)}}},dhx.AtomDataLoader).prototype;
dhx.DataStore=function(){this.name="DataStore";dhx.extend(this,dhx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhx.toArray()};
dhx.DataStore.prototype={setDriver:function(b){this.driver=dhx.DataDriver[b]},_parse:function(b){this.callEvent("onParse",[this.driver,b]);this._filter_order&&this.filter();var d=this.driver.getInfo(b),e=this.driver.getRecords(b),f=1*(d._from||0);0===f&&this.order[0]&&(f=this.order.length);for(var g=0,h=0;h<e.length;h++){var l=this.driver.getDetails(e[h]),m=this.id(l);this.pull[m]||(this.order[g+f]=m,g++);this.pull[m]=l;this.extraParser&&this.extraParser(l);this._scheme&&(this._scheme.$init?this._scheme.$init(l):
this._scheme.$update&&this._scheme.$update(l))}this.order[d._size-1]||(this.order[d._size-1]=dhx.undefined);this.callEvent("onStoreLoad",[this.driver,b]);this.refresh()},id:function(b){return b.id||(b.id=dhx.uid())},changeId:function(b,d){this.pull[d]=this.pull[b];this.pull[d].id=d;this.order[this.order.find(b)]=d;this._filter_order&&(this._filter_order[this._filter_order.find(b)]=d);this.callEvent("onIdChange",[b,d]);this._render_change_id&&this._render_change_id(b,d);delete this.pull[b]},item:function(b){return this.pull[b]},
update:function(b,d){this._scheme&&this._scheme.$update&&this._scheme.$update(d);if(!1===this.callEvent("onBeforeUpdate",[b,d]))return!1;this.pull[b]=d;this.refresh(b)},refresh:function(b){this._skip_refresh||(b?this.callEvent("onStoreUpdated",[b,this.pull[b],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(b,d){this._skip_refresh=!0;b.call(d||this);this._skip_refresh=!1},getRange:function(b,d){b=b?this.indexById(b):this.startOffset||0;d?d=this.indexById(d):(d=Math.min(this.endOffset||
Infinity,this.dataCount()-1),0>d&&(d=0));if(b>d){var e=d;d=b;b=e}return this.getIndexRange(b,d)},getIndexRange:function(b,d){d=Math.min(d||Infinity,this.dataCount()-1);for(var e=dhx.toArray(),f=b||0;f<=d;f++)e.push(this.item(this.order[f]));return e},dataCount:function(){return this.order.length},exists:function(b){return!!this.pull[b]},move:function(b,d){if(!(0>b||0>d)){var e=this.idByIndex(b),f=this.item(e);this.order.removeAt(b);this.order.insertAt(e,Math.min(this.order.length,d));this.callEvent("onStoreUpdated",
[e,f,"move"])}},scheme:function(b){this._scheme=b},sync:function(b,d,e){"function"!=typeof d&&(e=d,d=null);dhx.debug_bind&&(this.debug_sync_master=b);"DataStore"!=b.name&&(b=b.data);var f=dhx.bind(function(){this.order=dhx.toArray([].concat(b.order));this._filter_order=null;this.pull=b.pull;d&&this.silent(d);this._on_sync&&this._on_sync();e?e=!1:this.refresh()},this);b.attachEvent("onStoreUpdated",f);f()},add:function(b,d){if(this._scheme){b=b||{};for(var e in this._scheme)b[e]=b[e]||this._scheme[e];
this._scheme.$init?this._scheme.$init(b):this._scheme.$update&&this._scheme.$update(b)}e=this.id(b);var f=this.dataCount();if(dhx.isNotDefined(d)||0>d)d=f;d>f&&(d=Math.min(this.order.length,d));if(!1===this.callEvent("onBeforeAdd",[e,b,d]))return!1;if(this.exists(e))return null;this.pull[e]=b;this.order.insertAt(e,d);this._filter_order&&(f=this._filter_order.length,!d&&this.order.length&&(f=0),this._filter_order.insertAt(e,f));this.callEvent("onafterAdd",[e,d]);this.callEvent("onStoreUpdated",[e,
b,"add"]);return e},remove:function(b){if(dhx.isArray(b))for(var d=0;d<b.length;d++)this.remove(b[d]);else{if(!1===this.callEvent("onBeforeDelete",[b]))return!1;if(!this.exists(b))return null;d=this.item(b);this.order.remove(b);this._filter_order&&this._filter_order.remove(b);delete this.pull[b];this.callEvent("onafterdelete",[b]);this.callEvent("onStoreUpdated",[b,d,"delete"])}},clearAll:function(){this.pull={};this.order=dhx.toArray();this._filter_order=null;this.callEvent("onClearAll",[]);this.refresh()},
idByIndex:function(b){return this.order[b]},indexById:function(b){return this.order.find(b)},next:function(b,d){return this.order[this.indexById(b)+(d||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(b,d){return this.order[this.indexById(b)-(d||1)]},sort:function(b,d,e){var f=b;"function"==typeof b?f={as:b,dir:d}:"string"==typeof b&&(f={by:b,dir:d,as:e});b=[f.by,f.dir,f.as];this.callEvent("onbeforesort",b)&&(this.order.length&&
(f=dhx.sort.create(f),d=this.getRange(this.first(),this.last()),d.sort(f),this.order=d.map(function(b){return this.id(b)},this)),this.refresh(),this.callEvent("onaftersort",b))},filter:function(b,d,e){if(this.callEvent("onBeforeFilter",[b,d])&&(this._filter_order&&!e&&(this.order=this._filter_order,delete this._filter_order),this.order.length)){if(b){var f=b;d=d||"";"string"==typeof b&&(b=dhx.Template(b),d=d.toString().toLowerCase(),f=function(d,e){return-1!=b(d).toLowerCase().indexOf(e)});for(var g=
dhx.toArray(),h=0;h<this.order.length;h++){var l=this.order[h];f(this.item(l),d)&&g.push(l)}e||(this._filter_order=this.order);this.order=g}this.refresh();this.callEvent("onAfterFilter",[])}},each:function(b,d){for(var e=0;e<this.order.length;e++)b.call(d||this,this.item(this.order[e]))},provideApi:function(b,d){this.debug_bind_master=b;d&&this.mapEvent({onbeforesort:b,onaftersort:b,onbeforeadd:b,onafteradd:b,onbeforedelete:b,onafterdelete:b,onbeforeupdate:b});for(var e="sort add remove exists idByIndex indexById item update refresh dataCount filter next previous clearAll first last serialize sync".split(" "),
f=0;f<e.length;f++)b[e[f]]=dhx.methodPush(this,e[f])},serialize:function(){for(var b=this.order,d=[],e=0;e<b.length;e++)d.push(this.pull[b[e]]);return d}};
dhx.sort={create:function(b){return dhx.sort.dir(b.dir,dhx.sort.by(b.by,b.as))},as:{"int":function(b,d){b*=1;d*=1;return b>d?1:b<d?-1:0},string_strict:function(b,d){b=b.toString();d=d.toString();return b>d?1:b<d?-1:0},string:function(b,d){b=b.toString().toLowerCase();d=d.toString().toLowerCase();return b>d?1:b<d?-1:0}},by:function(b,d){if(!b)return d;"function"!=typeof d&&(d=dhx.sort.as[d||"string"]);b=dhx.Template(b);return function(e,f){return d(b(e),b(f))}},dir:function(b,d){return"asc"==b?d:function(b,
f){return-1*d(b,f)}}};
dhx.BaseBind={bind:function(b,d,e){"string"==typeof b&&(b=dhx.ui.get(b));b._initBindSource&&b._initBindSource();this._initBindSource&&this._initBindSource();b.getBindData||dhx.extend(b,dhx.BindSource);if(!this._bind_ready){var f=this.render;if(this.filter){var g=this._settings.id;this.data._on_sync=function(){b._bind_updated[g]=!1}}this.render=function(){if(!this._in_bind_processing)return this._in_bind_processing=!0,this.callEvent("onBindRequest"),this._in_bind_processing=!1,f.call(this)};if(this.getValue||
this.getValues)this.save=function(){if(!this.validate||this.validate())b.setBindData(this.getValue?this.getValue:this.getValues(),this._settings.id)};this._bind_ready=!0}b.addBind(this._settings.id,d,e);this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){b.getBindData(this._settings.id)});this.isVisible(this._settings.id)&&this.refresh()}};
dhx.BindSource={$init:function(){this._bind_hash={};this._bind_updated={};this._ignore_binds={};this._bind_specific_rules(this)},setBindData:function(b,d){d&&(this._ignore_binds[d]=!0);if(this.setValue)this.setValue(b);else if(this.setValues)this.setValues(b);else{var e=this.getCursor();e&&(b=dhx.extend(this.item(e),b,!0),this.update(e,b))}this.callEvent("onBindUpdate",[b,d]);this.save&&this.save();d&&(this._ignore_binds[d]=!1)},getBindData:function(b,d){if(!this._bind_updated[b]){var e=dhx.ui.get(b);
e.isVisible(e._settings.id)&&(this._bind_updated[b]=!0,this._bind_update(e,this._bind_hash[b][0],this._bind_hash[b][1]),d&&e.filter&&e.refresh())}},addBind:function(b,d,e){this._bind_hash[b]=[d,e]},_bind_specific_rules:function(b){b.filter?dhx.extend(this,dhx.CollectionBind):b.setValue?dhx.extend(this,dhx.ValueBind):dhx.extend(this,dhx.RecordBind)},_update_binds:function(){for(var b in this._bind_hash)this._ignore_binds[b]||(this._bind_updated[b]=!1,this.getBindData(b,!0))},_bind_update_common:function(b,
d,e){b.setValue?b.setValue(e?e[d]:e):b.filter?b.data.silent(function(){this.filter(d,e)}):!e&&b.clear?b.clear():b._check_data_feed(e)&&b.setValues(dhx.copy(e))}};
dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return!0},$init:function(b){b=(this.data=b)&&b.id?b.id:dhx.uid();this._settings={id:b};dhx.ui.views[b]=this},setValue:function(b){this.data=b;this.callEvent("onChange",[b])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind);
dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(b){this.data=b||{};b=b&&b.id?b.id:dhx.uid();this._settings={id:b};dhx.ui.views[b]=this},getValues:function(){return this.data},setValues:function(b){this.data=b;this.callEvent("onChange",[b])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind);
dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){return!this.data.order.length&&!this.data._filter_order&&!this._settings.dataFeed?!1:!0},$init:function(b){this.data.provideApi(this,!0);b=b&&b.id?b.id:dhx.uid();this._settings.id=b;dhx.ui.views[b]=this;this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},dhx.EventSystem,dhx.DataLoader,dhx.BaseBind,dhx.Settings);
dhx.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(b,d,e){var f=this.getValue()||"";e&&(f=e(f));b.setValue?b.setValue(f):b.filter?b.data.silent(function(){this.filter(d,f)}):(e={},e[d]=f,b._check_data_feed(f)&&b.setValues(e))}};dhx.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(b,d){var e=this.getValues()||null;this._bind_update_common(b,d,e)}};
dhx.CollectionBind={$init:function(){this._cursor=null;this.attachEvent("onSelectChange",function(){this.setCursor(this.getSelected())});this.attachEvent("onAfterCursorChange",this._update_binds);this.data.attachEvent("onStoreUpdated",dhx.bind(function(b){b&&b==this.getCursor()&&this._update_binds()},this));this.data.attachEvent("onClearAll",dhx.bind(function(){this._cursor=null},this));this.data.attachEvent("onIdChange",dhx.bind(function(b,d){this._cursor==b&&(this._cursor=d)},this))},setCursor:function(b){b!=
this._cursor&&this.item(b)&&(this.callEvent("onBeforeCursorChange",[this._cursor]),this._cursor=b,this.callEvent("onAfterCursorChange",[b]))},getCursor:function(){return this._cursor},_bind_update:function(b,d){var e=this.item(this.getCursor())||null;this._bind_update_common(b,d,e)}};dhx.ui.views||(dhx.ui.views={},dhx.ui.get=function(b){return b._settings?b:dhx.ui.views[b]});
dhtmlXDataStore=function(b){b=new dhx.DataCollection(b);b._dp_init=function(b){b._methods=["dummy","dummy","changeId","dummy"];this.data._old_names={add:"inserted",update:"updated","delete":"deleted"};this.data.attachEvent("onStoreUpdated",function(e,f,g){e&&!b._silent&&b.setUpdated(e,!0,this._old_names[g])});b._getRowData=function(b){var d=this.obj.data.item(b);b={id:b,"!nativeeditor_status":this.obj.getUserData(b)};if(d)for(var g in d)0!==g.indexOf("_")&&(b[g]=d[g]);return b};this.changeId=function(e,
f){this.data.changeId(e,f);b._silent=!0;this.data.callEvent("onStoreUpdated",[f,this.item(f),"update"]);b._silent=!1};b._clearUpdateFlag=function(){};this._userdata={}};b.dummy=function(){};b.setUserData=function(b,e,f){this._userdata[b]=f};b.getUserData=function(b){return this._userdata[b]};return b};
window.dhtmlXDataView&&(dhtmlXDataView.prototype._initBindSource=function(){this.isVisible=function(){return!this.data.order.length&&!this.data._filter_order&&!this._settings.dataFeed?!1:!0};this._settings.id||(this._settings.id=dhx.uid());dhx.ui.views[this._settings.id]=this});
window.dhtmlXChart&&(dhtmlXChart.prototype._initBindSource=function(){this.isVisible=function(){return!this.data.order.length&&!this.data._filtered_state&&!this._settings.dataFeed?!1:!0};this._settings.id||(this._settings.id=dhx.uid());dhx.ui.views[this._settings.id]=this});dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)};
dhx.BaseBind.legacySync=function(b,d){this._initBindSource&&this._initBindSource();b._initBindSource&&b._initBindSource();this.attachEvent("onAfterEditStop",function(b){this.save(b);return!0});this.save=function(d){d||(d=this.getCursor());var f=this.item(d),g=b.item(d),h;for(h in f)0!==h.indexOf("$")&&(g[h]=f[h]);b.refresh(d)};return this.data.sync.apply(this.data,arguments)};
window.dhtmlXForm&&(dhtmlXForm.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXForm.prototype._initBindSource=function(){dhx.isNotDefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this)},dhtmlXForm.prototype._check_data_feed=function(b){if(!this._settings.dataFeed||this._ignore_feed||!b)return!0;var d=this._settings.dataFeed,d=d+(-1==d.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(b.id||b);this.load(d);
return!1},dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData,dhtmlXForm.prototype.getValues=function(){return this.getFormData(!1,!0)},dhtmlXForm.prototype.dataFeed=function(b){this._settings?this._settings.dataFeed=b:this._server_feed=b},dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(){return!0});
window.dhtmlXCombo&&(dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXCombo.prototype.dataFeed=function(b){this._settings?this._settings.dataFeed=b:this._server_feed=b},dhtmlXCombo.prototype.sync=function(b){this._initBindSource&&this._initBindSource();b._initBindSource&&b._initBindSource();var d=this,e=function(){d.clearAll();d.addOption(this.serialize())};b.data.attachEvent("onStoreUpdated",function(){e.call(this)});b.data.attachEvent("onIdChange",function(b,
e){d.changeOptionId(b,e)});e.call(b)},dhtmlXCombo.prototype._initBindSource=function(){dhx.isNotDefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(b){b.call(this)},this)},dhtmlxEventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])}))},dhtmlXCombo.prototype.item=
function(){return this._selOption},dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()},dhtmlXCombo.prototype.isVisible=function(){return!this.optionsArr.length&&!this._settings.dataFeed?!1:!0},dhtmlXCombo.prototype.refresh=function(){this.render(!0)},dhtmlXCombo.prototype.filter=function(){alert("not implemented")});
window.dhtmlXGridObject&&(dhtmlXGridObject.prototype.bind=function(b,d,e){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXGridObject.prototype.dataFeed=function(b){this._settings?this._settings.dataFeed=b:this._server_feed=b},dhtmlXGridObject.prototype.sync=function(b,d){this._initBindSource&&this._initBindSource();b._initBindSource&&b._initBindSource();var e=this;this.save=function(d){d||(d=this.getCursor());dhx.extend(b.item(d),this.item(d),!0);b.refresh(d)};var f=function(b){var d=0;e._legacy_ignore_next?
(d=e._legacy_ignore_next,e._legacy_ignore_next=!1):e.clearAll();if(-1!==b&&(b=this.dataCount())){e._parsing=!0;for(var f=d;f<b;f++){var m=this.order[f];if(m&&(!d||!e.rowsBuffer[f]))e.rowsBuffer[f]={idd:m,data:this.pull[m]},e.rowsBuffer[f]._parser=e._process_store_row,e.rowsBuffer[f]._locator=e._get_store_data,e.rowsAr[m]=this.pull[m]}e.rowsBuffer[b-1]||(e.rowsBuffer[b-1]=dhtmlx.undefined,e.xmlFileUrl=e.xmlFileUrl||!0);e.pagingOn?e.changePage():e._srnd&&e._fillers?e._update_srnd_view():(e.render_dataset(),
e.callEvent("onXLE",[]));e._parsing=!1}};b.data.attachEvent("onStoreUpdated",function(b,d,l){"delete"==l?(e.deleteRow(b),e.data.callEvent("onStoreUpdated",[b,d,l])):"update"==l?(e.callEvent("onSyncUpdate",[d,l]),e.update(b,d),e.data.callEvent("onStoreUpdated",[b,d,l])):"add"==l?(e.callEvent("onSyncUpdate",[d,l]),e.add(b,d),e.data.callEvent("onStoreUpdated",[b,d,l])):f.call(this)});b.data.attachEvent("onStoreLoad",function(d,f){e.xmlFileUrl=b.data.url;e._legacy_ignore_next=d.getInfo(f)._from});b.data.attachEvent("onIdChange",
function(b,d){e.changeRowId(b,d)});f(-1);e.attachEvent("onEditCell",function(b,d){2==b&&this.save(d);return!0});e.attachEvent("onDynXLS",function(d,h){for(var l=d;l<d+h;l++)if(!b.data.order[l])return b.loadNext(h,d),!1;e._legacy_ignore_next=d;f()});e.attachEvent("onClearAll",function(){this._f_rowsBuffer=null});d&&d.sort&&e.attachEvent("onBeforeSorting",function(d,f,l){if("connector"==f)return!1;var m=this.getColumnId(d);b.sort("#"+m+"#","asc"==l?"asc":"desc","int"==f?f:"string");e.setSortImgState(!0,
d,l);return!1});d&&d.filter&&e.attachEvent("onFilterStart",function(d,f){if(e._con_f_used&&e._con_f_used.length)return!1;b.data.silent(function(){b.filter();for(var l=0;l<d.length;l++)if(""!=f[l]){var m=e.getColumnId(d[l]);b.filter("#"+m+"#",f[l],0!=l)}});b.refresh();return!1});e.clearAndLoad=function(d){b.clearAll();b.load(d)}},dhtmlXGridObject.prototype._initBindSource=function(){if(dhx.isNotDefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed};dhx.ui.views[this._settings.id]=
this;this.data={silent:dhx.bind(function(b){b.call(this)},this)};dhtmlxEventable(this.data);for(var b=0;b<this._cCount;b++)this.columnIds[b]||(this.columnIds[b]="cell"+b);this.attachEvent("onSelectStateChanged",function(b){this.callEvent("onSelectChange",[b])});this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])});this.attachEvent("onEditCell",function(b,e){2===b&&this.getCursor&&e&&e==this.getCursor()&&this._update_binds();return!0});this.attachEvent("onXLE",
function(){this.callEvent("onBindRequest",[])})}},dhtmlXGridObject.prototype.item=function(b){if(null===b)return null;var d=this.getRowById(b);if(!d)return null;d=dhx.fullCopy(d._attrs);d.id=b;for(var e=this.getColumnsNum(),f=0;f<e;f++)d[this.columnIds[f]]=this.cells(b,f).getValue();return d},dhtmlXGridObject.prototype.update=function(b,d){for(var e=0;e<this.columnIds.length;e++){var f=this.columnIds[e];dhx.isNotDefined(d[f])||this.cells(b,e).setValue(d[f])}e=this.getRowById(b)._attrs;for(f in d)e[f]=
d[f]},dhtmlXGridObject.prototype.add=function(b,d){for(var e=[],f=0;f<this.columnIds.length;f++){var g=this.columnIds[f];e[f]=dhx.isNotDefined(d[g])?"":d[g]}this.addRow(b,e,0);this.getRowById(b)._attrs=dhx.fullCopy(d)},dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()},dhtmlXGridObject.prototype.isVisible=function(){return!this.rowsBuffer.length&&!this._f_rowsBuffer&&!this._settings.dataFeed?!1:!0},dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()},
dhtmlXGridObject.prototype.filter=function(b,d){if(this._settings.dataFeed){var e={};if(!b&&!d)return;if("function"==typeof b){if(!d)return;b(d,e)}else dhx.isNotDefined(b)?e=d:e[b]=d;this.clearAll();var f=this._settings.dataFeed,g=[],h;for(h in e)g.push("dhx_filter["+h+"]="+encodeURIComponent(e[h]));this.load(f+(0>f.indexOf("?")?"?":"&")+g.join("&"));return!1}if(null===d)return this.filterBy(0,function(){return!1});this.filterBy(0,function(e,f){return b.call(this,f,d)})});
window.dhtmlXTreeObject&&(dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXTreeObject.prototype.dataFeed=function(b){this._settings?this._settings.dataFeed=b:this._server_feed=b},dhtmlXTreeObject.prototype._initBindSource=function(){dhx.isNotDefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(b){b.call(this)},this)},dhtmlxEventable(this.data),this.attachEvent("onSelect",
function(b){this.callEvent("onSelectChange",[b])}),this.attachEvent("onEdit",function(b,d){2===b&&d&&d==this.getCursor()&&this._update_binds();return!0}))},dhtmlXTreeObject.prototype.item=function(b){return null===b?null:{id:b,text:this.getItemText(b)}},dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeObject.prototype.isVisible=function(){return!0},dhtmlXTreeObject.prototype.refresh=function(){},dhtmlXTreeObject.prototype.filter=function(b,d){if(this._settings.dataFeed){var e=
{};if(b||d){if("function"==typeof b){if(!d)return;b(d,e)}else dhx.isNotDefined(b)?e=d:e[b]=d;this.deleteChildItems(0);var f=this._settings.dataFeed,g=[],h;for(h in e)g.push("dhx_filter["+h+"]="+encodeURIComponent(e[h]));this.loadXML(f+(0>f.indexOf("?")?"?":"&")+g.join("&"));return!1}}},dhtmlXTreeObject.prototype.update=function(b,d){dhx.isNotDefined(d.text)||this.setItemText(b,d.text)});dhtmlx.skin="dhx_skyblue";
/* 3.0 */